/*!
 * jQuery JavaScript Library v1.11.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:19Z
 */
function jsonify(n){return JSON.stringify(n,null,"\t")}var EventSubscriber,SqlStatementBlocks;(function(n,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){function ri(n){var t="length"in n&&n.length,r=i.type(n);return r==="function"||i.isWindow(n)?!1:n.nodeType===1&&t?!0:r==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}function ui(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if(typeof t=="string"){if(re.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return i.inArray(n,t)>=0!==r})}function hr(n,t){do n=n[t];while(n&&n.nodeType!==1);return n}function ee(n){var t=fi[n]={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function cr(){u.addEventListener?(u.removeEventListener("DOMContentLoaded",a,!1),n.removeEventListener("load",a,!1)):(u.detachEvent("onreadystatechange",a),n.detachEvent("onload",a))}function a(){(u.addEventListener||event.type==="load"||u.readyState==="complete")&&(cr(),i.ready())}function yr(n,t,r){if(r===undefined&&n.nodeType===1){var u="data-"+t.replace(vr,"-$1").toLowerCase();if(r=n.getAttribute(u),typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:ar.test(r)?i.parseJSON(r):r}catch(f){}i.data(n,t,r)}else r=undefined}return r}function ei(n){for(var t in n)if((t!=="data"||!i.isEmptyObject(n[t]))&&t!=="toJSON")return!1;return!0}function pr(n,t,r,u){if(i.acceptData(n)){var s,e,h=i.expando,l=n.nodeType,o=l?i.cache:n,f=l?n[h]:n[h]&&h;if(f&&o[f]&&(u||o[f].data)||r!==undefined||typeof t!="string")return f||(f=l?n[h]=c.pop()||i.guid++:h),o[f]||(o[f]=l?{}:{toJSON:i.noop}),(typeof t=="object"||typeof t=="function")&&(u?o[f]=i.extend(o[f],t):o[f].data=i.extend(o[f].data,t)),e=o[f],u||(e.data||(e.data={}),e=e.data),r!==undefined&&(e[i.camelCase(t)]=r),typeof t=="string"?(s=e[t],s==null&&(s=e[i.camelCase(t)])):s=e,s}}function wr(n,t,u){if(i.acceptData(n)){var e,s,h=n.nodeType,f=h?i.cache:n,o=h?n[i.expando]:i.expando;if(f[o]){if(t&&(e=u?f[o]:f[o].data,e)){for(i.isArray(t)?t=t.concat(i.map(t,i.camelCase)):(t in e)?t=[t]:(t=i.camelCase(t),t=t in e?[t]:t.split(" ")),s=t.length;s--;)delete e[t[s]];if(u?!ei(e):!i.isEmptyObject(e))return}(u||(delete f[o].data,ei(f[o])))&&(h?i.cleanData([n],!0):r.deleteExpando||f!=f.window?delete f[o]:f[o]=null)}}}function vt(){return!0}function it(){return!1}function dr(){try{return u.activeElement}catch(n){}}function gr(n){var i=nu.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function f(n,t){var e,u,s=0,r=typeof n.getElementsByTagName!==o?n.getElementsByTagName(t||"*"):typeof n.querySelectorAll!==o?n.querySelectorAll(t||"*"):undefined;if(!r)for(r=[],e=n.childNodes||n;(u=e[s])!=null;s++)!t||i.nodeName(u,t)?r.push(u):i.merge(r,f(u,t));return t===undefined||t&&i.nodeName(n,t)?i.merge([n],r):r}function we(n){oi.test(n.type)&&(n.defaultChecked=n.checked)}function eu(n,t){return i.nodeName(n,"table")&&i.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function ou(n){return n.type=(i.find.attr(n,"type")!==null)+"/"+n.type,n}function su(n){var t=ve.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function li(n,t){for(var u,r=0;(u=n[r])!=null;r++)i._data(u,"globalEval",!t||i._data(t[r],"globalEval"))}function hu(n,t){if(t.nodeType===1&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;f<o;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function be(n,t){var u,e,f;if(t.nodeType===1){if(u=t.nodeName.toLowerCase(),!r.noCloneEvent&&t[i.expando]){f=i._data(t);for(e in f.events)i.removeEvent(t,e,f.handle);t.removeAttribute(i.expando)}u==="script"&&t.text!==n.text?(ou(t).text=n.text,su(t)):u==="object"?(t.parentNode&&(t.outerHTML=n.outerHTML),r.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):u==="input"&&oi.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):u==="option"?t.defaultSelected=t.selected=n.defaultSelected:(u==="input"||u==="textarea")&&(t.defaultValue=n.defaultValue)}}function cu(t,r){var f,u=i(r.createElement(t)).appendTo(r.body),e=n.getDefaultComputedStyle&&(f=n.getDefaultComputedStyle(u[0]))?f.display:i.css(u[0],"display");return u.detach(),e}function yt(n){var r=u,t=ai[n];return t||(t=cu(n,r),t!=="none"&&t||(ot=(ot||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=(ot[0].contentWindow||ot[0].contentDocument).document,r.write(),r.close(),t=cu(n,r),ot.detach()),ai[n]=t),t}function au(n,t){return{get:function(){var i=n();if(i!=null){if(i){delete this.get;return}return(this.get=t).apply(this,arguments)}}}}function pu(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=yu.length;i--;)if(t=yu[i]+r,t in n)return t;return u}function wu(n,t){for(var f,r,o,e=[],u=0,s=n.length;u<s;u++)(r=n[u],r.style)&&(e[u]=i._data(r,"olddisplay"),f=r.style.display,t?(e[u]||f!=="none"||(r.style.display=""),r.style.display===""&&et(r)&&(e[u]=i._data(r,"olddisplay",yt(r.nodeName)))):(o=et(r),(f&&f!=="none"||!o)&&i._data(r,"olddisplay",o?f:i.css(r,"display"))));for(u=0;u<s;u++)(r=n[u],r.style)&&(t&&r.style.display!=="none"&&r.style.display!==""||(r.style.display=t?e[u]||"":"none"));return n}function bu(n,t,i){var r=no.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function ku(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+w[e],!0,f)),u?(r==="content"&&(o-=i.css(n,"padding"+w[e],!0,f)),r!=="margin"&&(o-=i.css(n,"border"+w[e]+"Width",!0,f))):(o+=i.css(n,"padding"+w[e],!0,f),r!=="padding"&&(o+=i.css(n,"border"+w[e]+"Width",!0,f)));return o}function du(n,t,u){var o=!0,f=t==="width"?n.offsetWidth:n.offsetHeight,e=k(n),s=r.boxSizing&&i.css(n,"boxSizing",!1,e)==="border-box";if(f<=0||f==null){if(f=d(n,t,e),(f<0||f==null)&&(f=n.style[t]),pt.test(f))return f;o=s&&(r.boxSizingReliable()||f===n.style[t]);f=parseFloat(f)||0}return f+ku(n,t,u||(s?"border":"content"),o,e)+"px"}function e(n,t,i,r,u){return new e.prototype.init(n,t,i,r,u)}function nf(){return setTimeout(function(){rt=undefined}),rt=i.now()}function kt(n,t){var r,i={height:n},u=0;for(t=t?1:0;u<4;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function tf(n,t,i){for(var u,f=(st[t]||[]).concat(st["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function fo(n,t,u){var f,a,p,v,s,w,h,b,l=this,y={},o=n.style,c=n.nodeType&&et(n),e=i._data(n,"fxshow");u.queue||(s=i._queueHooks(n,"fx"),s.unqueued==null&&(s.unqueued=0,w=s.empty.fire,s.empty.fire=function(){s.unqueued||w()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--;i.queue(n,"fx").length||s.empty.fire()})}));n.nodeType===1&&("height"in t||"width"in t)&&(u.overflow=[o.overflow,o.overflowX,o.overflowY],h=i.css(n,"display"),b=h==="none"?i._data(n,"olddisplay")||yt(n.nodeName):h,b==="inline"&&i.css(n,"float")==="none"&&(r.inlineBlockNeedsLayout&&yt(n.nodeName)!=="inline"?o.zoom=1:o.display="inline-block"));u.overflow&&(o.overflow="hidden",r.shrinkWrapBlocks()||l.always(function(){o.overflow=u.overflow[0];o.overflowX=u.overflow[1];o.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],ro.exec(a)){if(delete t[f],p=p||a==="toggle",a===(c?"hide":"show"))if(a==="show"&&e&&e[f]!==undefined)c=!0;else continue;y[f]=e&&e[f]||i.style(n,f)}else h=undefined;if(i.isEmptyObject(y))(h==="none"?yt(n.nodeName):h)==="inline"&&(o.display=h);else{e?"hidden"in e&&(c=e.hidden):e=i._data(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;i._removeData(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=tf(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start=f==="width"||f==="height"?1:0))}}function eo(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function rf(n,t,r){var e,o,s=0,l=bt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=rt||nf(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;r<e;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),i<1&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:rt||nf(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),h=u.props;for(eo(h,u.opts.specialEasing);s<l;s++)if(e=bt[s].call(u,n,h,u.opts),e)return e;return i.map(h,tf,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function af(n){return function(t,r){typeof t!="string"&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])u.charAt(0)==="+"?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function vf(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===bi;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ki(n,t){var u,r,f=i.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ao(n,t,i){for(var o,e,u,f,s=n.contents,r=n.dataTypes;r[0]==="*";)r.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(f in s)if(s[f]&&s[f].test(e)){r.unshift(f);break}if(r[0]in i)u=r[0];else{for(f in i){if(!r[0]||n.converters[f+" "+r[0]]){u=f;break}o||(o=f)}u=u||o}if(u)return u!==r[0]&&r.unshift(u),i[u]}function vo(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function di(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||po.test(n)?u(n,i):di(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)di(n+"["+f+"]",t[f],r,u)}function pf(){try{return new n.XMLHttpRequest}catch(t){}}function go(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function wf(n){return i.isWindow(n)?n:n.nodeType===9?n.defaultView||n.parentWindow:!1}var c=[],l=c.slice,ir=c.concat,ii=c.push,rr=c.indexOf,ct={},df=ct.toString,tt=ct.hasOwnProperty,r={},ur="1.11.3",i=function(n,t){return new i.fn.init(n,t)},gf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^-ms-/,te=/-([\da-z])/gi,ie=function(n,t){return t.toUpperCase()},p,or,sr,h,fi,lt,o,lr,ar,vr,ot,ai,uf,ef,of,gt,gi,ti,nr,tr,bf,kf;i.fn=i.prototype={jquery:ur,constructor:i,selector:"",length:0,toArray:function(){return l.call(this)},get:function(n){return n!=null?n<0?this[n+this.length]:this[n]:l.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ii,sort:c.sort,splice:c.splice};i.extend=i.fn.extend=function(){var r,e,t,f,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for(typeof n=="boolean"&&(h=n,n=arguments[u]||{},u++),typeof n=="object"||i.isFunction(n)||(n={}),u===c&&(n=this,u--);u<c;u++)if((o=arguments[u])!=null)for(f in o)(r=n[f],t=o[f],n!==t)&&(h&&t&&(i.isPlainObject(t)||(e=i.isArray(t)))?(e?(e=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):t!==undefined&&(n[f]=t));return n};i.extend({expando:"jQuery"+(ur+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray||function(n){return i.type(n)==="array"},isWindow:function(n){return n!=null&&n==n.window},isNumeric:function(n){return!i.isArray(n)&&n-parseFloat(n)+1>=0},isEmptyObject:function(n){for(var t in n)return!1;return!0},isPlainObject:function(n){var t;if(!n||i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!tt.call(n,"constructor")&&!tt.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}if(r.ownLast)for(t in n)return tt.call(n,t);for(t in n);return t===undefined||tt.call(n,t)},type:function(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?ct[df.call(n)]||"object":typeof n},globalEval:function(t){t&&i.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(ne,"ms-").replace(te,ie)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=ri(n);if(i){if(e){for(;r<f;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;r<f;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return n==null?"":(n+"").replace(gf,"")},makeArray:function(n,t){var r=t||[];return n!=null&&(ri(Object(n))?i.merge(r,typeof n=="string"?[n]:n):ii.call(r,n)),r},inArray:function(n,t,i){var r;if(t){if(rr)return rr.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,t){for(var r=+t.length,i=0,u=n.length;i<r;)n[u++]=t[i++];if(r!==r)while(t[i]!==undefined)n[u++]=t[i++];return n.length=u,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;r<e;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=ri(n),f=[];if(o)for(;r<e;r++)u=t(n[r],r,i),u!=null&&f.push(u);else for(r in n)u=t(n[r],r,i),u!=null&&f.push(u);return ir.apply([],f)},guid:1,proxy:function(n,t){var u,r,f;return(typeof t=="string"&&(f=n[t],t=n,n=f),!i.isFunction(n))?undefined:(u=l.call(arguments,2),r=function(){return n.apply(t||this,u.concat(l.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r)},now:function(){return+new Date},support:r});i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ct["[object "+t+"]"]=t.toLowerCase()});p=function(n){function r(n,t,i,r){var p,s,a,c,w,y,d,v,nt,g;if((t?t.ownerDocument||t:h)!==o&&k(t),t=t||o,i=i||[],c=t.nodeType,typeof n!="string"||!n||c!==1&&c!==9&&c!==11)return i;if(!r&&l){if(c!==11&&(p=hr.exec(n)))if(a=p[1]){if(c===9)if(s=t.getElementById(a),s&&s.parentNode){if(s.id===a)return i.push(s),i}else return i;else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&et(t,s)&&s.id===a)return i.push(s),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((a=p[3])&&u.getElementsByClassName)return b.apply(i,t.getElementsByClassName(a)),i}if(u.qsa&&(!e||!e.test(n))){if(v=d=f,nt=t,g=c!==1&&n,c===1&&t.nodeName.toLowerCase()!=="object"){for(y=ft(n),(d=t.getAttribute("id"))?v=d.replace(cr,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",w=y.length;w--;)y[w]=v+vt(y[w]);nt=dt.test(n)&&ti(t.parentNode)||t;g=y.join(",")}if(g)try{return b.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{d||t.removeAttribute("id")}}}return oi(n.replace(lt,"$1"),t,i,r)}function gt(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function c(n){return n[f]=!0,n}function v(n){var t=o.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ni(n,i){for(var u=n.split("|"),r=n.length;r--;)t.attrHandle[u[r]]=i}function wi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function tt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ti(n){return n&&typeof n.getElementsByTagName!="undefined"&&n}function bi(){}function vt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function ii(n,t,i){var r=t.dir,u=i&&r==="parentNode",e=ki++;return t.first?function(t,i,f){while(t=t[r])if(t.nodeType===1||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[a,e];if(o){while(t=t[r])if((t.nodeType===1||u)&&n(t,i,o))return!0}else while(t=t[r])if(t.nodeType===1||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===a&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function ri(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function vr(n,t,i){for(var u=0,f=t.length;u<f;u++)r(n,t[u],i);return i}function yt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ui(n,t,i,r,u,e){return r&&!r[f]&&(r=ui(r)),u&&!u[f]&&(u=ui(u,e)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||vr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?yt(k,p,n,o,s):k,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=yt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=yt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function fi(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ii(function(n){return n===o},c,!0),a=ii(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])e=[ii(ri(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;r<s;r++)if(t.relative[n[r].type])break;return ui(i>1&&ri(e),i>1&&vt(n.slice(0,i-1).concat({value:n[i-2].type===" "?"*":""})).replace(lt,"$1"),u,i<r&&fi(n.slice(i,r)),r<s&&fi(n=n.slice(r)),r<s&&vt(n))}e.push(u)}return ri(e)}function yr(n,i){var u=i.length>0,f=n.length>0,e=function(e,s,h,c,l){var y,d,w,k=0,v="0",g=e&&[],p=[],nt=ht,tt=e||f&&t.find.TAG("*",l),it=a+=nt==null?1:Math.random()||.1,rt=tt.length;for(l&&(ht=s!==o&&s);v!==rt&&(y=tt[v])!=null;v++){if(f&&y){for(d=0;w=n[d++];)if(w(y,s,h)){c.push(y);break}l&&(a=it)}u&&((y=!w&&y)&&k--,e&&g.push(y))}if(k+=v,u&&v!==k){for(d=0;w=i[d++];)w(g,p,s,h);if(e){if(k>0)while(v--)g[v]||p[v]||(p[v]=gi.call(c));p=yt(p)}b.apply(c,p);l&&!e&&p.length>0&&k+i.length>1&&r.uniqueSort(c)}return l&&(a=it,ht=nt),g};return u?c(e):e}var it,u,t,st,ei,ft,pt,oi,ht,w,rt,k,o,s,l,e,d,ct,et,f="sizzle"+1*new Date,h=n.document,a=0,ki=0,si=gt(),hi=gt(),ci=gt(),wt=function(n,t){return n===t&&(rt=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,b=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},bt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi=ut.replace("w","w#"),yi="\\["+i+"*("+ut+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vi+"))|)"+i+"*\\]",kt=":("+ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+yi+")*)|.*)\\)|)",tr=new RegExp(i+"+","g"),lt=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),ir=new RegExp("^"+i+"*,"+i+"*"),rr=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),ur=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),fr=new RegExp(kt),er=new RegExp("^"+vi+"$"),at={ID:new RegExp("^#("+ut+")"),CLASS:new RegExp("^\\.("+ut+")"),TAG:new RegExp("^("+ut.replace("w","w*")+")"),ATTR:new RegExp("^"+yi),PSEUDO:new RegExp("^"+kt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+bt+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},or=/^(?:input|select|textarea|button)$/i,sr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,hr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dt=/[+~]/,cr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},pi=function(){k()};try{b.apply(g=ai.call(h.childNodes),h.childNodes);g[h.childNodes.length].nodeType}catch(pr){b={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};ei=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};k=r.setDocument=function(n){var a,c,r=n?n.ownerDocument||n:h;return r===o||r.nodeType!==9||!r.documentElement?o:(o=r,s=r.documentElement,c=r.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",pi,!1):c.attachEvent&&c.attachEvent("onunload",pi)),l=!ei(r),u.attributes=v(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=v(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=ot.test(r.getElementsByClassName),u.getById=v(function(n){return s.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&l){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=u.getElementsByTagName?function(n,t){return typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName(n):u.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},t.find.CLASS=u.getElementsByClassName&&function(n,t){if(l)return t.getElementsByClassName(n)},d=[],e=[],(u.qsa=ot.test(r.querySelectorAll))&&(v(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\f]' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&e.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||e.push("\\["+i+"*(?:value|"+bt+")");n.querySelectorAll("[id~="+f+"-]").length||e.push("~=");n.querySelectorAll(":checked").length||e.push(":checked");n.querySelectorAll("a#"+f+"+*").length||e.push(".#.+[+~]")}),v(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&e.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||e.push(":enabled",":disabled");n.querySelectorAll("*,:x");e.push(",.*:")})),(u.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&v(function(n){u.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",kt)}),e=e.length&&new RegExp(e.join("|")),d=d.length&&new RegExp(d.join("|")),a=ot.test(s.compareDocumentPosition),et=a||ot.test(s.contains)?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},wt=a?function(n,t){if(n===t)return rt=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,i&1||!u.sortDetached&&t.compareDocumentPosition(n)===i)?n===r||n.ownerDocument===h&&et(h,n)?-1:t===r||t.ownerDocument===h&&et(h,t)?1:w?nt(w,n)-nt(w,t):0:i&4?-1:1}:function(n,t){if(n===t)return rt=!0,0;var i,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(o&&s){if(o===s)return wi(n,t)}else return n===r?-1:t===r?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===h?-1:e[u]===h?1:0},r)};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==o&&k(n),t=t.replace(ur,"='$1']"),u.matchesSelector&&l&&(!d||!d.test(t))&&(!e||!e.test(t)))try{var i=ct.call(n,t);if(i||u.disconnectedMatch||n.document&&n.document.nodeType!==11)return i}catch(f){}return r(t,o,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==o&&k(n),et(n,t)};r.attr=function(n,i){(n.ownerDocument||n)!==o&&k(n);var f=t.attrHandle[i.toLowerCase()],r=f&&di.call(t.attrHandle,i.toLowerCase())?f(n,i,!l):undefined;return r!==undefined?r:u.attributes||!l?n.getAttribute(i):(r=n.getAttributeNode(i))&&r.specified?r.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(rt=!u.detectDuplicates,w=!u.sortStable&&n.slice(0),n.sort(wt),rt){while(r=n[i++])r===n[i]&&(t=f.push(i));while(t--)n.splice(f[t],1)}return w=null,n};st=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=r.selectors={cacheLength:50,createPseudo:c,match:at,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return at.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=si[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&si(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!="undefined"&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",o=n.slice(-4)!=="last",e=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var v,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;w=b=n==="only"&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),v=k[n]||[],y=v[0]===a&&v[1],l=v[0]===a&&v[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(c.nodeType===1&&++l&&c===t){k[n]=[a,y,l];break}}else if(d&&(v=(t[f]||(t[f]={}))[n])&&v[0]===a)l=v[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[a,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,u=t.pseudos[n]||t.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return u[f]?u(i):u.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=nt(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:c(function(n){var t=[],r=[],i=pt(n.replace(lt,"$1"));return i[f]?c(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:c(function(n){return function(t){return r(n,t).length>0}}),contains:c(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===o.activeElement&&(!o.hasFocus||o.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return sr.test(n.nodeName)},input:function(n){return or.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()==="text")},first:tt(function(){return[0]}),last:tt(function(n,t){return[t-1]}),eq:tt(function(n,t,i){return[i<0?i+t:i]}),even:tt(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:tt(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:tt(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:tt(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(it in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[it]=lr(it);for(it in{submit:!0,reset:!0})t.pseudos[it]=ar(it);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=r.tokenize=function(n,i){var e,f,s,o,u,h,c,l=hi[n+" "];if(l)return i?0:l.slice(0);for(u=n,h=[],c=t.preFilter;u;){(!e||(f=ir.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=rr.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(lt," ")}),u=u.slice(e.length));for(o in t.filter)(f=at[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(n):hi(n,h).slice(0)},pt=r.compile=function(n,t){var r,u=[],e=[],i=ci[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=fi(t[r]),i[f]?u.push(i):e.push(i);i=ci(n,yr(e,u));i.selector=n}return i},oi=r.select=function(n,i,r,f){var s,e,o,a,v,c=typeof n=="function"&&n,h=!f&&ft(n=c.selector||n);if(r=r||[],h.length===1){if(e=h[0]=h[0].slice(0),e.length>2&&(o=e[0]).type==="ID"&&u.getById&&i.nodeType===9&&l&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],i)c&&(i=i.parentNode);else return r;n=n.slice(e.shift().value.length)}for(s=at.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(f=v(o.matches[0].replace(y,p),dt.test(e[0].type)&&ti(i.parentNode)||i))){if(e.splice(s,1),n=f.length&&vt(e),!n)return b.apply(r,f),r;break}}}return(c||pt(n,h))(f,i,!l,r,dt.test(n)&&ti(i.parentNode)||i),r},u.sortStable=f.split("").sort(wt).join("")===f,u.detectDuplicates=!!rt,k(),u.sortDetached=v(function(n){return n.compareDocumentPosition(o.createElement("div"))&1}),v(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild.getAttribute("href")==="#"})||ni("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}),u.attributes&&v(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""})||ni("value",function(n,t,i){if(!i&&n.nodeName.toLowerCase()==="input")return n.defaultValue}),v(function(n){return n.getAttribute("disabled")==null})||ni(bt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r}(n);i.find=p;i.expr=p.selectors;i.expr[":"]=i.expr.pseudos;i.unique=p.uniqueSort;i.text=p.getText;i.isXMLDoc=p.isXML;i.contains=p.contains;var fr=i.expr.match.needsContext,er=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,re=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))};i.fn.extend({find:function(n){var t,r=[],u=this,f=u.length;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<f;t++)if(i.contains(u[t],this))return!0}));for(t=0;t<f;t++)i.find(n,u[t],r);return r=this.pushStack(f>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ui(this,n||[],!1))},not:function(n){return this.pushStack(ui(this,n||[],!0))},is:function(n){return!!ui(this,typeof n=="string"&&fr.test(n)?i(n):n||[],!1).length}});var ft,u=n.document,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=i.fn.init=function(n,t){var r,f;if(!n)return this;if(typeof n=="string"){if(r=n.charAt(0)==="<"&&n.charAt(n.length-1)===">"&&n.length>=3?[null,n,null]:ue.exec(n),r&&(r[1]||!t)){if(r[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),er.test(r[1])&&i.isPlainObject(t))for(r in t)i.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if(f=u.getElementById(r[2]),f&&f.parentNode){if(f.id!==r[2])return ft.find(n);this.length=1;this[0]=f}return this.context=u,this.selector=n,this}return!t||t.jquery?(t||ft).find(n):this.constructor(t).find(n)}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?typeof ft.ready!="undefined"?ft.ready(n):n(i):(n.selector!==undefined&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};fe.prototype=i.fn;ft=i(u);or=/^(?:parents|prev(?:Until|All))/;sr={children:!0,contents:!0,next:!0,prev:!0};i.extend({dir:function(n,t,r){for(var f=[],u=n[t];u&&u.nodeType!==9&&(r===undefined||u.nodeType!==1||!i(u).is(r));)u.nodeType===1&&f.push(u),u=u[t];return f},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});i.fn.extend({has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;t<u;t++)if(i.contains(this,r[t]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=fr.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?typeof n=="string"?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.unique(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return hr(n,"nextSibling")},prev:function(n){return hr(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(sr[n]||(f=i.unique(f)),or.test(n)&&(f=f.reverse())),this.pushStack(f)}});h=/\S+/g;fi={};i.Callbacks=function(n){n=typeof n=="string"?fi[n]||ee(n):i.extend({},n);var o,u,h,f,e,c,t=[],r=!n.once&&[],l=function(i){for(u=n.memory&&i,h=!0,e=c||0,c=0,f=t.length,o=!0;t&&e<f;e++)if(t[e].apply(i[0],i[1])===!1&&n.stopOnFalse){u=!1;break}o=!1;t&&(r?r.length&&l(r.shift()):u?t=[]:s.disable())},s={add:function(){if(t){var r=t.length;(function e(r){i.each(r,function(r,u){var f=i.type(u);f==="function"?n.unique&&s.has(u)||t.push(u):u&&u.length&&f!=="string"&&e(u)})})(arguments);o?f=t.length:u&&(c=r,l(u))}return this},remove:function(){return t&&i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),o&&(u<=f&&f--,u<=e&&e--)}),this},has:function(n){return n?i.inArray(n,t)>-1:!!(t&&t.length)},empty:function(){return t=[],f=0,this},disable:function(){return t=r=u=undefined,this},disabled:function(){return!t},lock:function(){return r=undefined,u||s.disable(),this},locked:function(){return!r},fireWith:function(n,i){return t&&(!h||r)&&(i=i||[],i=[n,i.slice?i.slice():i],o?r.push(i):l(i)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return n!=null?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=l.call(arguments),r=u.length,e=r!==1||n&&i.isFunction(n.promise)?r:0,f=e===1?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?l.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);t<r;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!u.body)return setTimeout(i.ready);(i.isReady=!0,n!==!0&&--i.readyWait>0)||(lt.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready")))}}});i.ready.promise=function(t){if(!lt)if(lt=i.Deferred(),u.readyState==="complete")setTimeout(i.ready);else if(u.addEventListener)u.addEventListener("DOMContentLoaded",a,!1),n.addEventListener("load",a,!1);else{u.attachEvent("onreadystatechange",a);n.attachEvent("onload",a);var r=!1;try{r=n.frameElement==null&&u.documentElement}catch(e){}r&&r.doScroll&&function f(){if(!i.isReady){try{r.doScroll("left")}catch(n){return setTimeout(f,50)}cr();i.ready()}}()}return lt.promise(t)};o=typeof undefined;for(lr in i(r))break;r.ownLast=lr!=="0";r.inlineBlockNeedsLayout=!1;i(function(){var f,t,n,i;(n=u.getElementsByTagName("body")[0],n&&n.style)&&(t=u.createElement("div"),i=u.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==o&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",r.inlineBlockNeedsLayout=f=t.offsetWidth===3,f&&(n.style.zoom=1)),n.removeChild(i))}),function(){var n=u.createElement("div");if(r.deleteExpando==null){r.deleteExpando=!0;try{delete n.test}catch(t){r.deleteExpando=!1}}n=null}();i.acceptData=function(n){var t=i.noData[(n.nodeName+" ").toLowerCase()],r=+n.nodeType||1;return r!==1&&r!==9?!1:!t||t!==!0&&n.getAttribute("classid")===t};ar=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;vr=/([A-Z])/g;i.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ei(n)},data:function(n,t,i){return pr(n,t,i)},removeData:function(n,t){return wr(n,t)},_data:function(n,t,i){return pr(n,t,i,!0)},_removeData:function(n,t){return wr(n,t,!0)}});i.fn.extend({data:function(n,t){var f,u,e,r=this[0],o=r&&r.attributes;if(n===undefined){if(this.length&&(e=i.data(r),r.nodeType===1&&!i._data(r,"parsedAttrs"))){for(f=o.length;f--;)o[f]&&(u=o[f].name,u.indexOf("data-")===0&&(u=i.camelCase(u.slice(5)),yr(r,u,e[u])));i._data(r,"parsedAttrs",!0)}return e}return typeof n=="object"?this.each(function(){i.data(this,n)}):arguments.length>1?this.each(function(){i.data(this,n,t)}):r?yr(r,n,i.data(r,n)):undefined},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,t,r){var u;if(n)return t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i._removeData(n,t+"queue");i._removeData(n,r)})})}});i.fn.extend({queue:function(n,t){var r=2;return(typeof n!="string"&&(t=n,n="fx",r--),arguments.length<r)?i.queue(this[0],n):t===undefined?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);n==="fx"&&r[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var r,f=1,e=i.Deferred(),u=this,o=this.length,s=function(){--f||e.resolveWith(u,[u])};for(typeof n!="string"&&(t=n,n=undefined),n=n||"fx";o--;)r=i._data(u[o],n+"queueHooks"),r&&r.empty&&(f++,r.empty.add(s));return s(),e.promise(t)}});var at=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=["Top","Right","Bottom","Left"],et=function(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)},b=i.access=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=r==null;if(i.type(r)==="object"){f=!0;for(s in r)i.access(n,t,s,r[s],!0,e,o)}else if(u!==undefined&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;s<c;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e},oi=/^(?:checkbox|radio)$/i;(function(){var t=u.createElement("input"),n=u.createElement("div"),i=u.createDocumentFragment();if(n.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",r.leadingWhitespace=n.firstChild.nodeType===3,r.tbody=!n.getElementsByTagName("tbody").length,r.htmlSerialize=!!n.getElementsByTagName("link").length,r.html5Clone=u.createElement("nav").cloneNode(!0).outerHTML!=="<:nav><\/:nav>",t.type="checkbox",t.checked=!0,i.appendChild(t),r.appendChecked=t.checked,n.innerHTML="<textarea>x<\/textarea>",r.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,i.appendChild(n),n.innerHTML="<input type='radio' checked='checked' name='t'/>",r.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,r.noCloneEvent=!0,n.attachEvent&&(n.attachEvent("onclick",function(){r.noCloneEvent=!1}),n.cloneNode(!0).click()),r.deleteExpando==null){r.deleteExpando=!0;try{delete n.test}catch(f){r.deleteExpando=!1}}})(),function(){var t,i,f=u.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(r[t+"Bubbles"]=i in n)||(f.setAttribute(i,"t"),r[t+"Bubbles"]=f.attributes[i].expando===!1);f=null}();var si=/^(?:input|select|textarea)$/i,oe=/^key/,se=/^(?:mouse|pointer|contextmenu)|click/,br=/^(?:focusinfocus|focusoutblur)$/,kr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,t,r,u,f){var w,y,b,p,s,c,l,a,e,k,d,v=i._data(n);if(v){for(r.handler&&(p=r,r=p.handler,f=p.selector),r.guid||(r.guid=i.guid++),(y=v.events)||(y=v.events={}),(c=v.handle)||(c=v.handle=function(n){return typeof i!==o&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(c.elem,arguments):undefined},c.elem=n),t=(t||"").match(h)||[""],b=t.length;b--;)(w=kr.exec(t[b])||[],e=d=w[1],k=(w[2]||"").split(".").sort(),e)&&(s=i.event.special[e]||{},e=(f?s.delegateType:s.bindType)||e,s=i.event.special[e]||{},l=i.extend({type:e,origType:d,data:u,handler:r,guid:r.guid,selector:f,needsContext:f&&i.expr.match.needsContext.test(f),namespace:k.join(".")},p),(a=y[e])||(a=y[e]=[],a.delegateCount=0,s.setup&&s.setup.call(n,u,k,c)!==!1||(n.addEventListener?n.addEventListener(e,c,!1):n.attachEvent&&n.attachEvent("on"+e,c))),s.add&&(s.add.call(n,l),l.handler.guid||(l.handler.guid=r.guid)),f?a.splice(a.delegateCount++,0,l):a.push(l),i.event.global[e]=!0);n=null}},remove:function(n,t,r,u,f){var y,o,s,b,p,a,c,l,e,w,k,v=i.hasData(n)&&i._data(n);if(v&&(a=v.events)){for(t=(t||"").match(h)||[""],p=t.length;p--;){if(s=kr.exec(t[p])||[],e=k=s[1],w=(s[2]||"").split(".").sort(),!e){for(e in a)i.event.remove(n,e+t[p],r,u,!0);continue}for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,l=a[e]||[],s=s[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=l.length;y--;)o=l[y],(f||k===o.origType)&&(!r||r.guid===o.guid)&&(!s||s.test(o.namespace))&&(!u||u===o.selector||u==="**"&&o.selector)&&(l.splice(y,1),o.selector&&l.delegateCount--,c.remove&&c.remove.call(n,o));b&&!l.length&&(c.teardown&&c.teardown.call(n,w,v.handle)!==!1||i.removeEvent(n,e,v.handle),delete a[e])}i.isEmptyObject(a)&&(delete v.handle,i._removeData(n,"events"))}},trigger:function(t,r,f,e){var l,a,o,p,c,h,w,y=[f||u],s=tt.call(t,"type")?t.type:t,v=tt.call(t,"namespace")?t.namespace.split("."):[];if((o=h=f=f||u,f.nodeType!==3&&f.nodeType!==8)&&!br.test(s+i.event.triggered)&&(s.indexOf(".")>=0&&(v=s.split("."),s=v.shift(),v.sort()),a=s.indexOf(":")<0&&"on"+s,t=t[i.expando]?t:new i.Event(s,typeof t=="object"&&t),t.isTrigger=e?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=f),r=r==null?[t]:i.makeArray(r,[t]),c=i.event.special[s]||{},e||!c.trigger||c.trigger.apply(f,r)!==!1)){if(!e&&!c.noBubble&&!i.isWindow(f)){for(p=c.delegateType||s,br.test(p+s)||(o=o.parentNode);o;o=o.parentNode)y.push(o),h=o;h===(f.ownerDocument||u)&&y.push(h.defaultView||h.parentWindow||n)}for(w=0;(o=y[w++])&&!t.isPropagationStopped();)t.type=w>1?p:c.bindType||s,l=(i._data(o,"events")||{})[t.type]&&i._data(o,"handle"),l&&l.apply(o,r),l=a&&o[a],l&&l.apply&&i.acceptData(o)&&(t.result=l.apply(o,r),t.result===!1&&t.preventDefault());if(t.type=s,!e&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(y.pop(),r)===!1)&&i.acceptData(f)&&a&&f[s]&&!i.isWindow(f)){h=f[a];h&&(f[a]=null);i.event.triggered=s;try{f[s]()}catch(b){}i.event.triggered=undefined;h&&(f[a]=h)}return t.result}},dispatch:function(n){n=i.event.fix(n);var e,f,t,r,o,s=[],h=l.call(arguments),c=(i._data(this,"events")||{})[n.type]||[],u=i.event.special[n.type]||{};if(h[0]=n,n.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,n)!==!1){for(s=i.event.handlers.call(this,n,c),e=0;(r=s[e++])&&!n.isPropagationStopped();)for(n.currentTarget=r.elem,o=0;(t=r.handlers[o++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(t.namespace))&&(n.handleObj=t,n.data=t.data,f=((i.event.special[t.origType]||{}).handle||t.handler).apply(r.elem,h),f!==undefined&&(n.result=f)===!1&&(n.preventDefault(),n.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,n),n.result}},handlers:function(n,t){var f,e,u,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&(!n.button||n.type!=="click"))for(;r!=this;r=r.parentNode||this)if(r.nodeType===1&&(r.disabled!==!0||n.type!=="click")){for(u=[],o=0;o<s;o++)e=t[o],f=e.selector+" ",u[f]===undefined&&(u[f]=e.needsContext?i(f,this).index(r)>=0:i.find(f,this,null,[r]).length),u[f]&&u.push(e);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},fix:function(n){if(n[i.expando])return n;var e,o,s,r=n.type,f=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=se.test(r)?this.mouseHooks:oe.test(r)?this.keyHooks:{}),s=t.props?this.props.concat(t.props):this.props,n=new i.Event(f),e=s.length;e--;)o=s[e],n[o]=f[o];return n.target||(n.target=f.srcElement||u),n.target.nodeType===3&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,f):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var i,e,r,f=t.button,o=t.fromElement;return n.pageX==null&&t.clientX!=null&&(e=n.target.ownerDocument||u,r=e.documentElement,i=e.body,n.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!n.relatedTarget&&o&&(n.relatedTarget=o===n.target?t.toElement:o),n.which||f===undefined||(n.which=f&1?1:f&2?3:f&4?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==dr()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){if(this===dr()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(i.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=u.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]===o&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&n.returnValue===!1?vt:it):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||i.now();this[i.expando]=!0};i.Event.prototype={isDefaultPrevented:it,isPropagationStopped:it,isImmediatePropagationStopped:it,preventDefault:function(){var n=this.originalEvent;(this.isDefaultPrevented=vt,n)&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;(this.isPropagationStopped=vt,n)&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=vt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});r.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;i.event.add(this,"click._submit keypress._submit",function(n){var r=n.target,t=i.nodeName(r,"input")||i.nodeName(r,"button")?r.form:undefined;t&&!i._data(t,"submitBubbles")&&(i.event.add(t,"submit._submit",function(n){n._submit_bubble=!0}),i._data(t,"submitBubbles",!0))})},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){if(i.nodeName(this,"form"))return!1;i.event.remove(this,"._submit")}});r.changeBubbles||(i.event.special.change={setup:function(){if(si.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(i.event.add(this,"propertychange._change",function(n){n.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1);i.event.simulate("change",this,n,!0)})),!1;i.event.add(this,"beforeactivate._change",function(n){var t=n.target;si.test(t.nodeName)&&!i._data(t,"changeBubbles")&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n,!0)}),i._data(t,"changeBubbles",!0))})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),!si.test(this.nodeName)}});r.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var r=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){var u=this.ownerDocument||this,f=i._data(u,t);f||u.addEventListener(n,r,!0);i._data(u,t,(f||0)+1)},teardown:function(){var u=this.ownerDocument||this,f=i._data(u,t)-1;f?i._data(u,t,f):(u.removeEventListener(n,r,!0),i._removeData(u,t))}}});i.fn.extend({on:function(n,t,r,u,f){var o,e;if(typeof n=="object"){typeof t!="string"&&(r=r||t,t=undefined);for(o in n)this.on(o,t,r,n[o],f);return this}if(r==null&&u==null?(u=t,r=t=undefined):u==null&&(typeof t=="string"?(u=r,r=undefined):(u=r,r=t,t=undefined)),u===!1)u=it;else if(!u)return this;return f===1&&(e=u,u=function(n){return i().off(n),e.apply(this,arguments)},u.guid=e.guid||(e.guid=i.guid++)),this.each(function(){i.event.add(this,n,u,r,t)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if(typeof n=="object"){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||typeof t=="function")&&(r=t,t=undefined),r===!1&&(r=it),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var nu="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",he=/ jQuery\d+="(?:null|\d+)"/g,tu=new RegExp("<(?:"+nu+")[\\s/>]","i"),hi=/^\s+/,iu=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ru=/<([\w:]+)/,uu=/<tbody/i,ce=/<|&#?\w+;/,le=/<(?:script|style|link)/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,fu=/^$|\/(?:java|ecma)script/i,ve=/^true\/(.*)/,ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,s={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:r.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},pe=gr(u),ci=pe.appendChild(u.createElement("div"));s.optgroup=s.option;s.tbody=s.tfoot=s.colgroup=s.caption=s.thead;s.th=s.td;i.extend({clone:function(n,t,u){var e,c,s,o,h,l=i.contains(n.ownerDocument,n);if(r.html5Clone||i.isXMLDoc(n)||!tu.test("<"+n.nodeName+">")?s=n.cloneNode(!0):(ci.innerHTML=n.outerHTML,ci.removeChild(s=ci.firstChild)),(!r.noCloneEvent||!r.noCloneChecked)&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(e=f(s),h=f(n),o=0;(c=h[o])!=null;++o)e[o]&&be(c,e[o]);if(t)if(u)for(h=h||f(n),e=e||f(s),o=0;(c=h[o])!=null;o++)hu(c,e[o]);else hu(n,s);return e=f(s,"script"),e.length>0&&li(e,!l&&f(n,"script")),e=h=c=null,s},buildFragment:function(n,t,u,e){for(var c,o,b,h,p,w,a,k=n.length,v=gr(t),l=[],y=0;y<k;y++)if(o=n[y],o||o===0)if(i.type(o)==="object")i.merge(l,o.nodeType?[o]:o);else if(ce.test(o)){for(h=h||v.appendChild(t.createElement("div")),p=(ru.exec(o)||["",""])[1].toLowerCase(),a=s[p]||s._default,h.innerHTML=a[1]+o.replace(iu,"<$1><\/$2>")+a[2],c=a[0];c--;)h=h.lastChild;if(!r.leadingWhitespace&&hi.test(o)&&l.push(t.createTextNode(hi.exec(o)[0])),!r.tbody)for(o=p==="table"&&!uu.test(o)?h.firstChild:a[1]==="<table>"&&!uu.test(o)?h:0,c=o&&o.childNodes.length;c--;)i.nodeName(w=o.childNodes[c],"tbody")&&!w.childNodes.length&&o.removeChild(w);for(i.merge(l,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=v.lastChild}else l.push(t.createTextNode(o));for(h&&v.removeChild(h),r.appendChecked||i.grep(f(l,"input"),we),y=0;o=l[y++];)if((!e||i.inArray(o,e)===-1)&&(b=i.contains(o.ownerDocument,o),h=f(v.appendChild(o),"script"),b&&li(h),u))for(c=0;o=h[c++];)fu.test(o.type||"")&&u.push(o);return h=null,v},cleanData:function(n,t){for(var u,s,f,e,a=0,h=i.expando,l=i.cache,v=r.deleteExpando,y=i.event.special;(u=n[a])!=null;a++)if((t||i.acceptData(u))&&(f=u[h],e=f&&l[f],e)){if(e.events)for(s in e.events)y[s]?i.event.remove(u,s):i.removeEvent(u,s,e.handle);l[f]&&(delete l[f],v?delete u[h]:typeof u.removeAttribute!==o?u.removeAttribute(h):u[h]=null,c.push(f))}}});i.fn.extend({text:function(n){return b(this,function(n){return n===undefined?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(n))},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=eu(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=eu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,e=n?i.filter(n,this):this,u=0;(r=e[u])!=null;u++)t||r.nodeType!==1||i.cleanData(f(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&li(f(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++){for(n.nodeType===1&&i.cleanData(f(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&i.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return b(this,function(n){var t=this[0]||{},u=0,e=this.length;if(n===undefined)return t.nodeType===1?t.innerHTML.replace(he,""):undefined;if(typeof n=="string"&&!le.test(n)&&(r.htmlSerialize||!tu.test(n))&&(r.leadingWhitespace||!hi.test(n))&&!s[(ru.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(iu,"<$1><\/$2>");try{for(;u<e;u++)t=this[u]||{},t.nodeType===1&&(i.cleanData(f(t,!1)),t.innerHTML=n);t=0}catch(o){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(t){n=this.parentNode;i.cleanData(f(this));n&&n.replaceChild(t,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=ir.apply([],n);var h,u,c,o,v,s,e=0,l=this.length,p=this,w=l-1,a=n[0],y=i.isFunction(a);if(y||l>1&&typeof a=="string"&&!r.checkClone&&ae.test(a))return this.each(function(i){var r=p.eq(i);y&&(n[0]=a.call(this,i,r.html()));r.domManip(n,t)});if(l&&(s=i.buildFragment(n,this[0].ownerDocument,!1,this),h=s.firstChild,s.childNodes.length===1&&(s=h),h)){for(o=i.map(f(s,"script"),ou),c=o.length;e<l;e++)u=s,e!==w&&(u=i.clone(u,!0,!0),c&&i.merge(o,f(u,"script"))),t.call(this[e],u,e);if(c)for(v=o[o.length-1].ownerDocument,i.map(o,su),e=0;e<c;e++)u=o[e],fu.test(u.type||"")&&!i._data(u,"globalEval")&&i.contains(v,u)&&(u.src?i._evalUrl&&i._evalUrl(u.src):i.globalEval((u.text||u.textContent||u.innerHTML||"").replace(ye,"")));s=h=null}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,r=0,f=[],e=i(n),o=e.length-1;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ii.apply(f,u.get());return this.pushStack(f)}});ai={},function(){var n;r.shrinkWrapBlocks=function(){if(n!=null)return n;n=!1;var t,i,r;if(i=u.getElementsByTagName("body")[0],i&&i.style)return t=u.createElement("div"),r=u.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(r).appendChild(t),typeof t.style.zoom!==o&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(u.createElement("div")).style.width="5px",n=t.offsetWidth!==3),i.removeChild(r),n}}();var lu=/^margin/,pt=new RegExp("^("+at+")(?!px)[a-z%]+$","i"),k,d,ke=/^(top|right|bottom|left)$/;n.getComputedStyle?(k=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)},d=function(n,t,r){var e,o,s,u,f=n.style;return r=r||k(n),u=r?r.getPropertyValue(t)||r[t]:undefined,r&&(u!==""||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),pt.test(u)&&lu.test(t)&&(e=f.width,o=f.minWidth,s=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=e,f.minWidth=o,f.maxWidth=s)),u===undefined?u:u+""}):u.documentElement.currentStyle&&(k=function(n){return n.currentStyle},d=function(n,t,i){var o,f,e,r,u=n.style;return i=i||k(n),r=i?i[t]:undefined,r==null&&u&&u[t]&&(r=u[t]),pt.test(r)&&!ke.test(t)&&(o=u.left,f=n.runtimeStyle,e=f&&f.left,e&&(f.left=n.currentStyle.left),u.left=t==="fontSize"?"1em":r,r=u.pixelLeft+"px",u.left=o,e&&(f.left=e)),r===undefined?r:r+""||"auto"}),function(){function c(){var i,r,f,t;(r=u.getElementsByTagName("body")[0],r&&r.style)&&(i=u.createElement("div"),f=u.createElement("div"),f.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(f).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,h=!0,n.getComputedStyle&&(o=(n.getComputedStyle(i,null)||{}).top!=="1%",s=(n.getComputedStyle(i,null)||{width:"4px"}).width==="4px",t=i.appendChild(u.createElement("div")),t.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",i.style.width="1px",h=!parseFloat((n.getComputedStyle(t,null)||{}).marginRight),i.removeChild(t)),i.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",t=i.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",e=t[0].offsetHeight===0,e&&(t[0].style.display="",t[1].style.display="none",e=t[0].offsetHeight===0),r.removeChild(f))}var f,t,l,o,s,e,h;(f=u.createElement("div"),f.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",l=f.getElementsByTagName("a")[0],t=l&&l.style,t)&&(t.cssText="float:left;opacity:.5",r.opacity=t.opacity==="0.5",r.cssFloat=!!t.cssFloat,f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",r.clearCloneStyle=f.style.backgroundClip==="content-box",r.boxSizing=t.boxSizing===""||t.MozBoxSizing===""||t.WebkitBoxSizing==="",i.extend(r,{reliableHiddenOffsets:function(){return e==null&&c(),e},boxSizingReliable:function(){return s==null&&c(),s},pixelPosition:function(){return o==null&&c(),o},reliableMarginRight:function(){return h==null&&c(),h}}))}();i.swap=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};var vi=/alpha\([^)]*\)/i,de=/opacity\s*=\s*([^)]*)/,ge=/^(none|table(?!-c[ea]).+)/,no=new RegExp("^("+at+")(.*)$","i"),to=new RegExp("^([+-])=("+at+")","i"),io={position:"absolute",visibility:"hidden",display:"block"},vu={letterSpacing:"0",fontWeight:"400"},yu=["Webkit","O","Moz","ms"];i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=d(n,"opacity");return i===""?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:r.cssFloat?"cssFloat":"styleFloat"},style:function(n,t,u,f){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,h,e,s=i.camelCase(t),c=n.style;if(t=i.cssProps[s]||(i.cssProps[s]=pu(c,s)),e=i.cssHooks[t]||i.cssHooks[s],u!==undefined){if(h=typeof u,h==="string"&&(o=to.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,t)),h="number"),u==null||u!==u)return;if(h!=="number"||i.cssNumber[s]||(u+="px"),r.clearCloneStyle||u!==""||t.indexOf("background")!==0||(c[t]="inherit"),!e||!("set"in e)||(u=e.set(n,u,f))!==undefined)try{c[t]=u}catch(l){}}else return e&&"get"in e&&(o=e.get(n,!1,f))!==undefined?o:c[t]}},css:function(n,t,r,u){var s,f,e,o=i.camelCase(t);return(t=i.cssProps[o]||(i.cssProps[o]=pu(n.style,o)),e=i.cssHooks[t]||i.cssHooks[o],e&&"get"in e&&(f=e.get(n,!0,r)),f===undefined&&(f=d(n,t,u)),f==="normal"&&t in vu&&(f=vu[t]),r===""||r)?(s=parseFloat(f),r===!0||i.isNumeric(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return ge.test(i.css(n,"display"))&&n.offsetWidth===0?i.swap(n,io,function(){return du(n,t,u)}):du(n,t,u)},set:function(n,u,f){var e=f&&k(n);return bu(n,u,f?ku(n,t,f,r.boxSizing&&i.css(n,"boxSizing",!1,e)==="border-box",e):0)}}});r.opacity||(i.cssHooks.opacity={get:function(n,t){return de.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+t*100+")":"",f=u&&u.filter||r.filter||"";(r.zoom=1,(t>=1||t==="")&&i.trim(f.replace(vi,""))===""&&r.removeAttribute&&(r.removeAttribute("filter"),t===""||u&&!u.filter))||(r.filter=vi.test(f)?f.replace(vi,e):f+" "+e)}});i.cssHooks.marginRight=au(r.reliableMarginRight,function(n,t){if(t)return i.swap(n,{display:"inline-block"},d,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};lu.test(n)||(i.cssHooks[n+t].set=bu)});i.fn.extend({css:function(n,t){return b(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=k(n),e=t.length;u<e;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return r!==undefined?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return wu(this,!0)},hide:function(){return wu(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){et(this)?i(this).show():i(this).hide()})}});i.Tween=e;e.prototype={constructor:e,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=e.propHooks[this.prop];return n&&n.get?n.get(this):e.propHooks._default.get(this)},run:function(n){var t,r=e.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):e.propHooks._default.set(this),this}};e.prototype.init.prototype=e.prototype;e.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]!=null&&(!n.elem.style||n.elem.style[n.prop]==null)?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};e.propHooks.scrollTop=e.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.fx=e.prototype.init;i.fx.step={};var rt,wt,ro=/^(?:toggle|show|hide)$/,gu=new RegExp("^(?:([+-])=|)("+at+")([a-z%]*)$","i"),uo=/queueHooks$/,bt=[fo],st={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),u=gu.exec(t),e=u&&u[3]||(i.cssNumber[n]?"":"px"),r=(i.cssNumber[n]||e!=="px"&&+s)&&gu.exec(i.css(f.elem,n)),o=1,h=20;if(r&&r[3]!==e){e=e||r[3];u=u||[];r=+s||1;do o=o||".5",r=r/o,i.style(f.elem,n,r+e);while(o!==(o=f.cur()/s)&&o!==1&&--h)}return u&&(r=f.start=+r||+s||0,f.unit=e,f.end=u[1]?r+(u[1]+1)*u[2]:+u[2]),f}]};i.Animation=i.extend(rf,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],st[r]=st[r]||[],st[r].unshift(t)},prefilter:function(n,t){t?bt.unshift(n):bt.push(n)}});i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(et).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),e=i.speed(t,r,u),f=function(){var t=rf(this,i.extend({},n),e);(o||i._data(this,"finish"))&&t.stop(!0)};return f.finish=f,o||e.queue===!1?this.each(f):this.queue(e.queue,f)},stop:function(n,t,r){var u=function(n){var t=n.stop;delete n.stop;t(r)};return typeof n!="string"&&(r=t,t=n,n=undefined),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=n!=null&&n+"queueHooks",e=i.timers,f=i._data(this);if(t)f[t]&&f[t].stop&&u(f[t]);else for(t in f)f[t]&&f[t].stop&&uo.test(t)&&u(f[t]);for(t=e.length;t--;)e[t].elem===this&&(n==null||e[t].queue===n)&&(e[t].anim.stop(r),o=!1,e.splice(t,1));(o||!r)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,f=i._data(this),r=f[n+"queue"],e=f[n+"queueHooks"],u=i.timers,o=r?r.length:0;for(f.finish=!0,i.queue(this,n,[]),e&&e.stop&&e.stop.call(this,!0),t=u.length;t--;)u[t].elem===this&&u[t].queue===n&&(u[t].anim.stop(!0),u.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete f.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(kt(t,!0),n,i,u)}});i.each({slideDown:kt("show"),slideUp:kt("hide"),slideToggle:kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=i.timers,t=0;for(rt=i.now();t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||i.fx.stop();rt=undefined};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){wt||(wt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(wt);wt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},function(){var n,t,f,i,e;t=u.createElement("div");t.setAttribute("className","t");t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";i=t.getElementsByTagName("a")[0];f=u.createElement("select");e=f.appendChild(u.createElement("option"));n=t.getElementsByTagName("input")[0];i.style.cssText="top:1px";r.getSetAttribute=t.className!=="t";r.style=/top/.test(i.getAttribute("style"));r.hrefNormalized=i.getAttribute("href")==="/a";r.checkOn=!!n.value;r.optSelected=e.selected;r.enctype=!!u.createElement("form").enctype;f.disabled=!0;r.optDisabled=!e.disabled;n=u.createElement("input");n.setAttribute("value","");r.input=n.getAttribute("value")==="";n.value="t";n.setAttribute("type","radio");r.radioValue=n.value==="t"}();uf=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;this.nodeType===1&&(u=f?n.call(this,r,i(this).val()):n,u==null?u="":typeof u=="number"?u+="":i.isArray(u)&&(u=i.map(u,function(n){return n==null?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,u,"value")!==undefined||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&(r=t.get(u,"value"))!==undefined)?r:(r=u.value,typeof r=="string"?r.replace(uf,""):r==null?"":r):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return t!=null?t:i.trim(i.text(n))}},select:{get:function(n){for(var o,t,s=n.options,u=n.selectedIndex,f=n.type==="select-one"||u<0,h=f?null:[],c=f?u+1:s.length,e=u<0?c:f?u:0;e<c;e++)if(t=s[e],(t.selected||e===u)&&(r.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),f)return o;h.push(o)}return h},set:function(n,t){for(var f,r,u=n.options,o=i.makeArray(t),e=u.length;e--;)if(r=u[e],i.inArray(i.valHooks.option.get(r),o)>=0)try{r.selected=f=!0}catch(s){r.scrollHeight}else r.selected=!1;return f||(n.selectedIndex=-1),u}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}};r.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});var ut,ff,v=i.expr.attrHandle,yi=/^(?:checked|selected)$/i,g=r.getSetAttribute,dt=r.input;i.fn.extend({attr:function(n,t){return b(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2){if(typeof n.getAttribute===o)return i.prop(n,t,r);if(e===1&&i.isXMLDoc(n)||(t=t.toLowerCase(),u=i.attrHooks[t]||(i.expr.match.bool.test(t)?ff:ut)),r!==undefined)if(r===null)i.removeAttr(n,t);else return u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:(n.setAttribute(t,r+""),r);else return u&&"get"in u&&(f=u.get(n,t))!==null?f:(f=i.find.attr(n,t),f==null?undefined:f)}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&n.nodeType===1)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)?dt&&g||!yi.test(r)?n[u]=!1:n[i.camelCase("default-"+r)]=n[u]=!1:i.attr(n,r,""),n.removeAttribute(g?r:u)},attrHooks:{type:{set:function(n,t){if(!r.radioValue&&t==="radio"&&i.nodeName(n,"input")){var u=n.value;return n.setAttribute("type",t),u&&(n.value=u),t}}}}});ff={set:function(n,t,r){return t===!1?i.removeAttr(n,r):dt&&g||!yi.test(r)?n.setAttribute(!g&&i.propFix[r]||r,r):n[i.camelCase("default-"+r)]=n[r]=!0,r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=v[t]||i.find.attr;v[t]=dt&&g||!yi.test(t)?function(n,t,i){var u,f;return i||(f=v[t],v[t]=u,u=r(n,t,i)!=null?t.toLowerCase():null,v[t]=f),u}:function(n,t,r){if(!r)return n[i.camelCase("default-"+t)]?t.toLowerCase():null}});dt&&g||(i.attrHooks.value={set:function(n,t,r){if(i.nodeName(n,"input"))n.defaultValue=t;else return ut&&ut.set(n,t,r)}});g||(ut={set:function(n,t,i){var r=n.getAttributeNode(i);return r||n.setAttributeNode(r=n.ownerDocument.createAttribute(i)),r.value=t+="",i==="value"||t===n.getAttribute(i)?t:void 0}},v.id=v.name=v.coords=function(n,t,i){var r;if(!i)return(r=n.getAttributeNode(t))&&r.value!==""?r.value:null},i.valHooks.button={get:function(n,t){var i=n.getAttributeNode(t);if(i&&i.specified)return i.value},set:ut.set},i.attrHooks.contenteditable={set:function(n,t,i){ut.set(n,t===""?!1:t,i)}},i.each(["width","height"],function(n,t){i.attrHooks[t]={set:function(n,i){if(i==="")return n.setAttribute(t,"auto"),i}}}));r.style||(i.attrHooks.style={get:function(n){return n.style.cssText||undefined},set:function(n,t){return n.style.cssText=t+""}});ef=/^(?:input|select|textarea|button|object)$/i;of=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return b(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=undefined;delete this[n]}catch(t){}})}});i.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,r){var f,u,o,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2)return o=e!==1||!i.isXMLDoc(n),o&&(t=i.propFix[t]||t,u=i.propHooks[t]),r!==undefined?u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:n[t]=r:u&&"get"in u&&(f=u.get(n,t))!==null?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):ef.test(n.nodeName)||of.test(n.nodeName)&&n.href?0:-1}}}});r.hrefNormalized||i.each(["href","src"],function(n,t){i.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}});r.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});r.enctype||(i.propFix.enctype="encoding");gt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,s,f,e=0,c=this.length,l=typeof n=="string"&&n;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(l)for(o=(n||"").match(h)||[];e<c;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(gt," "):" "),r){for(s=0;u=o[s++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");f=i.trim(r);t.className!==f&&(t.className=f)}return this},removeClass:function(n){var o,t,r,u,s,f,e=0,c=this.length,l=arguments.length===0||typeof n=="string"&&n;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(l)for(o=(n||"").match(h)||[];e<c;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(gt," "):""),r){for(s=0;u=o[s++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");f=n?i.trim(r):"";t.className!==f&&(t.className=f)}return this},toggleClass:function(n,t){var r=typeof n;return typeof t=="boolean"&&r==="string"?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(r==="string")for(var t,f=0,u=i(this),e=n.match(h)||[];t=e[f++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else(r===o||r==="boolean")&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(gt," ").indexOf(i)>=0)return!0;return!1}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}});var pi=i.now(),wi=/\?/,oo=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;i.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var f,r=null,u=i.trim(t+"");return u&&!i.trim(u.replace(oo,function(n,t,i,u){return(f&&t&&(r=0),r===0)?n:(f=i||t,r+=!u-!i,"")}))?Function("return "+u)():i.error("Invalid JSON: "+t)};i.parseXML=function(t){var r,u;if(!t||typeof t!="string")return null;try{n.DOMParser?(u=new DOMParser,r=u.parseFromString(t,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t))}catch(f){r=undefined}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+t),r};var nt,y,so=/#.*$/,sf=/([?&])_=[^&]*/,ho=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,co=/^(?:GET|HEAD)$/,lo=/^\/\//,hf=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,cf={},bi={},lf="*/".concat("*");try{y=location.href}catch(ns){y=u.createElement("a");y.href="";y=y.href}nt=hf.exec(y.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:y,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":lf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ki(ki(n,i.ajaxSettings),t):ki(i.ajaxSettings,n)},ajaxPrefilter:af(cf),ajaxTransport:af(bi),ajax:function(n,t){function w(n,t,s,h){var v,it,nt,y,w,c=t;e!==2&&(e=2,k&&clearTimeout(k),l=undefined,b=h||"",u.readyState=n>0?4:0,v=n>=200&&n<300||n===304,s&&(y=ao(r,u,s)),y=vo(r,y,u,v),v?(r.ifModified&&(w=u.getResponseHeader("Last-Modified"),w&&(i.lastModified[f]=w),w=u.getResponseHeader("etag"),w&&(i.etag[f]=w)),n===204||r.type==="HEAD"?c="nocontent":n===304?c="notmodified":(c=y.state,it=y.data,nt=y.error,v=!nt)):(nt=c,(n||!c)&&(c="error",n<0&&(n=0))),u.status=n,u.statusText=(t||c)+"",v?g.resolveWith(o,[it,c,u]):g.rejectWith(o,[u,c,nt]),u.statusCode(p),p=undefined,a&&d.trigger(v?"ajaxSuccess":"ajaxError",[u,r,v?it:nt]),tt.fireWith(o,[u,c]),a&&(d.trigger("ajaxComplete",[u,r]),--i.active||i.event.trigger("ajaxStop")))}typeof n=="object"&&(t=n,n=undefined);t=t||{};var s,c,f,b,k,a,l,v,r=i.ajaxSetup({},t),o=r.context||r,d=r.context&&(o.nodeType||o.jquery)?i(o):i.event,g=i.Deferred(),tt=i.Callbacks("once memory"),p=r.statusCode||{},it={},rt={},e=0,ut="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(e===2){if(!v)for(v={};t=ho.exec(b);)v[t[1].toLowerCase()]=t[2];t=v[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return e===2?b:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return e||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return e||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(e<2)for(t in n)p[t]=[p[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||ut;return l&&l.abort(t),w(0,t),this}};if(g.promise(u).complete=tt.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||y)+"").replace(so,"").replace(lo,nt[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=i.trim(r.dataType||"*").toLowerCase().match(h)||[""],r.crossDomain==null&&(s=hf.exec(r.url.toLowerCase()),r.crossDomain=!!(s&&(s[1]!==nt[1]||s[2]!==nt[2]||(s[3]||(s[1]==="http:"?"80":"443"))!==(nt[3]||(nt[1]==="http:"?"80":"443"))))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=i.param(r.data,r.traditional)),vf(cf,r,t,u),e===2)return u;a=i.event&&r.global;a&&i.active++==0&&i.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!co.test(r.type);f=r.url;r.hasContent||(r.data&&(f=r.url+=(wi.test(f)?"&":"?")+r.data,delete r.data),r.cache===!1&&(r.url=sf.test(f)?f.replace(sf,"$1_="+pi++):f+(wi.test(f)?"&":"?")+"_="+pi++));r.ifModified&&(i.lastModified[f]&&u.setRequestHeader("If-Modified-Since",i.lastModified[f]),i.etag[f]&&u.setRequestHeader("If-None-Match",i.etag[f]));(r.data&&r.hasContent&&r.contentType!==!1||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType);u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+lf+"; q=0.01":""):r.accepts["*"]);for(c in r.headers)u.setRequestHeader(c,r.headers[c]);if(r.beforeSend&&(r.beforeSend.call(o,u,r)===!1||e===2))return u.abort();ut="abort";for(c in{success:1,error:1,complete:1})u[c](r[c]);if(l=vf(bi,r,t,u),l){u.readyState=1;a&&d.trigger("ajaxSend",[u,r]);r.async&&r.timeout>0&&(k=setTimeout(function(){u.abort("timeout")},r.timeout));try{e=1;l.send(it,w)}catch(ft){if(e<2)w(-1,ft);else throw ft;}}else w(-1,"No Transport");return u},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,undefined,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=undefined),i.ajax({url:n,type:t,dataType:f,data:r,success:u})}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&n.firstChild.nodeType===1;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0||!r.reliableHiddenOffsets()&&(n.style&&n.style.display||i.css(n,"display"))==="none"};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var yo=/%20/g,po=/\[\]$/,yf=/\r?\n/g,wo=/^(?:submit|button|image|reset|file)$/i,bo=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():t==null?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(t===undefined&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)di(r,n[r],t,f);return u.join("&").replace(yo,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&bo.test(this.nodeName)&&!wo.test(n)&&(this.checked||!oi.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(yf,"\r\n")}}):{name:t.name,value:r.replace(yf,"\r\n")}}).get()}});i.ajaxSettings.xhr=n.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&pf()||go()}:pf;var ko=0,ni={},ht=i.ajaxSettings.xhr();return n.attachEvent&&n.attachEvent("onunload",function(){for(var n in ni)ni[n](undefined,!0)}),r.cors=!!ht&&"withCredentials"in ht,ht=r.ajax=!!ht,ht&&i.ajaxTransport(function(n){if(!n.crossDomain||r.cors){var t;return{send:function(r,u){var e,f=n.xhr(),o=++ko;if(f.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(e in n.xhrFields)f[e]=n.xhrFields[e];n.mimeType&&f.overrideMimeType&&f.overrideMimeType(n.mimeType);n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(e in r)r[e]!==undefined&&f.setRequestHeader(e,r[e]+"");f.send(n.hasContent&&n.data||null);t=function(r,e){var s,c,h;if(t&&(e||f.readyState===4))if(delete ni[o],t=undefined,f.onreadystatechange=i.noop,e)f.readyState!==4&&f.abort();else{h={};s=f.status;typeof f.responseText=="string"&&(h.text=f.responseText);try{c=f.statusText}catch(l){c=""}s||!n.isLocal||n.crossDomain?s===1223&&(s=204):s=h.text?200:404}h&&u(s,c,h,f.getAllResponseHeaders())};n.async?f.readyState===4?setTimeout(t):f.onreadystatechange=ni[o]=t:t()},abort:function(){t&&t(undefined,!0)}}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var t,r=u.head||i("head")[0]||u.documentElement;return{send:function(i,f){t=u.createElement("script");t.async=!0;n.scriptCharset&&(t.charset=n.scriptCharset);t.src=n.url;t.onload=t.onreadystatechange=function(n,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||f(200,"success"))};r.insertBefore(t,r.firstChild)},abort:function(){if(t)t.onload(undefined,!0)}}}}),gi=[],ti=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=gi.pop()||i.expando+"_"+pi++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,o,e,s=t.jsonp!==!1&&(ti.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp")return f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ti,"$1"+f):t.jsonp!==!1&&(t.url+=(wi.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return e||i.error(f+" was not called"),e[0]},t.dataTypes[0]="json",o=n[f],n[f]=function(){e=arguments},u.always(function(){n[f]=o;t[f]&&(t.jsonpCallback=r.jsonpCallback,gi.push(f));e&&i.isFunction(o)&&o(e[0]);e=o=undefined}),"script"}),i.parseHTML=function(n,t,r){if(!n||typeof n!="string")return null;typeof t=="boolean"&&(r=t,t=!1);t=t||u;var f=er.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},nr=i.fn.load,i.fn.load=function(n,t,r){if(typeof n!="string"&&nr)return nr.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>=0&&(u=i.trim(n.slice(e,n.length)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=undefined):t&&typeof t=="object"&&(s="POST"),f.length>0&&i.ajax({url:n,type:s,dataType:"html",data:t}).done(function(n){o=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).complete(r&&function(n,t){f.each(r,o||[n.responseText,t,n])}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},tr=n.document.documentElement,i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};l==="static"&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=(l==="absolute"||l==="fixed")&&i.inArray("auto",[s,c])>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,u));t.top!=null&&(f.top=t.top-u.top+h);t.left!=null&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return n===undefined?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,u={top:0,left:0},r=this[0],e=r&&r.ownerDocument;if(e)return(t=e.documentElement,!i.contains(t,r))?u:(typeof r.getBoundingClientRect!==o&&(u=r.getBoundingClientRect()),f=wf(e),{top:u.top+(f.pageYOffset||t.scrollTop)-(t.clientTop||0),left:u.left+(f.pageXOffset||t.scrollLeft)-(t.clientLeft||0)})},position:function(){if(this[0]){var n,r,t={top:0,left:0},u=this[0];return i.css(u,"position")==="fixed"?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||tr;n&&!i.nodeName(n,"html")&&i.css(n,"position")==="static";)n=n.offsetParent;return n||tr})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r=/Y/.test(t);i.fn[n]=function(u){return b(this,function(n,u,f){var e=wf(n);if(f===undefined)return e?t in e?e[t]:e.document.documentElement[u]:n[u];e?e.scrollTo(r?i(e).scrollLeft():f,r?f:i(e).scrollTop()):n[u]=f},n,u,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=au(r.pixelPosition,function(n,r){if(r)return r=d(n,t),pt.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||typeof u!="boolean"),o=r||(u===!0||f===!0?"margin":"border");return b(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:t.nodeType===9?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):u===undefined?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:undefined,e,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),bf=n.jQuery,kf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=kf),t&&n.jQuery===i&&(n.jQuery=bf),i},typeof t===o&&(n.jQuery=n.$=i),i});
/**
 * @license AngularJS v1.4.0
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(n,t,i){"use strict";function y(n,t){return t=t||Error,function(){var f=2,i=arguments,o=i[0],u="["+(n?n+":":"")+o+"] ",s=i[1],e,r;for(u+=s.replace(/\{\d+\}/g,function(n){var r=+n.slice(1,-1),t=r+f;return t<i.length?fs(i[t]):n}),u+="\nhttp://errors.angularjs.org/1.4.0/"+(n?n+"/":"")+o,r=f,e="?";r<i.length;r++,e="&")u+=e+"p"+(r-f)+"="+encodeURIComponent(fs(i[r]));return new t(u)}}function ei(n){if(n==null||fr(n))return!1;var t="length"in Object(n)&&n.length;return n.nodeType===pt&&t?!0:l(n)||a(n)||t===0||typeof t=="number"&&t>0&&t-1 in n}function r(n,t,i){var u,f,e;if(n)if(c(n))for(u in n)u!="prototype"&&u!="length"&&u!="name"&&(!n.hasOwnProperty||n.hasOwnProperty(u))&&t.call(i,n[u],u,n);else if(a(n)||ei(n))for(e=typeof n!="object",u=0,f=n.length;u<f;u++)(e||u in n)&&t.call(i,n[u],u,n);else if(n.forEach&&n.forEach!==r)n.forEach(t,i,n);else if(co(n))for(u in n)t.call(i,n[u],u,n);else if(typeof n.hasOwnProperty=="function")for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n);else for(u in n)uu.call(n,u)&&t.call(i,n[u],u,n);return n}function oo(n,t,i){for(var r=Object.keys(n).sort(),u=0;u<r.length;u++)t.call(i,n[r[u]],r[u]);return r}function so(n){return function(t,i){n(i,t)}}function fu(){return++ta}function ho(n,t){t?n.$$hashKey=t:delete n.$$hashKey}function cf(n,t,i){for(var u,h,e,l,r,f,v=n.$$hashKey,o=0,y=t.length;o<y;++o)if(u=t[o],s(u)||c(u))for(h=Object.keys(u),e=0,l=h.length;e<l;e++)r=h[e],f=u[r],i&&s(f)?(s(n[r])||(n[r]=a(f)?[]:{}),cf(n[r],[f],!0)):n[r]=f;return ho(n,v),n}function w(n){return cf(n,tr.call(arguments,1),!1)}function ia(n){return cf(n,tr.call(arguments,1),!0)}function it(n){return parseInt(n,10)}function lf(n,t){return w(Object.create(n),t)}function e(){}function rr(n){return n}function yt(n){return function(){return n}}function h(n){return typeof n=="undefined"}function o(n){return typeof n!="undefined"}function s(n){return n!==null&&typeof n=="object"}function co(n){return n!==null&&typeof n=="object"&&!eo(n)}function l(n){return typeof n=="string"}function k(n){return typeof n=="number"}function ot(n){return ti.call(n)==="[object Date]"}function c(n){return typeof n=="function"}function ur(n){return ti.call(n)==="[object RegExp]"}function fr(n){return n&&n.window===n}function er(n){return n&&n.$evalAsync&&n.$watch}function ra(n){return ti.call(n)==="[object File]"}function ua(n){return ti.call(n)==="[object FormData]"}function fa(n){return ti.call(n)==="[object Blob]"}function or(n){return typeof n=="boolean"}function eu(n){return n&&c(n.then)}function ao(n){return lo.test(ti.call(n))}function vo(n){return!!(n&&(n.nodeName||n.prop&&n.attr&&n.find))}function ea(n){for(var i={},r=n.split(","),t=0;t<r.length;t++)i[r[t]]=!0;return i}function wt(n){return v(n.nodeName||n[0]&&n[0].nodeName)}function sr(n,t){var i=n.indexOf(t);return i>=0&&n.splice(i,1),i}function bt(n,t,i,u){function c(n,t,i,r,u){var f=bt(t,null,r,u);s(t)&&(r.push(t),u.push(f));i[n]=f}var l,o,h,f,e,v;if(fr(n)||er(n))throw fi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(ao(t))throw fi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t){if(n===t)throw fi("cpi","Can't copy! Source and destination are identical.");if(i=i||[],u=u||[],s(n)){if(o=i.indexOf(n),o!==-1)return u[o];i.push(n);u.push(t)}if(a(n))for(t.length=0,e=0;e<n.length;e++)h=bt(n[e],null,i,u),s(n[e])&&(i.push(n[e]),u.push(h)),t.push(h);else{if(v=t.$$hashKey,a(t)?t.length=0:r(t,function(n,i){delete t[i]}),co(n))for(f in n)c(f,n[f],t,i,u);else if(n&&typeof n.hasOwnProperty=="function")for(f in n)n.hasOwnProperty(f)&&c(f,n[f],t,i,u);else for(f in n)uu.call(n,f)&&c(f,n[f],t,i,u);ho(t,v)}}else t=n,n&&(a(n)?t=bt(n,[],i,u):ao(n)?t=new n.constructor(n):ot(n)?t=new Date(n.getTime()):ur(n)?(t=new RegExp(n.source,n.toString().match(/[^\/]*$/)[0]),t.lastIndex=n.lastIndex):s(n)&&(l=Object.create(eo(n)),t=bt(n,l,i,u)));return t}function ct(n,t){var i,u,r;if(a(n))for(t=t||[],i=0,u=n.length;i<u;i++)t[i]=n[i];else if(s(n)){t=t||{};for(r in n)r.charAt(0)==="$"&&r.charAt(1)==="$"||(t[r]=n[r])}return t||n}function st(n,t){if(n===t)return!0;if(n===null||t===null)return!1;if(n!==n&&t!==t)return!0;var f=typeof n,o=typeof t,e,r,u;if(f==o&&f=="object")if(a(n)){if(!a(t))return!1;if((e=n.length)==t.length){for(r=0;r<e;r++)if(!st(n[r],t[r]))return!1;return!0}}else{if(ot(n))return ot(t)?st(n.getTime(),t.getTime()):!1;if(ur(n))return ur(t)?n.toString()==t.toString():!1;if(er(n)||er(t)||fr(n)||fr(t)||a(t)||ot(t)||ur(t))return!1;u=rt();for(r in n)if(r.charAt(0)!=="$"&&!c(n[r])){if(!st(n[r],t[r]))return!1;u[r]=!0}for(r in t)if(!(r in u)&&r.charAt(0)!=="$"&&t[r]!==i&&!c(t[r]))return!1;return!0}return!1}function cr(n,t,i){return n.concat(tr.call(t,i))}function lr(n,t){return tr.call(n,t||0)}function yo(n,t){var i=arguments.length>2?lr(arguments,2):[];return!c(t)||t instanceof RegExp?t:i.length?function(){return arguments.length?t.apply(n,cr(i,arguments,0)):t.apply(n,i)}:function(){return arguments.length?t.apply(n,arguments):t.call(n)}}function po(n,r){var u=r;return typeof n=="string"&&n.charAt(0)==="$"&&n.charAt(1)==="$"?u=i:fr(r)?u="$WINDOW":r&&t===r?u="$DOCUMENT":er(r)&&(u="$SCOPE"),u}function ar(n,t){return typeof n=="undefined"?i:(k(t)||(t=t?2:null),JSON.stringify(n,po,t))}function wo(n){return l(n)?JSON.parse(n):n}function bo(n,t){var i=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(i)?t:i}function oa(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function vf(n,t,i){i=i?-1:1;var r=bo(t,n.getTimezoneOffset());return oa(n,i*(r-n.getTimezoneOffset()))}function kt(n){n=f(n).clone();try{n.empty()}catch(i){}var t=f("<div>").append(n).html();try{return n[0].nodeType===vr?v(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(n,t){return"<"+v(t)})}catch(i){return v(t)}}function ko(n){try{return decodeURIComponent(n)}catch(t){}}function go(n){var i={},u,t;return r((n||"").split("&"),function(n){if(n&&(u=n.replace(/\+/g,"%20").split("="),t=ko(u[0]),o(t))){var r=o(u[1])?ko(u[1]):!0;uu.call(i,t)?a(i[t])?i[t].push(r):i[t]=[i[t],r]:i[t]=r}}),i}function yf(n){var t=[];return r(n,function(n,i){a(n)?r(n,function(n){t.push(lt(i,!0)+(n===!0?"":"="+lt(n,!0)))}):t.push(lt(i,!0)+(n===!0?"":"="+lt(n,!0)))}),t.length?t.join("&"):""}function ou(n){return lt(n,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function lt(n,t){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function sa(n,t){for(var i,u=oi.length,r=0;r<u;++r)if(i=oi[r]+t,l(i=n.getAttribute(i)))return i;return null}function ha(n,t){var i,u,f={};r(oi,function(t){var r=t+"app";!i&&n.hasAttribute&&n.hasAttribute(r)&&(i=n,u=n.getAttribute(r))});r(oi,function(t){var f=t+"app",r;!i&&(r=n.querySelector("["+f.replace(":","\\:")+"]"))&&(i=r,u=r.getAttribute(f))});i&&(f.strictDi=sa(i,"strict-di")!==null,t(i,u?[u]:[],f))}function ns(i,u,e){var o;s(e)||(e={});o={strictDi:!1};e=w(o,e);var h=function(){var r,n;if(i=f(i),i.injector()){r=i[0]===t?"document":kt(i);throw fi("btstrpd","App Already Bootstrapped with this Element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"));}return u=u||[],u.unshift(["$provide",function(n){n.value("$rootElement",i)}]),e.debugInfoEnabled&&u.push(["$compileProvider",function(n){n.debugInfoEnabled(!0)}]),u.unshift("ng"),n=br(u,e.strictDi),n.invoke(["$rootScope","$rootElement","$compile","$injector",function(n,t,i,r){n.$apply(function(){t.data("$injector",r);i(t)(n)})}]),n},l=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(n&&l.test(n.name)&&(e.debugInfoEnabled=!0,n.name=n.name.replace(l,"")),n&&!a.test(n.name))return h();n.name=n.name.replace(a,"");ft.resumeBootstrap=function(n){return r(n,function(n){u.push(n)}),h()};c(ft.resumeDeferredBootstrap)&&ft.resumeDeferredBootstrap()}function ca(){n.name="NG_ENABLE_DEBUG_INFO!"+n.name;n.location.reload()}function la(n){var t=ft.element(n).injector();if(!t)throw fi("test","no injector found for element argument to getTestability");return t.get("$$testability")}function is(n,t){return t=t||"_",n.replace(ts,function(n,i){return(i?t:"")+n.toLowerCase()})}function aa(){var r,t;pf||(t=hr(),et=n.jQuery,o(t)&&(et=t===null?i:n[t]),et&&et.fn.on?(f=et,w(et.fn,{scope:si.scope,isolateScope:si.isolateScope,controller:si.controller,injector:si.injector,inheritedData:si.inheritedData}),r=et.cleanData,et.cleanData=function(n){var t,i,u;if(wf)wf=!1;else for(i=0;(u=n[i])!=null;i++)t=et._data(u,"events"),t&&t.$destroy&&et(u).triggerHandler("$destroy");r(n)}):f=b,ft.element=f,pf=!0)}function bf(n,t,i){if(!n)throw fi("areq","Argument '{0}' is {1}",t||"?",i||"required");return n}function wi(n,t,i){return i&&a(n)&&(n=n[n.length-1]),bf(c(n),t,"not a function, got "+(n&&typeof n=="object"?n.constructor.name||"Object":typeof n)),n}function bi(n,t){if(n==="hasOwnProperty")throw fi("badname","hasOwnProperty is not a valid {0} name",t);}function rs(n,t,i){var r;if(!t)return n;var u=t.split("."),f,e=n,o=u.length;for(r=0;r<o;r++)f=u[r],n&&(n=(e=n)[f]);return!i&&c(n)?yo(e,n):n}function su(n){var t=n[0],r=n[n.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==r);return f(i)}function rt(){return Object.create(null)}function ya(n){function t(n,t,i){return n[t]||(n[t]=i())}var r=y("$injector"),u=y("ng"),i=t(n,"angular",Object);return i.$$minErr=i.$$minErr||y,t(i,"module",function(){var n={};return function(i,f,e){var o=function(n,t){if(n==="hasOwnProperty")throw u("badname","hasOwnProperty is not a valid {0} name",t);};return o(i,"module"),f&&n.hasOwnProperty(i)&&(n[i]=null),t(n,i,function(){function n(n,i,r,u){return u||(u=t),function(){return u[r||"push"]([n,i,arguments]),h}}if(!f)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],u=[],o=[],s=n("$injector","invoke","push",u),h={_invokeQueue:t,_configBlocks:u,_runBlocks:o,requires:f,name:i,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:n("$provide","value"),constant:n("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),config:s,run:function(n){return o.push(n),this}};return e&&s(e),h})}})}function pa(n){var t=[];return JSON.stringify(n,function(n,i){if(i=po(n,i),s(i)){if(t.indexOf(i)>=0)return"<<already seen>>";t.push(i)}return i})}function fs(n){return typeof n=="function"?n.toString().replace(/ \{[\s\S]*$/,""):typeof n=="undefined"?"undefined":typeof n!="string"?pa(n):n}function wa(t){w(t,{bootstrap:ns,copy:bt,extend:w,merge:ia,equals:st,element:f,forEach:r,injector:br,noop:e,bind:yo,toJson:ar,fromJson:wo,identity:rr,isUndefined:h,isDefined:o,isString:l,isFunction:c,isObject:s,isNumber:k,isElement:vo,isArray:a,version:es,isDate:ot,lowercase:v,uppercase:gi,callbacks:{counter:0},getTestability:la,$$minErr:y,$$csp:pi,reloadWithDebugInfo:ca});ir=ya(n);try{ir("ngLocale")}catch(i){ir("ngLocale",[]).provider("$locale",ip)}ir("ng",["ngLocale"],["$provide",function(n){n.provider({$$sanitizeUri:dp});n.provider("$compile",bs).directive({a:yc,input:rl,textarea:rl,form:nb,script:fd,select:sd,style:cd,option:hd,ngBind:pb,ngBindHtml:bb,ngBindTemplate:wb,ngClass:db,ngClassEven:nk,ngClassOdd:gb,ngCloak:tk,ngController:ik,ngForm:tb,ngHide:gk,ngIf:uk,ngInclude:fk,ngInit:ok,ngNonBindable:vk,ngPluralize:bk,ngRepeat:kk,ngShow:dk,ngStyle:nd,ngSwitch:td,ngSwitchWhen:id,ngSwitchDefault:rd,ngOptions:wk,ngTransclude:ud,ngModel:ck,ngList:sk,ngChange:kb,pattern:vl,ngPattern:vl,required:al,ngRequired:al,minlength:pl,ngMinlength:pl,maxlength:yl,ngMaxlength:yl,ngValue:yb,ngModelOptions:ak}).directive({ngInclude:ek}).directive(gr).directive(ul);n.provider({$anchorScroll:wv,$animate:ty,$$animateQueue:ny,$$AnimateRunner:gv,$browser:uy,$cacheFactory:fy,$controller:sy,$document:hy,$exceptionHandler:cy,$filter:uc,$interpolate:np,$interval:tp,$http:by,$httpParamSerializer:yy,$httpParamSerializerJQLike:py,$httpBackend:dy,$location:ep,$log:op,$parse:yp,$rootScope:kp,$q:pp,$$q:wp,$sce:tw,$sceDelegate:nw,$sniffer:iw,$templateCache:ey,$templateRequest:rw,$$testability:uw,$timeout:fw,$window:ew,$$rAF:bp,$$asyncCallback:iy,$$jqLite:cv,$$HashMap:lv,$$cookieReader:ow})}])}function ka(){return++ba}function pr(n){return n.replace(da,function(n,t,i,r){return r?i.toUpperCase():i}).replace(ga,"Moz$1")}function ne(n){return!iv.test(n)}function os(n){var t=n.nodeType;return t===pt||!t||t===us}function ss(n,t){var i,o,f,u=t.createDocumentFragment(),e=[],s;if(ne(n))e.push(t.createTextNode(n));else{for(i=i||u.appendChild(t.createElement("div")),o=(rv.exec(n)||["",""])[1].toLowerCase(),f=at[o]||at._default,i.innerHTML=f[1]+n.replace(uv,"<$1><\/$2>")+f[2],s=f[0];s--;)i=i.lastChild;e=cr(e,i.childNodes);i=u.firstChild;i.textContent=""}return u.textContent="",u.innerHTML="",r(e,function(n){u.appendChild(n)}),u}function fv(n,i){i=i||t;var r;return(r=tv.exec(n))?[i.createElement(r[1])]:(r=ss(n,i))?r.childNodes:[]}function b(n){if(n instanceof b)return n;var t;if(l(n)&&(n=p(n),t=!0),!(this instanceof b)){if(t&&n.charAt(0)!="<")throw gf("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new b(n)}t?re(this,fv(n)):re(this,n)}function te(n){return n.cloneNode(!0)}function lu(n,t){var r,i,u;if(t||au(n),n.querySelectorAll)for(r=n.querySelectorAll("*"),i=0,u=r.length;i<u;i++)au(r[i])}function hs(n,t,i,u){if(o(u))throw gf("offargs","jqLite#off() does not support the `selector` argument");var f=vu(n),e=f&&f.events,s=f&&f.handle;if(s)if(t)r(t.split(" "),function(t){if(o(i)){var r=e[t];if(sr(r||[],i),r&&r.length>0)return}yr(n,t,s);delete e[t]});else for(t in e)t!=="$destroy"&&yr(n,t,s),delete e[t]}function au(n,t){var u=n.ng339,r=u&&hu[u];if(r){if(t){delete r.data[t];return}r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),hs(n));delete hu[u];n.ng339=i}}function vu(n,t){var r=n.ng339,u=r&&hu[r];return t&&!u&&(n.ng339=r=ka(),u=hu[r]={events:{},data:{},handle:i}),u}function ie(n,t,i){if(os(n)){var u=o(i),f=!u&&t&&!s(t),h=!t,e=vu(n,!f),r=e&&e.data;if(u)r[t]=i;else{if(h)return r;if(f)return r&&r[t];w(r,t)}}}function yu(n,t){return n.getAttribute?(" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function pu(n,t){t&&n.setAttribute&&r(t.split(" "),function(t){n.setAttribute("class",p((" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+p(t)+" "," ")))})}function wu(n,t){if(t&&n.setAttribute){var i=(" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(n){n=p(n);i.indexOf(" "+n+" ")===-1&&(i+=n+" ")});n.setAttribute("class",p(i))}}function re(n,t){var i,r;if(t)if(t.nodeType)n[n.length++]=t;else if(i=t.length,typeof i=="number"&&t.window!==t){if(i)for(r=0;r<i;r++)n[n.length++]=t[r]}else n[n.length++]=t}function cs(n,t){return bu(n,"$"+(t||"ngController")+"Controller")}function bu(n,t,r){var e,u,o;for(n.nodeType==us&&(n=n.documentElement),e=a(t)?t:[t];n;){for(u=0,o=e.length;u<o;u++)if((r=f.data(n,e[u]))!==i)return r;n=n.parentNode||n.nodeType===df&&n.host}}function ls(n){for(lu(n,!0);n.firstChild;)n.removeChild(n.firstChild)}function ue(n,t){t||lu(n);var i=n.parentNode;i&&i.removeChild(n)}function ev(t,i){if(i=i||n,i.document.readyState==="complete")i.setTimeout(t);else f(i).on("load",t)}function as(n,t){var i=wr[t.toLowerCase()];return i&&fe[wt(n)]&&i}function ov(n,t){var i=n.nodeName;return(i==="INPUT"||i==="TEXTAREA")&&ee[t]}function sv(n,t){var i=function(i,r){var u,f,o,e;if(i.isDefaultPrevented=function(){return i.defaultPrevented},u=t[r||i.type],f=u?u.length:0,f)for(h(i.immediatePropagationStopped)&&(o=i.stopImmediatePropagation,i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0;i.stopPropagation&&i.stopPropagation();o&&o.call(i)}),i.isImmediatePropagationStopped=function(){return i.immediatePropagationStopped===!0},f>1&&(u=ct(u)),e=0;e<f;e++)i.isImmediatePropagationStopped()||u[e].call(n,i)};return i.elem=n,i}function cv(){this.$get=function(){return w(b,{hasClass:function(n,t){return n.attr&&(n=n[0]),yu(n,t)},addClass:function(n,t){return n.attr&&(n=n[0]),wu(n,t)},removeClass:function(n,t){return n.attr&&(n=n[0]),pu(n,t)}})}}function hi(n,t){var r=n&&n.$$hashKey,i;return r?(typeof r=="function"&&(r=n.$$hashKey()),r):(i=typeof n,i=="function"||i=="object"&&n!==null?n.$$hashKey=i+":"+(t||fu)():i+":"+n)}function ki(n,t){if(t){var i=0;this.nextUid=function(){return++i}}r(n,this.put,this)}function yv(n){var i=n.toString().replace(ys,""),t=i.match(vs);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function pv(n,t,i){var u,e,o,f;if(typeof n=="function"){if(!(u=n.$inject)){if(u=[],n.length){if(t){l(i)&&i||(i=n.name||yv(n));throw ci("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",i);}e=n.toString().replace(ys,"");o=e.match(vs);r(o[1].split(av),function(n){n.replace(vv,function(n,t,i){u.push(i)})})}n.$inject=u}}else a(n)?(f=n.length-1,wi(n[f],"fn"),u=n.slice(0,f)):wi(n,"fn",!0);return u}function br(n,t){function y(n){return function(t,i){if(s(t))r(t,so(n));else return n(t,i)}}function g(n,t){if(bi(n,"service"),(c(t)||a(t))&&(t=u.instantiate(t)),!t.$get)throw ci("pget","Provider '{0}' must define $get factory method.",n);return v[n+p]=t}function it(n,t){return function(){var i=f.invoke(t,this);if(h(i))throw ci("undef","Provider '{0}' must return a value from $get factory method.",n);return i}}function k(n,t,i){return g(n,{$get:i!==!1?it(n,t):t})}function rt(n,t){return k(n,["$injector",function(n){return n.instantiate(t)}])}function ut(n,t){return k(n,yt(t),!1)}function et(n,t){bi(n,"constant");v[n]=t;b[n]=t}function ot(n,t){var i=u.get(n+p),r=i.$get;i.$get=function(){var n=f.invoke(r,i);return f.invoke(t,null,{$delegate:n})}}function nt(n){var t=[],i;return r(n,function(n){function f(n){for(var i,r,t=0,f=n.length;t<f;t++)i=n[t],r=u.get(i[0]),r[i[1]].apply(r,i[2])}if(!d.get(n)){d.put(n,!0);try{l(n)?(i=ir(n),t=t.concat(nt(i.requires)).concat(i._runBlocks),f(i._invokeQueue),f(i._configBlocks)):c(n)?t.push(u.invoke(n)):a(n)?t.push(u.invoke(n)):wi(n,"module")}catch(r){a(n)&&(n=n[n.length-1]);r.message&&r.stack&&r.stack.indexOf(r.message)==-1&&(r=r.message+"\n"+r.stack);throw ci("modulerr","Failed to instantiate module {0} due to:\n{1}",n,r.stack||r.message||r);}}}),t}function tt(n,i){function r(t,r){if(n.hasOwnProperty(t)){if(n[t]===w)throw ci("cdep","Circular dependency found: {0}",t+" <- "+o.join(" <- "));return n[t]}try{return o.unshift(t),n[t]=w,n[t]=i(t,r)}catch(u){n[t]===w&&delete n[t];throw u;}finally{o.shift()}}function u(n,i,u,f){typeof u=="string"&&(f=u,u=null);for(var h=[],c=br.$$annotate(n,t,f),e,o=0,s=c.length;o<s;o++){if(e=c[o],typeof e!="string")throw ci("itkn","Incorrect injection token! Expected service name as string, got {0}",e);h.push(u&&u.hasOwnProperty(e)?u[e]:r(e,f))}return a(n)&&(n=n[s]),n.apply(i,h)}function f(n,t,i){var f=Object.create((a(n)?n[n.length-1]:n).prototype||null),r=u(n,f,t,i);return s(r)||c(r)?r:f}return{invoke:u,instantiate:f,get:r,annotate:br.$$annotate,has:function(t){return v.hasOwnProperty(t+p)||n.hasOwnProperty(t)}}}t=t===!0;var w={},p="Provider",o=[],d=new ki([],!0),v={$provide:{provider:y(g),factory:y(k),service:y(rt),value:y(ut),constant:y(et),decorator:ot}},u=v.$injector=tt(v,function(n,t){ft.isString(t)&&o.push(t);throw ci("unpr","Unknown provider: {0}",o.join(" <- "));}),b={},f=b.$injector=tt(b,function(n,t){var r=u.get(n+p,t);return f.invoke(r.$get,r,i,n)});return r(nt(n),function(n){f.invoke(n||e)}),f}function wv(){var n=!0;this.disableAutoScrolling=function(){n=!1};this.$get=["$window","$location","$rootScope",function(t,i,r){function o(n){var t=null;return Array.prototype.some.call(n,function(n){if(wt(n)==="a")return t=n,!0}),t}function s(){var n=f.yOffset,i,r;return c(n)?n=n():vo(n)?(i=n[0],r=t.getComputedStyle(i),n=r.position!=="fixed"?0:i.getBoundingClientRect().bottom):k(n)||(n=0),n}function u(n){var i,r;n?(n.scrollIntoView(),i=s(),i&&(r=n.getBoundingClientRect().top,t.scrollBy(0,r-i))):t.scrollTo(0,0)}function f(n){n=l(n)?n:i.hash();var t;n?(t=e.getElementById(n))?u(t):(t=o(e.getElementsByName(n)))?u(t):n==="top"&&u(null):u(null)}var e=t.document;return n&&r.$watch(function(){return i.hash()},function(n,t){(n!==t||n!=="")&&ev(function(){r.$evalAsync(f)})}),f}]}function kr(n,t){return!n&&!t?"":n?t?(a(n)&&(n=n.join(" ")),a(t)&&(t=t.join(" ")),n+" "+t):n:t}function kv(n){for(var i,t=0;t<n.length;t++)if(i=n[t],i.nodeType===bv)return i}function dv(n){l(n)&&(n=n.split(" "));var t=rt();return r(n,function(n){n.length&&(t[n]=!0)}),t}function li(n){return s(n)?n:{}}function iy(){this.$get=["$$rAF","$timeout",function(n,t){return n.supported?function(t){return n(t)}:function(n){return t(n,0,!1)}}]}function ry(n,t,i,u){function k(n){try{n.apply(null,lr(arguments,1))}finally{if(l--,l===0)while(w.length)try{w.pop()()}catch(t){i.error(t)}}}function et(n){var t=n.indexOf("#");return t===-1?"":n.substr(t+1)}function nt(){tt();rt()}function ht(){try{return y.state}catch(n){}}function tt(){s=ht();s=h(s)?null:s;st(s,b)&&(s=b);b=s}function rt(){(v!==o.url()||a!==s)&&(v=o.url(),a=s,r(d,function(n){n(o.url(),s)}))}var o=this,ct=t[0],c=n.location,y=n.history,ut=n.setTimeout,ft=n.clearTimeout,p={},l,w,d,g,b;o.isMock=!1;l=0;w=[];o.$$completeOutstandingRequest=k;o.$$incOutstandingRequestCount=function(){l++};o.notifyWhenNoOutstandingRequests=function(n){l===0?n():w.push(n)};var s,a,v=c.href,ot=t.find("base"),it=null;tt();a=s;o.url=function(t,i,r){var e,f;return h(r)&&(r=null),c!==n.location&&(c=n.location),y!==n.history&&(y=n.history),t?(e=a===r,v===t&&(!u.history||e))?o:(f=v&&ai(v)===ai(t),v=t,a=r,!u.history||f&&e?(f||(it=t),i?c.replace(t):f?c.hash=et(t):c.href=t):(y[i?"replaceState":"pushState"](r,"",t),tt(),a=s),o):it||c.href.replace(/%27/g,"'")};o.state=function(){return s};d=[];g=!1;b=null;o.onUrlChange=function(t){if(!g){if(u.history)f(n).on("popstate",nt);f(n).on("hashchange",nt);g=!0}return d.push(t),t};o.$$applicationDestroyed=function(){f(n).off("hashchange popstate",nt)};o.$$checkUrlChange=rt;o.baseHref=function(){var n=ot.attr("href");return n?n.replace(/^(https?\:)?\/\/[^\/]*/,""):""};o.defer=function(n,t){var i;return l++,i=ut(function(){delete p[i];k(n)},t||0),p[i]=!0,i};o.defer.cancel=function(n){return p[n]?(delete p[n],ft(n),k(e),!0):!1}}function uy(){this.$get=["$window","$log","$sniffer","$document",function(n,t,i,r){return new ry(n,r,t,i)}]}function fy(){this.$get=function(){function t(t,i){function a(n){n!=f&&(r?r==n&&(r=n.n):r=n,c(n.n,n.p),c(n,f),f=n,f.n=null)}function c(n,t){n!=t&&(n&&(n.p=t),t&&(t.n=n))}if(t in n)throw y("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var o=0,l=w({},i,{id:t}),e={},s=i&&i.capacity||Number.MAX_VALUE,u={},f=null,r=null;return n[t]={put:function(n,t){if(!h(t)){if(s<Number.MAX_VALUE){var i=u[n]||(u[n]={key:n});a(i)}return n in e||o++,e[n]=t,o>s&&this.remove(r.key),t}},get:function(n){if(s<Number.MAX_VALUE){var t=u[n];if(!t)return;a(t)}return e[n]},remove:function(n){if(s<Number.MAX_VALUE){var t=u[n];if(!t)return;t==f&&(f=t.p);t==r&&(r=t.n);c(t.n,t.p);delete u[n]}delete e[n];o--},removeAll:function(){e={};o=0;u={};f=r=null},destroy:function(){e=null;l=null;u=null;delete n[t]},info:function(){return w({},l,{size:o})}}}var n={};return t.info=function(){var t={};return r(n,function(n,i){t[i]=n.info()}),t},t.get=function(t){return n[t]},t}}function ey(){this.$get=["$cacheFactory",function(n){return n("templates")}]}function bs(n,u){function k(n,t,i){var f=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,u={};return r(n,function(n,r){var e=n.match(f);if(!e)throw nt("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,n,i?"controller bindings definition":"isolate scope definition");u[r]={mode:e[1][0],collection:e[2]==="*",optional:e[3]==="?",attrName:e[4]||r}}),u}function ft(n,t){var i={isolateScope:null,bindToController:null},r,u;if(s(n.scope)&&(n.bindToController===!0?(i.bindToController=k(n.scope,t,!0),i.isolateScope={}):i.isolateScope=k(n.scope,t,!1)),s(n.bindToController)&&(i.bindToController=k(n.bindToController,t,!0)),s(i.bindToController))if(r=n.controller,u=n.controllerAs,r){if(!oy(r,u))throw nt("noident","Cannot bind to controller without identifier for directive '{0}'.",t);}else throw nt("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return i}function ot(n){var t=n.charAt(0);if(!t||t!==v(t))throw nt("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",n);if(n!==n.trim())throw nt("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",n);}var y={},b="Directive",d=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,g=/(([\w\-]+)(?:\:([^;]+))?;?)/,tt=ea("ngSrc,ngSrcset,src,srcset"),it=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,ut=/^(on[a-z]+|formaction)$/,h;this.directive=function ht(t,i){return bi(t,"directive"),l(t)?(ot(t),bf(i,"directiveFactory"),y.hasOwnProperty(t)||(y[t]=[],n.factory(t+b,["$injector","$exceptionHandler",function(n,i){var u=[];return r(y[t],function(r,f){var e,o;try{e=n.invoke(r);c(e)?e={compile:yt(e)}:!e.compile&&e.link&&(e.compile=yt(e.link));e.priority=e.priority||0;e.index=f;e.name=e.name||t;e.require=e.require||e.controller&&e.name;e.restrict=e.restrict||"EA";o=e.$$bindings=ft(e,e.name);s(o.isolateScope)&&(e.$$isolateBindings=o.isolateScope);u.push(e)}catch(h){i(h)}}),u}])),y[t].push(i)):r(t,so(ht)),this};this.aHrefSanitizationWhitelist=function(n){return o(n)?(u.aHrefSanitizationWhitelist(n),this):u.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(n){return o(n)?(u.imgSrcSanitizationWhitelist(n),this):u.imgSrcSanitizationWhitelist()};h=!0;this.debugInfoEnabled=function(n){return o(n)?(h=n,this):h};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(n,u,o,k,ft,ot,ht,ct,lt,at,vt){function gt(n,t){try{n.addClass(t)}catch(i){}}function yt(n,t,i,u,e){var s,o;return n instanceof f||(n=f(n)),r(n,function(t,i){t.nodeType==vr&&t.nodeValue.match(/\S+/)&&(n[i]=f(t).wrap("<span><\/span>").parent()[0])}),s=ui(n,t,n,i,u,e),yt.$$addScopeClass(n),o=null,function(t,i,r){var u,c;bf(t,"scope");r=r||{};var e=r.parentBoundTranscludeFn,h=r.transcludeControllers,l=r.futureParentElement;if(e&&e.$$boundTransclude&&(e=e.$$boundTransclude),o||(o=gi(l)),u=o!=="html"?f(ei(o,f("<div>").append(n).html())):i?si.clone.call(n):n,h)for(c in h)u.data("$"+c+"Controller",h[c].instance);return yt.$$addScopeInfo(u,t),i&&i(u,t),s&&s(t,u,u,e),u}}function gi(n){var t=n&&n[0];return t?wt(t)!=="foreignobject"&&t.toString().match(/SVG/)?"svg":"html":"html"}function ui(n,t,r,u,e,o){function b(n,r,u,e){var o,l,a,c,s,b,y,k,v,d,w;if(p)for(d=r.length,v=new Array(d),s=0;s<h.length;s+=3)y=h[s],v[y]=r[y];else v=r;for(s=0,b=h.length;s<b;)a=v[h[s++]],o=h[s++],l=h[s++],o?(o.scope?(c=n.$new(),yt.$$addScopeInfo(f(a),c),w=o.$$destroyBindings,w&&(o.$$destroyBindings=null,c.$on("$destroyed",w))):c=n,k=o.transcludeOnThisElement?ni(n,o.transclude,e,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&e?e:!e&&t?ni(n,t):null,o(l,c,a,u,k,o)):l&&l(n,a.childNodes,i,e)}for(var h=[],l,a,s,v,y,w,p,c=0;c<n.length;c++)l=new ri,a=fi(n[c],[],l,c===0?u:i,e),s=a.length?yi(a,n[c],l,t,r,null,[],[],o):null,s&&s.scope&&yt.$$addScopeClass(l.$$element),y=s&&s.terminal||!(v=n[c].childNodes)||!v.length?null:ui(v,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:t),(s||y)&&(h.push(c,s,y),w=!0,p=p||s),o=null;return w?b:null}function ni(n,t,i){return function(r,u,f,e,o){return r||(r=n.$new(!1,o),r.$$transcluded=!0),t(r,u,{parentBoundTranscludeFn:i,transcludeControllers:f,futureParentElement:e})}}function fi(n,t,i,r,u){var it=n.nodeType,rt=i.$attr,o,h,k,nt,tt;switch(it){case pt:ti(t,dt(wt(n)),"E",r,u);for(var a,e,f,c,v,y,w=n.attributes,b=0,ut=w&&w.length;b<ut;b++)k=!1,nt=!1,a=w[b],e=a.name,v=p(a.value),c=dt(e),(y=di.test(c))&&(e=e.replace(oe,"").substr(8).replace(/_(.)/g,function(n,t){return t.toUpperCase()})),tt=c.replace(/(Start|End)$/,""),nr(tt)&&c===tt+"Start"&&(k=e,nt=e.substr(0,e.length-5)+"end",e=e.substr(0,e.length-6)),f=dt(e.toLowerCase()),rt[f]=e,(y||!i.hasOwnProperty(f))&&(i[f]=v,as(n,f)&&(i[f]=!0)),or(n,t,v,f,y),ti(t,f,"A",r,u,k,nt);if(h=n.className,s(h)&&(h=h.animVal),l(h)&&h!=="")while(o=g.exec(h))f=dt(o[2]),ti(t,f,"C",r,u)&&(i[f]=p(o[3])),h=h.substr(o.index+o[0].length);break;case vr:ur(t,n.nodeValue);break;case kf:try{o=d.exec(n.nodeValue);o&&(f=dt(o[1]),ti(t,f,"M",r,u)&&(i[f]=p(o[2])))}catch(ft){}}return t.sort(ir),t}function ai(n,t,i){var r=[],u=0;if(t&&n.hasAttribute&&n.hasAttribute(t)){do{if(!n)throw nt("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,i);n.nodeType==pt&&(n.hasAttribute(t)&&u++,n.hasAttribute(i)&&u--);r.push(n);n=n.nextSibling}while(u>0)}else r.push(n);return f(r)}function vi(n,t,i){return function(r,u,f,e,o){return u=ai(u[0],t,i),n(r,u,f,e,o)}}function yi(n,r,u,e,h,v,y,w,b){function nr(n,t,i,r){n&&(i&&(n=vi(n,i,r)),n.require=k.require,n.directiveName=ut,(d===k||k.$$isolateScope)&&(n=bi(n,{isolateScope:!0})),y.push(n));t&&(i&&(t=vi(t,i,r)),t.require=k.require,t.directiveName=ut,(d===k||k.$$isolateScope)&&(t=bi(t,{isolateScope:!0})),w.push(t))}function yi(n,t,i,r){var u,s,f,c;if(l(t)){var e=t.match(it),o=t.substring(e[0].length),h=e[1]||e[3],v=e[2]==="?";if(h==="^^"?i=i.parent():(u=r&&r[o],u=u&&u.instance),u||(s="$"+o+"Controller",u=h?i.inheritedData(s):i.data(s)),!u&&!v)throw nt("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,n);}else if(a(t))for(u=[],f=0,c=t.length;f<c;f++)u[f]=yi(n,t[f],i,r);return u||null}function ur(n,t,i,r,u,f){var h=rt(),c,s;for(c in r){var e=r[c],l={$scope:e===d||e.$$isolateScope?u:f,$element:n,$attrs:t,$transclude:i},o=e.controller;o=="@"&&(o=t[e.name]);s=ot(o,l,!0,e.controllerAs);h[e.name]=s;at||n.data("$"+e.name+"Controller",s.instance)}return h}function ht(n,t,e,o,s,h){function st(n,t,r){var u;return er(n)||(r=t,t=n,n=i),at&&(u=b),r||(r=at?c.parent():c),s(n,t,u,r,ut)}var a,ft,l,v,p,b,tt,c,g,nt,rt,ot,it,ut;if(r===e?(g=u,c=u.$$element):(c=f(e),g=new ri(c,u)),d&&(p=t.$new(!0)),s&&(tt=st,tt.$$boundTransclude=s),ct&&(b=ur(c,g,tt,ct,p,t)),d&&(yt.$$addScopeInfo(c,p,!0,!(et&&(et===d||et===d.$$originalDirective))),yt.$$addScopeClass(c,!0),p.$$isolateBindings=d.$$isolateBindings,oi(t,g,p,p.$$isolateBindings,d,p)),b){nt=d||lt;nt&&b[nt.name]&&(rt=nt.$$bindings.bindToController,v=b[nt.name],v&&v.identifier&&rt&&(ot=v,h.$$destroyBindings=oi(t,g,v.instance,rt,nt)));for(a in b)v=b[a],it=v(),it!==v.instance&&(v.instance=it,c.data("$"+k.name+"Controller",it),v===ot&&(h.$$destroyBindings(),h.$$destroyBindings=oi(t,g,it,rt,nt)))}for(a=0,ft=y.length;a<ft;a++)l=y[a],ki(l,l.isolateScope?p:t,c,g,l.require&&yi(l.directiveName,l.require,c,b),tt);for(ut=t,d&&(d.template||d.templateUrl===null)&&(ut=p),n&&n(ut,e.childNodes,i,s),a=w.length-1;a>=0;a--)l=w[a],ki(l,l.isolateScope?p:t,c,g,l.require&&yi(l.directiveName,l.require,c,b),tt)}var st,ui,gt,si;b=b||{};var wt=-Number.MAX_VALUE,lt,ct=b.controllerDirectives,d=b.newIsolateScopeDirective,et=b.templateDirective,ni=b.nonTlbTranscludeDirective,hi=!1,ci=!1,at=b.hasElementTranscludeDirective,g=u.$$element=f(r),k,ut,ft,ti=v,dt=e,vt,tt;for(st=0,ui=n.length;st<ui;st++){if(k=n[st],gt=k.$$start,si=k.$$end,gt&&(g=ai(r,gt,si)),ft=i,wt>k.priority)break;if((tt=k.scope)&&(k.templateUrl||(s(tt)?(bt("new/isolated scope",d||lt,k,g),d=k):bt("new/isolated scope",d,k,g)),lt=lt||k),ut=k.name,!k.templateUrl&&k.controller&&(tt=k.controller,ct=ct||rt(),bt("'"+ut+"' controller",ct[ut],k,g),ct[ut]=k),(tt=k.transclude)&&(hi=!0,k.$$tlb||(bt("transclusion",ni,k,g),ni=k),tt=="element"?(at=!0,wt=k.priority,ft=g,g=u.$$element=f(t.createComment(" "+ut+": "+u[ut]+" ")),r=g[0],ii(h,lr(ft),r),dt=yt(ft,e,wt,ti&&ti.name,{nonTlbTranscludeDirective:ni})):(ft=f(te(r)).contents(),g.empty(),dt=yt(ft,e))),k.template)if(ci=!0,bt("template",et,k,g),et=k,tt=c(k.template)?k.template(g,u):k.template,tt=li(tt),k.replace){if(ti=k,ft=ne(tt)?[]:ds(ei(k.templateNamespace,p(tt))),r=ft[0],ft.length!=1||r.nodeType!==pt)throw nt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",ut,"");ii(h,g,r);var di={$attr:{}},gi=fi(r,[],di),ir=n.splice(st+1,n.length-(st+1));d&&pi(gi);n=n.concat(gi).concat(ir);wi(u,di);ui=n.length}else g.html(tt);if(k.templateUrl)ci=!0,bt("template",et,k,g),et=k,k.replace&&(ti=k),ht=tr(n.splice(st,n.length-st),g,u,h,hi&&dt,y,w,{controllerDirectives:ct,newIsolateScopeDirective:d,templateDirective:et,nonTlbTranscludeDirective:ni}),ui=n.length;else if(k.compile)try{vt=k.compile(g,u,dt);c(vt)?nr(null,vt,gt,si):vt&&nr(vt.pre,vt.post,gt,si)}catch(rr){o(rr,kt(g))}k.terminal&&(ht.terminal=!0,wt=Math.max(wt,k.priority))}return ht.scope=lt&&lt.scope===!0,ht.transcludeOnThisElement=hi,ht.elementTranscludeOnThisElement=at,ht.templateOnThisElement=ci,ht.transclude=dt,b.hasElementTranscludeDirective=at,ht}function pi(n){for(var t=0,i=n.length;t<i;t++)n[t]=lf(n[t],{$$isolateScope:!0})}function ti(t,r,u,f,e,s,h){var l;if(r===e)return null;if(l=null,y.hasOwnProperty(r))for(var c,v=n.get(r+b),a=0,p=v.length;a<p;a++)try{c=v[a];(f===i||f>c.priority)&&c.restrict.indexOf(u)!=-1&&(s&&(c=lf(c,{$$start:s,$$end:h})),t.push(c),l=c)}catch(w){o(w)}return l}function nr(t){if(y.hasOwnProperty(t))for(var r,u=n.get(t+b),i=0,f=u.length;i<f;i++)if(r=u[i],r.multiElement)return!0;return!1}function wi(n,t){var u=t.$attr,f=n.$attr,i=n.$$element;r(n,function(i,r){r.charAt(0)!="$"&&(t[r]&&t[r]!==i&&(i+=(r==="style"?";":" ")+t[r]),n.$set(r,i,!0,u[r]))});r(t,function(t,r){r=="class"?(gt(i,t),n["class"]=(n["class"]?n["class"]+" ":"")+t):r=="style"?(i.attr("style",i.attr("style")+";"+t),n.style=(n.style?n.style+";":"")+t):r.charAt(0)=="$"||n.hasOwnProperty(r)||(n[r]=t,f[r]=u[r])})}function tr(n,t,i,u,e,o,h,l){var y=[],v,w,b=t[0],a=n.shift(),g=lf(a,{templateUrl:null,transclude:null,replace:null,$$originalDirective:a}),d=c(a.templateUrl)?a.templateUrl(t,i):a.templateUrl,tt=a.templateNamespace;return t.empty(),k(lt.getTrustedResourceUrl(d)).then(function(c){var k,rt,ut,st,ft,ct;if(c=li(c),a.replace){if(ut=ne(c)?[]:ds(ei(tt,p(c))),k=ut[0],ut.length!=1||k.nodeType!==pt)throw nt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",a.name,d);rt={$attr:{}};ii(u,t,k);ft=fi(k,[],rt);s(a.scope)&&pi(ft);n=ft.concat(n);wi(i,rt)}else k=b,t.html(c);for(n.unshift(g),v=yi(n,k,i,e,t,a,o,h,l),r(u,function(n,i){n==k&&(u[i]=t[0])}),w=ui(t[0].childNodes,e);y.length;){var et=y.shift(),ot=y.shift(),lt=y.shift(),ht=y.shift(),it=t[0];et.$$destroyed||(ot!==b&&(ct=ot.className,l.hasElementTranscludeDirective&&a.replace||(it=te(k)),ii(lt,f(ot),it),gt(f(it),ct)),st=v.transcludeOnThisElement?ni(et,v.transclude,ht):ht,v(w,et,it,u,st,v))}y=null}),function(n,t,i,r,u){var f=u;t.$$destroyed||(y?y.push(t,i,r,f):(v.transcludeOnThisElement&&(f=ni(t,v.transclude,u)),v(w,t,i,r,f,v)))}}function ir(n,t){var i=t.priority-n.priority;return i!==0?i:n.name!==t.name?n.name<t.name?-1:1:n.index-t.index}function bt(n,t,i,r){if(t)throw nt("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,i.name,n,kt(r));}function ur(n,t){var i=u(t,!0);i&&n.push({priority:0,compile:function(n){var t=n.parent(),r=!!t.length;return r&&yt.$$addBindingClass(t),function(n,t){var u=t.parent();r||yt.$$addBindingClass(u);yt.$$addBindingInfo(u,i.expressions);n.$watch(i,function(n){t[0].nodeValue=n})}}})}function ei(n,i){n=v(n||"html");switch(n){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+n+">"+i+"<\/"+n+">",r.childNodes[0].childNodes;default:return i}}function fr(n,t){if(t=="srcdoc")return lt.HTML;var i=wt(n);if(t=="xlinkHref"||i=="form"&&t=="action"||i!="img"&&(t=="src"||t=="ngSrc"))return lt.RESOURCE_URL}function or(n,t,i,r,f){var o=fr(n,r),e;if(f=tt[r]||f,e=u(i,!0,o,f),e){if(r==="multiple"&&wt(n)==="select")throw nt("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",kt(n));t.push({priority:100,compile:function(){return{pre:function(n,t,s){var c=s.$$observers||(s.$$observers={}),h;if(ut.test(r))throw nt("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(h=s[r],h!==i&&(e=h&&u(h,!0,o,f),i=h),e)&&(s[r]=e(n),(c[r]||(c[r]=[])).$$inter=!0,(s.$$observers&&s.$$observers[r].$$scope||n).$watch(e,function(n,t){r==="class"&&n!=t?s.$updateClass(n,t):s.$set(r,n)}))}}}})}}function ii(n,i,r){var u=i[0],a=i.length,v=u.parentNode,e,y,c,s,w,l;if(n)for(e=0,y=n.length;e<y;e++)if(n[e]==u){n[e++]=r;for(var o=e,h=o+a-1,p=n.length;o<p;o++,h++)h<p?n[o]=n[h]:delete n[o];n.length-=a-1;n.context===u&&(n.context=r);break}for(v&&v.replaceChild(r,u),c=t.createDocumentFragment(),c.appendChild(u),f(r).data(f(u).data()),et?(wf=!0,et.cleanData([u])):delete f.cache[u[f.expando]],s=1,w=i.length;s<w;s++)l=i[s],f(l).remove(),c.appendChild(l),delete i[s];i[0]=r;i.length=1}function bi(n,t){return w(function(){return n.apply(null,arguments)},n,t)}function ki(n,t,i,r,u,f){try{n(t,i,r,u,f)}catch(e){o(e,kt(i))}}function oi(n,t,i,f,o,s){var h,c;return(r(f,function(r,f){var s=r.attrName,v=r.optional,b=r.mode,l,c,p,y,a,w;switch(b){case"@":t.$observe(s,function(n){i[f]=n});t.$$observers[s].$$scope=n;t[s]&&(i[f]=u(t[s])(n));break;case"=":if(v&&!t[s])return;c=ft(t[s]);y=c.literal?st:function(n,t){return n===t||n!==n&&t!==t};p=c.assign||function(){l=i[f]=c(n);throw nt("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[s],o.name);};l=i[f]=c(n);a=function(t){return y(t,i[f])||(y(t,l)?p(n,t=i[f]):i[f]=t),l=t};a.$stateful=!0;w=r.collection?n.$watchCollection(t[s],a):n.$watch(ft(t[s],a),null,c.literal);h=h||[];h.push(w);break;case"&":if(!t.hasOwnProperty(s)&&v)break;if(c=ft(t[s]),c===e&&v)break;i[f]=function(t){return c(n,t)}}}),c=h?function(){for(var n=0,t=h.length;n<t;++n)h[n]()}:e,s&&c!==e)?(s.$on("$destroy",c),e):c}var ri=function(n,t){if(t)for(var u=Object.keys(t),r,i=0,f=u.length;i<f;i++)r=u[i],this[r]=t[r];else this.$attr={};this.$$element=n};ri.prototype={$normalize:dt,$addClass:function(n){n&&n.length>0&&at.addClass(this.$$element,n)},$removeClass:function(n){n&&n.length>0&&at.removeClass(this.$$element,n)},$updateClass:function(n,t){var r=ks(n,t),i;r&&r.length&&at.addClass(this.$$element,r);i=ks(t,n);i&&i.length&&at.removeClass(this.$$element,i)},$set:function(n,t,u,f){var w=this.$$element[0],b=as(w,n),a=ov(w,n),k=n,h,s,v,l,y;if(b?(this.$$element.prop(n,t),f=b):a&&(this[a]=t,k=a),this[n]=t,f?this.$attr[n]=f:(f=this.$attr[n],f||(this.$attr[n]=f=is(n,"-"))),h=wt(this.$$element),h==="a"&&n==="href"||h==="img"&&n==="src")this[n]=t=vt(t,n==="src");else if(h==="img"&&n==="srcset"){var e="",d=p(t),g=/\s/.test(d)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,c=d.split(g),nt=Math.floor(c.length/2);for(s=0;s<nt;s++)v=s*2,e+=vt(p(c[v]),!0),e+=" "+p(c[v+1]);l=p(c[s*2]).split(/\s/);e+=vt(p(l[0]),!0);l.length===2&&(e+=" "+p(l[1]));this[n]=t=e}u!==!1&&(t===null||t===i?this.$$element.removeAttr(f):this.$$element.attr(f,t));y=this.$$observers;y&&r(y[k],function(n){try{n(t)}catch(i){o(i)}})},$observe:function(n,t){var i=this,u=i.$$observers||(i.$$observers=rt()),r=u[n]||(u[n]=[]);return r.push(t),ht.$evalAsync(function(){!r.$$inter&&i.hasOwnProperty(n)&&t(i[n])}),function(){sr(r,t)}}};var hi=u.startSymbol(),ci=u.endSymbol(),li=hi=="{{"||ci=="}}"?rr:function(n){return n.replace(/\{\{/g,hi).replace(/}}/g,ci)},di=/^ngAttr[A-Z]/;return yt.$$addBindingInfo=h?function(n,t){var i=n.data("$binding")||[];a(t)?i=i.concat(t):i.push(t);n.data("$binding",i)}:e,yt.$$addBindingClass=h?function(n){gt(n,"ng-binding")}:e,yt.$$addScopeInfo=h?function(n,t,i,r){var u=i?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";n.data(u,t)}:e,yt.$$addScopeClass=h?function(n,t){gt(n,t?"ng-isolate-scope":"ng-scope")}:e,yt}]}function dt(n){return pr(n.replace(oe,""))}function ks(n,t){var u="",e=n.split(/\s+/),o=t.split(/\s+/),i,f,r;n:for(i=0;i<e.length;i++){for(f=e[i],r=0;r<o.length;r++)if(f==o[r])continue n;u+=(u.length>0?" ":"")+f}return u}function ds(n){var t,i;if(n=f(n),t=n.length,t<=1)return n;while(t--)i=n[t],i.nodeType===kf&&gl.call(n,t,1);return n}function oy(n,t){if(t&&l(t))return t;if(l(n)){var i=se.exec(n);if(i)return i[3]}}function sy(){var n={},t=!1;this.register=function(t,i){bi(t,"controller");s(t)?w(n,t):n[t]=i};this.allowGlobals=function(){t=!0};this.$get=["$injector","$window",function(r,u){function f(n,t,i,r){if(!(n&&s(n.$scope)))throw y("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);n.$scope[t]=i}return function(e,o,h,v){var y,k,p,b,d;if(h=h===!0,v&&l(v)&&(b=v),l(e)){if(k=e.match(se),!k)throw gs("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);p=k[1];b=b||k[3];e=n.hasOwnProperty(p)?n[p]:rs(o.$scope,p,!0)||(t?rs(u,p,!0):i);wi(e,p,!0)}return h?(d=(a(e)?e[e.length-1]:e).prototype,y=Object.create(d||null),b&&f(o,b,y,p||e.name),w(function(){var n=r.invoke(e,y,o,p);return n!==y&&(s(n)||c(n))&&(y=n,b&&f(o,b,y,p||e.name)),y},{instance:y,identifier:b})):(y=r.instantiate(e,o,p),b&&f(o,b,y,p||e.name),y)}}]}function hy(){this.$get=["$window",function(n){return f(n.document)}]}function cy(){this.$get=["$log",function(n){return function(){n.error.apply(n,arguments)}}]}function ce(n){return s(n)?ot(n)?n.toISOString():ar(n):n}function yy(){this.$get=function(){return function(n){if(!n)return"";var t=[];return oo(n,function(n,i){n===null||h(n)||(a(n)?r(n,function(n){t.push(lt(i)+"="+lt(ce(n)))}):t.push(lt(i)+"="+lt(ce(n))))}),t.join("&")}}}function py(){this.$get=function(){return function(n){function t(n,u,f){n===null||h(n)||(a(n)?r(n,function(n){t(n,u+"[]")}):s(n)&&!ot(n)?oo(n,function(n,i){t(n,u+(f?"":"[")+i+(f?"":"]"))}):i.push(lt(u)+"="+lt(ce(n))))}if(!n)return"";var i=[];return t(n,"",!0),i.join("&")}}}function le(n,t){var i,r;return l(n)&&(i=n.replace(vy,"").trim(),i&&(r=t("Content-Type"),(r&&r.indexOf(nh)===0||wy(i))&&(n=wo(i)))),n}function wy(n){var t=n.match(ly);return t&&ay[t[0]].test(n)}function th(n){function u(n,i){n&&(t[n]=t[n]?t[n]+", "+i:i)}var t=rt(),i;return l(n)?r(n.split("\n"),function(n){i=n.indexOf(":");u(v(p(n.substr(0,i))),p(n.substr(i+1)))}):s(n)&&r(n,function(n,t){u(v(t),p(n))}),t}function ih(n){var t;return function(i){if(t||(t=th(n)),i){var r=t[v(i)];return r===void 0&&(r=null),r}return t}}function rh(n,t,i,u){return c(u)?u(n,t,i):(r(u,function(r){n=r(n,t,i)}),n)}function ae(n){return 200<=n&&n<300}function by(){var n=this.defaults={transformResponse:[le],transformRequest:[function(n){return s(n)&&!ra(n)&&!fa(n)&&!ua(n)?ar(n):n}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ct(he),put:ct(he),patch:ct(he)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1,u;this.useApplyAsync=function(n){return o(n)?(t=!!n,this):t};u=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(f,e,p,b,k,d){function g(t){function a(n){var t=w({},n);return t.data=n.data?rh(n.data,n.headers,n.status,u.transformResponse):n.data,ae(n.status)?t:k.reject(t)}function b(n,t){var i,u={};return r(n,function(n,r){c(n)?(i=n(t),i!=null&&(u[r]=i)):u[r]=n}),u}function g(t){var i=n.headers,u=w({},t.headers),r,f,e;i=w({},i.common,i[v(t.method)]);n:for(r in i){f=v(r);for(e in u)if(v(e)===f)continue n;u[r]=i[r]}return b(u,ct(t))}var u,o,s;if(!ft.isObject(t))throw y("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);u=w({method:"get",transformRequest:n.transformRequest,transformResponse:n.transformResponse,paramSerializer:n.paramSerializer},t);u.headers=g(t);u.method=gi(u.method);u.paramSerializer=l(u.paramSerializer)?d.get(u.paramSerializer):u.paramSerializer;var p=function(t){var u=t.headers,f=rh(t.data,ih(u),i,t.transformRequest);return h(f)&&r(u,function(n,t){v(t)==="content-type"&&delete u[t]}),h(t.withCredentials)&&!h(n.withCredentials)&&(t.withCredentials=n.withCredentials),ut(t,f).then(a,a)},e=[p,i],f=k.when(u);for(r(nt,function(n){(n.request||n.requestError)&&e.unshift(n.request,n.requestError);(n.response||n.responseError)&&e.push(n.response,n.responseError)});e.length;)o=e.shift(),s=e.shift(),f=f.then(o,s);return f.success=function(n){return wi(n,"fn"),f.then(function(t){n(t.data,t.status,t.headers,u)}),f},f.error=function(n){return wi(n,"fn"),f.then(null,function(t){n(t.data,t.status,t.headers,u)}),f},f}function it(){r(arguments,function(n){g[n]=function(t,i){return g(w({},i||{},{method:n,url:t}))}})}function rt(){r(arguments,function(n){g[n]=function(t,i,r){return g(w({},r||{},{method:n,url:t,data:i}))}})}function ut(r,u){function ut(n,i,r,u){function f(){y(i,n,r,u)}l&&(ae(n)?l.put(v,[n,i,th(r),u]):l.remove(v));t?b.$applyAsync(f):(f(),b.$$phase||b.$apply())}function y(n,t,i,u){t=Math.max(t,0);(ae(t)?p.resolve:p.reject)({data:n,status:t,headers:ih(i),config:r,statusText:u})}function it(n){y(n.data,n.status,ct(n.headers()),n.statusText)}function rt(){var n=g.pendingRequests.indexOf(r);n!==-1&&g.pendingRequests.splice(n,1)}var p=k.defer(),w=p.promise,l,c,nt=r.headers,v=et(r.url,r.paramSerializer(r.params)),d;return g.pendingRequests.push(r),w.then(rt,rt),(r.cache||n.cache)&&r.cache!==!1&&(r.method==="GET"||r.method==="JSONP")&&(l=s(r.cache)?r.cache:s(n.cache)?n.cache:tt),l&&(c=l.get(v),o(c)?eu(c)?c.then(it,it):a(c)?y(c[1],c[0],ct(c[2]),c[3]):y(c,200,{},"OK"):l.put(v,w)),h(c)&&(d=ic(r.url)?e()[r.xsrfCookieName||n.xsrfCookieName]:i,d&&(nt[r.xsrfHeaderName||n.xsrfHeaderName]=d),f(r.method,v,u,ut,nt,r.timeout,r.withCredentials,r.responseType)),w}function et(n,t){return t.length>0&&(n+=(n.indexOf("?")==-1?"?":"&")+t),n}var tt=p("$http"),nt;return n.paramSerializer=l(n.paramSerializer)?d.get(n.paramSerializer):n.paramSerializer,nt=[],r(u,function(n){nt.unshift(l(n)?d.get(n):d.invoke(n))}),g.pendingRequests=[],it("get","delete","head","jsonp"),rt("post","put","patch"),g.defaults=n,g}]}function ky(){return new n.XMLHttpRequest}function dy(){this.$get=["$browser","$window","$document",function(n,t,i){return gy(n,ky,n.defer,t.angular.callbacks,i[0])}]}function gy(n,t,u,f,s){function h(n,t,i){var r=s.createElement("script"),u=null;return r.type="text/javascript",r.src=n,r.async=!0,u=function(n){yr(r,"load",u);yr(r,"error",u);s.body.removeChild(r);r=null;var e=-1,o="unknown";n&&(n.type!=="load"||f[t].called||(n={type:"error"}),o=n.type,e=n.type==="error"?404:200);i&&i(e,o)},cu(r,"load",u),cu(r,"error",u),s.body.appendChild(r),u}return function(s,c,l,a,y,p,w,b){function rt(){g&&g();k&&k.abort()}function it(t,r,f,o,s){tt!==i&&u.cancel(tt);g=k=null;t(r,f,o,s);n.$$completeOutstandingRequest(e)}var d,g,k,nt,tt;if(n.$$incOutstandingRequestCount(),c=c||n.url(),v(s)=="jsonp")d="_"+(f.counter++).toString(36),f[d]=function(n){f[d].data=n;f[d].called=!0},g=h(c.replace("JSON_CALLBACK","angular.callbacks."+d),d,function(n,t){it(a,n,f[d].data,"",t);f[d]=e});else{if(k=t(),k.open(s,c,!0),r(y,function(n,t){o(n)&&k.setRequestHeader(t,n)}),k.onload=function(){var i=k.statusText||"",t="response"in k?k.response:k.responseText,n=k.status===1223?204:k.status;n===0&&(n=t?200:ui(c).protocol=="file"?404:0);it(a,n,t,k.getAllResponseHeaders(),i)},nt=function(){it(a,-1,null,null,"")},k.onerror=nt,k.onabort=nt,w&&(k.withCredentials=!0),b)try{k.responseType=b}catch(ut){if(b!=="json")throw ut;}k.send(l)}p>0?tt=u(rt,p):eu(p)&&p.then(rt)}}function np(){var n="{{",t="}}";this.startSymbol=function(t){return t?(n=t,this):n};this.endSymbol=function(n){return n?(t=n,this):t};this.$get=["$parse","$exceptionHandler","$sce",function(i,r,u){function s(n){return"\\\\\\"+n}function l(i){return i.replace(v,n).replace(y,t)}function p(n){if(n==null)return"";switch(typeof n){case"string":break;case"number":n=""+n;break;default:n=ar(n)}return n}function f(f,s,v,y){function ot(n){try{return n=et(n),y&&!o(n)?n:p(n)}catch(t){r(ii.interr(f,t))}}var rt,et;y=!!y;for(var d,nt,b=0,g=[],tt=[],ut=f.length,it,k=[],ft=[];b<ut;)if((d=f.indexOf(n,b))!=-1&&(nt=f.indexOf(t,d+e))!=-1)b!==d&&k.push(l(f.substring(b,d))),it=f.substring(d+e,nt),g.push(it),tt.push(i(it,ot)),b=nt+a,ft.push(k.length),k.push("");else{b!==ut&&k.push(l(f.substring(b)));break}return v&&k.length>1&&ii.throwNoconcat(f),!s||g.length?(rt=function(n){for(var t=0,i=g.length;t<i;t++){if(y&&h(n[t]))return;k[ft[t]]=n[t]}return k.join("")},et=function(n){return v?u.getTrusted(v,n):u.valueOf(n)},w(function(n){var t=0,i=g.length,u=new Array(i);try{for(;t<i;t++)u[t]=tt[t](n);return rt(u)}catch(e){r(ii.interr(f,e))}},{exp:f,expressions:g,$$watchDelegate:function(n,t){var i;return n.$watchGroup(tt,function(r,u){var f=rt(r);c(t)&&t.call(this,f,r!==u?i:f,n);i=f})}})):void 0}var e=n.length,a=t.length,v=new RegExp(n.replace(/./g,s),"g"),y=new RegExp(t.replace(/./g,s),"g");return f.startSymbol=function(){return n},f.endSymbol=function(){return t},f}]}function tp(){this.$get=["$rootScope","$window","$q","$$q",function(n,t,i,r){function f(f,e,s,h){var v=arguments.length>4,p=v?lr(arguments,4):[],w=t.setInterval,b=t.clearInterval,a=0,y=o(h)&&!h,l=(y?r:i).defer(),c=l.promise;return s=o(s)?s:0,c.then(null,null,v?function(){f.apply(null,p)}:f),c.$$intervalId=w(function(){l.notify(a++);s>0&&a>=s&&(l.resolve(a),b(c.$$intervalId),delete u[c.$$intervalId]);y||n.$apply()},e),u[c.$$intervalId]=l,c}var u={};return f.cancel=function(n){return n&&n.$$intervalId in u?(u[n.$$intervalId].reject("canceled"),t.clearInterval(n.$$intervalId),delete u[n.$$intervalId],!0):!1},f}]}function ip(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(n){return n===1?"one":"other"}}}}function ve(n){for(var t=n.split("/"),i=t.length;i--;)t[i]=ou(t[i]);return t.join("/")}function uh(n,t){var i=ui(n);t.$$protocol=i.protocol;t.$$host=i.hostname;t.$$port=it(i.port)||up[i.protocol]||null}function fh(n,t){var r=n.charAt(0)!=="/",i;r&&(n="/"+n);i=ui(n);t.$$path=decodeURIComponent(r&&i.pathname.charAt(0)==="/"?i.pathname.substring(1):i.pathname);t.$$search=go(i.search);t.$$hash=decodeURIComponent(i.hash);t.$$path&&t.$$path.charAt(0)!="/"&&(t.$$path="/"+t.$$path)}function gt(n,t){if(t.indexOf(n)===0)return t.substr(n.length)}function ai(n){var t=n.indexOf("#");return t==-1?n:n.substr(0,t)}function du(n){return n.replace(/(#.+)|#$/,"$1")}function ye(n){return n.substr(0,ai(n).lastIndexOf("/")+1)}function fp(n){return n.substring(0,n.indexOf("/",n.indexOf("//")+2))}function pe(n,t){this.$$html5=!0;t=t||"";var r=ye(n);uh(n,this);this.$$parse=function(n){var t=gt(r,n);if(!l(t))throw ku("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',n,r);fh(t,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var n=yf(this.$$search),t=this.$$hash?"#"+ou(this.$$hash):"";this.$$url=ve(this.$$path)+(n?"?"+n:"")+t;this.$$absUrl=r+this.$$url.substr(1)};this.$$parseLinkUrl=function(u,f){if(f&&f[0]==="#")return this.hash(f.slice(1)),!0;var e,s,o;return(e=gt(n,u))!==i?(s=e,o=(e=gt(t,e))!==i?r+(gt("/",e)||e):n+s):(e=gt(r,u))!==i?o=r+e:r==u+"/"&&(o=r),o&&this.$$parse(o),!!o}}function we(n,t){var i=ye(n);uh(n,this);this.$$parse=function(r){function e(n,t,i){var u=/^\/[A-Z]:(\/.*)/,r;return(t.indexOf(i)===0&&(t=t.replace(i,"")),u.exec(t))?n:(r=u.exec(n),r?r[1]:n)}var f=gt(n,r)||gt(i,r),u;f.charAt(0)==="#"?(u=gt(t,f),h(u)&&(u=f)):u=this.$$html5?f:"";fh(u,this);this.$$path=e(this.$$path,u,n);this.$$compose()};this.$$compose=function(){var i=yf(this.$$search),r=this.$$hash?"#"+ou(this.$$hash):"";this.$$url=ve(this.$$path)+(i?"?"+i:"")+r;this.$$absUrl=n+(this.$$url?t+this.$$url:"")};this.$$parseLinkUrl=function(t){return ai(n)==ai(t)?(this.$$parse(t),!0):!1}}function eh(n,t){this.$$html5=!0;we.apply(this,arguments);var i=ye(n);this.$$parseLinkUrl=function(r,u){if(u&&u[0]==="#")return this.hash(u.slice(1)),!0;var f,e;return n==ai(r)?f=r:(e=gt(i,r))?f=n+t+e:i===r+"/"&&(f=i),f&&this.$$parse(f),!!f};this.$$compose=function(){var i=yf(this.$$search),r=this.$$hash?"#"+ou(this.$$hash):"";this.$$url=ve(this.$$path)+(i?"?"+i:"")+r;this.$$absUrl=n+t+this.$$url}}function gu(n){return function(){return this[n]}}function sh(n,t){return function(i){return h(i)?this[n]:(this[n]=t(i),this.$$compose(),this)}}function ep(){var t="",n={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(n){return o(n)?(t=n,this):t};this.html5Mode=function(t){return or(t)?(n.enabled=t,this):s(t)?(or(t.enabled)&&(n.enabled=t.enabled),or(t.requireBase)&&(n.requireBase=t.requireBase),or(t.rewriteLinks)&&(n.rewriteLinks=t.rewriteLinks),this):n};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,r,u,e,o){function w(n,t,i){var u=h.url(),f=h.$$state;try{r.url(n,t,i);h.$$state=r.state()}catch(e){h.url(u);h.$$state=f;throw e;}}function b(n,t){i.$broadcast("$locationChangeSuccess",h.absUrl(),n,h.$$state,t)}var h,a,y=r.baseHref(),c=r.url(),v,p,l;if(n.enabled){if(!y&&n.requireBase)throw ku("nobase","$location in HTML5 mode requires a <base> tag to be present!");v=fp(c)+(y||"/");a=u.history?pe:eh}else v=ai(c),a=we;h=new a(v,"#"+t);h.$$parseLinkUrl(c,c);h.$$state=r.state();p=/^\s*(javascript|mailto):/i;e.on("click",function(t){var u,c,l;if(n.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&t.which!=2&&t.button!=2){for(u=f(t.target);wt(u[0])!=="a";)if(u[0]===e[0]||!(u=u.parent())[0])return;(c=u.prop("href"),l=u.attr("href")||u.attr("xlink:href"),s(c)&&c.toString()==="[object SVGAnimatedString]"&&(c=ui(c.animVal).href),p.test(c))||!c||u.attr("target")||t.isDefaultPrevented()||h.$$parseLinkUrl(c,l)&&(t.preventDefault(),h.absUrl()!=r.url()&&(i.$apply(),o.angular["ff-684208-preventDefault"]=!0))}});du(h.absUrl())!=du(c)&&r.url(h.absUrl(),!0);l=!0;r.onUrlChange(function(n,t){i.$evalAsync(function(){var r=h.absUrl(),u=h.$$state,f;(h.$$parse(n),h.$$state=t,f=i.$broadcast("$locationChangeStart",n,r,t,u).defaultPrevented,h.absUrl()===n)&&(f?(h.$$parse(r),h.$$state=u,w(r,!1,u)):(l=!1,b(r,u)))});i.$$phase||i.$digest()});return i.$watch(function(){var t=du(r.url()),e=du(h.absUrl()),n=r.state(),o=h.$$replace,f=t!==e||h.$$html5&&u.history&&n!==h.$$state;(l||f)&&(l=!1,i.$evalAsync(function(){var r=h.absUrl(),u=i.$broadcast("$locationChangeStart",r,t,h.$$state,n).defaultPrevented;h.absUrl()===r&&(u?(h.$$parse(t),h.$$state=n):(f&&w(r,o,n===h.$$state?null:h.$$state),b(t,n)))}));h.$$replace=!1}),h}]}function op(){var n=!0,t=this;this.debugEnabled=function(t){return o(t)?(n=t,this):n};this.$get=["$window",function(i){function f(n){return n instanceof Error&&(n.stack?n=n.message&&n.stack.indexOf(n.message)===-1?"Error: "+n.message+"\n"+n.stack:n.stack:n.sourceURL&&(n=n.message+"\n"+n.sourceURL+":"+n.line)),n}function u(n){var t=i.console||{},u=t[n]||t.log||e,o=!1;try{o=!!u.apply}catch(s){}return o?function(){var n=[];return r(arguments,function(t){n.push(f(t))}),u.apply(t,n)}:function(n,t){u(n,t==null?"":t)}}return{log:u("log"),info:u("info"),warn:u("warn"),error:u("error"),debug:function(){var i=u("debug");return function(){n&&i.apply(t,arguments)}}()}}]}function ri(n,t){if(n==="__defineGetter__"||n==="__defineSetter__"||n==="__lookupGetter__"||n==="__lookupSetter__"||n==="__proto__")throw ut("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return n}function vt(n,t){if(n)if(n.constructor===n)throw ut("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);else if(n.window===n)throw ut("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);else if(n.children&&(n.nodeName||n.prop&&n.attr&&n.find))throw ut("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);else if(n===Object)throw ut("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t);return n}function hh(n,t){if(n)if(n.constructor===n)throw ut("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);else if(n===sp||n===hp||n===cp)throw ut("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t);}function lp(n,t){return typeof n!="undefined"?n:t}function lh(n,t){return typeof n=="undefined"?t:typeof t=="undefined"?n:n+t}function ah(n,t){var i=n(t);return!i.$stateful}function d(n,t){var i,f;switch(n.type){case u.Program:i=!0;r(n.body,function(n){d(n.expression,t);i=i&&n.expression.constant});n.constant=i;break;case u.Literal:n.constant=!0;n.toWatch=[];break;case u.UnaryExpression:d(n.argument,t);n.constant=n.argument.constant;n.toWatch=n.argument.toWatch;break;case u.BinaryExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=n.left.toWatch.concat(n.right.toWatch);break;case u.LogicalExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=n.constant?[]:[n];break;case u.ConditionalExpression:d(n.test,t);d(n.alternate,t);d(n.consequent,t);n.constant=n.test.constant&&n.alternate.constant&&n.consequent.constant;n.toWatch=n.constant?[]:[n];break;case u.Identifier:n.constant=!1;n.toWatch=[n];break;case u.MemberExpression:d(n.object,t);n.computed&&d(n.property,t);n.constant=n.object.constant&&(!n.computed||n.property.constant);n.toWatch=[n];break;case u.CallExpression:i=n.filter?ah(t,n.callee.name):!1;f=[];r(n.arguments,function(n){d(n,t);i=i&&n.constant;n.constant||f.push.apply(f,n.toWatch)});n.constant=i;n.toWatch=n.filter&&ah(t,n.callee.name)?f:[n];break;case u.AssignmentExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=[n];break;case u.ArrayExpression:i=!0;f=[];r(n.elements,function(n){d(n,t);i=i&&n.constant;n.constant||f.push.apply(f,n.toWatch)});n.constant=i;n.toWatch=f;break;case u.ObjectExpression:i=!0;f=[];r(n.properties,function(n){d(n.value,t);i=i&&n.value.constant;n.value.constant||f.push.apply(f,n.value.toWatch)});n.constant=i;n.toWatch=f;break;case u.ThisExpression:n.constant=!1;n.toWatch=[]}}function vh(n){if(n.length==1){var r=n[0].expression,t=r.toWatch;return t.length!==1?t:t[0]!==r?t:i}}function yh(n){return n.type===u.Identifier||n.type===u.MemberExpression}function ph(n){if(n.body.length===1&&yh(n.body[0].expression))return{type:u.AssignmentExpression,left:n.body[0].expression,right:{type:u.NGValueParameter},operator:"="}}function wh(n){return n.body.length===0||n.body.length===1&&(n.body[0].expression.type===u.Literal||n.body[0].expression.type===u.ArrayExpression||n.body[0].expression.type===u.ObjectExpression)}function bh(n){return n.constant}function kh(n,t){this.astBuilder=n;this.$filter=t}function dh(n,t){this.astBuilder=n;this.$filter=t}function rf(n,t,i,r){var e,u,o,f;for(vt(n,r),e=t.split("."),o=0;e.length>1;o++)u=ri(e.shift(),r),f=vt(n[u],r),f||(f={},n[u]=f),n=f;return u=ri(e.shift(),r),vt(n[u],r),n[u]=i,i}function uf(n){return n=="constructor"}function be(n){return c(n.valueOf)?n.valueOf():gh.call(n)}function yp(){var n=rt(),t=rt();this.$get=["$filter","$sniffer",function(u,f){function s(n,t){return n==null||t==null?n===t:typeof n=="object"&&(n=be(n),typeof n=="object")?!1:n===t||n!==n&&t!==t}function h(n,t,r,u,f){var e=u.inputs,h,a,c,l,o,v;if(e.length===1)return a=s,e=e[0],n.$watch(function(n){var t=e(n);return s(t,a)||(h=u(n,i,i,[t]),a=t&&be(t)),h},t,r,f);for(c=[],l=[],o=0,v=e.length;o<v;o++)c[o]=s,l[o]=null;return n.$watch(function(n){for(var r,f=!1,t=0,o=e.length;t<o;t++)r=e[t](n),(f||(f=!s(r,c[t])))&&(l[t]=r,c[t]=r&&be(r));return f&&(h=u(n,i,i,l)),h},t,r,f)}function l(n,t,i,r){var u,f;return u=n.$watch(function(n){return r(n)},function(n,i,r){f=n;c(t)&&t.apply(this,arguments);o(n)&&r.$$postDigest(function(){o(f)&&u()})},i)}function a(n,t,i,u){function s(n){var t=!0;return r(n,function(n){o(n)||(t=!1)}),t}var f,e;return f=n.$watch(function(n){return u(n)},function(n,i,r){e=n;c(t)&&t.call(this,n,i,r);s(n)&&r.$$postDigest(function(){s(e)&&f()})},i)}function w(n,t,i,r){var u;return u=n.$watch(function(n){return r(n)},function(){c(t)&&t.apply(this,arguments);u()},i)}function v(n,t){if(!t)return n;var r=n.$$watchDelegate,u=r!==a&&r!==l,i=u?function(i,r,u,f){var e=n(i,r,u,f);return t(e,i,r)}:function(i,r,u,f){var e=n(i,r,u,f),s=t(e,i,r);return o(e)?s:e};return n.$$watchDelegate&&n.$$watchDelegate!==h?i.$$watchDelegate=n.$$watchDelegate:t.$stateful||(i.$$watchDelegate=h,i.inputs=n.inputs?n.inputs:[n]),i}var y={csp:f.csp,expensiveChecks:!1},p={csp:f.csp,expensiveChecks:!0};return function(i,r,f){var o,b,s,c;switch(typeof i){case"string":if(i=i.trim(),s=i,c=f?t:n,o=c[s],!o){i.charAt(0)===":"&&i.charAt(1)===":"&&(b=!0,i=i.substring(2));var k=f?p:y,d=new nf(k),g=new tf(d,u,k);o=g.parse(i);o.constant?o.$$watchDelegate=w:b?o.$$watchDelegate=o.literal?a:l:o.inputs&&(o.$$watchDelegate=h);c[s]=o}return v(o,r);case"function":return v(i,r);default:return e}}}]}function pp(){this.$get=["$rootScope","$exceptionHandler",function(n,t){return nc(function(t){n.$evalAsync(t)},t)}]}function wp(){this.$get=["$browser","$exceptionHandler",function(n,t){return nc(function(t){n.defer(t)},t)}]}function nc(n,t){function k(n,t,i){function u(t){return function(i){r||(r=!0,t.call(n,i))}}var r=!1;return[u(t),u(i)]}function v(){this.$$state={status:0}}function o(n,t){return function(i){t.call(n,i)}}function g(n){var e,r,f,u,o;for(f=n.pending,n.processScheduled=!1,n.pending=i,u=0,o=f.length;u<o;++u){r=f[u][0];e=f[u][n.status];try{c(e)?r.resolve(e(n.value)):n.status===1?r.resolve(n.value):r.reject(n.value)}catch(s){r.reject(s);t(s)}}}function h(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,n(function(){g(t)}))}function u(){this.promise=new v;this.resolve=o(this,this.resolve);this.reject=o(this,this.reject);this.notify=o(this,this.notify)}function tt(n){var i=new u,f=0,t=a(n)?[]:{};return r(n,function(n,r){f++;w(n).then(function(n){t.hasOwnProperty(r)||(t[r]=n,--f||i.resolve(t))},function(n){t.hasOwnProperty(r)||i.reject(n)})}),f===0&&i.resolve(t),i.promise}var l=y("$q",TypeError),d=function(){return new u},f;v.prototype={then:function(n,t,i){var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,n,t,i]),this.$$state.status>0&&h(this.$$state),r.promise},"catch":function(n){return this.then(null,n)},"finally":function(n,t){return this.then(function(t){return p(t,!0,n)},function(t){return p(t,!1,n)},t)}};u.prototype={resolve:function(n){this.promise.$$state.status||(n===this.promise?this.$$reject(l("qcycle","Expected promise to be resolved with value other than itself '{0}'",n)):this.$$resolve(n))},$$resolve:function(n){var i,r=k(this,this.$$resolve,this.$$reject);try{(s(n)||c(n))&&(i=n&&n.then);c(i)?(this.promise.$$state.status=-1,i.call(n,r[0],r[1],this.notify)):(this.promise.$$state.value=n,this.promise.$$state.status=1,h(this.promise.$$state))}catch(u){r[1](u);t(u)}},reject:function(n){this.promise.$$state.status||this.$$reject(n)},$$reject:function(n){this.promise.$$state.value=n;this.promise.$$state.status=2;h(this.promise.$$state)},notify:function(i){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&n(function(){for(var u,f,n=0,e=r.length;n<e;n++){f=r[n][0];u=r[n][3];try{f.notify(c(u)?u(i):i)}catch(o){t(o)}}})}};var nt=function(n){var t=new u;return t.reject(n),t.promise},e=function(n,t){var i=new u;return t?i.resolve(n):i.reject(n),i.promise},p=function(n,t,i){var r=null;try{c(i)&&(r=i())}catch(u){return e(u,!1)}return eu(r)?r.then(function(){return e(n,t)},function(n){return e(n,!1)}):e(n,t)},w=function(n,t,i,r){var f=new u;return f.resolve(n),f.promise.then(t,i,r)};return f=function b(n){function i(n){t.resolve(n)}function r(n){t.reject(n)}if(!c(n))throw l("norslvr","Expected resolverFn, got '{0}'",n);if(!(this instanceof b))return new b(n);var t=new u;return n(i,r),t.promise},f.defer=d,f.reject=nt,f.when=w,f.all=tt,f}function bp(){this.$get=["$window","$timeout",function(n,t){function c(){for(var t,n=0;n<i.length;n++)t=i[n],t&&(i[n]=null,t());u=i.length=0}function o(n){var t=i.length;return u++,i.push(n),t===0&&(r=h(c)),function(){t>=0&&(i[t]=null,t=null,--u==0&&r&&(r(),r=null,i.length=0))}}var f=n.requestAnimationFrame||n.webkitRequestAnimationFrame,s=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.webkitCancelRequestAnimationFrame,e=!!f,h=e?function(n){var t=f(n);return function(){s(t)}}:function(n){var i=t(n,16.66,!1);return function(){t.cancel(i)}},r,u,i;return o.supported=e,u=0,i=[],o}]}function kp(){function f(n){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=fu();this.$$ChildScope=null}return t.prototype=n,t}var i=10,u=y("$rootScope"),n=null,t=null;this.digestTtl=function(n){return arguments.length&&(i=n),i};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(o,l,a,v){function ut(n){n.currentScope.$$destroyed=!0}function w(){this.$id=fu();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function nt(n){if(y.$$phase)throw u("inprog","{0} already in progress",y.$$phase);y.$$phase=n}function d(){y.$$phase=null}function g(n,t){do n.$$watchersCount+=t;while(n=n.$parent)}function tt(n,t,i){do n.$$listenerCount[i]-=t,n.$$listenerCount[i]===0&&delete n.$$listenerCount[i];while(n=n.$parent)}function it(){}function rt(){while(k.length)try{k.shift()()}catch(n){l(n)}t=null}function ft(){t===null&&(t=v.defer(function(){y.$apply(rt)}))}w.prototype={constructor:w,$new:function(n,t){var i;return t=t||this,n?(i=new w,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=f(this)),i=new this.$$ChildScope),i.$parent=t,i.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=i,t.$$childTail=i):t.$$childHead=t.$$childTail=i,(n||t!=this)&&i.$on("$destroy",ut),i},$watch:function(t,i,r,u){var f=a(t);if(f.$$watchDelegate)return f.$$watchDelegate(this,i,r,f,t);var s=this,o=s.$$watchers,h={fn:i,last:it,get:f,exp:u||t,eq:!!r};return n=null,c(i)||(h.fn=e),o||(o=s.$$watchers=[]),o.unshift(h),g(this,1),function(){sr(o,h)>=0&&g(s,-1);n=null}},$watchGroup:function(n,t){function c(){o=!1;h?(h=!1,t(i,i,u)):t(i,f,u)}var f=new Array(n.length),i=new Array(n.length),e=[],u=this,o=!1,h=!0,s;return n.length?n.length===1?this.$watch(n[0],function(n,r,u){i[0]=n;f[0]=r;t(i,n===r?i:f,u)}):(r(n,function(n,t){var r=u.$watch(n,function(n,r){i[t]=n;f[t]=r;o||(o=!0,u.$evalAsync(c))});e.push(r)}),function(){while(e.length)e.shift()()}):(s=!0,u.$evalAsync(function(){s&&t(i,i,u)}),function(){s=!1})},$watchCollection:function(n,t){function y(n){var a,e,y,t,o,v;if(i=n,!h(i)){if(s(i))if(ei(i))for(r!==c&&(r=c,f=r.length=0,u++),a=i.length,f!==a&&(u++,r.length=f=a),v=0;v<a;v++)o=r[v],t=i[v],y=o!==o&&t!==t,y||o===t||(u++,r[v]=t);else{r!==l&&(r=l={},f=0,u++);a=0;for(e in i)i.hasOwnProperty(e)&&(a++,t=i[e],o=r[e],e in r?(y=o!==o&&t!==t,y||o===t||(u++,r[e]=t)):(f++,r[e]=t,u++));if(f>a){u++;for(e in r)i.hasOwnProperty(e)||(f--,delete r[e])}}else r!==i&&(r=i,u++);return u}}function b(){var n,r;if(v?(v=!1,t(i,i,o)):t(i,e,o),p)if(s(i))if(ei(i))for(e=new Array(i.length),n=0;n<i.length;n++)e[n]=i[n];else{e={};for(r in i)uu.call(i,r)&&(e[r]=i[r])}else e=i}y.$stateful=!0;var o=this,i,r,e,p=t.length>1,u=0,w=a(n,y),c=[],l={},v=!0,f=0;return this.$watch(w,b)},$digest:function(){var r,e,o,k,g,s,tt=i,ut,f,ft=this,h=[],a,w;nt("$digest");v.$$checkUrlChange();this===y&&t!==null&&(v.defer.cancel(t),rt());n=null;do{for(s=!1,f=ft;p.length;){try{w=p.shift();w.scope.$eval(w.expression,w.locals)}catch(et){l(et)}n=null}n:do{if(k=f.$$watchers)for(g=k.length;g--;)try{if(r=k[g],r)if((e=r.get(f))===(o=r.last)||(r.eq?st(e,o):typeof e=="number"&&typeof o=="number"&&isNaN(e)&&isNaN(o))){if(r===n){s=!1;break n}}else s=!0,n=r,r.last=r.eq?bt(e,null):e,r.fn(e,o===it?e:o,f),tt<5&&(a=4-tt,h[a]||(h[a]=[]),h[a].push({msg:c(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:e,oldVal:o}))}catch(et){l(et)}if(!(ut=f.$$watchersCount&&f.$$childHead||f!==ft&&f.$$nextSibling))while(f!==ft&&!(ut=f.$$nextSibling))f=f.$parent}while(f=ut);if((s||p.length)&&!tt--){d();throw u("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,h);}}while(s||p.length);for(d();b.length;)try{b.shift()()}catch(et){l(et)}},$destroy:function(){var n,t;if(!this.$$destroyed){n=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===y&&v.$$applicationDestroyed();g(this,-this.$$watchersCount);for(t in this.$$listenerCount)tt(this,this.$$listenerCount[t],t);n&&n.$$childHead==this&&(n.$$childHead=this.$$nextSibling);n&&n.$$childTail==this&&(n.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=e;this.$on=this.$watch=this.$watchGroup=function(){return e};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(n,t){return a(n)(this,t)},$evalAsync:function(n,t){y.$$phase||p.length||v.defer(function(){p.length&&y.$digest()});p.push({scope:this,expression:n,locals:t})},$$postDigest:function(n){b.push(n)},$apply:function(n){try{return nt("$apply"),this.$eval(n)}catch(t){l(t)}finally{d();try{y.$digest()}catch(t){l(t);throw t;}}},$applyAsync:function(n){function i(){t.$eval(n)}var t=this;n&&k.push(i);ft()},$on:function(n,t){var r=this.$$listeners[n],i,u;r||(this.$$listeners[n]=r=[]);r.push(t);i=this;do i.$$listenerCount[n]||(i.$$listenerCount[n]=0),i.$$listenerCount[n]++;while(i=i.$parent);return u=this,function(){var i=r.indexOf(t);i!==-1&&(r[i]=null,tt(u,1,n))}},$emit:function(n){var o=[],u,r=this,e=!1,t={name:n,targetScope:r,stopPropagation:function(){e=!0},preventDefault:function(){t.defaultPrevented=!0},defaultPrevented:!1},s=cr([t],arguments,1),i,f;do{for(u=r.$$listeners[n]||o,t.currentScope=r,i=0,f=u.length;i<f;i++){if(!u[i]){u.splice(i,1);i--;f--;continue}try{u[i].apply(null,s)}catch(h){l(h)}}if(e)return t.currentScope=null,t;r=r.$parent}while(r);return t.currentScope=null,t},$broadcast:function(n){var r=this,t=r,e=r,u={name:n,targetScope:r,preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},s,f,i,o;if(!r.$$listenerCount[n])return u;for(s=cr([u],arguments,1);t=e;){for(u.currentScope=t,f=t.$$listeners[n]||[],i=0,o=f.length;i<o;i++){if(!f[i]){f.splice(i,1);i--;o--;continue}try{f[i].apply(null,s)}catch(h){l(h)}}if(!(e=t.$$listenerCount[n]&&t.$$childHead||t!==r&&t.$$nextSibling))while(t!==r&&!(e=t.$$nextSibling))t=t.$parent}return u.currentScope=null,u}};var y=new w,p=y.$$asyncQueue=[],b=y.$$postDigestQueue=[],k=y.$$applyAsyncQueue=[];return y}]}function dp(){var n=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return o(t)?(n=t,this):n};this.imgSrcSanitizationWhitelist=function(n){return o(n)?(t=n,this):t};this.$get=function(){return function(i,r){var f=r?t:n,u;return(u=ui(i).href,u!==""&&!u.match(f))?"unsafe:"+u:i}}}function gp(n){if(n==="self")return n;if(l(n)){if(n.indexOf("***")>-1)throw ni("iwcard","Illegal sequence *** in string matcher.  String: {0}",n);return n=af(n).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+n+"$")}if(ur(n))return new RegExp("^"+n.source+"$");throw ni("imatcher",'Matchers may only be "self", string patterns or RegExp objects');}function tc(n){var t=[];return o(n)&&r(n,function(n){t.push(gp(n))}),t}function nw(){this.SCE_CONTEXTS=ht;var n=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(n=tc(t)),n};this.resourceUrlBlacklist=function(n){return arguments.length&&(t=tc(n)),t};this.$get=["$injector",function(r){function s(n,t){return n==="self"?ic(t):!!n.exec(t.href)}function h(i){for(var e=ui(i.toString()),f=!1,r=0,u=n.length;r<u;r++)if(s(n[r],e)){f=!0;break}if(f)for(r=0,u=t.length;r<u;r++)if(s(t[r],e)){f=!1;break}return f}function f(n){var t=function(n){this.$$unwrapTrustedValue=function(){return n}};return n&&(t.prototype=new n),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function c(n,t){var r=u.hasOwnProperty(n)?u[n]:null;if(!r)throw ni("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",n,t);if(t===null||t===i||t==="")return t;if(typeof t!="string")throw ni("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",n);return new r(t)}function l(n){return n instanceof e?n.$$unwrapTrustedValue():n}function a(n,t){if(t===null||t===i||t==="")return t;var r=u.hasOwnProperty(n)?u[n]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(n===ht.RESOURCE_URL){if(h(t))return t;throw ni("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString());}else if(n===ht.HTML)return o(t);throw ni("unsafe","Attempting to use an unsafe value in a safe context.");}var o=function(){throw ni("unsafe","Attempting to use an unsafe value in a safe context.");},e,u;return r.has("$sanitize")&&(o=r.get("$sanitize")),e=f(),u={},u[ht.HTML]=f(e),u[ht.CSS]=f(e),u[ht.URL]=f(e),u[ht.JS]=f(e),u[ht.RESOURCE_URL]=f(u[ht.URL]),{trustAs:c,getTrusted:a,valueOf:l}}]}function tw(){var n=!0;this.enabled=function(t){return arguments.length&&(n=!!t),n};this.$get=["$parse","$sceDelegate",function(t,i){var u;if(n&&nr<8)throw ni("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");u=ct(ht);u.isEnabled=function(){return n};u.trustAs=i.trustAs;u.getTrusted=i.getTrusted;u.valueOf=i.valueOf;n||(u.trustAs=u.getTrusted=function(n,t){return t},u.valueOf=rr);u.parseAs=function(n,i){var r=t(i);return r.literal&&r.constant?r:t(i,function(t){return u.getTrusted(n,t)})};var f=u.parseAs,e=u.getTrusted,o=u.trustAs;return r(ht,function(n,t){var i=v(t);u[pr("parse_as_"+i)]=function(t){return f(n,t)};u[pr("get_trusted_"+i)]=function(t){return e(n,t)};u[pr("trust_as_"+i)]=function(t){return o(n,t)}}),u}]}function iw(){this.$get=["$window","$document",function(n,t){var e={},o=it((/android (\d+)/.exec(v((n.navigator||{}).userAgent))||[])[1]),y=/Boxee/i.test((n.navigator||{}).userAgent),s=t[0]||{},i,r=s.body&&s.body.style,u=!1,f=!1,c,a;if(r){for(a in r)if(c=/^(Moz|webkit|ms)(?=[A-Z])/.exec(a)){i=c[0];i=i.substr(0,1).toUpperCase()+i.substr(1);break}i||(i="WebkitOpacity"in r&&"webkit");u=!!("transition"in r||i+"Transition"in r);f=!!("animation"in r||i+"Animation"in r);!o||u&&f||(u=l(r.webkitTransition),f=l(r.webkitAnimation))}return{history:!!(n.history&&n.history.pushState&&!(o<4)&&!y),hasEvent:function(n){if(n==="input"&&nr<=11)return!1;if(h(e[n])){var t=s.createElement("div");e[n]="on"+n in t}return e[n]},csp:pi(),vendorPrefix:i,transitions:u,animations:f,android:o}}]}function rw(){this.$get=["$templateCache","$http","$q",function(n,t,i){function r(u,f){function s(n){if(!f)throw nt("tpload","Failed to load template: {0} (HTTP status: {1} {2})",u,n.status,n.statusText);return i.reject(n)}var e,o;return r.totalPendingRequests++,e=t.defaults&&t.defaults.transformResponse,a(e)?e=e.filter(function(n){return n!==le}):e===le&&(e=null),o={cache:n,transformResponse:e},t.get(u,o)["finally"](function(){r.totalPendingRequests--}).then(function(t){return n.put(u,t.data),t.data},s)}return r.totalPendingRequests=0,r}]}function uw(){this.$get=["$rootScope","$browser","$location",function(n,t,i){var u={};return u.findBindings=function(n,t,i){var f=n.getElementsByClassName("ng-binding"),u=[];return r(f,function(n){var f=ft.element(n).data("$binding");f&&r(f,function(r){if(i){var f=new RegExp("(^|\\s)"+af(t)+"(\\s|\\||$)");f.test(r)&&u.push(n)}else r.indexOf(t)!=-1&&u.push(n)})}),u},u.findModels=function(n,t,i){for(var u=["ng-","data-ng-","ng\\:"],r=0;r<u.length;++r){var e=i?"=":"*=",o="["+u[r]+"model"+e+'"'+t+'"]',f=n.querySelectorAll(o);if(f.length)return f}},u.getLocation=function(){return i.url()},u.setLocation=function(t){t!==i.url()&&(i.url(t),n.$digest())},u.whenStable=function(n){t.notifyWhenNoOutstandingRequests(n)},u}]}function fw(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(n,t,i,r,u){function s(s,h,l){c(s)||(l=h,h=s,s=e);var w=lr(arguments,3),p=o(l)&&!l,a=(p?r:i).defer(),v=a.promise,y;return y=t.defer(function(){try{a.resolve(s.apply(null,w))}catch(t){a.reject(t);u(t)}finally{delete f[v.$$timeoutId]}p||n.$apply()},h),v.$$timeoutId=y,f[y]=a,v}var f={};return s.cancel=function(n){return n&&n.$$timeoutId in f?(f[n.$$timeoutId].reject("canceled"),delete f[n.$$timeoutId],t.defer.cancel(n.$$timeoutId)):!1},s}]}function ui(n){var t=n;return nr&&(g.setAttribute("href",t),t=g.href),g.setAttribute("href",t),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}function ic(n){var t=l(n)?ui(n):n;return t.protocol===ke.protocol&&t.host===ke.host}function ew(){this.$get=yt(n)}function rc(n){function u(n){try{return decodeURIComponent(n)}catch(t){return n}}var f=n[0]||{},t={},r="";return function(){var s,n,e,o,h,c=f.cookie||"";if(c!==r)for(r=c,s=r.split("; "),t={},e=0;e<s.length;e++)n=s[e],o=n.indexOf("="),o>0&&(h=u(n.substring(0,o)),t[h]===i&&(t[h]=u(n.substring(o+1))));return t}}function ow(){this.$get=rc}function uc(n){function t(u,f){if(s(u)){var e={};return r(u,function(n,i){e[i]=t(i,n)}),e}return n.factory(u+i,f)}var i="Filter";this.register=t;this.$get=["$injector",function(n){return function(t){return n.get(t+i)}}];t("currency",fc);t("date",cc);t("filter",sw);t("json",kw);t("limitTo",dw);t("lowercase",lc);t("number",ec);t("orderBy",vc);t("uppercase",ac)}function sw(){return function(n,t,i){if(!ei(n)){if(n==null)return n;throw y("filter")("notarray","Expected array but received: {0}",n);}var f=de(t),r,u;switch(f){case"function":r=t;break;case"boolean":case"null":case"number":case"string":u=!0;case"object":r=cw(t,i,u);break;default:return n}return Array.prototype.filter.call(n,r)}}function hw(n){return c(n.toString)&&n.toString!==Object.prototype.toString}function cw(n,t,i){var r=s(n)&&"$"in n;return t===!0?t=st:c(t)||(t=function(n,t){return h(n)?!1:n===null||t===null?n===t:s(t)||s(n)&&!hw(n)?!1:(n=v(""+n),t=v(""+t),n.indexOf(t)!==-1)}),function(u){return r&&!s(u)?vi(u,n.$,t,!1):vi(u,n,t,i)}}function vi(n,t,i,r,u){var v=de(n),s=de(t),f,e,o,l;if(s==="string"&&t.charAt(0)==="!")return!vi(n,t.substring(1),i,r);if(a(n))return n.some(function(n){return vi(n,t,i,r)});switch(v){case"object":if(r){for(f in n)if(f.charAt(0)!=="$"&&vi(n[f],t,i,!0))return!0;return u?!1:vi(n,t,i,!1)}if(s==="object"){for(f in t)if((e=t[f],!c(e)&&!h(e))&&(o=f==="$",l=o?n:n[f],!vi(l,e,i,o,o)))return!1;return!0}return i(n,t);case"function":return!1;default:return i(n,t)}}function de(n){return n===null?"null":typeof n}function fc(n){var t=n.NUMBER_FORMATS;return function(n,i,r){return h(i)&&(i=t.CURRENCY_SYM),h(r)&&(r=t.PATTERNS[1].maxFrac),n==null?n:oc(n,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,i)}}function ec(n){var t=n.NUMBER_FORMATS;return function(n,i){return n==null?n:oc(n,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,i)}}function oc(n,t,i,r,u){var a,l,y,d,o,c;if(s(n)||(a=n<0,n=Math.abs(n),l=n===Infinity,!l&&!isFinite(n)))return"";var v=n+"",e="",b=!1,k=[];if(l&&(e="∞"),l||v.indexOf("e")===-1||(y=v.match(/([\d\.]+)e(-?)(\d+)/),y&&y[2]=="-"&&y[3]>u+1?n=0:(e=v,b=!0)),l||b)u>0&&n<1&&(e=n.toFixed(u),n=parseFloat(e));else{d=(v.split(ge)[1]||"").length;h(u)&&(u=Math.min(Math.max(t.minFrac,d),t.maxFrac));n=+(Math.round(+(n.toString()+"e"+u)).toString()+"e"+-u);o=(""+n).split(ge);c=o[0];o=o[1]||"";var f,p=0,w=t.lgSize,g=t.gSize;if(c.length>=w+g)for(p=c.length-w,f=0;f<p;f++)(p-f)%g==0&&f!==0&&(e+=i),e+=c.charAt(f);for(f=p;f<c.length;f++)(c.length-f)%w==0&&f!==0&&(e+=i),e+=c.charAt(f);while(o.length<u)o+="0";u&&u!=="0"&&(e+=r+o.substr(0,u))}return n===0&&(a=!1),k.push(a?t.negPre:t.posPre,e,a?t.negSuf:t.posSuf),k.join("")}function ff(n,t,i){var r="";for(n<0&&(r="-",n=-n),n=""+n;n.length<t;)n="0"+n;return i&&(n=n.substr(n.length-t)),r+n}function tt(n,t,i,r){return i=i||0,function(u){var f=u["get"+n]();return(i>0||f>-i)&&(f+=i),f===0&&i==-12&&(f=12),ff(f,t,r)}}function ef(n,t){return function(i,r){var u=i["get"+n](),f=gi(t?"SHORT"+n:n);return r[f][u]}}function lw(n,t,i){var r=-1*i,u=r>=0?"+":"";return u+(ff(Math[r>0?"floor":"ceil"](r/60),2)+ff(Math.abs(r%60),2))}function sc(n){var t=new Date(n,0,1).getDay();return new Date(n,0,(t<=4?5:12)-t)}function aw(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function hc(n){return function(t){var i=sc(t.getFullYear()),r=aw(t),u=+r-+i,f=1+Math.round(u/6048e5);return ff(f,n)}}function vw(n,t){return n.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function no(n,t){return n.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function yw(n,t){return n.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function cc(n){function i(n){var i;if(i=n.match(t)){var r=new Date(0),u=0,f=0,e=i[8]?r.setUTCFullYear:r.setFullYear,o=i[8]?r.setUTCHours:r.setHours;i[9]&&(u=it(i[9]+i[10]),f=it(i[9]+i[11]));e.call(r,it(i[1]),it(i[2])-1,it(i[3]));var s=it(i[4]||0)-u,h=it(i[5]||0)-f,c=it(i[6]||0),l=Math.round(parseFloat("0."+(i[7]||0))*1e3);return o.call(r,s,h,c,l),r}return n}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,u,f){var c="",e=[],o,s,h;if(u=u||"mediumDate",u=n.DATETIME_FORMATS[u]||u,l(t)&&(t=bw.test(t)?it(t):i(t)),k(t)&&(t=new Date(t)),!ot(t)||!isFinite(t.getTime()))return t;while(u)s=ww.exec(u),s?(e=cr(e,s,1),u=e.pop()):(e.push(u),u=null);return h=t.getTimezoneOffset(),f&&(h=bo(f,t.getTimezoneOffset()),t=vf(t,f,!0)),r(e,function(i){o=pw[i];c+=o?o(t,n.DATETIME_FORMATS,h):i.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function kw(){return function(n,t){return h(t)&&(t=2),ar(n,t)}}function dw(){return function(n,t,i){return(t=Math.abs(Number(t))===Infinity?Number(t):it(t),isNaN(t))?n:(k(n)&&(n=n.toString()),!a(n)&&!l(n))?n:(i=!i||isNaN(i)?0:it(i),i=i<0&&i>=-n.length?n.length+i:i,t>=0?n.slice(i,i+t):i===0?n.slice(t,n.length):n.slice(Math.max(0,i+t),i))}}function vc(n){return function(t,i,r){function s(n,t){for(var u,r=0;r<i.length;r++)if(u=i[r](n,t),u!==0)return u;return 0}function u(n,t){return t?function(t,i){return n(i,t)}:n}function e(n){switch(typeof n){case"number":case"boolean":case"string":return!0;default:return!1}}function o(n){return n===null?"null":typeof n.valueOf=="function"&&(n=n.valueOf(),e(n))?n:typeof n.toString=="function"&&(n=n.toString(),e(n))?n:""}function f(n,t){var i=typeof n,r=typeof t;return i===r&&i==="object"&&(n=o(n),t=o(t)),i===r?(i==="string"&&(n=n.toLowerCase(),t=t.toLowerCase()),n===t)?0:n<t?-1:1:i<r?-1:1}return ei(t)?(i=a(i)?i:[i],i.length===0&&(i=["+"]),i=i.map(function(t){var r=!1,i=t||rr,e;if(l(t)){if((t.charAt(0)=="+"||t.charAt(0)=="-")&&(r=t.charAt(0)=="-",t=t.substring(1)),t==="")return u(f,r);if(i=n(t),i.constant)return e=i(),u(function(n,t){return f(n[e],t[e])},r)}return u(function(n,t){return f(i(n),i(t))},r)}),tr.call(t).sort(u(s,r))):t}}function yi(n){return c(n)&&(n={link:n}),n.restrict=n.restrict||"AC",yt(n)}function gw(n,t){n.$name=t}function pc(n,t,u,f,e){var o=this,s=[],h=o.$$parentForm=n.parent().controller("form")||nu;o.$error={};o.$$success={};o.$pending=i;o.$name=e(t.name||t.ngForm||"")(u);o.$dirty=!1;o.$pristine=!0;o.$valid=!0;o.$invalid=!1;o.$submitted=!1;h.$addControl(o);o.$rollbackViewValue=function(){r(s,function(n){n.$rollbackViewValue()})};o.$commitViewValue=function(){r(s,function(n){n.$commitViewValue()})};o.$addControl=function(n){bi(n.$name,"input");s.push(n);n.$name&&(o[n.$name]=n)};o.$$renameControl=function(n,t){var i=n.$name;o[i]===n&&delete o[i];o[t]=n;n.$name=t};o.$removeControl=function(n){n.$name&&o[n.$name]===n&&delete o[n.$name];r(o.$pending,function(t,i){o.$setValidity(i,null,n)});r(o.$error,function(t,i){o.$setValidity(i,null,n)});r(o.$$success,function(t,i){o.$setValidity(i,null,n)});sr(s,n)};sl({ctrl:this,$element:n,set:function(n,t,i){var r=n[t],u;r?(u=r.indexOf(i),u===-1&&r.push(i)):n[t]=[i]},unset:function(n,t,i){var r=n[t];r&&(sr(r,i),r.length===0&&delete n[t])},parentForm:h,$animate:f});o.$setDirty=function(){f.removeClass(n,di);f.addClass(n,sf);o.$dirty=!0;o.$pristine=!1;h.$setDirty()};o.$setPristine=function(){f.setClass(n,di,sf+" "+to);o.$dirty=!1;o.$pristine=!0;o.$submitted=!1;r(s,function(n){n.$setPristine()})};o.$setUntouched=function(){r(s,function(n){n.$setUntouched()})};o.$setSubmitted=function(){f.addClass(n,to);o.$submitted=!0;h.$setSubmitted()}}function ro(n){n.$formatters.push(function(t){return n.$isEmpty(t)?t:t.toString()})}function eb(n,t,i,r,u,f){tu(n,t,i,r,u,f);ro(r)}function tu(n,t,i,r,u,f){var c=v(t[0].type),s,o,e,h;if(!u.android){s=!1;t.on("compositionstart",function(){s=!0});t.on("compositionend",function(){s=!1;o()})}if(o=function(n){if(e&&(f.defer.cancel(e),e=null),!s){var u=t.val(),o=n&&n.type;c==="password"||i.ngTrim&&i.ngTrim==="false"||(u=p(u));(r.$viewValue!==u||u===""&&r.$$hasNativeValidators)&&r.$setViewValue(u,o)}},u.hasEvent("input"))t.on("input",o);else{h=function(n,t,i){e||(e=f.defer(function(){e=null;t&&t.value===i||o(n)}))};t.on("keydown",function(n){var t=n.keyCode;t===91||15<t&&t<19||37<=t&&t<=40||h(n,this,this.value)});if(u.hasEvent("paste"))t.on("paste cut",h)}t.on("change",o);r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function ob(n,t){var i;if(ot(n))return n;if(l(n)&&(io.lastIndex=0,i=io.exec(n),i)){var r=+i[1],s=+i[2],u=0,f=0,e=0,o=0,h=sc(r),c=(s-1)*7;return t&&(u=t.getHours(),f=t.getMinutes(),e=t.getSeconds(),o=t.getMilliseconds()),new Date(r,0,h.getDate()+c,u,f,e,o)}return NaN}function of(n,t){return function(i,u){var e,f;if(ot(i))return i;if(l(i)){if(i.charAt(0)=='"'&&i.charAt(i.length-1)=='"'&&(i=i.substring(1,i.length-1)),ib.test(i))return new Date(i);if(n.lastIndex=0,e=n.exec(i),e)return e.shift(),f=u?{yyyy:u.getFullYear(),MM:u.getMonth()+1,dd:u.getDate(),HH:u.getHours(),mm:u.getMinutes(),ss:u.getSeconds(),sss:u.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(n,i){i<t.length&&(f[t[i]]=+n)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,f.sss*1e3||0)}return NaN}}function iu(n,t,r,u){return function(f,e,s,c,l,a,v){function k(n){return n&&!(n.getTime&&n.getTime()!==n.getTime())}function d(n){return o(n)?ot(n)?n:r(n):i}var y,p,w,b;tl(f,e,s,c);tu(f,e,s,c,l,a);y=c&&c.$options&&c.$options.timezone;c.$$parserName=n;c.$parsers.push(function(n){if(c.$isEmpty(n))return null;if(t.test(n)){var u=r(n,p);return y&&(u=vf(u,y)),u}return i});c.$formatters.push(function(n){if(n&&!ot(n))throw hf("datefmt","Expected `{0}` to be a date",n);return k(n)?(p=n,p&&y&&(p=vf(p,y,!0)),v("date")(n,u,y)):(p=null,"")});(o(s.min)||s.ngMin)&&(c.$validators.min=function(n){return!k(n)||h(w)||r(n)>=w},s.$observe("min",function(n){w=d(n);c.$validate()}));(o(s.max)||s.ngMax)&&(c.$validators.max=function(n){return!k(n)||h(b)||r(n)<=b},s.$observe("max",function(n){b=d(n);c.$validate()}))}}function tl(n,t,r,u){var f=t[0],e=u.$$hasNativeValidators=s(f.validity);e&&u.$parsers.push(function(n){var r=t.prop(bl)||{};return r.badInput&&!r.typeMismatch?i:n})}function sb(n,t,r,u,f,e){var s,c;tl(n,t,r,u);tu(n,t,r,u,f,e);u.$$parserName="number";u.$parsers.push(function(n){return u.$isEmpty(n)?null:fb.test(n)?parseFloat(n):i});u.$formatters.push(function(n){if(!u.$isEmpty(n)){if(!k(n))throw hf("numfmt","Expected `{0}` to be a number",n);n=n.toString()}return n});(o(r.min)||r.ngMin)&&(u.$validators.min=function(n){return u.$isEmpty(n)||h(s)||n>=s},r.$observe("min",function(n){o(n)&&!k(n)&&(n=parseFloat(n,10));s=k(n)&&!isNaN(n)?n:i;u.$validate()}));(o(r.max)||r.ngMax)&&(u.$validators.max=function(n){return u.$isEmpty(n)||h(c)||n<=c},r.$observe("max",function(n){o(n)&&!k(n)&&(n=parseFloat(n,10));c=k(n)&&!isNaN(n)?n:i;u.$validate()}))}function hb(n,t,i,r,u,f){tu(n,t,i,r,u,f);ro(r);r.$$parserName="url";r.$validators.url=function(n,t){var i=n||t;return r.$isEmpty(i)||rb.test(i)}}function cb(n,t,i,r,u,f){tu(n,t,i,r,u,f);ro(r);r.$$parserName="email";r.$validators.email=function(n,t){var i=n||t;return r.$isEmpty(i)||ub.test(i)}}function lb(n,t,i,r){h(i.name)&&t.attr("name",fu());var u=function(n){t[0].checked&&r.$setViewValue(i.value,n&&n.type)};t.on("click",u);r.$render=function(){var n=i.value;t[0].checked=n==r.$viewValue};i.$observe("value",r.$render)}function il(n,t,i,r,u){var f;if(o(r)){if(f=n(r),!f.constant)throw y("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",i,r);return f(t)}return u}function ab(n,t,i,r,u,f,e,o){var s=il(o,n,"ngTrueValue",i.ngTrueValue,!0),h=il(o,n,"ngFalseValue",i.ngFalseValue,!1),c=function(n){r.$setViewValue(t[0].checked,n&&n.type)};t.on("click",c);r.$render=function(){t[0].checked=r.$viewValue};r.$isEmpty=function(n){return n===!1};r.$formatters.push(function(n){return st(n,s)});r.$parsers.push(function(n){return n?s:h})}function uo(n,t){return n="ngClass"+n,["$animate",function(i){function f(n,t){var f=[],i,u,r;n:for(i=0;i<n.length;i++){for(u=n[i],r=0;r<t.length;r++)if(u==t[r])continue n;f.push(u)}return f}function u(n){var t=[];return a(n)?(r(n,function(n){t=t.concat(u(n))}),t):l(n)?n.split(" "):s(n)?(r(n,function(n,i){n&&(t=t.concat(i.split(" ")))}),t):n}return{restrict:"AC",link:function(e,o,s){function l(n){var t=c(n,1);s.$addClass(t)}function v(n){var t=c(n,-1);s.$removeClass(t)}function c(n,t){var i=o.data("$classCounts")||rt(),u=[];return r(n,function(n){(t>0||i[n])&&(i[n]=(i[n]||0)+t,i[n]===+(t>0)&&u.push(n))}),o.data("$classCounts",i),u.join(" ")}function y(n,t){var r=f(t,n),u=f(n,t);r=c(r,1);u=c(u,-1);r&&r.length&&i.addClass(o,r);u&&u.length&&i.removeClass(o,u)}function a(n){var i,r;(t===!0||e.$index%2===t)&&(i=u(n||[]),h?st(n,h)||(r=u(h),y(r,i)):l(i));h=ct(n)}var h;e.$watch(s[n],a,!0);s.$observe("class",function(){a(e.$eval(s[n]))});n!=="ngClass"&&e.$watch("$index",function(i,r){var o=i&1,f;o!==(r&1)&&(f=u(e.$eval(s[n])),o===t?l(f):v(f))})}}}]}function sl(n){function l(n,r,e){r===i?a("$pending",n,e):v("$pending",n,e);or(r)?r?(u(t.$error,n,e),o(t.$$success,n,e)):(o(t.$error,n,e),u(t.$$success,n,e)):(u(t.$error,n,e),u(t.$$success,n,e));t.$pending?(f(ol,!0),t.$valid=t.$invalid=i,s("",null)):(f(ol,!1),t.$valid=hl(t.$error),t.$invalid=!t.$valid,s("",t.$valid));var h;h=t.$pending&&t.$pending[n]?i:t.$error[n]?!1:t.$$success[n]?!0:null;s(n,h);c.$setValidity(n,h,t)}function a(n,i,r){t[n]||(t[n]={});o(t[n],i,r)}function v(n,r,f){t[n]&&u(t[n],r,f);hl(t[n])&&(t[n]=i)}function f(n,t){t&&!r[n]?(h.addClass(e,n),r[n]=!0):!t&&r[n]&&(h.removeClass(e,n),r[n]=!1)}function s(n,t){n=n?"-"+is(n,"-"):"";f(ru+n,t===!0);f(fl+n,t===!1)}var t=n.ctrl,e=n.$element,r={},o=n.set,u=n.unset,c=n.parentForm,h=n.$animate;r[fl]=!(r[ru]=e.hasClass(ru));t.$setValidity=l}function hl(n){if(n)for(var t in n)return!1;return!0}var wl=/^\/(.+)\/([a-z]*)$/,bl="validity",v=function(n){return l(n)?n.toLowerCase():n},uu=Object.prototype.hasOwnProperty,gi=function(n){return l(n)?n.toUpperCase():n},kl=function(n){return l(n)?n.replace(/[A-Z]/g,function(n){return String.fromCharCode(n.charCodeAt(0)|32)}):n},dl=function(n){return l(n)?n.replace(/[a-z]/g,function(n){return String.fromCharCode(n.charCodeAt(0)&-33)}):n},a,lo,p,af,pi,hr,oi,ts,pf,wf,es,si,wr,fe,ee,oe,gs,se,ii,oh,ut,dr,ch,nf,u,tf,ap,vp,gh,ni,ht,nt,g,ke,ge,lc,ac,yc,gr,nu,to;"i"!=="I".toLowerCase()&&(v=kl,gi=dl);var nr,f,et,tr=[].slice,gl=[].splice,na=[].push,ti=Object.prototype.toString,eo=Object.getPrototypeOf,fi=y("ng"),ft=n.angular||(n.angular={}),ir,ta=0;nr=t.documentMode;e.$inject=[];rr.$inject=[];a=Array.isArray;lo=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/;p=function(n){return l(n)?n.trim():n};af=function(n){return n.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};pi=function(){if(o(pi.isActive_))return pi.isActive_;var n=!!(t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]"));if(!n)try{new Function("")}catch(i){n=!0}return pi.isActive_=n};hr=function(){if(o(hr.name_))return hr.name_;for(var r,f=oi.length,i,u,n=0;n<f;++n)if(i=oi[n],r=t.querySelector("["+i.replace(":","\\:")+"jq]")){u=r.getAttribute(i+"jq");break}return hr.name_=u};oi=["ng-","data-ng-","ng:","x-ng-"];ts=/[A-Z]/g;pf=!1;var pt=1,va=2,vr=3,kf=8,us=9,df=11;es={full:"1.4.0",major:1,minor:4,dot:0,codeName:"jaracimrman-existence"};b.expando="ng339";var hu=b.cache={},ba=1,cu=function(n,t,i){n.addEventListener(t,i,!1)},yr=function(n,t,i){n.removeEventListener(t,i,!1)};b._data=function(n){return this.cache[n[this.expando]]||{}};var da=/([\:\-\_]+(.))/g,ga=/^moz([A-Z])/,nv={mouseleave:"mouseout",mouseenter:"mouseover"},gf=y("jqLite");var tv=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,iv=/<|&#?\w+;/,rv=/<([\w:]+)/,uv=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,at={option:[1,'<select multiple="multiple">',"<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};at.optgroup=at.option;at.tbody=at.tfoot=at.colgroup=at.caption=at.thead;at.th=at.td;si=b.prototype={ready:function(i){function r(){u||(u=!0,i())}var u=!1;if(t.readyState==="complete")setTimeout(r);else{this.on("DOMContentLoaded",r);b(n).on("load",r)}},toString:function(){var n=[];return r(this,function(t){n.push(""+t)}),"["+n.join(", ")+"]"},eq:function(n){return n>=0?f(this[n]):f(this[this.length+n])},length:0,push:na,sort:[].sort,splice:[].splice};wr={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(n){wr[v(n)]=n});fe={};r("input,select,option,textarea,button,form,details".split(","),function(n){fe[n]=!0});ee={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:ie,removeData:au},function(n,t){b[t]=n});r({data:ie,inheritedData:bu,scope:function(n){return f.data(n,"$scope")||bu(n.parentNode||n,["$isolateScope","$scope"])},isolateScope:function(n){return f.data(n,"$isolateScope")||f.data(n,"$isolateScopeNoTemplate")},controller:cs,injector:function(n){return bu(n,"$injector")},removeAttr:function(n,t){n.removeAttribute(t)},hasClass:yu,css:function(n,t,i){if(t=pr(t),o(i))n.style[t]=i;else return n.style[t]},attr:function(n,t,r){var f=n.nodeType,u,s;if(f!==vr&&f!==va&&f!==kf)if(u=v(t),wr[u])if(o(r))r?(n[t]=!0,n.setAttribute(t,u)):(n[t]=!1,n.removeAttribute(u));else return n[t]||(n.attributes.getNamedItem(t)||e).specified?u:i;else if(o(r))n.setAttribute(t,r);else if(n.getAttribute)return s=n.getAttribute(t,2),s===null?i:s},prop:function(n,t,i){if(o(i))n[t]=i;else return n[t]},text:function(){function n(n,t){if(h(t)){var i=n.nodeType;return i===pt||i===vr?n.textContent:""}n.textContent=t}return n.$dv="",n}(),val:function(n,t){if(h(t)){if(n.multiple&&wt(n)==="select"){var i=[];return r(n.options,function(n){n.selected&&i.push(n.value||n.text)}),i.length===0?null:i}return n.value}n.value=t},html:function(n,t){if(h(t))return n.innerHTML;lu(n,!0);n.innerHTML=t},empty:ls},function(n,t){b.prototype[t]=function(t,r){var u,h,e=this.length,f,l,o,c;if(n!==ls&&(n.length==2&&n!==yu&&n!==cs?t:r)===i){if(s(t)){for(u=0;u<e;u++)if(n===ie)n(this[u],t);else for(h in t)n(this[u],h,t[h]);return this}for(f=n.$dv,l=f===i?Math.min(e,1):e,o=0;o<l;o++)c=n(this[o],t,r),f=f?f+c:c;return f}for(u=0;u<e;u++)n(this[u],t,r);return this}});r({removeData:au,on:function hv(n,t,i,r){var h,c,e;if(o(r))throw gf("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(os(n)){var s=vu(n,!0),u=s.events,f=s.handle;for(f||(f=s.handle=sv(n,u)),h=t.indexOf(" ")>=0?t.split(" "):[t],c=h.length;c--;)t=h[c],e=u[t],e||(u[t]=[],t==="mouseenter"||t==="mouseleave"?hv(n,nv[t],function(n){var r=this,i=n.relatedTarget;i&&(i===r||r.contains(i))||f(n,t)}):t!=="$destroy"&&cu(n,t,f),e=u[t]),e.push(i)}},off:hs,one:function(n,t,i){n=f(n);n.on(t,function r(){n.off(t,i);n.off(t,r)});n.on(t,i)},replaceWith:function(n,t){var i,u=n.parentNode;lu(n);r(new b(t),function(t){i?u.insertBefore(t,i.nextSibling):u.replaceChild(t,n);i=t})},children:function(n){var t=[];return r(n.childNodes,function(n){n.nodeType===pt&&t.push(n)}),t},contents:function(n){return n.contentDocument||n.childNodes||[]},append:function(n,t){var r=n.nodeType,i,u,f;if(r===pt||r===df)for(t=new b(t),i=0,u=t.length;i<u;i++)f=t[i],n.appendChild(f)},prepend:function(n,t){if(n.nodeType===pt){var i=n.firstChild;r(new b(t),function(t){n.insertBefore(t,i)})}},wrap:function(n,t){t=f(t).eq(0).clone()[0];var i=n.parentNode;i&&i.replaceChild(t,n);t.appendChild(n)},remove:ue,detach:function(n){ue(n,!0)},after:function(n,t){var u=n,e=n.parentNode,i,f,r;for(t=new b(t),i=0,f=t.length;i<f;i++)r=t[i],e.insertBefore(r,u.nextSibling),u=r},addClass:wu,removeClass:pu,toggleClass:function(n,t,i){t&&r(t.split(" "),function(t){var r=i;h(r)&&(r=!yu(n,t));(r?wu:pu)(n,t)})},parent:function(n){var t=n.parentNode;return t&&t.nodeType!==df?t:null},next:function(n){return n.nextElementSibling},find:function(n,t){return n.getElementsByTagName?n.getElementsByTagName(t):[]},clone:te,triggerHandler:function(n,t,i){var u,f,o,s=t.type||t,h=vu(n),c=h&&h.events,l=c&&c[s];l&&(u={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:e,type:s,target:n},t.type&&(u=w(u,t)),f=ct(l),o=i?[u].concat(i):[u],r(f,function(t){u.isImmediatePropagationStopped()||t.apply(n,o)}))}},function(n,t){b.prototype[t]=function(t,i,r){for(var u,e=0,s=this.length;e<s;e++)h(u)?(u=n(this[e],t,i,r),o(u)&&(u=f(u))):re(u,n(this[e],t,i,r));return o(u)?u:this};b.prototype.bind=b.prototype.on;b.prototype.unbind=b.prototype.off});ki.prototype={put:function(n,t){this[hi(n,this.nextUid)]=t},get:function(n){return this[hi(n,this.nextUid)]},remove:function(n){var t=this[n=hi(n,this.nextUid)];return delete this[n],t}};var lv=[function(){this.$get=[function(){return ki}]}],vs=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,av=/,/,vv=/^\s*(_?)(\S+?)\1\s*$/,ys=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,ci=y("$injector");br.$$annotate=pv;var ps=y("$animate"),bv=1,ws="ng-animate";var gv=function(){this.$get=["$q","$$rAF",function(n,t){function i(){}return i.all=e,i.chain=e,i.prototype={end:e,cancel:e,resume:e,pause:e,complete:e,then:function(i,r){return n(function(n){t(function(){n()})}).then(i,r)}},i}]},ny=function(){var n=new ki,t=[];this.$get=["$$AnimateRunner","$rootScope",function(i,u){function f(i,f,e){var o=n.get(i);(o||(n.put(i,o={}),t.push(i)),f&&r(f.split(" "),function(n){n&&(o[n]=!0)}),e&&r(e.split(" "),function(n){n&&(o[n]=!1)}),t.length>1)||u.$$postDigest(function(){r(t,function(t){var f=n.get(t);if(f){var e=dv(t.attr("class")),i="",u="";r(f,function(n,t){var r=!!e[t];n!==r&&(n?i+=(i.length?" ":"")+t:u+=(u.length?" ":"")+t)});r(t,function(n){i&&wu(n,i);u&&pu(n,u)});n.remove(t)}});t.length=0})}return{enabled:e,on:e,off:e,pin:e,push:function(n,t,r,u){return u&&u(),r=r||{},r.from&&n.css(r.from),r.to&&n.css(r.to),(r.addClass||r.removeClass)&&f(n,r.addClass,r.removeClass),new i}}}]},ty=["$provide",function(n){var t=this;this.$$registeredAnimations=Object.create(null);this.register=function(i,r){if(i&&i.charAt(0)!==".")throw ps("notcsel","Expecting class selector starting with '.' got '{0}'.",i);var u=i+"-animation";t.$$registeredAnimations[i.substr(1)]=u;n.factory(u,r)};this.classNameFilter=function(n){if(arguments.length===1&&(this.$$classNameFilter=n instanceof RegExp?n:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+ws+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw ps("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ws);}return this.$$classNameFilter};this.$get=["$$animateQueue",function(n){function t(n,t,i){if(i){var r=kv(i);!r||r.parentNode||r.previousElementSibling||(i=null)}i?i.after(n):t.prepend(n)}return{on:n.on,off:n.off,pin:n.pin,enabled:n.enabled,cancel:function(n){n.end&&n.end()},enter:function(i,r,u,e){return r=r&&f(r),u=u&&f(u),r=r||u.parent(),t(i,r,u),n.push(i,"enter",li(e))},move:function(i,r,u,e){return r=r&&f(r),u=u&&f(u),r=r||u.parent(),t(i,r,u),n.push(i,"move",li(e))},leave:function(t,i){return n.push(t,"leave",li(i),function(){t.remove()})},addClass:function(t,i,r){return r=li(r),r.addClass=kr(r.addclass,i),n.push(t,"addClass",r)},removeClass:function(t,i,r){return r=li(r),r.removeClass=kr(r.removeClass,i),n.push(t,"removeClass",r)},setClass:function(t,i,r,u){return u=li(u),u.addClass=kr(u.addClass,i),u.removeClass=kr(u.removeClass,r),n.push(t,"setClass",u)},animate:function(t,i,r,u,f){return f=li(f),f.from=f.from?w(f.from,i):i,f.to=f.to?w(f.to,r):r,u=u||"ng-inline-animate",f.tempClasses=kr(f.tempClasses,u),n.push(t,"animate",f)}}}]}];nt=y("$compile");bs.$inject=["$provide","$$sanitizeUriProvider"];oe=/^((?:x|data)[\:\-_])/i;gs=y("$controller");se=/^(\S+)(\s+as\s+(\w+))?$/;var nh="application/json",he={"Content-Type":nh+";charset=utf-8"},ly=/^\[|^\{(?!\{)/,ay={"[":/]$/,"{":/}$/},vy=/^\)\]\}',?\n/;ii=ft.$interpolateMinErr=y("$interpolate");ii.throwNoconcat=function(n){throw ii("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",n);};ii.interr=function(n,t){return ii("interr","Can't interpolate: {0}\n{1}",n,t.toString())};var rp=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,up={http:80,https:443,ftp:21},ku=y("$location");oh={$$html5:!1,$$replace:!1,absUrl:gu("$$absUrl"),url:function(n){if(h(n))return this.$$url;var t=rp.exec(n);return(t[1]||n==="")&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||n==="")&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:gu("$$protocol"),host:gu("$$host"),port:gu("$$port"),path:sh("$$path",function(n){return n=n!==null?n.toString():"",n.charAt(0)=="/"?n:"/"+n}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(l(n)||k(n))n=n.toString(),this.$$search=go(n);else if(s(n))n=bt(n,{}),r(n,function(t,i){t==null&&delete n[i]}),this.$$search=n;else throw ku("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:h(t)||t===null?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:sh("$$hash",function(n){return n!==null?n.toString():""}),replace:function(){return this.$$replace=!0,this}};r([eh,we,pe],function(n){n.prototype=Object.create(oh);n.prototype.state=function(t){if(!arguments.length)return this.$$state;if(n!==pe||!this.$$html5)throw ku("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=h(t)?null:t,this}});ut=y("$parse");var sp=Function.prototype.call,hp=Function.prototype.apply,cp=Function.prototype.bind;dr=rt();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(n){dr[n]=!0});ch={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};nf=function(n){this.options=n};nf.prototype={constructor:nf,lex:function(n){var t,r;for(this.text=n,this.index=0,this.tokens=[];this.index<this.text.length;)if(t=this.text.charAt(this.index),t==='"'||t==="'")this.readString(t);else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var i=t+this.peek(),u=i+this.peek(2),o=dr[t],f=dr[i],e=dr[u];o||f||e?(r=e?u:f?i:t,this.tokens.push({index:this.index,text:r,operator:!0}),this.index+=r.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(n,t){return t.indexOf(n)!==-1},peek:function(n){var t=n||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(n){return"0"<=n&&n<="9"&&typeof n=="string"},isWhitespace:function(n){return n===" "||n==="\r"||n==="\t"||n==="\n"||n==='\v'||n===" "},isIdent:function(n){return"a"<=n&&n<="z"||"A"<=n&&n<="Z"||"_"===n||n==="$"},isExpOperator:function(n){return n==="-"||n==="+"||this.isNumber(n)},throwError:function(n,t,i){i=i||this.index;var r=o(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,i)+"]":" "+i;throw ut("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",n,r,this.text);},readNumber:function(){for(var n="",r=this.index,t,i;this.index<this.text.length;){if(t=v(this.text.charAt(this.index)),t=="."||this.isNumber(t))n+=t;else if(i=this.peek(),t=="e"&&this.isExpOperator(i))n+=t;else if(this.isExpOperator(t)&&i&&this.isNumber(i)&&n.charAt(n.length-1)=="e")n+=t;else if(!this.isExpOperator(t)||i&&this.isNumber(i)||n.charAt(n.length-1)!="e")break;else this.throwError("Invalid exponent");this.index++}this.tokens.push({index:r,text:n,constant:!0,value:Number(n)})},readIdent:function(){for(var t=this.index,n;this.index<this.text.length;){if(n=this.text.charAt(this.index),!(this.isIdent(n)||this.isNumber(n)))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(n){var f=this.index,t,r,o;this.index++;for(var i="",e=n,u=!1;this.index<this.text.length;){if(t=this.text.charAt(this.index),e+=t,u)t==="u"?(r=this.text.substring(this.index+1,this.index+5),r.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,i+=String.fromCharCode(parseInt(r,16))):(o=ch[t],i=i+(o||t)),u=!1;else if(t==="\\")u=!0;else{if(t===n){this.index++;this.tokens.push({index:f,text:e,constant:!0,value:i});return}i+=t}this.index++}this.throwError("Unterminated quote",f)}};u=function(n,t){this.lexer=n;this.options=t};u.Program="Program";u.ExpressionStatement="ExpressionStatement";u.AssignmentExpression="AssignmentExpression";u.ConditionalExpression="ConditionalExpression";u.LogicalExpression="LogicalExpression";u.BinaryExpression="BinaryExpression";u.UnaryExpression="UnaryExpression";u.CallExpression="CallExpression";u.MemberExpression="MemberExpression";u.Identifier="Identifier";u.Literal="Literal";u.ArrayExpression="ArrayExpression";u.Property="Property";u.ObjectExpression="ObjectExpression";u.ThisExpression="ThisExpression";u.NGValueParameter="NGValueParameter";u.prototype={ast:function(n){this.text=n;this.tokens=this.lexer.lex(n);var t=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var n=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&n.push(this.expressionStatement()),!this.expect(";"))return{type:u.Program,body:n}},expressionStatement:function(){return{type:u.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var n=this.expression(),t;t=this.expect("|");)n=this.filter(n);return n},expression:function(){return this.assignment()},assignment:function(){var n=this.ternary();return this.expect("=")&&(n={type:u.AssignmentExpression,left:n,right:this.assignment(),operator:"="}),n},ternary:function(){var n=this.logicalOR(),t,i;return this.expect("?")&&(t=this.expression(),this.consume(":"))?(i=this.expression(),{type:u.ConditionalExpression,test:n,alternate:t,consequent:i}):n},logicalOR:function(){for(var n=this.logicalAND();this.expect("||");)n={type:u.LogicalExpression,operator:"||",left:n,right:this.logicalAND()};return n},logicalAND:function(){for(var n=this.equality();this.expect("&&");)n={type:u.LogicalExpression,operator:"&&",left:n,right:this.equality()};return n},equality:function(){for(var n=this.relational(),t;t=this.expect("==","!=","===","!==");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.relational()};return n},relational:function(){for(var n=this.additive(),t;t=this.expect("<",">","<=",">=");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.additive()};return n},additive:function(){for(var n=this.multiplicative(),t;t=this.expect("+","-");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.multiplicative()};return n},multiplicative:function(){for(var n=this.unary(),t;t=this.expect("*","/","%");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.unary()};return n},unary:function(){var n;return(n=this.expect("+","-","!"))?{type:u.UnaryExpression,operator:n.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var n,t;for(this.expect("(")?(n=this.filterChain(),this.consume(")")):this.expect("[")?n=this.arrayDeclaration():this.expect("{")?n=this.object():this.constants.hasOwnProperty(this.peek().text)?n=bt(this.constants[this.consume().text]):this.peek().identifier?n=this.identifier():this.peek().constant?n=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)t.text==="("?(n={type:u.CallExpression,callee:n,arguments:this.parseArguments()},this.consume(")")):t.text==="["?(n={type:u.MemberExpression,object:n,property:this.expression(),computed:!0},this.consume("]")):t.text==="."?n={type:u.MemberExpression,object:n,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return n},filter:function(n){for(var t=[n],i={type:u.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return i},parseArguments:function(){var n=[];if(this.peekToken().text!==")")do n.push(this.expression());while(this.expect(","));return n},identifier:function(){var n=this.consume();return n.identifier||this.throwError("is not a valid identifier",n),{type:u.Identifier,name:n.text}},constant:function(){return{type:u.Literal,value:this.consume().value}},arrayDeclaration:function(){var n=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;n.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:u.ArrayExpression,elements:n}},object:function(){var t=[],n;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;n={type:u.Property,kind:"init"};this.peek().constant?n.key=this.constant():this.peek().identifier?n.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");n.value=this.expression();t.push(n)}while(this.expect(","));return this.consume("}"),{type:u.ObjectExpression,properties:t}},throwError:function(n,t){throw ut("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,n,t.index+1,this.text,this.text.substring(t.index));},consume:function(n){if(this.tokens.length===0)throw ut("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(n);return t||this.throwError("is unexpected, expecting ["+n+"]",this.peek()),t},peekToken:function(){if(this.tokens.length===0)throw ut("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(n,t,i,r){return this.peekAhead(0,n,t,i,r)},peekAhead:function(n,t,i,r,u){if(this.tokens.length>n){var e=this.tokens[n],f=e.text;if(f===t||f===i||f===r||f===u||!t&&!i&&!r&&!u)return e}return!1},expect:function(n,t,i,r){var u=this.peek(n,t,i,r);return u?(this.tokens.shift(),u):!1},constants:{"true":{type:u.Literal,value:!0},"false":{type:u.Literal,value:!1},"null":{type:u.Literal,value:null},undefined:{type:u.Literal,value:i},"this":{type:u.ThisExpression}}};kh.prototype={compile:function(n,t){var u=this,f=this.astBuilder.ast(n),o,s,h,c,l,e;return this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},d(f,u.$filter),o="",this.stage="assign",(s=ph(f))&&(this.state.computing="assign",h=this.nextId(),this.recurse(s,h),o="fn.assign="+this.generateFunction("assign","s,v,l")),c=vh(f.body),u.stage="inputs",r(c,function(n,t){var i="fn"+t,r;u.state[i]={vars:[],body:[],own:{}};u.state.computing=i;r=u.nextId();u.recurse(n,r);u.return_(r);u.state.inputs.push(i);n.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(f),l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",e=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",l)(this.$filter,ri,vt,hh,lp,lh,n),this.state=this.stage=i,e.literal=wh(f),e.constant=bh(f),e},USE:"use",STRICT:"strict",watchFns:function(){var n=[],t=this.state.inputs,i=this;return r(t,function(t){n.push("var "+t+"="+i.generateFunction(t,"s"))}),t.length&&n.push("fn.inputs=["+t.join(",")+"];"),n.join("")},generateFunction:function(n,t){return"function("+t+"){"+this.varsPrefix(n)+this.body(n)+"};"},filterPrefix:function(){var n=[],t=this;return(r(this.state.filters,function(i,r){n.push(i+"=$filter("+t.escape(r)+")")}),n.length)?"var "+n.join(",")+";":""},varsPrefix:function(n){return this.state[n].vars.length?"var "+this.state[n].vars.join(",")+";":""},body:function(n){return this.state[n].body.join("")},recurse:function(n,t,f,s,h,c){var v,y,l=this,p,a;if(s=s||e,!c&&o(n.watchId)){t=t||this.nextId();this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,f,s,h,!0));return}switch(n.type){case u.Program:r(n.body,function(t,r){l.recurse(t.expression,i,i,function(n){y=n});r!==n.body.length-1?l.current().body.push(y,";"):l.return_(y)});break;case u.Literal:a=this.escape(n.value);this.assign(t,a);s(a);break;case u.UnaryExpression:this.recurse(n.argument,i,i,function(n){y=n});a=n.operator+"("+this.ifDefined(y,0)+")";this.assign(t,a);s(a);break;case u.BinaryExpression:this.recurse(n.left,i,i,function(n){v=n});this.recurse(n.right,i,i,function(n){y=n});a=n.operator==="+"?this.plus(v,y):n.operator==="-"?this.ifDefined(v,0)+n.operator+this.ifDefined(y,0):"("+v+")"+n.operator+"("+y+")";this.assign(t,a);s(a);break;case u.LogicalExpression:t=t||this.nextId();l.recurse(n.left,t);l.if_(n.operator==="&&"?t:l.not(t),l.lazyRecurse(n.right,t));s(t);break;case u.ConditionalExpression:t=t||this.nextId();l.recurse(n.test,t);l.if_(t,l.lazyRecurse(n.alternate,t),l.lazyRecurse(n.consequent,t));s(t);break;case u.Identifier:t=t||this.nextId();f&&(f.context=l.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),f.computed=!1,f.name=n.name);ri(n.name);l.if_(l.stage==="inputs"||l.not(l.getHasOwnProperty("l",n.name)),function(){l.if_(l.stage==="inputs"||"s",function(){h&&h!==1&&l.if_(l.not(l.nonComputedMember("s",n.name)),l.lazyAssign(l.nonComputedMember("s",n.name),"{}"));l.assign(t,l.nonComputedMember("s",n.name))})},t&&l.lazyAssign(t,l.nonComputedMember("l",n.name)));(l.state.expensiveChecks||uf(n.name))&&l.addEnsureSafeObject(t);s(t);break;case u.MemberExpression:v=f&&(f.context=this.nextId())||this.nextId();t=t||this.nextId();l.recurse(n.object,v,i,function(){l.if_(l.notNull(v),function(){n.computed?(y=l.nextId(),l.recurse(n.property,y),l.addEnsureSafeMemberName(y),h&&h!==1&&l.if_(l.not(l.computedMember(v,y)),l.lazyAssign(l.computedMember(v,y),"{}")),a=l.ensureSafeObject(l.computedMember(v,y)),l.assign(t,a),f&&(f.computed=!0,f.name=y)):(ri(n.property.name),h&&h!==1&&l.if_(l.not(l.nonComputedMember(v,n.property.name)),l.lazyAssign(l.nonComputedMember(v,n.property.name),"{}")),a=l.nonComputedMember(v,n.property.name),(l.state.expensiveChecks||uf(n.property.name))&&(a=l.ensureSafeObject(a)),l.assign(t,a),f&&(f.computed=!1,f.name=n.property.name));s(t)})},!!h);break;case u.CallExpression:t=t||this.nextId();n.filter?(y=l.filter(n.callee.name),p=[],r(n.arguments,function(n){var t=l.nextId();l.recurse(n,t);p.push(t)}),a=y+"("+p.join(",")+")",l.assign(t,a),s(t)):(y=l.nextId(),v={},p=[],l.recurse(n.callee,y,v,function(){l.if_(l.notNull(y),function(){l.addEnsureSafeFunction(y);r(n.arguments,function(n){l.recurse(n,l.nextId(),i,function(n){p.push(l.ensureSafeObject(n))})});v.name?(l.state.expensiveChecks||l.addEnsureSafeObject(v.context),a=l.member(v.context,v.name,v.computed)+"("+p.join(",")+")"):a=y+"("+p.join(",")+")";a=l.ensureSafeObject(a);l.assign(t,a);s(t)})}));break;case u.AssignmentExpression:if(y=this.nextId(),v={},!yh(n.left))throw ut("lval","Trying to assing a value to a non l-value");this.recurse(n.left,i,v,function(){l.if_(l.notNull(v.context),function(){l.recurse(n.right,y);l.addEnsureSafeObject(l.member(v.context,v.name,v.computed));a=l.member(v.context,v.name,v.computed)+n.operator+y;l.assign(t,a);s(t||a)})},1);break;case u.ArrayExpression:p=[];r(n.elements,function(n){l.recurse(n,l.nextId(),i,function(n){p.push(n)})});a="["+p.join(",")+"]";this.assign(t,a);s(a);break;case u.ObjectExpression:p=[];r(n.properties,function(n){l.recurse(n.value,l.nextId(),i,function(t){p.push(l.escape(n.key.type===u.Identifier?n.key.name:""+n.key.value)+":"+t)})});a="{"+p.join(",")+"}";this.assign(t,a);s(a);break;case u.ThisExpression:this.assign(t,"s");s("s");break;case u.NGValueParameter:this.assign(t,"v");s("v")}},getHasOwnProperty:function(n,t){var i=n+"."+t,r=this.current().own;return r.hasOwnProperty(i)||(r[i]=this.nextId(!1,n+"&&("+this.escape(t)+" in "+n+")")),r[i]},assign:function(n,t){if(n)return this.current().body.push(n,"=",t,";"),n},filter:function(n){return this.state.filters.hasOwnProperty(n)||(this.state.filters[n]=this.nextId(!0)),this.state.filters[n]},ifDefined:function(n,t){return"ifDefined("+n+","+this.escape(t)+")"},plus:function(n,t){return"plus("+n+","+t+")"},return_:function(n){this.current().body.push("return ",n,";")},if_:function(n,t,i){if(n===!0)t();else{var r=this.current().body;r.push("if(",n,"){");t();r.push("}");i&&(r.push("else{"),i(),r.push("}"))}},not:function(n){return"!("+n+")"},notNull:function(n){return n+"!=null"},nonComputedMember:function(n,t){return n+"."+t},computedMember:function(n,t){return n+"["+t+"]"},member:function(n,t,i){return i?this.computedMember(n,t):this.nonComputedMember(n,t)},addEnsureSafeObject:function(n){this.current().body.push(this.ensureSafeObject(n),";")},addEnsureSafeMemberName:function(n){this.current().body.push(this.ensureSafeMemberName(n),";")},addEnsureSafeFunction:function(n){this.current().body.push(this.ensureSafeFunction(n),";")},ensureSafeObject:function(n){return"ensureSafeObject("+n+",text)"},ensureSafeMemberName:function(n){return"ensureSafeMemberName("+n+",text)"},ensureSafeFunction:function(n){return"ensureSafeFunction("+n+",text)"},lazyRecurse:function(n,t,i,r,u,f){var e=this;return function(){e.recurse(n,t,i,r,u,f)}},lazyAssign:function(n,t){var i=this;return function(){i.assign(n,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)},escape:function(n){if(l(n))return"'"+n.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(k(n))return n.toString();if(n===!0)return"true";if(n===!1)return"false";if(n===null)return"null";if(typeof n=="undefined")return"undefined";throw ut("esc","IMPOSSIBLE");},nextId:function(n,t){var i="v"+this.state.nextId++;return n||this.current().vars.push(i+(t?"="+t:"")),i},current:function(){return this.state[this.state.computing]}};dh.prototype={compile:function(n,t){var o=this,i=this.astBuilder.ast(n),c,s,h,f,e,u;return this.expression=n,this.expensiveChecks=t,d(i,o.$filter),(c=ph(i))&&(s=this.recurse(c)),h=vh(i.body),h&&(f=[],r(h,function(n,t){var i=o.recurse(n);n.input=i;f.push(i);n.watchId=t})),e=[],r(i.body,function(n){e.push(o.recurse(n.expression))}),u=i.body.length===0?function(){}:i.body.length===1?e[0]:function(n,t){var i;return r(e,function(r){i=r(n,t)}),i},s&&(u.assign=function(n,t,i){return s(n,i,t)}),f&&(u.inputs=f),u.literal=wh(i),u.constant=bh(i),u},recurse:function(n,t,f){var h,e,o=this,s;if(n.input)return this.inputs(n.input,n.watchId);switch(n.type){case u.Literal:return this.value(n.value,t);case u.UnaryExpression:return e=this.recurse(n.argument),this["unary"+n.operator](e,t);case u.BinaryExpression:return h=this.recurse(n.left),e=this.recurse(n.right),this["binary"+n.operator](h,e,t);case u.LogicalExpression:return h=this.recurse(n.left),e=this.recurse(n.right),this["binary"+n.operator](h,e,t);case u.ConditionalExpression:return this["ternary?:"](this.recurse(n.test),this.recurse(n.alternate),this.recurse(n.consequent),t);case u.Identifier:return ri(n.name,o.expression),o.identifier(n.name,o.expensiveChecks||uf(n.name),t,f,o.expression);case u.MemberExpression:return h=this.recurse(n.object,!1,!!f),n.computed||(ri(n.property.name,o.expression),e=n.property.name),n.computed&&(e=this.recurse(n.property)),n.computed?this.computedMember(h,e,t,f,o.expression):this.nonComputedMember(h,e,o.expensiveChecks,t,f,o.expression);case u.CallExpression:return s=[],r(n.arguments,function(n){s.push(o.recurse(n))}),n.filter&&(e=this.$filter(n.callee.name)),n.filter||(e=this.recurse(n.callee,!0)),n.filter?function(n,r,u,f){for(var h,c=[],o=0;o<s.length;++o)c.push(s[o](n,r,u,f));return h=e.apply(i,c,f),t?{context:i,name:i,value:h}:h}:function(n,i,r,u){var f=e(n,i,r,u),c,l,h;if(f.value!=null){for(vt(f.context,o.expression),hh(f.value,o.expression),l=[],h=0;h<s.length;++h)l.push(vt(s[h](n,i,r,u),o.expression));c=vt(f.value.apply(f.context,l),o.expression)}return t?{value:c}:c};case u.AssignmentExpression:return h=this.recurse(n.left,!0,1),e=this.recurse(n.right),function(n,i,r,u){var f=h(n,i,r,u),s=e(n,i,r,u);return vt(f.value,o.expression),f.context[f.name]=s,t?{value:s}:s};case u.ArrayExpression:return s=[],r(n.elements,function(n){s.push(o.recurse(n))}),function(n,i,r,u){for(var f=[],e=0;e<s.length;++e)f.push(s[e](n,i,r,u));return t?{value:f}:f};case u.ObjectExpression:return s=[],r(n.properties,function(n){s.push({key:n.key.type===u.Identifier?n.key.name:""+n.key.value,value:o.recurse(n.value)})}),function(n,i,r,u){for(var e={},f=0;f<s.length;++f)e[s[f].key]=s[f].value(n,i,r,u);return t?{value:e}:e};case u.ThisExpression:return function(n){return t?{value:n}:n};case u.NGValueParameter:return function(n,i,r){return t?{value:r}:r}}},"unary+":function(n,t){return function(i,r,u,f){var e=n(i,r,u,f);return e=o(e)?+e:0,t?{value:e}:e}},"unary-":function(n,t){return function(i,r,u,f){var e=n(i,r,u,f);return e=o(e)?-e:0,t?{value:e}:e}},"unary!":function(n,t){return function(i,r,u,f){var e=!n(i,r,u,f);return t?{value:e}:e}},"binary+":function(n,t,i){return function(r,u,f,e){var s=n(r,u,f,e),h=t(r,u,f,e),o=lh(s,h);return i?{value:o}:o}},"binary-":function(n,t,i){return function(r,u,f,e){var s=n(r,u,f,e),h=t(r,u,f,e),c=(o(s)?s:0)-(o(h)?h:0);return i?{value:c}:c}},"binary*":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)*t(r,u,f,e);return i?{value:o}:o}},"binary/":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)/t(r,u,f,e);return i?{value:o}:o}},"binary%":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)%t(r,u,f,e);return i?{value:o}:o}},"binary===":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)===t(r,u,f,e);return i?{value:o}:o}},"binary!==":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)!==t(r,u,f,e);return i?{value:o}:o}},"binary==":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)==t(r,u,f,e);return i?{value:o}:o}},"binary!=":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)!=t(r,u,f,e);return i?{value:o}:o}},"binary<":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)<t(r,u,f,e);return i?{value:o}:o}},"binary>":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)>t(r,u,f,e);return i?{value:o}:o}},"binary<=":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)<=t(r,u,f,e);return i?{value:o}:o}},"binary>=":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)>=t(r,u,f,e);return i?{value:o}:o}},"binary&&":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)&&t(r,u,f,e);return i?{value:o}:o}},"binary||":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e)||t(r,u,f,e);return i?{value:o}:o}},"ternary?:":function(n,t,i,r){return function(u,f,e,o){var s=n(u,f,e,o)?t(u,f,e,o):i(u,f,e,o);return r?{value:s}:s}},value:function(n,t){return function(){return t?{context:i,name:i,value:n}:n}},identifier:function(n,t,r,u,f){return function(e,o){var s=o&&n in o?o:e,h;return u&&u!==1&&s&&!s[n]&&(s[n]={}),h=s?s[n]:i,t&&vt(h,f),r?{context:s,name:n,value:h}:h}},computedMember:function(n,t,i,r,u){return function(f,e,o,s){var h=n(f,e,o,s),c,l;return h!=null&&(c=t(f,e,o,s),ri(c,u),r&&r!==1&&h&&!h[c]&&(h[c]={}),l=h[c],vt(l,u)),i?{context:h,name:c,value:l}:l}},nonComputedMember:function(n,t,r,u,f,e){return function(o,s,h,c){var l=n(o,s,h,c),a;return f&&f!==1&&l&&!l[t]&&(l[t]={}),a=l!=null?l[t]:i,(r||uf(t))&&vt(a,e),u?{context:l,name:t,value:a}:a}},inputs:function(n,t){return function(i,r,u,f){return f?f[t]:n(i,r,u)}}};tf=function(n,t,i){this.lexer=n;this.$filter=t;this.options=i;this.ast=new u(this.lexer);this.astCompiler=i.csp?new dh(this.ast,t):new kh(this.ast,t)};tf.prototype={constructor:tf,parse:function(n){return this.astCompiler.compile(n,this.options.expensiveChecks)}};ap=rt();vp=rt();gh=Object.prototype.valueOf;ni=y("$sce");ht={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};nt=y("$compile");g=t.createElement("a");ke=ui(n.location.href);rc.$inject=["$document"];uc.$inject=["$provide"];fc.$inject=["$locale"];ec.$inject=["$locale"];ge=".";var pw={yyyy:tt("FullYear",4),yy:tt("FullYear",2,0,!0),y:tt("FullYear",1),MMMM:ef("Month"),MMM:ef("Month",!0),MM:tt("Month",2,1),M:tt("Month",1,1),dd:tt("Date",2),d:tt("Date",1),HH:tt("Hours",2),H:tt("Hours",1),hh:tt("Hours",2,-12),h:tt("Hours",1,-12),mm:tt("Minutes",2),m:tt("Minutes",1),ss:tt("Seconds",2),s:tt("Seconds",1),sss:tt("Milliseconds",3),EEEE:ef("Day"),EEE:ef("Day",!0),a:vw,Z:lw,ww:hc(2),w:hc(1),G:no,GG:no,GGG:no,GGGG:yw},ww=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,bw=/^\-?\d+$/;cc.$inject=["$locale"];lc=yt(v);ac=yt(gi);vc.$inject=["$parse"];yc=yt({restrict:"E",compile:function(n,t){if(!t.href&&!t.xlinkHref)return function(n,t){if(t[0].nodeName.toLowerCase()==="a"){var i=ti.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(n){t.attr(i)||n.preventDefault()})}}}});gr={};r(wr,function(n,t){function r(n,r,u){n.$watch(u[i],function(n){u.$set(t,!!n)})}if(n!="multiple"){var i=dt("ng-"+t),u=r;n==="checked"&&(u=function(n,t,u){u.ngModel!==u[i]&&r(n,t,u)});gr[i]=function(){return{restrict:"A",priority:100,link:u}}}});r(ee,function(n,t){gr[t]=function(){return{priority:100,link:function(n,i,r){if(t==="ngPattern"&&r.ngPattern.charAt(0)=="/"){var u=r.ngPattern.match(wl);if(u){r.$set("ngPattern",new RegExp(u[1],u[2]));return}}n.$watch(r[t],function(n){r.$set(t,n)})}}}});r(["src","srcset","href"],function(n){var t=dt("ng-"+n);gr[t]=function(){return{priority:99,link:function(i,r,u){var e=n,f=n;n==="href"&&ti.call(r.prop("href"))==="[object SVGAnimatedString]"&&(f="xlinkHref",u.$attr[f]="xlink:href",e=null);u.$observe(t,function(t){if(!t){n==="href"&&u.$set(f,null);return}u.$set(f,t);nr&&e&&r.prop(e,u[f])})}}}});nu={$addControl:e,$$renameControl:gw,$removeControl:e,$setValidity:e,$setDirty:e,$setPristine:e,$setSubmitted:e};to="ng-submitted";pc.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var wc=function(n){return["$timeout",function(t){return{name:"form",restrict:n?"EAC":"E",controller:pc,compile:function(r,u){r.addClass(di).addClass(ru);var f=u.name?"name":n&&u.ngForm?"ngForm":!1;return{pre:function(n,r,u,e){var o,s;if(!("action"in u)){o=function(t){n.$apply(function(){e.$commitViewValue();e.$setSubmitted()});t.preventDefault()};cu(r[0],"submit",o);r.on("$destroy",function(){t(function(){yr(r[0],"submit",o)},0,!1)})}s=e.$$parentForm;f&&(rf(n,e.$name,e,e.$name),u.$observe(f,function(t){e.$name!==t&&(rf(n,e.$name,i,e.$name),s.$$renameControl(e,t),rf(n,e.$name,e,e.$name))}));r.on("$destroy",function(){s.$removeControl(e);f&&rf(n,u[f],i,e.$name);w(e,nu)})}}}}}]},nb=wc(),tb=wc(!0),ib=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,rb=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ub=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,fb=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,bc=/^(\d{4})-(\d{2})-(\d{2})$/,kc=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,io=/^(\d{4})-W(\d\d)$/,dc=/^(\d{4})-(\d\d)$/,gc=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,nl={text:eb,date:iu("date",bc,of(bc,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":iu("datetimelocal",kc,of(kc,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:iu("time",gc,of(gc,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:iu("week",io,ob,"yyyy-Www"),month:iu("month",dc,of(dc,["yyyy","MM"]),"yyyy-MM"),number:sb,url:hb,email:cb,radio:lb,checkbox:ab,hidden:e,button:e,submit:e,reset:e,file:e};var rl=["$browser","$sniffer","$filter","$parse",function(n,t,i,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(u,f,e,o){o[0]&&(nl[v(e.type)]||nl.text)(u,f,e,o[0],t,n,i,r)}}}}],vb=/^(true|false|\d+)$/,yb=function(){return{restrict:"A",priority:100,compile:function(n,t){return vb.test(t.ngValue)?function(n,t,i){i.$set("value",n.$eval(i.ngValue))}:function(n,t,i){n.$watch(i.ngValue,function(n){i.$set("value",n)})}}}},pb=["$compile",function(n){return{restrict:"AC",compile:function(t){return n.$$addBindingClass(t),function(t,r,u){n.$$addBindingInfo(r,u.ngBind);r=r[0];t.$watch(u.ngBind,function(n){r.textContent=n===i?"":n})}}}}],wb=["$interpolate","$compile",function(n,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,u,f){var e=n(u.attr(f.$attr.ngBindTemplate));t.$$addBindingInfo(u,e.expressions);u=u[0];f.$observe("ngBindTemplate",function(n){u.textContent=n===i?"":n})}}}}],bb=["$sce","$parse","$compile",function(n,t,i){return{restrict:"A",compile:function(r,u){var f=t(u.ngBindHtml),e=t(u.ngBindHtml,function(n){return(n||"").toString()});return i.$$addBindingClass(r),function(t,r,u){i.$$addBindingInfo(r,u.ngBindHtml);t.$watch(e,function(){r.html(n.getTrustedHtml(f(t))||"")})}}}}],kb=yt({restrict:"A",require:"ngModel",link:function(n,t,i,r){r.$viewChangeListeners.push(function(){n.$eval(i.ngChange)})}});var db=uo("",!0),gb=uo("Odd",0),nk=uo("Even",1),tk=yi({compile:function(n,t){t.$set("ngCloak",i);n.removeClass("ng-cloak")}}),ik=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ul={},rk={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var t=dt("ng-"+n);ul[t]=["$parse","$rootScope",function(i,r){return{restrict:"A",compile:function(u,f){var e=i(f[t],null,!0);return function(t,i){i.on(n,function(i){var u=function(){e(t,{$event:i})};rk[n]&&r.$$phase?t.$evalAsync(u):t.$apply(u)})}}}}]});var uk=["$animate",function(n){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,r,u,f,e){var h,s,o;i.$watch(u.ngIf,function(i){i?s||e(function(i,f){s=f;i[i.length++]=t.createComment(" end ngIf: "+u.ngIf+" ");h={clone:i};n.enter(i,r.parent(),r)}):(o&&(o.remove(),o=null),s&&(s.$destroy(),s=null),h&&(o=su(h.clone),n.leave(o).then(function(){o=null}),h=null))})}}}],fk=["$templateRequest","$anchorScroll","$animate","$sce",function(n,t,i,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ft.noop,compile:function(u,f){var s=f.ngInclude||f.src,h=f.onload||"",e=f.autoscroll;return function(u,f,c,l,a){var w=0,v,y,p,b=function(){y&&(y.remove(),y=null);v&&(v.$destroy(),v=null);p&&(i.leave(p).then(function(){y=null}),y=p,p=null)};u.$watch(r.parseAsResourceUrl(s),function(r){var c=function(){o(e)&&(!e||u.$eval(e))&&t()},s=++w;r?(n(r,!0).then(function(n){var t,e;s===w&&(t=u.$new(),l.template=n,e=a(t,function(n){b();i.enter(n,null,f).then(c)}),v=t,p=e,v.$emit("$includeContentLoaded",r),u.$eval(h))},function(){s===w&&(b(),u.$emit("$includeContentError",r))}),u.$emit("$includeContentRequested",r)):(b(),l.template=null)})}}}}],ek=["$compile",function(n){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,r,u,f){if(/SVG/.test(r[0].toString())){r.empty();n(ss(f.template,t).childNodes)(i,function(n){r.append(n)},{futureParentElement:r});return}r.html(f.template);n(r.contents())(i)}}}],ok=yi({priority:450,compile:function(){return{pre:function(n,t,i){n.$eval(i.ngInit)}}}}),sk=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(n,t,u,f){var e=t.attr(u.$attr.ngList)||", ",o=u.ngTrim!=="false",s=o?p(e):e,c=function(n){if(!h(n)){var t=[];return n&&r(n.split(s),function(n){n&&t.push(o?p(n):n)}),t}};f.$parsers.push(c);f.$formatters.push(function(n){return a(n)?n.join(e):i});f.$isEmpty=function(n){return!n||!n.length}}}},ru="ng-valid",fl="ng-invalid",di="ng-pristine",sf="ng-dirty",fo="ng-untouched",el="ng-touched",ol="ng-pending",hf=new y("ngModel"),hk=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(n,t,u,f,s,l,a,v,y,p){var it,g;this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=i;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=i;this.$name=p(u.name||"",!1)(n);var d=s(u.ngModel),rt=d.assign,tt=d,ut=rt,nt=null,b,w=this;this.$$setOptions=function(n){if(w.$options=n,n&&n.getterSetter){var t=s(u.ngModel+"()"),i=s(u.ngModel+"($$$p)");tt=function(n){var i=d(n);return c(i)&&(i=t(n)),i};ut=function(n){c(d(n))?i(n,{$$$p:w.$modelValue}):rt(n,w.$modelValue)}}else if(!d.assign)throw hf("nonassign","Expression '{0}' is non-assignable. Element: {1}",u.ngModel,kt(f));};this.$render=e;this.$isEmpty=function(n){return h(n)||n===""||n===null||n!==n};it=f.inheritedData("$formController")||nu;g=0;sl({ctrl:this,$element:f,set:function(n,t){n[t]=!0},unset:function(n,t){delete n[t]},parentForm:it,$animate:l});this.$setPristine=function(){w.$dirty=!1;w.$pristine=!0;l.removeClass(f,sf);l.addClass(f,di)};this.$setDirty=function(){w.$dirty=!0;w.$pristine=!1;l.removeClass(f,di);l.addClass(f,sf);it.$setDirty()};this.$setUntouched=function(){w.$touched=!1;w.$untouched=!0;l.setClass(f,fo,el)};this.$setTouched=function(){w.$touched=!0;w.$untouched=!1;l.setClass(f,el,fo)};this.$rollbackViewValue=function(){a.cancel(nt);w.$viewValue=w.$$lastCommittedViewValue;w.$render()};this.$validate=function(){if(!k(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$lastCommittedViewValue,n=w.$$rawModelValue,r=w.$valid,u=w.$modelValue,f=w.$options&&w.$options.allowInvalid;w.$$runValidators(n,t,function(t){f||r===t||(w.$modelValue=t?n:i,w.$modelValue!==u&&w.$$writeModelToScope())})}};this.$$runValidators=function(n,t,u){function h(){var n=w.$$parserName||"parse";if(b===i)f(n,null);else return b||(r(w.$validators,function(n,t){f(t,null)}),r(w.$asyncValidators,function(n,t){f(t,null)})),f(n,b),b;return!0}function c(){var i=!0;return(r(w.$validators,function(r,u){var e=r(n,t);i=i&&e;f(u,e)}),!i)?(r(w.$asyncValidators,function(n,t){f(t,null)}),!1):!0}function l(){var u=[],s=!0;r(w.$asyncValidators,function(r,e){var o=r(n,t);if(!eu(o))throw hf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",o);f(e,i);u.push(o.then(function(){f(e,!0)},function(){s=!1;f(e,!1)}))});u.length?y.all(u).then(function(){o(s)},e):o(!0)}function f(n,t){s===g&&w.$setValidity(n,t)}function o(n){s===g&&u(n)}g++;var s=g;if(!h()){o(!1);return}if(!c()){o(!1);return}l()};this.$commitViewValue=function(){var n=w.$viewValue;(a.cancel(nt),w.$$lastCommittedViewValue!==n||n===""&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=n,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())};this.$$parseAndValidate=function(){function e(){w.$modelValue!==f&&w.$$writeModelToScope()}var o=w.$$lastCommittedViewValue,t=o,r,f,u;if(b=h(t)?i:!0,b)for(r=0;r<w.$parsers.length;r++)if(t=w.$parsers[r](t),h(t)){b=!1;break}k(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=tt(n));f=w.$modelValue;u=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=t;u&&(w.$modelValue=t,e());w.$$runValidators(t,w.$$lastCommittedViewValue,function(n){u||(w.$modelValue=n?t:i,e())})};this.$$writeModelToScope=function(){ut(n,w.$modelValue);r(w.$viewChangeListeners,function(n){try{n()}catch(i){t(i)}})};this.$setViewValue=function(n,t){w.$viewValue=n;(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(t)};this.$$debounceViewValueCommit=function(t){var r=0,u=w.$options,i;u&&o(u.debounce)&&(i=u.debounce,k(i)?r=i:k(i[t])?r=i[t]:k(i["default"])&&(r=i["default"]));a.cancel(nt);r?nt=a(function(){w.$commitViewValue()},r):v.$$phase?w.$commitViewValue():n.$apply(function(){w.$commitViewValue()})};n.$watch(function(){var t=tt(n);if(t!==w.$modelValue&&(w.$modelValue===w.$modelValue||t===t)){w.$modelValue=w.$$rawModelValue=t;b=i;for(var u=w.$formatters,f=u.length,r=t;f--;)r=u[f](r);w.$viewValue!==r&&(w.$viewValue=w.$$lastCommittedViewValue=r,w.$render(),w.$$runValidators(t,r,e))}return t})}],ck=["$rootScope",function(n){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:hk,priority:1,compile:function(t){return t.addClass(di).addClass(fo).addClass(ru),{pre:function(n,t,i,r){var u=r[0],f=r[1]||nu;u.$$setOptions(r[2]&&r[2].$options);f.$addControl(u);i.$observe("name",function(n){u.$name!==n&&f.$$renameControl(u,n)});n.$on("$destroy",function(){f.$removeControl(u)})},post:function(t,i,r,u){var f=u[0];if(f.$options&&f.$options.updateOn)i.on(f.$options.updateOn,function(n){f.$$debounceViewValueCommit(n&&n.type)});i.on("blur",function(){f.$touched||(n.$$phase?t.$evalAsync(f.$setTouched):t.$apply(f.$setTouched))})}}}}}],lk=/(\s+|^)default(\s+|$)/,ak=function(){return{restrict:"A",controller:["$scope","$attrs",function(n,t){var r=this;this.$options=bt(n.$eval(t.ngModelOptions));this.$options.updateOn!==i?(this.$options.updateOnDefault=!1,this.$options.updateOn=p(this.$options.updateOn.replace(lk,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};var vk=yi({terminal:!0,priority:1e3}),yk=y("ngOptions"),pk=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,wk=["$compile","$parse",function(n,i){function e(n,t,r){function nt(n,t,i,r,u){this.selectValue=n;this.viewValue=t;this.label=i;this.group=r;this.disabled=u}var u=n.match(pk);if(!u)throw yk("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",n,kt(t));var o=u[5]||u[7],s=u[6],l=/ as /.test(u[0])&&u[1],f=u[9],w=i(u[2]?u[1]:o),b=l&&i(l),k=b||w,d=f&&i(f),h=f?function(n,t){return d(r,t)}:function(n){return hi(n)},a=function(n,t){return h(n,c(n,t))},v=i(u[2]||u[1]),g=i(u[3]||""),y=i(u[4]||""),p=i(u[8]),e={},c=s?function(n,t){return e[s]=t,e[o]=n,e}:function(n){return e[o]=n,e};return{trackBy:f,getTrackByValue:a,getWatchables:i(p,function(n){var t=[];return n=n||[],Object.keys(n).forEach(function(i){var f=c(n[i],i),s=h(n[i],f),e,o;t.push(s);(u[2]||u[1])&&(e=v(r,f),t.push(e));u[4]&&(o=y(r,f),t.push(o))}),t}),getOptions:function(){var l=[],o={},n=p(r)||[],t,e,w,i;if(!s&&ei(n))t=n;else{t=[];for(e in n)n.hasOwnProperty(e)&&e.charAt(0)!=="$"&&t.push(e)}for(w=t.length,i=0;i<w;i++){var b=n===t?i:t[i],rt=n[b],u=c(rt,b),d=k(r,u),tt=h(d,u),ut=v(r,u),et=g(r,u),ot=y(r,u),it=new nt(tt,d,ut,et,ot);l.push(it);o[tt]=it}return{items:l,selectValueMap:o,getOptionFromViewValue:function(n){return o[a(n)]},getViewValueFromOption:function(n){return f?ft.copy(n.viewValue):n.viewValue}}}}}var u=t.createElement("option"),o=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,i,s,h){function ut(n,t){n.element=t;t.disabled=n.disabled;n.value!==t.value&&(t.value=n.selectValue);n.label!==t.label&&(t.label=n.label,t.textContent=n.label)}function it(n,t,i,r){var u;return t&&v(t.nodeName)===i?u=t:(u=r.cloneNode(!1),t?n.insertBefore(u,t):n.appendChild(u)),u}function ft(n){for(var t;n;)t=n.nextSibling,ue(n),n=t}function lt(n){var t=c&&c[0],i=p&&p[0];if(t||i)while(n&&(n===t||n===i))n=n.nextSibling;return n}function et(){var f=y&&w.readValue(),t,n,r;y=b.getOptions();t={};n=i[0].firstChild;k&&i.prepend(c);n=lt(n);y.items.forEach(function(r){var f,s,e;r.group?(f=t[r.group],f||(s=it(i[0],n,"optgroup",o),n=s.nextSibling,s.label=r.group,f=t[r.group]={groupElement:s,currentOptionElement:s.firstChild}),e=it(f.groupElement,f.currentOptionElement,"option",u),ut(r,e),f.currentOptionElement=e.nextSibling):(e=it(i[0],n,"option",u),ut(r,e),n=e.nextSibling)});Object.keys(t).forEach(function(n){ft(t[n].currentOptionElement)});ft(n);l.$render();l.$isEmpty(f)||(r=w.readValue(),(b.trackBy&&!st(f,r)||f!==r)&&(l.$setViewValue(r),l.$render()))}var l=h[1],w,rt,c,k,p;if(l){w=h[0];rt=s.multiple;for(var d=0,g=i.children(),ot=g.length;d<ot;d++)if(g[d].value===""){c=g.eq(d);break}k=!!c;p=f(u.cloneNode(!1));p.val("?");var y,b=e(s.ngOptions,i,t),ht=function(){k||i.prepend(c);i.val("");c.prop("selected",!0);c.attr("selected",!0)},nt=function(){k||c.remove()},ct=function(){i.prepend(p);i.val("?");p.prop("selected",!0);p.attr("selected",!0)},tt=function(){p.remove()};rt?(l.$isEmpty=function(n){return!n||n.length===0},w.writeValue=function(n){y.items.forEach(function(n){n.element.selected=!1});n&&n.forEach(function(n){var t=y.getOptionFromViewValue(n);t&&!t.disabled&&(t.element.selected=!0)})},w.readValue=function(){var t=i.val()||[],n=[];return r(t,function(t){var i=y.selectValueMap[t];i.disabled||n.push(y.getViewValueFromOption(i))}),n},b.trackBy&&t.$watchCollection(function(){if(a(l.$viewValue))return l.$viewValue.map(function(n){return b.getTrackByValue(n)})},function(){l.$render()})):(w.writeValue=function(n){var t=y.getOptionFromViewValue(n);t&&!t.disabled?i[0].value!==t.selectValue&&(tt(),nt(),i[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):n===null||k?(tt(),ht()):(nt(),ct())},w.readValue=function(){var n=y.selectValueMap[i.val()];return n&&!n.disabled?(nt(),tt(),y.getViewValueFromOption(n)):null},b.trackBy&&t.$watch(function(){return b.getTrackByValue(l.$viewValue)},function(){l.$render()}));k?(c.remove(),n(c)(t),c.removeClass("ng-scope")):c=f(u.cloneNode(!1));et();t.$watchCollection(b.getWatchables,et)}}}}],bk=["$locale","$interpolate","$log",function(n,t,i){var u=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(o,s,c){function g(n){s.text(n||"")}var p=c.count,w=c.$attr.when&&s.attr(c.$attr.when),b=c.offset||0,a=o.$eval(w)||{},d={},nt=t.startSymbol(),tt=t.endSymbol(),it=nt+p+"-"+b+tt,y=ft.noop,l;r(c,function(n,t){var i=f.exec(t),r;i&&(r=(i[1]?"-":"")+v(i[2]),a[r]=s.attr(c.$attr[t]))});r(a,function(n,i){d[i]=t(n.replace(u,it))});o.$watch(p,function(t){var r=parseFloat(t),f=isNaN(r),u;f||r in a||(r=n.pluralCat(r-b));r===l||f&&k(l)&&isNaN(l)||(y(),u=d[r],h(u)?(t!=null&&i.debug("ngPluralize: no rule defined for '"+r+"' in "+w),y=e,g()):y=o.$watch(u,g),l=r)})}}}],kk=["$parse","$animate",function(n,u){var o="$$NG_REMOVED",e=y("ngRepeat"),s=function(n,t,i,r,u,f,e){n[i]=r;u&&(n[u]=f);n.$index=t;n.$first=t===0;n.$last=t===e-1;n.$middle=!(n.$first||n.$last);n.$odd=!(n.$even=(t&1)==0)},h=function(n){return n.clone[0]},c=function(n){return n.clone[n.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(l,a){var b=a.ngRepeat,ft=t.createComment(" end ngRepeat: "+b+" "),v=b.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),k,p,d,g,it,ut,w;if(!v)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",b);var nt=v[1],et=v[2],y=v[3],tt=v[4];if(v=nt.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!v)throw e("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",nt);if(k=v[3]||v[1],p=v[2],y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw e("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);return w={$id:hi},tt?d=n(tt):(it=function(n,t){return hi(t)},ut=function(n){return n}),function(n,t,l,a,v){d&&(g=function(t,i,r){return p&&(w[p]=t),w[k]=i,w.$index=r,d(n,w)});var nt=rt();n.$watchCollection(et,function(l){var a,wt,ct=t[0],ot,lt=rt(),st,et,ht,d,pt,tt,w,at,vt,yt,bt;if(y&&(n[y]=l),ei(l))tt=l,pt=g||it;else{pt=g||ut;tt=[];for(yt in l)l.hasOwnProperty(yt)&&yt.charAt(0)!=="$"&&tt.push(yt)}for(st=tt.length,at=new Array(st),a=0;a<st;a++)if(et=l===tt?a:tt[a],ht=l[et],d=pt(et,ht,a),nt[d])w=nt[d],delete nt[d],lt[d]=w,at[a]=w;else if(lt[d]){r(at,function(n){n&&n.scope&&(nt[n.id]=n)});throw e("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",b,d,ht);}else at[a]={id:d,scope:i,clone:i},lt[d]=!0;for(bt in nt){if(w=nt[bt],vt=su(w.clone),u.leave(vt),vt[0].parentNode)for(a=0,wt=vt.length;a<wt;a++)vt[a][o]=!0;w.scope.$destroy()}for(a=0;a<st;a++)if(et=l===tt?a:tt[a],ht=l[et],w=at[a],w.scope){ot=ct;do ot=ot.nextSibling;while(ot&&ot[o]);h(w)!=ot&&u.move(su(w.clone),null,f(ct));ct=c(w);s(w.scope,a,k,ht,p,et,st)}else v(function(n,t){w.scope=t;var i=ft.cloneNode(!1);n[n.length++]=i;u.enter(n,null,f(ct));ct=i;w.clone=n;lt[w.id]=w;s(w.scope,a,k,ht,p,et,st)});nt=lt})}}}}],cl="ng-hide",ll="ng-hide-animate",dk=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(t,i,r){t.$watch(r.ngShow,function(t){n[t?"removeClass":"addClass"](i,cl,{tempClasses:ll})})}}}],gk=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(t,i,r){t.$watch(r.ngHide,function(t){n[t?"addClass":"removeClass"](i,cl,{tempClasses:ll})})}}}],nd=yi(function(n,t,i){n.$watch(i.ngStyle,function(n,i){i&&n!==i&&r(i,function(n,i){t.css(i,"")});n&&t.css(n)},!0)}),td=["$animate",function(n){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,u,f,e){var l=f.ngSwitch||f.on,c=[],h=[],o=[],s=[],a=function(n,t){return function(){n.splice(t,1)}};i.$watch(l,function(i){for(var l,v,u=0,f=o.length;u<f;++u)n.cancel(o[u]);for(o.length=0,u=0,f=s.length;u<f;++u)l=su(h[u].clone),s[u].$destroy(),v=o[u]=n.leave(l),v.then(a(o,u));h.length=0;s.length=0;(c=e.cases["!"+i]||e.cases["?"])&&r(c,function(i){i.transclude(function(r,u){var f,e;s.push(u);f=i.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");e={clone:r};h.push(e);n.enter(r,f.parent(),f)})})})}}}],id=yi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(n,t,i,r,u){r.cases["!"+i.ngSwitchWhen]=r.cases["!"+i.ngSwitchWhen]||[];r.cases["!"+i.ngSwitchWhen].push({transclude:u,element:t})}}),rd=yi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(n,t,i,r,u){r.cases["?"]=r.cases["?"]||[];r.cases["?"].push({transclude:u,element:t})}}),ud=yi({restrict:"EAC",link:function(n,t,i,r,u){if(!u)throw y("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",kt(t));u(function(n){t.empty();t.append(n)})}}),fd=["$templateCache",function(n){return{restrict:"E",terminal:!0,compile:function(t,i){if(i.type=="text/ng-template"){var r=i.id,u=t[0].text;n.put(r,u)}}}}],ed={$setViewValue:e,$render:e},od=["$element","$scope","$attrs",function(n,r){var u=this,o=new ki;u.ngModelCtrl=ed;u.unknownOption=f(t.createElement("option"));u.renderUnknownOption=function(t){var i="? "+hi(t)+" ?";u.unknownOption.val(i);n.prepend(u.unknownOption);n.val(i)};r.$on("$destroy",function(){u.renderUnknownOption=e});u.removeUnknownOption=function(){u.unknownOption.parent()&&u.unknownOption.remove()};u.readValue=function(){return u.removeUnknownOption(),n.val()};u.writeValue=function(t){u.hasOption(t)?(u.removeUnknownOption(),n.val(t),t===""&&u.emptyOption.prop("selected",!0)):t==null&&u.emptyOption?(u.removeUnknownOption(),n.val("")):u.renderUnknownOption(t)};u.addOption=function(n,t){bi(n,'"option value"');n===""&&(u.emptyOption=t);var i=o.get(n)||0;o.put(n,i+1)};u.removeOption=function(n){var t=o.get(n);t&&(t===1?(o.remove(n),n===""&&(u.emptyOption=i)):o.put(n,t-1))};u.hasOption=function(n){return!!o.get(n)}}],sd=function(){return{restrict:"E",require:["select","?ngModel"],controller:od,link:function(n,t,i,u){var f=u[1],e,h,s;if(f){e=u[0];e.ngModelCtrl=f;f.$render=function(){e.writeValue(f.$viewValue)};t.on("change",function(){n.$apply(function(){f.$setViewValue(e.readValue())})});i.multiple&&(e.readValue=function(){var n=[];return r(t.find("option"),function(t){t.selected&&n.push(t.value)}),n},e.writeValue=function(n){var i=new ki(n);r(t.find("option"),function(n){n.selected=o(i.get(n.value))})},s=NaN,n.$watch(function(){s!==f.$viewValue||st(h,f.$viewValue)||(h=ct(f.$viewValue),f.$render());s=f.$viewValue}),f.$isEmpty=function(n){return!n||n.length===0})}}}},hd=["$interpolate",function(n){function t(n){n[0].hasAttribute("selected")&&(n[0].selected=!0)}return{restrict:"E",priority:100,compile:function(i,r){if(h(r.value)){var u=n(i.text(),!0);u||r.$set("value",i.text())}return function(n,i,r){var e="$selectController",o=i.parent(),f=o.data(e)||o.parent().data(e);if(f&&f.ngModelCtrl){u?n.$watch(u,function(n,u){r.$set("value",n);u!==n&&f.removeOption(u);f.addOption(n,i);f.ngModelCtrl.$render();t(i)}):(f.addOption(r.value,i),f.ngModelCtrl.$render(),t(i));i.on("$destroy",function(){f.removeOption(r.value);f.ngModelCtrl.$render()})}}}}}],cd=yt({restrict:"E",terminal:!1}),al=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){r&&(i.required=!0,r.$validators.required=function(n,t){return!i.required||!r.$isEmpty(t)},i.$observe("required",function(){r.$validate()}))}}},vl=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,r,u){if(u){var f,e=r.ngPattern||r.pattern;r.$observe("pattern",function(n){if(l(n)&&n.length>0&&(n=new RegExp("^"+n+"$")),n&&!n.test)throw y("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,n,kt(t));f=n||i;u.$validate()});u.$validators.pattern=function(n){return u.$isEmpty(n)||h(f)||f.test(n)}}}}},yl=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var u=-1;i.$observe("maxlength",function(n){var t=it(n);u=isNaN(t)?-1:t;r.$validate()});r.$validators.maxlength=function(n,t){return u<0||r.$isEmpty(t)||t.length<=u}}}}},pl=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var u=0;i.$observe("minlength",function(n){u=it(n)||0;r.$validate()});r.$validators.minlength=function(n,t){return r.$isEmpty(t)||t.length>=u}}}}};if(n.angular.bootstrap){console.log("WARNING: Tried to load angular more than once.");return}aa();wa(ft);f(t).ready(function(){ha(t,ns)})})(window,document);window.angular.$$csp()||window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}<\/style>'),function(){"use strict";
/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
function n(t,r){function h(n,t){return function(){return n.apply(t,arguments)}}var o,f,e,u,s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!n.notNeeded(t)){for(f=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],e=this,u=0,s=f.length;u<s;u++)e[f[u]]=h(e[f[u]],e);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0));t.addEventListener("click",this.onClick,!0);t.addEventListener("touchstart",this.onTouchStart,!1);t.addEventListener("touchmove",this.onTouchMove,!1);t.addEventListener("touchend",this.onTouchEnd,!1);t.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(n,i,r){var u=Node.prototype.removeEventListener;n==="click"?u.call(t,n,i.hijacked||i,r):u.call(t,n,i,r)},t.addEventListener=function(n,i,r){var u=Node.prototype.addEventListener;n==="click"?u.call(t,n,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(t,n,i,r)});typeof t.onclick=="function"&&(o=t.onclick,t.addEventListener("click",function(n){o(n)},!1),t.onclick=null)}}var r=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!r,t=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,u=t&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=t&&/OS [6-7]_\d/.test(navigator.userAgent),e=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(t&&n.type==="file"||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)};n.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}};n.prototype.sendClick=function(n,t){var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur();i=t.changedTouches[0];r=document.createEvent("MouseEvents");r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);r.forwardedTouchEvent=!0;n.dispatchEvent(r)};n.prototype.determineEventType=function(n){return i&&n.tagName.toLowerCase()==="select"?"mousedown":"click"};n.prototype.focus=function(n){var i;t&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"&&n.type!=="month"?(i=n.value.length,n.setSelectionRange(i,i)):n.focus()};n.prototype.updateScrollParent=function(n){var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t;n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)};n.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n};n.prototype.onTouchStart=function(n){var r,i,f;if(n.targetTouches.length>1)return!0;if(r=this.getTargetElementFromEventTarget(n.target),i=n.targetTouches[0],t){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!u){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=i.identifier;this.updateScrollParent(r)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=i.pageX,this.touchStartY=i.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0};n.prototype.touchHasMoved=function(n){var t=n.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1};n.prototype.onTouchMove=function(n){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0};n.prototype.findControl=function(n){return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};n.prototype.onTouchEnd=function(n){var s,c,e,o,h,r=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(h=n.changedTouches[0],r=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),e=r.tagName.toLowerCase(),e==="label"){if(s=this.findControl(r),s){if(this.focus(r),i)return!1;r=s}}else if(this.needsFocus(r))return n.timeStamp-c>100||t&&window.top!==window&&e==="input"?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,n),t&&e==="select"||(this.targetElement=null,n.preventDefault()),!1);return t&&!u&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(n.preventDefault(),this.sendClick(r,n)),!1)};n.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};n.prototype.onMouse=function(n){return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0};n.prototype.onClick=function(n){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)};n.prototype.destroy=function(){var n=this.layer;i&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0));n.removeEventListener("click",this.onClick,!0);n.removeEventListener("touchstart",this.onTouchStart,!1);n.removeEventListener("touchmove",this.onTouchMove,!1);n.removeEventListener("touchend",this.onTouchEnd,!1);n.removeEventListener("touchcancel",this.onTouchCancel,!1)};n.notNeeded=function(n){var t,r,u,f;if(typeof ontouchstart=="undefined")return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r)if(i){if(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||r>31&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return e&&(u=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),u[1]>=10&&u[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.msTouchAction==="none"||n.style.touchAction==="manipulation"?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.touchAction==="none"||n.style.touchAction==="manipulation"?!0:!1};n.attach=function(t,i){return new n(t,i)};typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return n}):typeof module!="undefined"&&module.exports?(module.exports=n.attach,module.exports.FastClick=n):window.FastClick=n}(),function(n){if(typeof exports=="object"&&typeof module=="object")return n(exports);if(typeof define=="function"&&define.amd)return define(["exports"],n);n(self.acorn||(self.acorn={}))}(function(n){"use strict";function eu(n){u=n||{};for(var t in tr)u.hasOwnProperty(t)||(u[t]=tr[t]);nr=u.sourceFile||null}function e(n,r){var f=ou(i,n),u;r+=" ("+f.line+":"+f.column+")";u=new SyntaxError(r);u.pos=n;u.loc=f;u.raisedAt=t;throw u;}function ni(n){function e(n){if(n.length==1)return i+="return str === "+JSON.stringify(n[0])+";";i+="switch(str){";for(var t=0;t<n.length;++t)i+="case "+JSON.stringify(n[t])+":";i+="return true}return false;"}var i,r,u,t,f;n=n.split(" ");i="";r=[];n:for(t=0;t<n.length;++t){for(u=0;u<r.length;++u)if(r[u][0].length==n[t].length){r[u].push(n[t]);continue n}r.push([n[t]])}if(r.length>3){for(r.sort(function(n,t){return t.length-n.length}),i+="switch(str.length){",t=0;t<r.length;++t)f=r[t],i+="case "+f[0].length+":",e(f);i+="}"}else e(n);return new Function("str",i)}function pi(n){return n<65?n===36:n<91?!0:n<97?n===95:n<123?!0:n>=170&&hf.test(String.fromCharCode(n))}function cf(n){return n<48?n===36:n<58?!0:n<65?!1:n<91?!0:n<97?n===95:n<123?!0:n>=170&&we.test(String.fromCharCode(n))}function lt(){this.line=it;this.column=t-b}function lf(){it=1;t=b=0;si=!0;wi()}function a(n,i){vt=t;u.locations&&(oi=new lt);f=n;wi();tt=i;si=n.beforeExpr}function be(){var o=u.onComment&&u.locations&&new lt,r=t,f=i.indexOf("*/",t+=2),n;if(f===-1&&e(t-2,"Unterminated comment"),t=f+2,u.locations)for(bt.lastIndex=r;(n=bt.exec(i))&&n.index<t;)++it,b=n.index+n[0].length;if(u.onComment)u.onComment(!0,i.slice(r+2,f),r,t,o,u.locations&&new lt)}function ke(){for(var r=t,f=u.onComment&&u.locations&&new lt,n=i.charCodeAt(t+=2);t<st&&n!==10&&n!==13&&n!==8232&&n!==8329;)++t,n=i.charCodeAt(t);if(u.onComment)u.onComment(!1,i.slice(r+2,t),r,t,f,u.locations&&new lt)}function wi(){for(var n,r;t<st;)if(n=i.charCodeAt(t),n===32)++t;else if(n===13)++t,r=i.charCodeAt(t),r===10&&++t,u.locations&&(++it,b=t);else if(n===10)++t,++it,b=t;else if(n<14&&n>8)++t;else if(n===47)if(r=i.charCodeAt(t+1),r===42)be();else if(r===47)ke();else break;else if(n<14&&n>8||n===32||n===160)++t;else if(n>=5760&&pe.test(String.fromCharCode(n)))++t;else break}function de(){var n=i.charCodeAt(t+1);return n>=48&&n<=57?vf(!0):(++t,a(ar))}function ge(){var n=i.charCodeAt(t+1);return si?(++t,af()):n===61?v(wt,2):v(yr,1)}function no(){var n=i.charCodeAt(t+1);return n===61?v(wt,2):v(le,1)}function to(n){var r=i.charCodeAt(t+1);return r===n?v(n===124?re:ue,2):r===61?v(wt,2):v(n===124?fe:oe,1)}function io(){var n=i.charCodeAt(t+1);return n===61?v(wt,2):v(ee,1)}function ro(n){var r=i.charCodeAt(t+1);return r===n?v(ie,2):r===61?v(wt,2):v(te,1)}function uo(n){var u=i.charCodeAt(t+1),r=1;return u===n?(r=n===62&&i.charCodeAt(t+2)===62?3:2,i.charCodeAt(t+r)===61)?v(wt,r+1):v(ce,r):(u===61&&(r=i.charCodeAt(t+2)===61?3:2),v(he,r))}function fo(n){var r=i.charCodeAt(t+1);return r===61?v(se,i.charCodeAt(t+2)===61?3:2):v(n===61?pr:ef,1)}function eo(n){switch(n){case 46:return de();case 40:return++t,a(g);case 41:return++t,a(k);case 59:return++t,a(nt);case 44:return++t,a(rt);case 91:return++t,a(ai);case 93:return++t,a(vi);case 123:return++t,a(yt);case 125:return++t,a(ct);case 58:return++t,a(pt);case 63:return++t,a(vr);case 48:var r=i.charCodeAt(t+1);if(r===120||r===88)return oo();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return vf(!1);case 34:case 39:return so(n);case 47:return ge(n);case 37:case 42:return no();case 124:case 38:return to(n);case 94:return io();case 43:case 45:return ro(n);case 60:case 62:return uo(n);case 61:case 33:return fo(n);case 126:return v(ef,1)}return!1}function ti(n){var r,o,f;if(n?t=l+1:l=t,u.locations&&(ei=new lt),n)return af();if(t>=st)return a(ci);if(r=i.charCodeAt(t),pi(r)||r===92)return pf();if(o=eo(r),o===!1){if(f=String.fromCharCode(r),f==="\\"||hf.test(f))return pf();e(t,"Unexpected character '"+f+"'")}return o}function v(n,r){var u=i.slice(t,t+r);t+=r;a(n,u)}function af(){for(var s="",o,r,u=t,n,f;;){if(t>=st&&e(u,"Unterminated regular expression"),n=i.charAt(t),br.test(n)&&e(u,"Unterminated regular expression"),o)o=!1;else{if(n==="[")r=!0;else if(n==="]"&&r)r=!1;else if(n==="/"&&!r)break;o=n==="\\"}++t}return s=i.slice(u,t),++t,f=yf(),f&&!/^[gmsiy]*$/.test(f)&&e(u,"Invalid regexp flag"),a(ur,new RegExp(s,f))}function ii(n,r){for(var u,e,o=t,f=0,s=0,h=r==null?Infinity:r;s<h;++s){if(u=i.charCodeAt(t),e=u>=97?u-87:u>=65?u-55:u>=48&&u<=57?u-48:Infinity,e>=n)break;++t;f=f*n+e}return t===o||r!=null&&t-o!==r?null:f}function oo(){t+=2;var n=ii(16);return n==null&&e(l+2,"Expected hexadecimal number"),pi(i.charCodeAt(t))&&e(t,"Identifier directly after number"),a(gt,n)}function vf(n){var f=t,s=!1,h=i.charCodeAt(t)===48,r,u,o;return n||ii(10)!==null||e(f,"Invalid number"),i.charCodeAt(t)===46&&(++t,ii(10),s=!0),r=i.charCodeAt(t),(r===69||r===101)&&(r=i.charCodeAt(++t),(r===43||r===45)&&++t,ii(10)===null&&e(f,"Invalid number"),s=!0),pi(i.charCodeAt(t))&&e(t,"Identifier directly after number"),u=i.slice(f,t),s?o=parseFloat(u):h&&u.length!==1?/[89]/.test(u)||w?e(f,"Invalid number"):o=parseInt(u,8):o=parseInt(u,10),a(gt,o)}function so(n){var r,o,f;for(t++,r="";;){if(t>=st&&e(l,"Unterminated string constant"),o=i.charCodeAt(t),o===n)return++t,a(hi,r);if(o===92){for(o=i.charCodeAt(++t),f=/^[0-7]+/.exec(i.slice(t,t+3)),f&&(f=f[0]);f&&parseInt(f,8)>255;)f=f.slice(0,f.length-1);if(f==="0"&&(f=null),++t,f)w&&e(t-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(f,8)),t+=f.length-1;else switch(o){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(bi(2));break;case 117:r+=String.fromCharCode(bi(4));break;case 85:r+=String.fromCharCode(bi(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\x0b";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:i.charCodeAt(t)===10&&++t;case 10:u.locations&&(b=t,++it);break;default:r+=String.fromCharCode(o)}}else(o===13||o===10||o===8232||o===8329)&&e(l,"Unterminated string constant"),r+=String.fromCharCode(o),++t}}function bi(n){var t=ii(16,n);return t===null&&e(l,"Bad character escape sequence"),t}function yf(){var n,u,f,o,r,s;for(kt=!1,u=!0,f=t;;){if(o=i.charCodeAt(t),cf(o))kt&&(n+=i.charAt(t)),++t;else if(o===92)kt||(n=i.slice(f,t)),kt=!0,i.charCodeAt(++t)!=117&&e(t,"Expecting Unicode escape sequence \\uXXXX"),++t,r=bi(4),s=String.fromCharCode(r),s||e(t-1,"Invalid Unicode escape"),(u?pi(r):cf(r))||e(t-4,"Invalid Unicode escape"),n+=s;else break;u=!1}return kt?n:i.slice(f,t)}function pf(){var n=yf(),t=ht;return kt||(ye(n)?t=lr[n]:(u.forbidReserved&&(u.ecmaVersion===3?ae:ve)(n)||w&&of(n))&&e(l,"The keyword '"+n+"' is reserved")),a(t,n)}function o(){ir=l;ft=vt;rr=oi;ti()}function kr(n){for(w=n,t=ft;t<b;)b=i.lastIndexOf("\n",b-2)+1,--it;wi();ti()}function wf(){this.type=null;this.start=l;this.end=null}function bf(){this.start=ei;this.end=null;nr!==null&&(this.source=nr)}function y(){var n=new wf;return u.locations&&(n.loc=new bf),u.ranges&&(n.range=[l,0]),n}function et(n){var t=new wf;return t.start=n.start,u.locations&&(t.loc=new bf,t.loc.start=n.loc.start),u.ranges&&(t.range=[n.range[0],0]),t}function r(n,t){return n.type=t,n.end=ft,u.locations&&(n.loc.end=rr),u.ranges&&(n.range[1]=ft),n}function dr(n){return u.ecmaVersion>=5&&n.type==="ExpressionStatement"&&n.expression.type==="Literal"&&n.expression.value==="use strict"}function s(n){if(f===n)return o(),!0}function ki(){return!u.strictSemicolons&&(f===ci||f===ct||br.test(i.slice(ft,l)))}function at(){s(nt)||ki()||ut()}function c(n){f===n?o():ut()}function ut(){e(l,"Unexpected token")}function di(n){n.type!=="Identifier"&&n.type!=="MemberExpression"&&e(n.start,"Assigning to rvalue");w&&n.type==="Identifier"&&yi(n.name)&&e(n.start,"Assigning to "+n.name+" in strict mode")}function ho(n){var i,e,o;for(ir=ft=t,u.locations&&(rr=new lt),dt=w=null,h=[],ti(),i=n||y(),e=!0,n||(i.body=[]);f!==ci;)o=d(),i.body.push(o),e&&dr(o)&&kr(!0),e=!1;return r(i,"Program")}function d(){var b,n,rt,et,a,t,lt,vt,v,st,it,u,wt;f===yr&&ti(!0);b=f;n=y();switch(b){case fr:case hu:for(o(),rt=b===fr,s(nt)||ki()?n.label=null:f!==ht?ut():(n.label=ot(),at()),u=0;u<h.length;++u)if(et=h[u],n.label==null||et.name===n.label.name){if(et.kind!=null&&(rt||et.kind==="loop"))break;if(n.label&&rt)break}return u===h.length&&e(n.start,"Unsyntactic "+b.keyword),r(n,rt?"BreakStatement":"ContinueStatement");case cu:return o(),at(),r(n,"DebuggerStatement");case au:return o(),h.push(gi),n.body=d(),h.pop(),c(cr),n.test=ri(),at(),r(n,"DoWhileStatement");case pu:return(o(),h.push(gi),c(g),f===nt)?gr(n,null):f===hr?(a=y(),o(),gf(a,!0),a.declarations.length===1&&s(li))?df(n,a):gr(n,a):(a=p(!1,!0),s(li))?(di(a),df(n,a)):gr(n,a);case or:return o(),uu(n,!0);case wu:return o(),n.test=ri(),n.consequent=d(),n.alternate=s(vu)?d():null,r(n,"IfStatement");case bu:return dt||e(l,"'return' outside of function"),o(),s(nt)||ki()?n.argument=null:(n.argument=p(),at()),r(n,"ReturnStatement");case sr:for(o(),n.discriminant=ri(),n.cases=[],c(yt),h.push(kf);f!=ct;)f===er||f===lu?(vt=f===er,t&&r(t,"SwitchCase"),n.cases.push(t=y()),t.consequent=[],o(),vt?t.test=p():(lt&&e(ir,"Multiple default clauses"),lt=!0,t.test=null),c(pt)):(t||ut(),t.consequent.push(d()));return t&&r(t,"SwitchCase"),o(),h.pop(),r(n,"SwitchStatement");case ku:return o(),br.test(i.slice(ft,l))&&e(ft,"Illegal newline after throw"),n.argument=p(),at(),r(n,"ThrowStatement");case du:return o(),n.block=ui(),n.handler=null,f===su&&(v=y(),o(),c(g),v.param=ot(),w&&yi(v.param.name)&&e(v.param.start,"Binding "+v.param.name+" in strict mode"),c(k),v.guard=null,v.body=ui(),n.handler=r(v,"CatchClause")),n.finalizer=s(yu)?ui():null,n.handler||n.finalizer||e(n.start,"Missing catch or finally clause"),r(n,"TryStatement");case hr:return o(),n=gf(n),at(),n;case cr:return o(),n.test=ri(),h.push(gi),n.body=d(),h.pop(),r(n,"WhileStatement");case gu:return w&&e(l,"'with' in strict mode"),o(),n.object=ri(),n.body=d(),r(n,"WithStatement");case yt:return ui();case nt:return o(),r(n,"EmptyStatement");default:if(st=tt,it=p(),b===ht&&it.type==="Identifier"&&s(pt)){for(u=0;u<h.length;++u)h[u].name===st&&e(it.start,"Label '"+st+"' is already declared");return wt=f.isLoop?"loop":f===sr?"switch":null,h.push({name:st,kind:wt}),n.body=d(),h.pop(),n.label=it,r(n,"LabeledStatement")}return n.expression=it,at(),r(n,"ExpressionStatement")}}function ri(){c(g);var n=p();return c(k),n}function ui(){var n=y(),u=!0,t=!1,f,i;for(n.body=[],c(yt);!s(ct);)i=d(),n.body.push(i),u&&dr(i)&&(f=t,kr(t=!0)),u=!1;return t&&!f&&kr(!1),r(n,"BlockStatement")}function gr(n,t){return n.init=t,c(nt),n.test=f===nt?null:p(),c(nt),n.update=f===k?null:p(),c(k),n.body=d(),h.pop(),r(n,"ForStatement")}function df(n,t){return n.left=t,n.right=p(),c(k),n.body=d(),h.pop(),r(n,"ForInStatement")}function gf(n,t){for(n.declarations=[],n.kind="var";;){var i=y();if(i.id=ot(),w&&yi(i.id.name)&&e(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=s(pr)?p(!0,t):null,n.declarations.push(r(i,"VariableDeclarator")),!s(rt))break}return r(n,"VariableDeclaration")}function p(n,t){var u=nu(t),i;if(!n&&f===rt){for(i=et(u),i.expressions=[u];s(rt);)i.expressions.push(nu(t));return r(i,"SequenceExpression")}return u}function nu(n){var i=co(n),t;return f.isAssign?(t=et(i),t.operator=tt,t.left=i,o(),t.right=nu(n),di(i),r(t,"AssignmentExpression")):i}function co(n){var i=lo(n),t;return s(vr)?(t=et(i),t.test=i,t.consequent=p(!0),c(pt),t.alternate=p(!0,n),r(t,"ConditionalExpression")):i}function lo(n){return tu(iu(n),-1,n)}function tu(n,t,i){var e=f.binop,u;return e!=null&&(!i||f!==li)&&e>t?(u=et(n),u.left=n,u.operator=tt,o(),u.right=tu(iu(i),e,i),u=r(u,/&&|\|\|/.test(u.operator)?"LogicalExpression":"BinaryExpression"),tu(u,t,i)):n}function iu(n){var u,i,t;if(f.prefix)return t=y(),u=f.isUpdate,t.operator=tt,t.prefix=!0,o(),t.argument=iu(n),u?di(t.argument):w&&t.operator==="delete"&&t.argument.type==="Identifier"&&e(t.start,"Deleting local variable in strict mode"),r(t,u?"UpdateExpression":"UnaryExpression");for(i=ao();f.postfix&&!ki();)t=et(i),t.operator=tt,t.prefix=!1,t.argument=i,di(i),o(),i=r(t,"UpdateExpression");return i}function ao(){return fi(ru())}function fi(n,t){var i;return s(ar)?(i=et(n),i.object=n,i.property=ot(!0),i.computed=!1,fi(r(i,"MemberExpression"),t)):s(ai)?(i=et(n),i.object=n,i.property=p(),i.computed=!0,c(vi),fi(r(i,"MemberExpression"),t)):!t&&s(g)?(i=et(n),i.callee=n,i.arguments=fu(k,!1),fi(r(i,"CallExpression"),t)):n}function ru(){var s,e,t,n;switch(f){case tf:return n=y(),o(),r(n,"ThisExpression");case ht:return ot();case gt:case hi:case ur:return n=y(),n.value=tt,n.raw=i.slice(l,vt),o(),r(n,"Literal");case rf:case uf:case ff:return n=y(),n.value=f.atomValue,n.raw=f.keyword,o(),r(n,"Literal");case g:return s=ei,e=l,o(),t=p(),t.start=e,t.end=vt,u.locations&&(t.loc.start=s,t.loc.end=oi),u.ranges&&(t.range=[e,vt]),c(k),t;case ai:return n=y(),o(),n.elements=fu(vi,!0,!0),r(n,"ArrayExpression");case yt:return yo();case or:return n=y(),o(),uu(n,!1);case nf:return vo();default:ut()}}function vo(){var n=y();return o(),n.callee=fi(ru(),!0),n.arguments=s(g)?fu(k,!1):[],r(n,"NewExpression")}function yo(){var i=y(),b=!0,k=!1,n,v,h,l,t,a;for(i.properties=[],o();!s(ct);){if(b)b=!1;else if(c(rt),u.allowTrailingCommas&&s(ct))break;if(n={key:ne()},v=!1,s(pt)?(n.value=p(!0),h=n.kind="init"):u.ecmaVersion>=5&&n.key.type==="Identifier"&&(n.key.name==="get"||n.key.name==="set")?(v=k=!0,h=n.kind=n.key.name,n.key=ne(),f!==g&&ut(),n.value=uu(y(),!1)):ut(),n.key.type==="Identifier"&&(w||k))for(l=0;l<i.properties.length;++l)t=i.properties[l],t.key.name===n.key.name&&(a=h==t.kind||v&&t.kind==="init"||h==="init"&&(t.kind==="get"||t.kind==="set"),a&&!w&&h==="init"&&t.kind==="init"&&(a=!1),a&&e(n.key.start,"Redefinition of property"));i.properties.push(n)}return r(i,"ObjectExpression")}function ne(){return f===gt||f===hi?ru():ot(!0)}function uu(n,t){var l,a,v,i,u,o;for(f===ht?n.id=ot():t?ut():n.id=null,n.params=[],l=!0,c(g);!s(k);)l?l=!1:c(rt),n.params.push(ot());if(a=dt,v=h,dt=!0,h=[],n.body=ui(!0),dt=a,h=v,w||n.body.body.length&&dr(n.body.body[0]))for(i=n.id?-1:0;i<n.params.length;++i)if(u=i<0?n.id:n.params[i],(of(u.name)||yi(u.name))&&e(u.start,"Defining '"+u.name+"' in strict mode"),i>=0)for(o=0;o<i;++o)u.name===n.params[o].name&&e(u.start,"Argument name clash in strict mode");return r(n,t?"FunctionDeclaration":"FunctionExpression")}function fu(n,t,i){for(var r=[],e=!0;!s(n);){if(e)e=!1;else if(c(rt),t&&u.allowTrailingCommas&&s(n))break;i&&f===rt?r.push(null):r.push(p(!0))}return r}function ot(n){var t=y();return t.name=f===ht?tt:n&&!u.forbidReserved&&f.keyword||ut(),o(),r(t,"Identifier")}var u,i,st,nr,tr,ou,t,l,vt,ei,oi,f,tt,si,it,b,ir,ft,rr,dt,h,w,wr,kt,gi,kf;n.version="0.1.01";n.parse=function(n,t){return i=String(n),st=i.length,eu(t),lf(),ho(u.program)};tr=n.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null};ou=n.getLineInfo=function(n,t){for(var i,u=1,r=0;;)if(bt.lastIndex=r,i=bt.exec(n),i&&i.index<t)++u,r=i.index+i[0].length;else break;return{line:u,column:t-r}};n.tokenize=function(n,r){function o(n){return ti(n),e.start=l,e.end=vt,e.startLoc=ei,e.endLoc=oi,e.type=f,e.value=tt,e}i=String(n);st=i.length;eu(r);lf();var e={};return o.jumpTo=function(n,r){var f,e;if(t=n,u.locations)for(it=b=bt.lastIndex=0;(f=bt.exec(i))&&f.index<n;)++it,b=f.index+f[0].length;e=i.charAt(n-1);si=r;wi()},o};var gt={type:"num"},ur={type:"regexp"},hi={type:"string"},ht={type:"name"},ci={type:"eof"},fr={keyword:"break"},er={keyword:"case",beforeExpr:!0},su={keyword:"catch"},hu={keyword:"continue"},cu={keyword:"debugger"},lu={keyword:"default"},au={keyword:"do",isLoop:!0},vu={keyword:"else",beforeExpr:!0},yu={keyword:"finally"},pu={keyword:"for",isLoop:!0},or={keyword:"function"},wu={keyword:"if"},bu={keyword:"return",beforeExpr:!0},sr={keyword:"switch"},ku={keyword:"throw",beforeExpr:!0},du={keyword:"try"},hr={keyword:"var"},cr={keyword:"while",isLoop:!0},gu={keyword:"with"},nf={keyword:"new",beforeExpr:!0},tf={keyword:"this"},rf={keyword:"null",atomValue:null},uf={keyword:"true",atomValue:!0},ff={keyword:"false",atomValue:!1},li={keyword:"in",binop:7,beforeExpr:!0},lr={"break":fr,"case":er,"catch":su,"continue":hu,"debugger":cu,"default":lu,"do":au,"else":vu,"finally":yu,"for":pu,"function":or,"if":wu,"return":bu,"switch":sr,"throw":ku,"try":du,"var":hr,"while":cr,"with":gu,"null":rf,"true":uf,"false":ff,"new":nf,"in":li,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":tf,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},ai={type:"[",beforeExpr:!0},vi={type:"]"},yt={type:"{",beforeExpr:!0},ct={type:"}"},g={type:"(",beforeExpr:!0},k={type:")"},rt={type:",",beforeExpr:!0},nt={type:";",beforeExpr:!0},pt={type:":",beforeExpr:!0},ar={type:"."},vr={type:"?",beforeExpr:!0},yr={binop:10,beforeExpr:!0},pr={isAssign:!0,beforeExpr:!0},wt={isAssign:!0,beforeExpr:!0},te={binop:9,prefix:!0,beforeExpr:!0},ie={postfix:!0,prefix:!0,isUpdate:!0},ef={prefix:!0,beforeExpr:!0},re={binop:1,beforeExpr:!0},ue={binop:2,beforeExpr:!0},fe={binop:3,beforeExpr:!0},ee={binop:4,beforeExpr:!0},oe={binop:5,beforeExpr:!0},se={binop:6,beforeExpr:!0},he={binop:7,beforeExpr:!0},ce={binop:8,beforeExpr:!0},le={binop:10,beforeExpr:!0};n.tokTypes={bracketL:ai,bracketR:vi,braceL:yt,braceR:ct,parenL:g,parenR:k,comma:rt,semi:nt,colon:pt,dot:ar,question:vr,slash:yr,eq:pr,name:ht,eof:ci,num:gt,regexp:ur,string:hi};for(wr in lr)n.tokTypes[wr]=lr[wr];var ae=ni("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ve=ni("class enum extends super const export import"),of=ni("implements interface let package private protected public static yield"),yi=ni("eval arguments"),ye=ni("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),pe=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,sf="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",hf=new RegExp("["+sf+"]"),we=new RegExp("["+sf+"ͱ-ʹ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),br=/[\n\r\u2028\u2029]/,bt=/\r\n|[\n\r\u2028\u2029]/g;gi={kind:"loop"};kf={kind:"switch"}}),function(){typeof window=="undefined"&&(window=this);$data=window.$data||(window.$data=function n(){if(this instanceof n){var t=n.implementation.apply(this,arguments);return new t(arguments[1])}return n.implementation.apply(this,arguments)})}(this);typeof console=="undefined"&&(console={warn:function(){},error:function(){},log:function(){},dir:function(){},time:function(){},timeEnd:function(){}});console.warn||(console.warn=function(){});console.error||(console.error=function(){}),function(n){n.__namespace=!0;n.version="JayData 1.3.6";n.versionNumber="1.3.6";n.root={};n.Acorn=n.Acorn||(typeof acorn=="object"?acorn:undefined);n.Esprima=n.Esprima||(typeof esprima=="object"?esprima:undefined)}($data);Exception=function(n,t,i){Error.call(this);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.name=t||"Exception";this.message=n;this.data=i};Exception.prototype.__proto__=Error.prototype;Exception.prototype._getStackTrace=function(){};Guard={};Guard.requireValue=function(n,t){(typeof t=="undefined"||t===null)&&Guard.raise(n+" requires a value other than undefined or null")};Guard.requireType=function(n,t,i){var r=i instanceof Array?i:[i];return r.some(function(i){switch(typeof i){case"string":return typeof t===i;case"function":return t instanceof i;default:Guard.raise("Unknown type format : "+typeof i+" for: "+n)}})};Guard.raise=function(n){if(typeof intellisense=="undefined"){n instanceof Exception?console.error(n.name+":",n.message+"\n",n):console.error(n);throw n;}};Object.isNullOrUndefined=function(n){return n===undefined||n===null},function(){if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t}),Object.create||(Object.create=function(n){function t(){}return arguments.length>1&&Guard.raise(new Error("Object.create implementation only accepts the first parameter.")),t.prototype=n,new t}),!Object.keys){var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;Object.keys=function(u){var e,o,f;(typeof u!="object"&&typeof u!="function"||u===null)&&Guard.raise(new TypeError("Object.keys called on non-object"));e=[];for(o in u)t.call(u,o)&&e.push(o);if(i)for(f=0;f<r;f++)t.call(u,n[f])&&e.push(n[f]);return e}}Object.defineProperty||(Object.defineProperty=function(n,t,i){n[t]=i.value||{}});Object.defineProperties||(Object.defineProperties=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i].value||{})});Array.prototype.forEach||(Array.prototype.forEach=function(n,t){for(var i=0,r=this.length;i<r;i++)t?n.call(t,this[i],i,this):n(this[i],i,this)});Array.prototype.filter||(Array.prototype.filter=function(n,t){for(var u,r=[],i=0,f=this.length;i<f;i++)u=t?n.call(t,this[i],i,this):n(this[i],i,this),u===!0&&r.push(this[i]);return r});Array.prototype.map||(Array.prototype.map=function(n,t){for(var u,r=[],i=0,f=this.length;i<f;i++)u=t?n.call(t,this[i],i,this):n(this[i],i,this),r.push(u);return r});Array.prototype.some||(Array.prototype.some=function(n,t){for(var u,i=0,r=this.length;i<r;i++)if(u=t?n.call(t,this[i],i,this):n(this[i],i,this),u)return!0;return!1});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1});String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")});String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")});Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t&&n?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});typeof Uint8Array=="undefined"&&(Uint8Array=function(n){var t,i,r;if(n instanceof Uint8Array)return n;t=this;i=Array.isArray(n)?n:new Array(n);this.length=i.length;this.byteLength=this.length;this.byteOffset=0;this.buffer={byteLength:t.length};var u=function(n){return i[n]},f=function(n,t){i[n]=(t|0)&255},e=function(n){i[n]=i[n]||0;Object.defineProperty(t,n,{enumerable:!0,configurable:!1,get:function(){if(isNaN(+n)||(n|0)<0||(n|0)>=t.length)try{return typeof document!="undefined"&&document.createTextNode("").splitText(1),new RangeError("INDEX_SIZE_ERR")}catch(i){return i}return u(n)},set:function(i){if(isNaN(+n)||(n|0)<0||(n|0)>=t.length)try{return typeof document!="undefined"&&document.createTextNode("").splitText(1),new RangeError("INDEX_SIZE_ERR")}catch(r){return r}f(n|0,i)}})};for(r=0;r<t.length;r++)e(r)})}(),function(n,t){function i(t,i){if(this.kind=r.property,Object.defineProperty(this,"definedBy",{value:i,enumerable:!1,configurable:!1,writable:!1}),t){if(typeof t=="function"||typeof t.asFunction=="function")this.method=t,this.kind=r.method;else if(this.enumerable=!0,this.configurable=!0,typeof t=="number")this.value=t,this.type=n.Number,this.dataType=n.Number;else if(typeof t=="string")this.value=t,this.dataType=n.String,this.type=n.String;else for(var u in t)t.hasOwnProperty(u)&&(this[u]=t[u]);this.type!==undefined?this.dataType=this.dataType||this.type:this.type=this.dataType;this.originalType=this.type;this.elementType!==undefined&&(this.originalElementType=this.elementType)}}function f(){}function h(){this.classNames={}}function r(){}function e(t){function l(n,t){e[n]=e[n]||[];e[n].push(t)}var u=t,s,o,c,e,i;u&&u.addChildContainer(this);var f={},h=[],r=[];this.classNames=f;this.consolidatedClassNames=h;this.classTypes=r;s=[];this.mappedTo=s;o=this;this.holder=null;c=function(n,t){var i=o.resolveType(n),r=Object.create(i.prototype);return i.apply(r,t),r};e={};this.pendingResolutions=e;this.addChildContainer=function(){};this.createInstance=function(n,t){return c(n,t)};this.mapType=function(n,t){Guard.requireValue("aliasType",n);Guard.requireValue("realType",t);var i=this.getType(n),u=this.getType(t),f=r.indexOf(i),e=r.indexOf(u);s[f]=e};this.isPrimitiveType=function(t){var i=this.resolveType(t);switch(!0){case i===Number:case i===String:case i===Date:case i===Boolean:case i===Array:case i===Object:case i===n.Number:case i===n.Integer:case i===n.Date:case i===n.String:case i===n.Boolean:case i===n.Array:case i===n.Object:case i===n.Guid:case i===n.Byte:case i===n.SByte:case i===n.Decimal:case i===n.Float:case i===n.Int16:case i===n.Int32:case i===n.Int64:case i===n.DateTimeOffset:case i===n.Time:case i===n.SimpleBase:case i===n.Geospatial:case i===n.GeographyBase:case i===n.GeographyPoint:case i===n.GeographyLineString:case i===n.GeographyPolygon:case i===n.GeographyMultiPoint:case i===n.GeographyMultiLineString:case i===n.GeographyMultiPolygon:case i===n.GeographyCollection:case i===n.GeometryBase:case i===n.GeometryPoint:case i===n.GeometryLineString:case i===n.GeometryPolygon:case i===n.GeometryMultiPoint:case i===n.GeometryMultiLineString:case i===n.GeometryMultiPolygon:case i===n.GeometryCollection:return!0;default:return!1}};this.resolveName=function(n){var t=this.resolveType(n),i=r.indexOf(t);return h[i]};this.resolveType=function(n,t){var i=n,u;return i=this.getType(i,t?!0:!1,t),u=r.indexOf(i),typeof s[u]=="undefined"?i:r[s[u]]};this.getType=function(n,t,i){var e,o;if(Guard.requireValue("typeOrName",n),typeof n=="function")return n;if(!(n in f)){if(u&&(e=u.getType(n,!0),e))return e;if(i){l(n,i);return}if(t)return undefined;Guard.raise(new Exception("Unable to resolve type:"+n))}return o=r[f[n]],i&&i(o),o};this.getName=function(n){var i=this.getType(n),t=r.indexOf(i);return t==-1&&Guard.raise("unknown type to request name for: "+n),h[t]};this.getTypes=function(){for(var t,i=Object.keys(f),u=[],n=0;n<i.length;n++)t=i[n],u.push({name:t,type:r[f[t]],toString:function(){return this.name}});return u};this.getTypeName=function(t){switch(typeof t){case"object":if(t==null)return"$data.Object";if(t instanceof Array)return"$data.Array";if(t.getType)return t.getType().fullName;if(t instanceof Date)return"$data.Date";if(t instanceof n.Guid)return"$data.Guid";if(t instanceof n.DateTimeOffset)return"$data.DateTimeOffset";if(t instanceof n.GeographyPoint)return"$data.GeographyPoint";if(t instanceof n.GeographyLineString)return"$data.GeographyLineString";if(t instanceof n.GeographyPolygon)return"$data.GeographyPolygon";if(t instanceof n.GeographyMultiPoint)return"$data.GeographyMultiPoint";if(t instanceof n.GeographyMultiLineString)return"$data.GeographyMultiLineString";if(t instanceof n.GeographyMultiPolygon)return"$data.GeographyMultiPolygon";if(t instanceof n.GeographyCollection)return"$data.GeographyCollection";if(t instanceof n.GeographyBase)return"$data.GeographyBase";if(t instanceof n.GeometryPoint)return"$data.GeometryPoint";if(t instanceof n.GeometryLineString)return"$data.GeometryLineString";if(t instanceof n.GeometryPolygon)return"$data.GeometryPolygon";if(t instanceof n.GeometryMultiPoint)return"$data.GeometryMultiPoint";if(t instanceof n.GeometryMultiLineString)return"$data.GeometryMultiLineString";if(t instanceof n.GeometryMultiPolygon)return"$data.GeometryMultiPolygon";if(t instanceof n.GeometryCollection)return"$data.GeometryCollection";if(t instanceof n.GeometryBase)return"$data.GeometryBase";if(t instanceof n.Geospatial)return"$data.Geospatial";if(t instanceof n.SimpleBase)return"$data.SimpleBase";if(typeof t.toHexString=="function")return"$data.ObjectID";default:return typeof t}};this.isTypeRegistered=function(n){return typeof n=="function"?r.indexOf(n)>-1:n in f};this.unregisterType=function(){Guard.raise("Unimplemented")};this.getDefault=function(t){var i=this.resolveType(t);switch(i){case n.Number:return 0;case n.Float:return 0;case n.Decimal:return"0.0";case n.Integer:return 0;case n.Int16:return 0;case n.Int32:return 0;case n.Int64:return"0";case n.Byte:return 0;case n.SByte:return 0;case n.String:return null;case n.Boolean:return!1;default:return null}};this.getIndex=function(n){var t=this.resolveType(n);return r.indexOf(t)};this.resolveByIndex=function(n){return r[n]};this.registerType=function(n,t,i){var l,y,p,w,a,k,s,v,d,b;if(n){for(typeof t=="string"&&(t=o.resolveType(t)),l=[],typeof n=="string"?(y=[],y.push(n),l=y):l=n,a=0;a<l.length;a++)p=l[a].split("."),s={},s.shortName=p[p.length-1],s.fullName=l[a],l[a]=s;for(w=function(){return c(t,arguments)},typeof intellisense!="undefined"&&intellisense.annotate(w,t),a=0,k=l.length;a<k;a++)s=l[a],"create"+s.shortName in o||(o["create"+s.shortName]=typeof i=="function"?i:w),v=r.indexOf(t),v==-1&&(v=r.push(t)-1,d=s.fullName,h[v]=s.fullName),f[s.fullName]=v,b=e[s.fullName]||[],b.length>0&&(b.forEach(function(n){n(t)}),e[s.fullName]=[]);u&&u.registerType.apply(u,arguments);t.name||(t.name=l[0].shortName)}};i={from:{},to:{}};this.converters=i;this.convertTo=function(t,r,u,f){var c;if(Guard.requireValue("typeOrName",r),Object.isNullOrUndefined(t))return t;var s=Container.getTypeName(t),l=Container.resolveType(s),s=Container.resolveName(l),h=Container.resolveType(r),e=Container.resolveName(h),o;try{if(typeof h["from"+s]=="function")o=h["from"+s].apply(h,arguments);else if(typeof l["to"+e]=="function")o=l["to"+e].apply(l,arguments);else if(i.to[e]&&i.to[e][s])o=i.to[e][s].apply(i,arguments);else if(i.from[s]&&i.from[s][e])o=i.from[s][e].apply(i,arguments);else if(e===s||t instanceof h)o=t;else if(i.to[e]&&i.to[e]["default"])o=i.to[e]["default"].apply(i,arguments);else throw"converter not found";}catch(a){Guard.raise(new Exception("Value '"+s+"' not convertable to '"+e+"'","TypeError",t))}if(h===n.Array&&u&&Array.isArray(o))for(c=0;c<o.length;c++)o[c]=this.convertTo.call(this,o[c],u,undefined,f);return o};this.registerConverter=function(t,r,u,f){var e=Container.resolveName(t),o;Container.isTypeRegistered(r)?(i.to[e]=i.to[e]||{},i.from[e]=i.from[e]||{},o=Container.resolveName(r),u&&(i.to[e][o]=u),f&&(i.from[e][o]=f)):(i.to[e]=i.to[e]?n.typeSystem.extend(i.to[e],r):r,i.from[e]=i.from[e]?n.typeSystem.extend(i.from[e],u):u)}}var u,c,o,s;i.prototype.createPropertyDescriptor=function(n,t){var r=this,i={enumerable:this.enumerable==undefined?!0:this.enumerable,configurable:this.configurable==undefined?!0:this.configurable};return this.set&&this.get?(i.set=this.set,i.get=this.get):"value"in this||t?(i.value=t||this.value,i.writable=!0):(i.set=function(n){this.storeProperty(r,n)},i.get=function(){return this.retrieveProperty(r)}),i};i.prototype.createStorePropertyDescriptor=function(n){var t=this;return{enumerable:!1,writable:!0,configurable:t.configurable,value:n}};i.prototype.createGetMethod=function(){var n=this;return{enumerable:!1,writable:!1,configurable:!1,value:function(t,i){return this.getProperty(n,t,i)}}};i.prototype.createSetMethod=function(){var n=this;return{enumerable:!1,writable:!1,configurable:!1,value:function(t,i,r){return this.setProperty(n,t,i,r)}}};i.translateDefinition=function(t,r,u){function h(t){t&&t.isAssignableTo&&n.Entity&&t.isAssignableTo(n.Entity)&&u.childResolverThunks.push(function(){t.resolveForwardDeclarations&&t.resolveForwardDeclarations()})}var s=u,f,e,o;return t.type&&Container.isTypeRegistered(t.type)&&(s=Container.resolveType(t.type),typeof s.translateDefinition=="function"?(f=s.translateDefinition.apply(s,arguments),f.name=f.name||r):s=u),f instanceof i||(f=new i(f||t,s),f.name=r),u.resolverThunks=u.resolverThunks||[],u.childResolverThunks=u.childResolverThunks||[],e=f.type,o=f.elementType,h(e),h(o),"string"==typeof e&&("@"===e[0]?(f.type=e.substr(1),f.dataType=e.substr(1)):u.resolverThunks.push(function(){var n=u.container.resolveType(e);h(n);f.type=n;f.dataType=n})),o&&"string"==typeof o&&("@"===o[0]?f.elementType=o.substr(1):u.resolverThunks.push(function(){var n=u.container.resolveType(o);h(n);f.elementType=n})),u.resolveForwardDeclarations=function(){u.resolveForwardDeclarations=function(){};n.Trace.log("resolving: "+u.fullName);this.resolverThunks.forEach(function(n){n()});this.childResolverThunks.forEach(function(n){n()})},f};i.prototype.toJSON=function(){var t={};for(var n in this)if(n!=="defineBy"&&n!=="storageModel")if((n==="type"||n==="dataType")&&this[n]&&typeof this[n]=="function")try{t[n]=Container.resolveName(this[n])}catch(i){t[n]=this[n]}else t[n]=this[n];return t};n.MemberDefinition=window.MemberDefinition=i;u="$";f.prototype={clearCache:function(){this.arrayCache=undefined;this.pubMapPropsCache=undefined;this.keyPropsCache=undefined;this.propByTypeCache=undefined;this.pubMapMethodsCache=undefined;this.pubMapPropNamesCache=undefined},asArray:function(){if(!this.arrayCache){this.arrayCache=[];for(var n in this)n.indexOf(u)===0&&this.arrayCache.push(this[n])}return this.arrayCache},getPublicMappedProperties:function(){if(!this.pubMapPropsCache){this.pubMapPropsCache=[];for(var n in this)n.indexOf(u)===0&&this[n].kind=="property"&&!this[n].notMapped&&this[n].enumerable&&this.pubMapPropsCache.push(this[n])}return this.pubMapPropsCache},getPublicMappedPropertyNames:function(){if(!this.pubMapPropNamesCache){this.pubMapPropNamesCache=[];for(var n in this)n.indexOf(u)===0&&this[n].kind=="property"&&!this[n].notMapped&&this[n].enumerable&&this.pubMapPropNamesCache.push(this[n].name)}return this.pubMapPropNamesCache},getKeyProperties:function(){if(!this.keyPropsCache){this.keyPropsCache=[];for(var n in this)n.indexOf(u)===0&&this[n].kind=="property"&&this[n].key&&this.keyPropsCache.push(this[n])}return this.keyPropsCache},getPublicMappedMethods:function(){if(!this.pubMapMethodsCache){this.pubMapMethodsCache=[];for(var n in this)n.indexOf(u)===0&&this[n].kind=="method"&&this[n].method&&this.pubMapMethodsCache.push(this[n])}return this.pubMapMethodsCache},getPropertyByType:function(n){if(!this.propByTypeCache){this.propByTypeCache=[];for(var t in this)t.indexOf(u)===0&&this[t].dataType==n&&this.propByTypeCache.push(this[t])}return this.propByTypeCache},getMember:function(n){return this[u+n]},setMember:function(n){this[u+n.name]=n}};f.prototype.constructor=f;n.MemberDefinitionCollection=window.MemberDefinitionCollection=f;r.__enum=!0;r.method="method";r.property="property";r.navProperty="navProperty";r.complexProperty="complexProperty";r.field="field";n.MemberTypes=r;h.prototype={define:function(n,t,i,r,u){return this.defineEx(n,[{type:t}],i,r,u)},defineEx:function(t,i,r,u,f){var y,c,a,e,p,o,v;for(r=r||n.Container,i.length==0?i.push({type:n.Base}):i.length>0&&!i[0].type&&(i[0].type=n.Base),o=0,y=i.length;o<y;o++)typeof i[o]=="function"&&(i[o]={type:i[o]});var w=u?u.constructor:undefined,s=t.split("."),l=s.splice(s.length-1,1)[0],h=r===n.Container?window:r;for(o=0;o<s.length;o++)c=s[o],h[c]||(a={},a.__namespace=!0,h[c]=a),h=h[c];for(e=null,e=this.classFunctionBuilder(l,i,f,u),e.fullName=t,e.namespace=s.join("."),e.name=l,e.container=r,e.container.registerType(t,e),this.buildType(e,i,u,f),typeof intellisense!="undefined"&&u&&u.constructor&&intellisense.annotate(e,u.constructor),h[l]=this.classNames[t]=e,p=e.baseTypes.length,o=0;o<p;o++)v=e.baseTypes[o],"inheritedTypeProcessor"in v&&v.inheritedTypeProcessor(e);return e},classFunctionBuilder:function(n,t,i,r){var u=this.bodyBuilder(t,i,r);return new Function("base","classDefinition","instanceDefinition","name","return function "+n+" (){ "+u+" \n}; ")(t,i,r,n)},bodyBuilder:function(t,i,r){for(var u,s,h="",f="",e="",o=0,c=t.length;o<c;o++)u=t[o],s=o,s==0?u&&u.type&&u.type!==n.Base&&u.type.fullName&&(f+="    var baseArguments = $data.typeSystem.createCtorParams(arguments, base["+s+"].params, this); \n",f+="    "+u.type.fullName+".apply(this, baseArguments); \n"):u&&u.type&&u.propagateTo?(e+="    "+(e?"":"var ")+"propagationArguments = $data.typeSystem.createCtorParams(arguments, base["+s+"].params, this); \n",e+='    this["'+u.propagateTo+'"] =  Object.create('+u.type.fullName+".prototype); \n    "+u.type.fullName+'.apply(this["'+u.propagateTo+'"], propagationArguments); \n'):u&&u.type&&u.type.memberDefinitions&&u.type.memberDefinitions.$constructor&&!u.propagateTo&&(h+="    "+u.type.fullName+".memberDefinitions.$constructor.method.apply(this); \n");return r&&r.constructor!=Object&&(f+="    instanceDefinition.constructor.apply(this, arguments); \n"),"\n    //mixins \n"+h+"\n    //construction \n"+f+"\n    //propagations \n"+e},buildType:function(n,t,i,r){var e=t[0].type,o,u,s;if(n.inheritsFrom=e,e){if(n.prototype=Object.create(e.prototype),n.memberDefinitions=Object.create(e.memberDefinitions||new f),n.memberDefinitions.clearCache(),o=e.staticDefinitions,o&&(o=o.asArray(),o))for(u=0;u<o.length;u++)this.buildMember(n,o[u],undefined,"staticDefinitions");for(n.baseTypes=e.baseTypes?[].concat(e.baseTypes):[],u=0;u<t.length;u++)n.baseTypes.push(t[u].type);n.isAssignableTo||Object.defineProperty(n,"isAssignableTo",{value:function(n){return this===n||this.baseTypes.indexOf(n)>=0},writable:!1,enumerable:!1,configurable:!1})}r&&(this.buildStaticMembers(n,r),r.constructor&&(n.classConstructor=r.constructor));i&&this.buildInstanceMembers(n,i);s=[].concat(t);s.shift();Object.keys(s).length>0&&this.buildInstanceMixins(n,s);n.__class=!0;n.prototype.constructor=n;Object.defineProperty(n.prototype,"getType",{value:function(){return n},writable:!1,enumerable:!1,configurable:!1})},addMethod:function(n,t,i,r){n[t]=r&&typeof intellisense=="undefined"?function(){return i.apply(this[r],arguments)}:i},addProperty:function(n,t,i,r){var u,f;r&&(i.configurable=!0,i.get&&(u=i.get,i.get=function(){return this[r]||Guard.raise(new Exception("not inicialized")),u.apply(this[r],arguments)}),i.set&&(f=i.set,i.set=function(){this[r]||Guard.raise(new Exception("not inicialized"));f.apply(this[r],arguments)}));Object.defineProperty(n,t,i)},addField:function(){Guard.raise("not implemented")},buildMethod:function(n,t,i){var r=t.classMember?n:n.prototype;this.addMethod(r,t.name,t.method,i)},buildProperty:function(n,t,i){var r=t.classMember?n:n.prototype,e=t.createPropertyDescriptor(n),u,f;this.addProperty(r,t.name,e,i);t.classMember||n.__setPropertyfunctions!=!0||t.withoutGetSetMethod===!0||"get_"+t.name in r||"set_"+t.name in r||(u=t.createGetMethod(),this.addProperty(r,"get_"+t.name,u,i),f=t.createSetMethod(),this.addProperty(r,"set_"+t.name,f,i))},buildMember:function(n,t,i,u){u=u||"memberDefinitions";n[u]=n[u]||new f;n[u].setMember(t);switch(t.kind){case r.method:this.buildMethod(n,t,i);break;case r.navProperty:case r.complexProperty:case r.property:this.buildProperty(n,t,i);break;default:Guard.raise("Unknown member type: "+t.kind+","+t.name)}},buildStaticMembers:function(n,t){var f=this,r,u;for(r in t)t.hasOwnProperty(r)&&(u=i.translateDefinition(t[r],r,n),u.classMember=!0,f.buildMember(n,u,undefined,"staticDefinitions"))},buildInstanceMembers:function(n,t){var f=this,r,u;for(r in t)t.hasOwnProperty(r)&&(u=i.translateDefinition(t[r],r,n),f.buildMember(n,u,undefined,"memberDefinitions"))},copyMembers:function(n,t){function i(n){typeof intellisense!="undefined"&&intellisense.logMessage(n)}Object.keys(n.prototype).forEach(function(r){r!=="constructor"&&r!=="toString"&&(i("copying item:"+r),t.prototype[r]=n[r])})},buildInstanceMixins:function(n,t){var r,i;for(n.mixins=n.mixins||[],n.propagations=n.propagations||[],r=0;r<t.length;r++)i=t[r],i.propagateTo?(this.buildInstancePropagation(n,i),n.propagations.push(i),n.propagations[i.type.name]=!0):(this.buildInstanceMixin(n,i),n.mixins.push(i),n.mixins[i.type.name]=!0)},buildInstanceMixin:function(n,t){for(var u,r,f=t.type.memberDefinitions.asArray(),i=0,e=f.length;i<e;i++)r=f[i].name,r==="constructor"||n.memberDefinitions.getMember(r)||this.buildMember(n,f[i]);if(t.type.staticDefinitions)for(u=t.type.staticDefinitions.asArray(),i=0,e=u.length;i<e;i++)r=u[i].name,r==="constructor"||n.memberDefinitions.getMember(r)||this.buildMember(n,u[i],undefined,"staticDefinitions")},buildInstancePropagation:function(n,t){for(var u,r=t.type.memberDefinitions.asArray(),i=0,f=r.length;i<f;i++)u=r[i].name,u==="constructor"||n.memberDefinitions.getMember(u)||this.buildMember(n,r[i],t.propagateTo)}};n.Class=Class=new h;t=window;n.ContainerClass=e;t.Container=n.Container=c=t.C$=new e;n.createContainer=function(){return new e(n.Container)};t.$C=function(){Class.define.apply(Class,arguments)};o=function(n,t){var i="_"+n.name;this[i]?this[i]=t:Object.defineProperty(this,i,n.createStorePropertyDescriptor(t))};s=function(n){var t="_"+n.name;return this[t]};n.Class.define("$data.Base",function(){},null,{storeProperty:o,retrieveProperty:s,setProperty:function(n,t,i){this[n.name]=t;i()},getProperty:function(n,t){t.apply(this,[this[n.name]])}},{create:function(){return Container.createInstance(this,arguments)},extend:function(t,i,r,u){return!i||i instanceof e||(u=r,r=i,i=undefined),n.Class.define(t,this,i,r,u)},getMemberDefinition:function(n){return this.memberDefinitions.getMember(n)},addProperty:function(t,r,u,f){var e=r,o=u,s,h,c;return typeof e=="string"&&(s=r,e=u,o=f),h={notMapped:!0,storeOnObject:!0,get:typeof e=="function"?e:function(){},set:typeof o=="function"?o:function(){},type:s},c=i.translateDefinition(h,t,this),n.Class.buildMember(this,c),this.memberDefinitions.clearCache(),this},addMember:function(t,r,u){var f=i.translateDefinition(r,t,this);return u?(f.classMember=!0,n.Class.buildMember(this,f,undefined,"staticDefinitions"),this.staticDefinitions.clearCache()):(n.Class.buildMember(this,f),this.memberDefinitions.clearCache()),this},describeField:function(n,t){var i=this.memberDefinitions.getMember(n);return i?Guard.raise(new Exception("Field '"+n+"' already defined!","Invalid operation")):this.addMember(n,t),this},storeProperty:o,retrieveProperty:s,"from$data.Object":function(n){return n}});n.Class.ConstructorParameter=ConstructorParameter=n.Class.define("ConstructorParameter",null,null,{constructor:function(n){this.paramIndex=n},paramIndex:{}})}($data,window);$data.defaultErrorCallback=function(){arguments.length>0&&arguments[arguments.length-1]&&typeof arguments[arguments.length-1].reject=="function"?((console.error||console.log).call(console,arguments[0]),arguments[arguments.length-1].reject.apply(arguments[arguments.length-1],arguments)):arguments[0]instanceof Error?Guard.raise(arguments[0]):Guard.raise(new Exception("DEFAULT ERROR CALLBACK!","DefaultError",arguments))};$data.defaultSuccessCallback=function(){};$data.defaultNotifyCallback=function(){};$data.typeSystem={__namespace:!0,extend:function(n){var i,t;for(typeof n!="object"&&typeof n!="function"&&Guard.raise("Target must be object or function"),i=1;i<arguments.length;i++)if(t=arguments[i],t!==null&&typeof t!="undefined")for(key in t)n[key]=t[key];return n},createCallbackSetting:function(n,t){function u(n){function i(){n.apply(t,arguments);n=function(){}}var t=this;return i}var r={success:$data.defaultSuccessCallback,error:$data.defaultErrorCallback,notify:$data.defaultNotifyCallback},i;return t!=undefined&&t!=null&&(r=t),i=n==null||n==undefined?r:typeof n=="function"?this.extend(r,{success:n}):this.extend(r,n),typeof i.error=="function"&&(i.error=u(i.error)),i},createCtorParams:function(n,t,i){var u,f,e,r;if(t){for(u=[],f=0,e=t.length;f<e;f++)r=f,t[r]instanceof ConstructorParameter?u.push(n[t[r].paramIndex]):typeof t[r]=="function"?u.push(t[r].apply(i)):u.push(t[r]);return u}return n},writePropertyValues:function(n){n&&n.getType&&n.getType().memberDefinitions&&this.writeProperties(n,n.getType().memberDefinitions.asArray().filter(function(n){return(n.kind=="property"||n.kind=="navProperty"||n.kind=="complexProperty")&&!n.prototypeProperty}))},writeProperties:function(n,t){for(var i,u={},r=0,f=t.length;r<f;r++)i=t[r],u[i.name]=i.createPropertyDescriptor(null,i.value);Object.defineProperties(n,u)},writeProperty:function(n,t,i){var r=typeof t=="string"?n.getType().memberDefinitions.getMember(t):t,u;r&&(u=r.createPropertyDescriptor(null,i),Object.defineProperty(n,r.name,u))}};$data.debug=function(){(console.debug||console.log).apply(console,arguments)};$data.debugWith=function(){var n=arguments;return function(t){(console.debug||console.log).apply(console,n);typeof Error!="undefined"&&t instanceof Error||typeof Exception!="undefined"&&t instanceof Exception?(console.error||console.log).apply(console,arguments):(console.debug||console.log).apply(console,arguments)}};$data.fdebug={success:$data.debugWith("success"),error:$data.debugWith("error")};$data.Number=typeof Number!="undefined"?Number:function(){};$data.Date=typeof Date!="undefined"?Date:function(){};$data.String=typeof String!="undefined"?String:function(){};$data.Boolean=typeof Boolean!="undefined"?Boolean:function(){};$data.Array=typeof Array!="undefined"?Array:function(){};$data.Object=typeof Object!="undefined"?Object:function(){};$data.Function=Function;$data.Byte=function(){};$data.SByte=function(){};$data.Decimal=function(){};$data.Float=$data.Single=function(){};$data.Integer=function(){};$data.Int16=function(){};$data.Int32=function(){};$data.Int64=function(){};$data.ObjectID=typeof $data.mongoDBDriver!="undefined"&&typeof $data.mongoDBDriver.ObjectID!="undefined"?$data.mongoDBDriver.ObjectID:function(){};$data.Time=function(){};$data.DateTimeOffset=function(n){this.value=n};$data.DateTimeOffset.prototype.toJSON=function(){return this.value instanceof Date?this.value.toISOString():this.value};$data.Container.registerType(["$data.Number","number","JayNumber","double"],$data.Number);$data.Container.registerType(["$data.Integer","int","integer","JayInteger"],$data.Integer);$data.Container.registerType(["$data.Int32","int32","JayInt32"],$data.Int32);$data.Container.registerType(["$data.Byte","byte","JayByte"],$data.Byte);$data.Container.registerType(["$data.SByte","sbyte","JaySByte"],$data.SByte);$data.Container.registerType(["$data.Decimal","decimal","JayDecimal"],$data.Decimal);$data.Container.registerType(["$data.Float","$data.Single","float","single","JayFloat"],$data.Float);$data.Container.registerType(["$data.Int16","int16","word","JayInt16"],$data.Int16);$data.Container.registerType(["$data.Int64","int64","long","JayInt64"],$data.Int64);$data.Container.registerType(["$data.String","string","text","character","JayString"],$data.String);$data.Container.registerType(["$data.Array","array","Array","[]","JayArray"],$data.Array,function(){return $data.Array.apply(undefined,arguments)});$data.Container.registerType(["$data.Date","datetime","date","JayDate"],$data.Date);$data.Container.registerType(["$data.Time","time","JayTime"],$data.Time);$data.Container.registerType(["$data.DateTimeOffset","offset","datetimeoffset","JayDateTimeOffset"],$data.DateTimeOffset);$data.Container.registerType(["$data.Boolean","bool","boolean","JayBoolean"],$data.Boolean);$data.Container.registerType(["$data.Object","Object","object","{}","JayObject"],$data.Object);$data.Container.registerType(["$data.Function","Function","function"],$data.Function);$data.Container.registerType(["$data.ObjectID","ObjectID","objectId","objectid","ID","Id","id","JayObjectID"],$data.ObjectID);$data.Class.define("$data.TraceBase",null,null,{log:function(){},warn:function(){},error:function(){}});$data.Trace=new $data.TraceBase;$data.Class.define("$data.Logger",$data.TraceBase,null,{log:function(){Array.prototype.unshift.call(arguments,this.getDateFormat());console.log.apply(console,arguments)},warn:function(){Array.prototype.unshift.call(arguments,this.getDateFormat());console.warn.apply(console,arguments)},error:function(){Array.prototype.unshift.call(arguments,this.getDateFormat());console.error.apply(console,arguments)},getDateFormat:function(){var n=new Date;return n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()}});$data.Number=typeof Number!="undefined"?Number:function(){};$data.Date=typeof Date!="undefined"?Date:function(){};$data.String=typeof String!="undefined"?String:function(){};$data.Boolean=typeof Boolean!="undefined"?Boolean:function(){};$data.Array=typeof Array!="undefined"?Array:function(){};$data.Object=typeof Object!="undefined"?Object:function(){};$data.Function=Function;$data.Byte=function(){};$data.SByte=function(){};$data.Decimal=function(){};$data.Float=$data.Single=function(){};$data.Integer=function(){};$data.Int16=function(){};$data.Int32=function(){};$data.Int64=function(){};$data.ObjectID=typeof $data.mongoDBDriver!="undefined"&&typeof $data.mongoDBDriver.ObjectID!="undefined"?$data.mongoDBDriver.ObjectID:function(){};$data.Time=function(){};$data.DateTimeOffset=function(n){this.value=n};$data.DateTimeOffset.prototype.toJSON=function(){return this.value instanceof Date?this.value.toISOString():this.value};$data.Container.registerType(["$data.Number","number","JayNumber","double"],$data.Number);$data.Container.registerType(["$data.Integer","int","integer","JayInteger"],$data.Integer);$data.Container.registerType(["$data.Int32","int32","JayInt32"],$data.Int32);$data.Container.registerType(["$data.Byte","byte","JayByte"],$data.Byte);$data.Container.registerType(["$data.SByte","sbyte","JaySByte"],$data.SByte);$data.Container.registerType(["$data.Decimal","decimal","JayDecimal"],$data.Decimal);$data.Container.registerType(["$data.Float","$data.Single","float","single","JayFloat"],$data.Float);$data.Container.registerType(["$data.Int16","int16","word","JayInt16"],$data.Int16);$data.Container.registerType(["$data.Int64","int64","long","JayInt64"],$data.Int64);$data.Container.registerType(["$data.String","string","text","character","JayString"],$data.String);$data.Container.registerType(["$data.Array","array","Array","[]","JayArray"],$data.Array,function(){return $data.Array.apply(undefined,arguments)});$data.Container.registerType(["$data.Date","datetime","date","JayDate"],$data.Date);$data.Container.registerType(["$data.Time","time","JayTime"],$data.Time);$data.Container.registerType(["$data.DateTimeOffset","offset","datetimeoffset","JayDateTimeOffset"],$data.DateTimeOffset);$data.Container.registerType(["$data.Boolean","bool","boolean","JayBoolean"],$data.Boolean);$data.Container.registerType(["$data.Object","Object","object","{}","JayObject"],$data.Object);$data.Container.registerType(["$data.Function","Function","function"],$data.Function);$data.Container.registerType(["$data.ObjectID","ObjectID","objectId","objectid","ID","Id","id","JayObjectID"],$data.ObjectID);$data.SimpleBase=function(n){var t,i;if(typeof n=="object"&&n)if(Array.isArray(this.constructor.validMembers))for(t=0;t<this.constructor.validMembers.length;t++)i=this.constructor.validMembers[t],n[i]!==undefined&&(this[i]=n[i]);else delete n.type,$data.typeSystem.extend(this,n)};$data.SimpleBase.registerType=function(n,t,i){i=i||$data.SimpleBase;t.type=n;t.prototype=Object.create(i.prototype);t.prototype.constructor=t};$data.Container.registerType(["$data.SimpleBase","SimpleBase"],$data.SimpleBase);$data.Geospatial=function(){var n,t;if(this.type=this.constructor.type,Array.isArray(this.constructor.validMembers))for(n=0;n<this.constructor.validMembers.length;n++)t=this.constructor.validMembers[n],this[t]=undefined;$data.SimpleBase.apply(this,arguments);this.type=this.constructor.type||"Unknown"};$data.SimpleBase.registerType("Geospatial",$data.Geospatial);$data.Container.registerType(["$data.Geospatial","Geospatial"],$data.Geospatial);$data.point=function(n){if(n&&n.crs)return n.crs.properties&&n.crs.properties.name===$data.GeometryBase.defaultCrs.properties.name?new $data.GeometryPoint(n):new $data.GeographyPoint(n);if(n){if("x"in n&&"y"in n)return new $data.GeometryPoint(n.x,n.y);if("longitude"in n&&"latitude"in n)return new $data.GeographyPoint(n.longitude,n.latitude);if("lng"in n&&"lat"in n)return new $data.GeographyPoint(n.lng,n.lat)}};$data.GeographyBase=function(){$data.Geospatial.apply(this,arguments);this.crs=$data.GeographyBase.defaultCrs;$data.GeographyBase.validateGeoJSON(this)};$data.GeographyBase.defaultCrs={properties:{name:"EPSG:4326"},type:"name"};$data.GeographyBase.parseFromString=function(n){var i=n.indexOf("("),r,t;if(i>=0){if(r=n.substring(0,i).toLowerCase(),t=$data.GeographyBase.registered[r],t&&t.parseFromString&&t!=$data.GeographyBase)return t.parseFromString(n);Guard.raise(new Exception("parseFromString","Not Implemented",n))}};$data.GeographyBase.stringifyToUrl=function(n){if(n instanceof $data.GeographyBase&&n.constructor&&n.constructor.stringifyToUrl)return n.constructor.stringifyToUrl(n);if(n instanceof $data.GeographyBase&&n.constructor&&Array.isArray(n.constructor.validMembers)&&n.constructor.validMembers[0]==="coordinates"){var t="geography'"+n.type.toUpperCase()+"(";function i(n){if(Array.isArray(n[0]))for(var r=0;r<n.length;r++)r>0&&(t+=","),Array.isArray(n[r][0])&&(t+="("),i(n[r]),Array.isArray(n[r][0])&&(t+=")");else t+=n.join(" ")}return i(n.coordinates,t),t+=")'"}Guard.raise(new Exception("stringifyToUrl on instance type","Not Implemented",n))};$data.GeographyBase.registerType=function(n,t,i){$data.SimpleBase.registerType(n,t,i||$data.GeographyBase);$data.GeographyBase.registered=$data.GeographyBase.registered||{};$data.GeographyBase.registered[n.toLowerCase()]=t};$data.GeographyBase.validateGeoJSON=function(n){var t=n.type,i,r;if(t&&(i=$data.GeographyBase.registered[t.toLowerCase()],typeof i.validateGeoJSON=="function")){if(r=i.validateGeoJSON(n),r)return r;Guard.raise(new Exception("Invalid '"+t+"' format!","Format Exception",n))}console.log("GeoJSON validation missing",n);return};$data.SimpleBase.registerType("GeographyBase",$data.GeographyBase,$data.Geospatial);$data.Container.registerType(["$data.GeographyBase"],$data.GeographyBase);$data.GeographyPoint=function(n,t){n&&typeof n=="object"&&Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):n&&typeof n=="object"&&("longitude"in n||"latitude"in n)?$data.GeographyBase.call(this,{coordinates:[n.longitude,n.latitude]}):n&&typeof n=="object"&&("lng"in n||"lat"in n)?$data.GeographyBase.call(this,{coordinates:[n.lng,n.lat]}):n&&typeof n=="object"?$data.GeographyBase.call(this,n):$data.GeographyBase.call(this,{coordinates:[n||0,t||0]})};$data.GeographyPoint.validateGeoJSON=function(n){return n&&Array.isArray(n.coordinates)&&n.coordinates.length==2&&typeof n.coordinates[0]=="number"&&typeof n.coordinates[1]=="number"};$data.GeographyPoint.parseFromString=function(n){var i=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")),t=i.split(" ");return new $data.GeographyPoint(parseFloat(t[0]),parseFloat(t[1]))};$data.GeographyPoint.validMembers=["coordinates"];$data.GeographyBase.registerType("Point",$data.GeographyPoint);Object.defineProperty($data.GeographyPoint.prototype,"longitude",{get:function(){return this.coordinates[0]},set:function(n){this.coordinates[0]=n}});Object.defineProperty($data.GeographyPoint.prototype,"latitude",{get:function(){return this.coordinates[1]},set:function(n){this.coordinates[1]=n}});$data.Container.registerType(["$data.GeographyPoint","GeographyPoint","$data.Geography","Geography","geography","geo"],$data.GeographyPoint);$data.Geography=$data.GeographyPoint;$data.GeographyLineString=function(n){Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):$data.GeographyBase.call(this,n)};$data.GeographyLineString.validateGeoJSON=function(n){for(var t,i=n&&Array.isArray(n.coordinates),r=0;i&&r<n.coordinates.length;r++)t=n.coordinates[r],i=i&&Array.isArray(t)&&t.length==2&&typeof t[0]=="number"&&typeof t[1]=="number";return i};$data.GeographyLineString.validMembers=["coordinates"];$data.GeographyBase.registerType("LineString",$data.GeographyLineString);$data.Container.registerType(["$data.GeographyLineString","GeographyLineString"],$data.GeographyLineString);$data.GeographyPolygon=function(n){var i,r,u,f,t;typeof n=="object"&&("topLeft"in n&&"bottomRight"in n||"topRight"in n&&"bottomLeft"in n)?("topLeft"in n&&"bottomRight"in n?(i=n.topLeft instanceof $data.GeographyPoint?n.topLeft:new $data.GeographyPoint(n.topLeft),f=n.bottomRight instanceof $data.GeographyPoint?n.bottomRight:new $data.GeographyPoint(n.bottomRight),r=new $data.GeographyPoint([f.coordinates[0],i.coordinates[1]]),u=new $data.GeographyPoint([i.coordinates[0],f.coordinates[1]])):(r=n.topRight instanceof $data.GeographyPoint?n.topRight:new $data.GeographyPoint(n.topRight),u=n.bottomLeft instanceof $data.GeographyPoint?n.bottomLeft:new $data.GeographyPoint(n.bottomLeft),i=new $data.GeographyPoint([u.coordinates[0],r.coordinates[1]]),f=new $data.GeographyPoint([r.coordinates[0],u.coordinates[1]])),t=[],t.push([].concat(i.coordinates)),t.push([].concat(r.coordinates)),t.push([].concat(f.coordinates)),t.push([].concat(u.coordinates)),t.push([].concat(i.coordinates)),$data.GeographyBase.call(this,{coordinates:[t]})):Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):$data.GeographyBase.call(this,n)};$data.GeographyPolygon.validateGeoJSON=function(n){for(var r,u,i,t=n&&Array.isArray(n.coordinates),f=0;t&&f<n.coordinates.length;f++)for(r=n.coordinates[f],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)i=r[u],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeographyPolygon.parseFromString=function(n){for(var u,f,i,e,t=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")),o=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split("),("),t=[],r=0;r<o.length;r++){for(u=[],f=o[r].split(","),i=0;i<f.length;i++)e=f[i].split(" "),u.push([parseFloat(e[0]),parseFloat(e[1])]);t.push(u)}return new $data.GeographyPolygon(t)};$data.GeographyPolygon.validMembers=["coordinates"];$data.GeographyBase.registerType("Polygon",$data.GeographyPolygon);$data.Container.registerType(["$data.GeographyPolygon","GeographyPolygon"],$data.GeographyPolygon);$data.GeographyMultiPoint=function(n){Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):$data.GeographyBase.call(this,n)};$data.GeographyMultiPoint.validateGeoJSON=function(n){for(var t,i=n&&Array.isArray(n.coordinates),r=0;i&&r<n.coordinates.length;r++)t=n.coordinates[r],i=i&&Array.isArray(t)&&t.length==2&&typeof t[0]=="number"&&typeof t[1]=="number";return i};$data.GeographyMultiPoint.validMembers=["coordinates"];$data.GeographyBase.registerType("MultiPoint",$data.GeographyMultiPoint);$data.Container.registerType(["$data.GeographyMultiPoint","GeographyMultiPoint"],$data.GeographyMultiPoint);$data.GeographyMultiLineString=function(n){Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):$data.GeographyBase.call(this,n)};$data.GeographyMultiLineString.validateGeoJSON=function(n){for(var r,u,i,t=n&&Array.isArray(n.coordinates),f=0;t&&f<n.coordinates.length;f++)for(r=n.coordinates[f],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)i=r[u],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeographyMultiLineString.validMembers=["coordinates"];$data.GeographyBase.registerType("MultiLineString",$data.GeographyMultiLineString);$data.Container.registerType(["$data.GeographyMultiLineString","GeographyMultiLineString"],$data.GeographyMultiLineString);$data.GeographyMultiPolygon=function(n){Array.isArray(n)?$data.GeographyBase.call(this,{coordinates:n}):$data.GeographyBase.call(this,n)};$data.GeographyMultiPolygon.validateGeoJSON=function(n){for(var r,u,f,e,i,t=n&&Array.isArray(n.coordinates),o=0;t&&o<n.coordinates.length;o++)for(r=n.coordinates[o],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)for(f=r[u],t=t&&Array.isArray(f),e=0;t&&e<f.length;e++)i=f[e],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeographyMultiPolygon.validMembers=["coordinates"];$data.GeographyBase.registerType("MultiPolygon",$data.GeographyMultiPolygon);$data.Container.registerType(["$data.GeographyMultiPolygon","GeographyMultiPolygon"],$data.GeographyMultiPolygon);$data.GeographyCollection=function(n){Array.isArray(n)?$data.GeographyBase.call(this,{geometries:n}):$data.GeographyBase.call(this,n)};$data.GeographyCollection.validateGeoJSON=function(n){for(var r,t=n&&Array.isArray(n.geometries),i=0;t&&i<n.geometries.length;i++){r=n.geometries[i];try{t=t&&$data.GeographyBase.validateGeoJSON(r)}catch(u){t=!1}}return t};$data.GeographyCollection.validMembers=["geometries"];$data.GeographyBase.registerType("GeometryCollection",$data.GeographyCollection);$data.Container.registerType(["$data.GeographyCollection","GeographyCollection"],$data.GeographyCollection);$data.Container.registerConverter($data.GeographyPoint,$data.Object,function(n){return n?new $data.GeographyPoint(n):n});$data.Container.registerConverter($data.GeographyLineString,$data.Object,function(n){return n?new $data.GeographyLineString(n):n});$data.Container.registerConverter($data.GeographyPolygon,$data.Object,function(n){return n?new $data.GeographyPolygon(n):n});$data.Container.registerConverter($data.GeographyMultiPoint,$data.Object,function(n){return n?new $data.GeographyMultiPoint(n):n});$data.Container.registerConverter($data.GeographyMultiLineString,$data.Object,function(n){return n?new $data.GeographyMultiLineString(n):n});$data.Container.registerConverter($data.GeographyMultiPolygon,$data.Object,function(n){return n?new $data.GeographyMultiPolygon(n):n});$data.Container.registerConverter($data.GeographyCollection,$data.Object,function(n){return n?new $data.GeographyCollection(n):n});$data.GeometryBase=function(){$data.Geospatial.apply(this,arguments);this.crs=$data.GeometryBase.defaultCrs;$data.GeometryBase.validateGeoJSON(this)};$data.GeometryBase.defaultCrs={properties:{name:"EPSG:0"},type:"name"};$data.GeometryBase.parseFromString=function(n){var i=n.indexOf("("),r,t;if(i>=0){if(r=n.substring(0,i).toLowerCase(),t=$data.GeometryBase.registered[r],t&&t.parseFromString&&t!=$data.GeometryBase)return t.parseFromString(n);Guard.raise(new Exception("parseFromString","Not Implemented",n))}};$data.GeometryBase.stringifyToUrl=function(n){if(n instanceof $data.GeometryBase&&n.constructor&&n.constructor.stringifyToUrl)return n.constructor.stringifyToUrl(n);if(n instanceof $data.GeometryBase&&n.constructor&&Array.isArray(n.constructor.validMembers)&&n.constructor.validMembers[0]==="coordinates"){var t="geometry'"+n.type.toUpperCase()+"(";function i(n){if(Array.isArray(n[0]))for(var r=0;r<n.length;r++)r>0&&(t+=","),Array.isArray(n[r][0])&&(t+="("),i(n[r]),Array.isArray(n[r][0])&&(t+=")");else t+=n.join(" ")}return i(n.coordinates,t),t+=")'"}Guard.raise(new Exception("stringifyToUrl on instance type","Not Implemented",n))};$data.GeometryBase.registerType=function(n,t,i){$data.SimpleBase.registerType(n,t,i||$data.GeometryBase);$data.GeometryBase.registered=$data.GeometryBase.registered||{};$data.GeometryBase.registered[n.toLowerCase()]=t};$data.GeometryBase.validateGeoJSON=function(n){var t=n.type,i,r;if(t&&(i=$data.GeometryBase.registered[t.toLowerCase()],typeof i.validateGeoJSON=="function")){if(r=i.validateGeoJSON(n),r)return r;Guard.raise(new Exception("Invalid '"+t+"' format!","Format Exception",n))}console.log("GeoJSON validation missing",n);return};$data.SimpleBase.registerType("GeometryBase",$data.GeometryBase,$data.Geospatial);$data.Container.registerType(["$data.GeometryBase"],$data.GeometryBase);$data.GeometryPoint=function(n,t){var i=n;i&&typeof i=="object"&&Array.isArray(i)?$data.GeometryBase.call(this,{coordinates:i}):i&&typeof i=="object"&&("x"in i||"y"in i)?$data.GeometryBase.call(this,{coordinates:[i.x,i.y]}):i&&typeof i=="object"?$data.GeometryBase.call(this,i):$data.GeometryBase.call(this,{coordinates:[n||0,t||0]})};$data.GeometryPoint.validateGeoJSON=function(n){return n&&Array.isArray(n.coordinates)&&n.coordinates.length==2&&typeof n.coordinates[0]=="number"&&typeof n.coordinates[1]=="number"};$data.GeometryPoint.parseFromString=function(n){var i=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")),t=i.split(" ");return new $data.GeometryPoint(parseFloat(t[0]),parseFloat(t[1]))};$data.GeometryPoint.validMembers=["coordinates"];$data.GeometryBase.registerType("Point",$data.GeometryPoint);Object.defineProperty($data.GeometryPoint.prototype,"x",{get:function(){return this.coordinates[0]},set:function(n){this.coordinates[0]=n}});Object.defineProperty($data.GeometryPoint.prototype,"y",{get:function(){return this.coordinates[1]},set:function(n){this.coordinates[1]=n}});$data.Container.registerType(["$data.GeometryPoint","GeometryPoint"],$data.GeometryPoint);$data.GeometryLineString=function(n){Array.isArray(n)?$data.GeometryBase.call(this,{coordinates:n}):$data.GeometryBase.call(this,n)};$data.GeometryLineString.validateGeoJSON=function(n){for(var t,i=n&&Array.isArray(n.coordinates),r=0;i&&r<n.coordinates.length;r++)t=n.coordinates[r],i=i&&Array.isArray(t)&&t.length==2&&typeof t[0]=="number"&&typeof t[1]=="number";return i};$data.GeometryLineString.validMembers=["coordinates"];$data.GeometryBase.registerType("LineString",$data.GeometryLineString);$data.Container.registerType(["$data.GeometryLineString","GeometryLineString"],$data.GeometryLineString);$data.GeometryPolygon=function(n){var i,r,u,f,t;typeof n=="object"&&("topLeft"in n&&"bottomRight"in n||"topRight"in n&&"bottomLeft"in n)?("topLeft"in n&&"bottomRight"in n?(i=n.topLeft instanceof $data.GeometryPoint?n.topLeft:new $data.GeometryPoint(n.topLeft),f=n.bottomRight instanceof $data.GeometryPoint?n.bottomRight:new $data.GeometryPoint(n.bottomRight),r=new $data.GeometryPoint([f.coordinates[0],i.coordinates[1]]),u=new $data.GeometryPoint([i.coordinates[0],f.coordinates[1]])):(r=n.topRight instanceof $data.GeometryPoint?n.topRight:new $data.GeometryPoint(n.topRight),u=n.bottomLeft instanceof $data.GeometryPoint?n.bottomLeft:new $data.GeometryPoint(n.bottomLeft),i=new $data.GeometryPoint([u.coordinates[0],r.coordinates[1]]),f=new $data.GeometryPoint([r.coordinates[0],u.coordinates[1]])),t=[],t.push([].concat(i.coordinates)),t.push([].concat(r.coordinates)),t.push([].concat(f.coordinates)),t.push([].concat(u.coordinates)),t.push([].concat(i.coordinates)),$data.GeometryBase.call(this,{coordinates:[t]})):Array.isArray(n)?$data.GeometryBase.call(this,{coordinates:n}):$data.GeometryBase.call(this,n)};$data.GeometryPolygon.validateGeoJSON=function(n){for(var r,u,i,t=n&&Array.isArray(n.coordinates),f=0;t&&f<n.coordinates.length;f++)for(r=n.coordinates[f],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)i=r[u],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeometryPolygon.parseFromString=function(n){for(var u,f,i,e,t=n.substring(n.indexOf("(")+1,n.lastIndexOf(")")),o=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split("),("),t=[],r=0;r<o.length;r++){for(u=[],f=o[r].split(","),i=0;i<f.length;i++)e=f[i].split(" "),u.push([parseFloat(e[0]),parseFloat(e[1])]);t.push(u)}return new $data.GeometryPolygon(t)};$data.GeometryPolygon.validMembers=["coordinates"];$data.GeometryBase.registerType("Polygon",$data.GeometryPolygon);$data.Container.registerType(["$data.GeometryPolygon","GeometryPolygon"],$data.GeometryPolygon);$data.GeometryMultiPoint=function(n){Array.isArray(n)?$data.GeometryBase.call(this,{coordinates:n}):$data.GeometryBase.call(this,n)};$data.GeometryMultiPoint.validateGeoJSON=function(n){for(var t,i=n&&Array.isArray(n.coordinates),r=0;i&&r<n.coordinates.length;r++)t=n.coordinates[r],i=i&&Array.isArray(t)&&t.length==2&&typeof t[0]=="number"&&typeof t[1]=="number";return i};$data.GeometryMultiPoint.validMembers=["coordinates"];$data.GeometryBase.registerType("MultiPoint",$data.GeometryMultiPoint);$data.Container.registerType(["$data.GeometryMultiPoint","GeometryMultiPoint"],$data.GeometryMultiPoint);$data.GeometryMultiLineString=function(n){Array.isArray(n)?$data.GeometryBase.call(this,{coordinates:n}):$data.GeometryBase.call(this,n)};$data.GeometryMultiLineString.validateGeoJSON=function(n){for(var r,u,i,t=n&&Array.isArray(n.coordinates),f=0;t&&f<n.coordinates.length;f++)for(r=n.coordinates[f],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)i=r[u],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeometryMultiLineString.validMembers=["coordinates"];$data.GeometryBase.registerType("MultiLineString",$data.GeometryMultiLineString);$data.Container.registerType(["$data.GeometryMultiLineString","GeometryMultiLineString"],$data.GeometryMultiLineString);$data.GeometryMultiPolygon=function(n){Array.isArray(n)?$data.GeometryBase.call(this,{coordinates:n}):$data.GeometryBase.call(this,n)};$data.GeometryMultiPolygon.validateGeoJSON=function(n){for(var r,u,f,e,i,t=n&&Array.isArray(n.coordinates),o=0;t&&o<n.coordinates.length;o++)for(r=n.coordinates[o],t=t&&Array.isArray(r),u=0;t&&u<r.length;u++)for(f=r[u],t=t&&Array.isArray(f),e=0;t&&e<f.length;e++)i=f[e],t=t&&Array.isArray(i)&&i.length==2&&typeof i[0]=="number"&&typeof i[1]=="number";return t};$data.GeometryMultiPolygon.validMembers=["coordinates"];$data.GeometryBase.registerType("MultiPolygon",$data.GeometryMultiPolygon);$data.Container.registerType(["$data.GeometryMultiPolygon","GeometryMultiPolygon"],$data.GeometryMultiPolygon);$data.GeometryCollection=function(n){Array.isArray(n)?$data.GeometryBase.call(this,{geometries:n}):$data.GeometryBase.call(this,n)};$data.GeometryCollection.validateGeoJSON=function(n){for(var r,t=n&&Array.isArray(n.geometries),i=0;t&&i<n.geometries.length;i++){r=n.geometries[i];try{t=t&&$data.GeometryBase.validateGeoJSON(r)}catch(u){t=!1}}return t};$data.GeometryCollection.validMembers=["geometries"];$data.GeometryBase.registerType("GeometryCollection",$data.GeometryCollection);$data.Container.registerType(["$data.GeometryCollection","GeometryCollection"],$data.GeometryCollection);$data.Container.registerConverter($data.GeometryPoint,$data.Object,function(n){return n?new $data.GeometryPoint(n):n});$data.Container.registerConverter($data.GeometryLineString,$data.Object,function(n){return n?new $data.GeometryLineString(n):n});$data.Container.registerConverter($data.GeometryPolygon,$data.Object,function(n){return n?new $data.GeometryPolygon(n):n});$data.Container.registerConverter($data.GeometryMultiPoint,$data.Object,function(n){return n?new $data.GeometryMultiPoint(n):n});$data.Container.registerConverter($data.GeometryMultiLineString,$data.Object,function(n){return n?new $data.GeometryMultiLineString(n):n});$data.Container.registerConverter($data.GeometryMultiPolygon,$data.Object,function(n){return n?new $data.GeometryMultiPolygon(n):n});$data.Container.registerConverter($data.GeometryCollection,$data.Object,function(n){return n?new $data.GeometryCollection(n):n});$data.Guid=function(n){if(n===undefined||typeof n=="string"&&/^[a-zA-z0-9]{8}-[a-zA-z0-9]{4}-[a-zA-z0-9]{4}-[a-zA-z0-9]{4}-[a-zA-z0-9]{12}$/.test(n))this.value=n||"00000000-0000-0000-0000-000000000000";else throw Guard.raise(new Exception("TypeError: ","value not convertable to $data.Guid",n));};$data.Container.registerType(["$data.Guid","Guid","guid"],$data.Guid);$data.Container.registerConverter("$data.Guid",{"$data.String":function(n){return n?$data.parseGuid(n).toString():n},"$data.Guid":function(n){return n?n.toString():n}},{"$data.String":function(n){return n?n.toString():n}});$data.Guid.prototype.toJSON=function(){return this.value};$data.Guid.prototype.valueOf=function(){return this.value};$data.Guid.prototype.toString=function(){return this.value};$data.Guid.NewGuid=function(){return $data.createGuid()};$data.parseGuid=function(n){return new $data.Guid(n)},function(){
/*!
    Math.uuid.js (v1.4)
    http://www.broofa.com
    mailto:robert@broofa.com
    
    Copyright (c) 2010 Robert Kieffer
    Dual licensed under the MIT and GPL licenses.
    */
var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");$data.createGuid=function(t){var f;if(t)return new $data.Guid(t);var e,u=n,r=[],i,o=u.length;if(e)for(i=0;i<e;i++)r[i]=u[0|Math.random()*o];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",i=0;i<36;i++)r[i]||(f=0|Math.random()*16,r[i]=u[i==19?f&3|8:f]);return $data.parseGuid(r.join(""))}}();$data.Blob=function(){};$data.Blob.createFromHexString=function(n){var t;if(n!=n.match(new RegExp("[0-9a-fA-F]+"))[0])Guard.raise(new Exception("TypeError: ","value not convertable to $data.Blob",n));else{t=new(typeof Buffer!="undefined"?Buffer:Uint8Array)(n.length>>1);for(var i=0,r=1,u=0;i<n.length;i+=2,r+=2,u++)t[u]=parseInt("0x"+n[i]+n[r],16);return t}};$data.Blob.toString=function(n){var i,t;if(!n||!n.length)return null;for(i="",t=0;t<n.length;t++)i+=String.fromCharCode(n[t]);return i};$data.Blob.toBase64=function(n){return!n||!n.length?null:btoa($data.Blob.toString(n))};$data.Blob.toArray=function(n){var i,t;if(!n||!n.length)return null;for(i=new Array(n.length),t=0;t<n.length;t++)i[t]=n[t];return i};$data.Blob.toHexString=function(n){var i,t;if(!n||!n.length)return null;for(i="",t=0;t<n.length;t++)i+=("00"+n[t].toString(16)).slice(-2);return i.toUpperCase()};$data.Blob.toDataURL=function(n){return!n||!n.length?null:"data:application/octet-stream;base64,"+btoa($data.Blob.toString(n))};$data.Container.registerType(["$data.Blob","blob","JayBlob"],$data.Blob);$data.Container.registerConverter("$data.Blob",{"$data.String":function(n){var i,t;if(n&&n.length){for(i=new(typeof Buffer!="undefined"?Buffer:Uint8Array)(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}return null},"$data.Array":function(n){return new(typeof Buffer!="undefined"?Buffer:Uint8Array)(n)},"$data.Number":function(n){return new(typeof Buffer!="undefined"?Buffer:Uint8Array)($data.packIEEE754(n,11,52).reverse())},"$data.Boolean":function(n){return new(typeof Buffer!="undefined"?Buffer:Uint8Array)([n|0])},"default":function(n){var t,i,r;if(typeof Blob!="undefined"&&n instanceof Blob)return t=new XMLHttpRequest,t.open("GET",URL.createObjectURL(n),!1),t.responseType="arraybuffer",t.send(null),$data.Container.convertTo(t.response,$data.Blob);if(typeof ArrayBuffer!="undefined"&&n instanceof ArrayBuffer)return new(typeof Buffer!="undefined"?Buffer:Uint8Array)(new Uint8Array(n));if(n instanceof Uint8Array)return typeof Buffer!="undefined"?new Buffer(n):n;if(typeof Buffer!="undefined"?n instanceof Buffer:!1)return n;if(n.buffer)return new(typeof Buffer!="undefined"?Buffer:Uint8Array)(n);if(typeof n=="object"&&n instanceof Object){i=[];for(r in n)i[r]=n[r];if(!i.length)throw 0;return new(typeof Buffer!="undefined"?Buffer:Uint8Array)(i)}throw 0;}},{"$data.String":function(n){return $data.Blob.toString(n)},"$data.Array":function(n){return $data.Blob.toArray(n)}}),function(n){function t(){}function i(){}function r(){}function u(){}function f(){}function e(){}function o(){}function s(){}function h(){}function c(){}function l(){}function a(){}function v(){}function y(){}function p(){}function w(){}function b(){}function k(){}function d(){}function g(){}function nt(){}function tt(){}function it(){}function rt(){}function ut(){}function ft(){}function et(){}function ot(){}function st(){}function ht(){}n.Container.registerType("Edm.Boolean",t);n.Container.mapType(t,n.Boolean);n.Container.registerType("Edm.Binary",i);n.Container.mapType(i,n.Blob);n.Container.registerType("Edm.DateTime",r);n.Container.mapType(r,n.Date);n.Container.registerType("Edm.DateTimeOffset",u);n.Container.mapType(u,n.DateTimeOffset);n.Container.registerType("Edm.Time",f);n.Container.mapType(f,n.Time);n.Container.registerType("Edm.Decimal",e);n.Container.mapType(e,n.Decimal);n.Container.registerType("Edm.Float",o);n.Container.mapType(o,n.Float);n.Container.registerType("Edm.Single",s);n.Container.mapType(s,n.Float);n.Container.registerType("Edm.Double",h);n.Container.mapType(h,n.Number);n.Container.registerType("Edm.Guid",c);n.Container.mapType(c,n.Guid);n.Container.registerType("Edm.Int16",l);n.Container.mapType(l,n.Int16);n.Container.registerType("Edm.Int32",a);n.Container.mapType(a,n.Integer);n.Container.registerType("Edm.Int64",v);n.Container.mapType(v,n.Int64);n.Container.registerType("Edm.Byte",y);n.Container.mapType(y,n.Byte);n.Container.registerType("Edm.SByte",p);n.Container.mapType(p,n.SByte);n.Container.registerType("Edm.String",w);n.Container.mapType(w,n.String);n.Container.registerType("Edm.GeographyPoint",b);n.Container.mapType(b,n.GeographyPoint);n.Container.registerType("Edm.GeographyLineString",k);n.Container.mapType(k,n.GeographyLineString);n.Container.registerType("Edm.GeographyPolygon",d);n.Container.mapType(d,n.GeographyPolygon);n.Container.registerType("Edm.GeographyMultiPoint",g);n.Container.mapType(g,n.GeographyMultiPoint);n.Container.registerType("Edm.GeographyMultiLineString",nt);n.Container.mapType(nt,n.GeographyMultiLineString);n.Container.registerType("Edm.GeographyMultiPolygon",tt);n.Container.mapType(tt,n.GeographyMultiPolygon);n.Container.registerType("Edm.GeographyCollection",it);n.Container.mapType(it,n.GeographyCollection);n.Container.registerType("Edm.GeometryPoint",rt);n.Container.mapType(rt,n.GeometryPoint);n.Container.registerType("Edm.GeometryLineString",ut);n.Container.mapType(ut,n.GeometryLineString);n.Container.registerType("Edm.GeometryPolygon",ft);n.Container.mapType(ft,n.GeometryPolygon);n.Container.registerType("Edm.GeometryMultiPoint",et);n.Container.mapType(et,n.GeometryMultiPoint);n.Container.registerType("Edm.GeometryMultiLineString",ot);n.Container.mapType(ot,n.GeometryMultiLineString);n.Container.registerType("Edm.GeometryMultiPolygon",st);n.Container.mapType(st,n.GeometryMultiPolygon);n.Container.registerType("Edm.GeometryCollection",ht);n.Container.mapType(ht,n.GeometryCollection);n.oDataEdmMapping={"$data.Byte":"Edm.Byte","$data.SByte":"Edm.SByte","$data.Decimal":"Edm.Decimal","$data.Float":"Edm.Float","$data.Int16":"Edm.Int16","$data.Int64":"Edm.Int64","$data.DateTimeOffset":"Edm.DateTimeOffset","$data.Time":"Edm.Time","$data.Boolean":"Edm.Boolean","$data.Blob":"Edm.Binary","$data.Date":"Edm.DateTime","$data.Number":"Edm.Double","$data.Integer":"Edm.Int32","$data.Int32":"Edm.Int32","$data.String":"Edm.String","$data.ObjectID":"Edm.String","$data.GeographyPoint":"Edm.GeographyPoint","$data.GeographyLineString":"Edm.GeographyLineString","$data.GeographyPolygon":"Edm.GeographyPolygon","$data.GeographyMultiPoint":"Edm.GeographyMultiPoint","$data.GeographyMultiLineString":"Edm.GeographyMultiLineString","$data.GeographyMultiPolygon":"Edm.GeographyMultiPolygon","$data.GeographyCollection":"Edm.GeographyCollection","$data.GeometryPoint":"Edm.GeometryPoint","$data.GeometryLineString":"Edm.GeometryLineString","$data.GeometryPolygon":"Edm.GeometryPolygon","$data.GeometryMultiPoint":"Edm.GeometryMultiPoint","$data.GeometryMultiLineString":"Edm.GeometryMultiLineString","$data.GeometryMultiPolygon":"Edm.GeometryMultiPolygon","$data.GeometryCollection":"Edm.GeometryCollection","$data.Guid":"Edm.Guid"}}($data);$data.Container.registerConverter("$data.Boolean",{"$data.String":function(n){return n.toLowerCase()=="true"?!0:n.toLowerCase()=="false"?!1:!!n},"default":function(n){return!!n}});$data.Container.registerConverter("$data.Integer",{"default":function(n){if(n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY||n===Number.MAX_VALUE||n===Number.MIN_VALUE)return n;var t=parseInt(+n,10);if(isNaN(t))throw 0;return t}});$data.Container.registerConverter("$data.Int32",{"default":function(n){return n|0}});$data.Container.registerConverter("$data.Number",{"default":function(n){var t=+n;if(isNaN(t))throw 0;return t}});$data.Container.registerConverter("$data.Byte",{"default":function(n){return(n|0)&255}});$data.Container.registerConverter("$data.Date",{"default":function(n){var t=new Date(n);if(isNaN(t))throw 0;return t}});$data.Container.registerConverter("$data.DateTimeOffset",{"$data.Date":function(n){return n},"default":function(n){var t=new Date(n);if(isNaN(t))throw 0;return t}}),function(){function n(n){var t=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]|[0-9])(:([0-5][0-9]|[0-9])(\.(\d+))?)?$/.exec(n),i;if(!t)throw 0;return i="",i+=("00"+t[1]).slice(-2),i+=":"+("00"+t[2]).slice(-2),i+=t[4]?":"+("00"+t[4]).slice(-2):":00",t[6]&&(i+="."+(t[6]+"000").slice(0,3)),i}$data.Container.registerConverter("$data.Time",{"$data.String":n,"$data.Number":function(t){for(var f,u=[1e3,60,60],r=[0,0,0,t|0],i=0;i<u.length;i++)r[u.length-(i+1)]=r[u.length-i]/u[i]|0,r[u.length-i]-=r[u.length-(i+1)]*u[i];for(f="",i=0;i<r.length;i++)i<r.length-1?(f+=("00"+r[i]).slice(-2),i<r.length-2&&(f+=":")):f+="."+("000"+r[i]).slice(-3);return n(f)},"$data.Date":function(t){var i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),r=t.getMilliseconds();return r&&(i+="."+r),n(i)}})}();$data.Container.registerConverter("$data.Decimal",{"$data.Boolean":function(n){return n?"1":"0"},"$data.Number":function(n){return n.toString()},"$data.String":function(n){if(!/^\-?([0-9]+(\.[0-9]+)?|Infinity)$/.test(n))throw 0;return n},"$data.Date":function(n){var t=n.valueOf();if(isNaN(t))throw 0;return t.toString()}});$data.packIEEE754=function(n,t,i){var f=(1<<t-1)-1,s,r,u,c,e,o,h,l;for(n!==n?(r=(1<<f)-1,u=Math.pow(2,i-1),s=0):n===Infinity||n===-Infinity?(r=(1<<f)-1,u=0,s=n<0?1:0):n===0?(r=0,u=0,s=1/n==-Infinity?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-f)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),f),r=c+f,u=Math.round(n*Math.pow(2,i-c)-Math.pow(2,i))):(r=0,u=Math.round(n/Math.pow(2,1-f-i)))),o=[],e=i;e;e-=1)o.push(u%2?1:0),u=Math.floor(u/2);for(e=t;e;e-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(o.push(s?1:0),o.reverse(),h=o.join(""),l=[];h.length;)l.push(parseInt(h.substring(0,8),2)),h=h.substring(8);return l};$data.unpackIEEE754=function(n,t,i){for(var h=[],c,e,o,l,r,s,u,f=n.length;f;f-=1)for(e=n[f-1],c=8;c;c-=1)h.push(e%2?1:0),e=e>>1;return h.reverse(),o=h.join(""),l=(1<<t-1)-1,r=parseInt(o.substring(0,1),2)?-1:1,s=parseInt(o.substring(1,1+t),2),u=parseInt(o.substring(1+t),2),s===(1<<t)-1?u!==0?NaN:r*Infinity:s>0?r*Math.pow(2,s-l)*(1+u/Math.pow(2,i)):u!==0?r*Math.pow(2,-(l-1))*(u/Math.pow(2,i)):r<0?-0:0};$data.IEEE754=function(n,t,i){return $data.unpackIEEE754($data.packIEEE754(n,t,i),t,i)};$data.Container.registerConverter("$data.Float",{"default":function(n){var t=+n;if(isNaN(t))throw 0;return $data.IEEE754(t,8,23)}});$data.Container.registerConverter("$data.Int16",{"default":function(n){var t=(n|0)&65535;return t>=32768?t-65536:t}});$data.Container.registerConverter("$data.Int64",{"$data.Boolean":function(n){return n?"1":"0"},"$data.Number":function(n){var t=n.toString();if(t.indexOf(".")>0)return t.split(".")[0];if(t.indexOf(".")==0)throw 0;return t},"$data.String":function(n){if(!/^\-?([0-9]+(\.[0-9]+)?|Infinity)$/.test(n))throw 0;if(n.indexOf(".")>0)return n.split(".")[0];if(n.indexOf(".")==0)throw 0;return n},"$data.Date":function(n){var t=n.valueOf();if(isNaN(t))throw 0;return t.toString()}});$data.Container.registerConverter("$data.SByte",{"default":function(n){var t=(n|0)&255;return t>=128?t-256:t}});$data.Container.registerConverter("$data.String",{"$data.Date":function(n){return n.toISOString()},"$data.ObjectID":function(n){return btoa(n.toString())},"default":function(n){return typeof n=="object"?JSON.stringify(n):n.toString()}});$data.Container.registerConverter("$data.Object",{"$data.String":function(n){return JSON.parse(n)},"$data.Function":function(){throw 0;}});$data.Container.registerConverter("$data.Array",{"$data.String":function(n){var t=JSON.parse(n);if(!Array.isArray(t))throw 0;return t}});$data.Container.registerConverter("$data.ObjectID",{"$data.ObjectID":function(n){try{return btoa(n.toString())}catch(t){return n}},"$data.String":function(n){return n}});$data.Container.proxyConverter=function(n){return n};$data.Container.defaultConverter=function(n){return function(t){return $data.Container.convertTo(t,n)}};$data.StringFunctions={startsWith:function(){var n,t;if(arguments.length==2)n=arguments[0],t=arguments[1];else if(arguments.length==1&&typeof this=="string")n=this,t=arguments[0];else if(this instanceof String)n=this.valueOf(),t=arguments[0];else return!1;return typeof n!="string"?!1:n.indexOf(t)===0},endsWith:function(){var n,t;if(arguments.length==2)n=arguments[0],t=arguments[1];else if(arguments.length==1&&typeof this=="string")n=this,t=arguments[0];else if(this instanceof String)n=this.valueOf(),t=arguments[0];else return!1;return typeof n!="string"?!1:n.slice(-t.length)===t},contains:function(){var n,t;if(arguments.length==2)n=arguments[0],t=arguments[1];else if(arguments.length==1&&typeof this=="string")n=this,t=arguments[0];else if(this instanceof String)n=this.valueOf(),t=arguments[0];else return!1;return typeof n!="string"?!1:n.indexOf(t)>=0}};$data.Class.define("$data.Expressions.ExpressionType",null,null,{},{Constant:"constant",Variable:"variable",MemberAccess:"memberAccess",Call:"call",Equal:"equal",NotEqual:"notEqual",EqualTyped:"equalTyped",NotEqualTyped:"notEqualTyped",GreaterThen:"greaterThan",LessThen:"lessThan",GreaterThenOrEqual:"greaterThanOrEqual",LessThenOrEqual:"lessThenOrEqual",Or:"or",OrBitwise:"orBitwise",And:"and",AndBitwise:"andBitwise",In:"in",Add:"add",Divide:"divide",Multiply:"multiply",Subtract:"subtract",Modulo:"modulo",ArrayIndex:"arrayIndex",New:"new",Positive:"positive",Negative:"negative",Increment:"increment",Decrement:"decrement",Not:"not",This:"this",LambdaParameterReference:"lambdaParameterReference",LambdaParameter:"lambdaParameter",Parameter:"parameter",ArrayLiteral:"arrayLiteral",ObjectLiteral:"objectLiteral",ObjectField:"objectField",Function:"Function",Unknown:"UNKNOWN",EntitySet:"EntitySet",ServiceOperation:"ServiceOperation",EntityField:"EntityField",EntityContext:"EntityContext",Entity:"Entity",Filter:"Filter",First:"First",Count:"Count",InlineCount:"InlineCount",Single:"Single",Find:"Find",Some:"Some",Every:"Every",ToArray:"ToArray",BatchDelete:"BatchDelete",ForEach:"ForEach",Projection:"Projection",EntityMember:"EntityMember",EntityFieldOperation:"EntityFieldOperation",FrameOperation:"FrameOperation",EntityFunctionOperation:"EntityFunctionOperation",ContextFunctionOperation:"ContextFunctionOperation",EntityBinary:"EntityBinary",Code:"Code",ParametricQuery:"ParametricQuery",MemberInfo:"MemberInfo",QueryParameter:"QueryParameter",ComplexEntityField:"ComplexEntityField",Take:"Take",Skip:"Skip",OrderBy:"OrderBy",OrderByDescending:"OrderByDescending",Include:"Include",IndexedPhysicalAnd:"IndexedDBPhysicalAndFilterExpression",IndexedLogicalAnd:"IndexedDBLogicalAndFilterExpression",IndexedLogicalOr:"IndexedDBLogicalOrFilterExpression",IndexedLogicalIn:"IndexedDBLogicalInFilterExpression"});$data.BinaryOperator=function(){};$data.binaryOperators=[{operator:"==",expressionType:$data.Expressions.ExpressionType.Equal,type:"boolean",implementation:function(n,t){return n==t}},{operator:"===",expressionType:$data.Expressions.ExpressionType.EqualTyped,type:"boolean",implementation:function(n,t){return n===t}},{operator:"!=",expressionType:$data.Expressions.ExpressionType.NotEqual,type:"boolean",implementation:function(n,t){return n!=t}},{operator:"!==",expressionType:$data.Expressions.ExpressionType.NotEqualTyped,type:"boolean",implementation:function(n,t){return n!==t}},{operator:">",expressionType:$data.Expressions.ExpressionType.GreaterThen,type:"boolean",implementation:function(n,t){return n>t}},{operator:">=",expressionType:$data.Expressions.ExpressionType.GreaterThenOrEqual,type:"boolean",implementation:function(n,t){return n>=t}},{operator:"<=",expressionType:$data.Expressions.ExpressionType.LessThenOrEqual,type:"boolean",implementation:function(n,t){return n<=t}},{operator:"<",expressionType:$data.Expressions.ExpressionType.LessThen,type:"boolean",implementation:function(n,t){return n<t}},{operator:"&&",expressionType:$data.Expressions.ExpressionType.And,type:"boolean",implementation:function(n,t){return n&&t}},{operator:"||",expressionType:$data.Expressions.ExpressionType.Or,type:"boolean",implementation:function(n,t){return n||t}},{operator:"&",expressionType:$data.Expressions.ExpressionType.AndBitwise,type:"number",implementation:function(n,t){return n&t}},{operator:"|",expressionType:$data.Expressions.ExpressionType.OrBitwise,type:"number",implementation:function(n,t){return n|t}},{operator:"+",expressionType:$data.Expressions.ExpressionType.Add,type:"number",implementation:function(n,t){return n+t}},{operator:"-",expressionType:$data.Expressions.ExpressionType.Subtract,type:"number",implementation:function(n,t){return n-t}},{operator:"/",expressionType:$data.Expressions.ExpressionType.Divide,type:"number",implementation:function(n,t){return n/t}},{operator:"%",expressionType:$data.Expressions.ExpressionType.Modulo,type:"number",implementation:function(n,t){return n%t}},{operator:"*",expressionType:$data.Expressions.ExpressionType.Multiply,type:"number",implementation:function(n,t){return n*t}},{operator:"[",expressionType:$data.Expressions.ExpressionType.ArrayIndex,type:"number",implementation:function(n,t){return n[t]}},{operator:"in",expressionType:$data.Expressions.ExpressionType.In,type:"boolean",implementation:function(n,t){return n in t}}];$data.binaryOperators.resolve=function(n){var t=$data.binaryOperators.filter(function(t){return t.operator==n});if(t.length>0)return n};$data.binaryOperators.contains=function(n){return $data.binaryOperators.some(function(t){return t.operator==n})};$data.binaryOperators.getOperator=function(n){var t=$data.binaryOperators.filter(function(t){return t.operator==n});return t.length<1&&Guard.raise("Unknown operator: "+n),t[0]};$data.unaryOperators=[{operator:"+",arity:"prefix",expressionType:$data.Expressions.ExpressionType.Positive,type:"number",implementation:function(n){return+n}},{operator:"-",arity:"prefix",expressionType:$data.Expressions.ExpressionType.Negative,type:"number",implementation:function(n){return-n}},{operator:"++",arity:"prefix",expressionType:$data.Expressions.ExpressionType.Increment,type:"number",implementation:function(n){return++n}},{operator:"--",arity:"prefix",expressionType:$data.Expressions.ExpressionType.Decrement,type:"number",implementation:function(n){return--n}},{operator:"++",arity:"suffix",expressionType:$data.Expressions.ExpressionType.Increment,type:"number",implementation:function(n){return n++}},{operator:"!",arity:"prefix",expressionType:$data.Expressions.ExpressionType.Not,type:"boolean",implementation:function(n){return!n}},{operator:"--",arity:"suffix",expressionType:$data.Expressions.ExpressionType.Decrement,type:"number",implementation:function(n){return n--}}];$data.unaryOperators.resolve=function(n){var t=$data.unaryOperators.filter(function(t){return t.operator==n});if(t.length>0)return n};$data.unaryOperators.contains=function(n){return $data.unaryOperators.some(function(t){return t.operator==n})};$data.unaryOperators.getOperator=function(n,t){var i=$data.unaryOperators.filter(function(i){return i.operator==n&&(!t||i.arity==t)});return i.length<1&&Guard.raise("Unknown operator: "+n),i[0]};$data.timeIt=function(n,t){t=t||1;console.time("!");for(var i=0;i<t;i++)n();console.timeEnd("!")};$data.Expressions.OperatorTypes={UNARY:"UNARY",INCDEC:"INCDEC",DECISION:"DECISION",METHODCALL:"METHODCALL",NEW:"NEW",JSONASSIGN:"JSONASSIGN",ARRAYACCESS:"ARRAYACCESS",UNKNOWN:"UNKNOWN"};$data.executable=!0;$C("$data.Expressions.ExpressionNode",null,null,{constructor:function(){this.expressionType=this.constructor},getJSON:function(){return jsonify(this)},expressionType:{set:function(n){typeof n=="string"&&(n=Container.resolveType(n));this._expressionType=n},get:function(){return arguments.callee.caller==jsonify||arguments.callee.caller==JSON.stringify?Container.resolveName(this._expressionType):this._expressionType},enumerable:!0},nodeType:{value:$data.Expressions.ExpressionType.Unknown,writable:!1},type:{},isTerminated:{value:!1},toString:function(){return this.value}},null);$C("$data.Expressions.UnaryExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i,r){this.operand=n;this.operator=t;this.nodeType=i;this.resolution=r},operator:{value:undefined,writable:!0},operand:{value:undefined,writable:!0},nodeType:{value:undefined,writable:!0}});$C("$data.Expressions.ArrayLiteralExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n){this.items=n||[]},nodeType:{value:$data.Expressions.ExpressionType.ArrayLiteral,writable:!0},items:{value:undefined,dataType:Array,elementType:$data.Expressions.ExpressionNode},toString:function(){return"["+this.items.map(function(n){return n.toString()}).join(",")+"]"}},null);$C("$data.Expressions.CallExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.expression=n;this.member=t;this.args=i},nodeType:{value:$data.Expressions.ExpressionType.Call},expression:{value:undefined,dataType:$data.Expressions.ExpressionNode,writable:!0},member:{value:undefined,dataType:$data.MemberDefinition,writable:!0},type:{value:undefined,writable:!0},implementation:{get:function(){return function(n,t,i){return typeof t!="function"&&(t=n[t]),Guard.requireType("method",t,Function),t.apply(n,i)}},set:function(){Guard.raise("Property can not be set")}},toString:function(){return this.object.toString()+"."+this.member.toString()+"()"}});$C("$data.Expressions.CodeParser",null,null,{constructor:function(n){this.scopeContext=n;this.lambdaParams=[]},log:function(n){this.scopeContext&&this.scopeContext.log(n)},parseExpression:function(n){var r,t,i;return typeof n=="object"&&(n=""),r={success:!0,errorMessage:"",errorDetails:""},$data.Acorn?{success:!0,expression:this.ParserBuild($data.Acorn.parse("("+n.toString()+")").body[0]),errors:[]}:$data.Esprima?{success:!0,expression:this.ParserBuild($data.Esprima.parse("("+n.toString()+")").body[0]),errors:[]}:(t=$data.ASTParser.parseCode(n),this.log({event:"AST",data:t}),!t.success)?{success:!1,error:"ASTParser error",errorMessage:t.errors?JSON.stringify(t.errors):"could not get code"}:(i=this.Build2(t.tree.first[0]),{success:!0,expression:i,errors:t.errors})},createExpression:function(n,t){var i=this.parseExpression(n,t);return i.success||Guard.raise("ExpressionParserError: "+i.errorMessage),i.expression},ParserBuild:function(n){return this["Parser"+n.type](n)},ParserExpressionStatement:function(n){return this.ParserBuild(n.expression)},ParserBlockStatement:function(n){return this.ParserBuild(n.body[0])},ParserReturnStatement:function(n){return this.ParserBuild(n.argument)},ParserMemberExpression:function(n){return new $data.Expressions.PropertyExpression(this.ParserBuild(n.object),new $data.Expressions.ConstantExpression(n.property.name||n.property.value,typeof(n.property.name||n.property.value)))},ParserIdentifier:function(n){return this.ParserParameter(n,this.lambdaParams.indexOf(n.name)>-1?$data.Expressions.ExpressionType.LambdaParameterReference:$data.Expressions.ExpressionType.Parameter)},ParserObjectExpression:function(n){for(var i=new Array(n.properties.length),t=0;t<n.properties.length;t++)i[t]=this.ParserProperty(n.properties[t]);return new $data.Expressions.ObjectLiteralExpression(i)},ParserArrayExpression:function(n){for(var i=new Array(n.elements.length),t=0;t<n.elements.length;t++)i[t]=this.ParserBuild(n.elements[t]);return new $data.Expressions.ArrayLiteralExpression(i)},ParserProperty:function(n){return new $data.Expressions.ObjectFieldExpression(n.key.name,this.ParserBuild(n.value))},ParserFunctionExpression:function(n){for(var r,i=new Array(n.params.length),t=0;t<n.params.length;t++)this.lambdaParams.push(n.params[t].name),i[t]=this.ParserParameter(n.params[t],$data.Expressions.ExpressionType.LambdaParameter),i[t].owningFunction=r;return new $data.Expressions.FunctionExpression(n.id?n.id.name:n.id,i,this.ParserBuild(n.body))},ParserParameter:function(n,t){var i=new $data.Expressions.ParameterExpression(n.name,null,t);return t==$data.Expressions.ExpressionType.LambdaParameterReference&&(i.paramIndex=this.lambdaParams.indexOf(n.name)),i},ParserLogicalExpression:function(n){return this.ParserBinaryExpression(n)},ParserOperators:{value:{"==":{expressionType:$data.Expressions.ExpressionType.Equal,type:"boolean",implementation:function(n,t){return n==t}},"===":{expressionType:$data.Expressions.ExpressionType.EqualTyped,type:"boolean",implementation:function(n,t){return n===t}},"!=":{expressionType:$data.Expressions.ExpressionType.NotEqual,type:"boolean",implementation:function(n,t){return n!=t}},"!==":{expressionType:$data.Expressions.ExpressionType.NotEqualTyped,type:"boolean",implementation:function(n,t){return n!==t}},">":{expressionType:$data.Expressions.ExpressionType.GreaterThen,type:"boolean",implementation:function(n,t){return n>t}},">=":{expressionType:$data.Expressions.ExpressionType.GreaterThenOrEqual,type:"boolean",implementation:function(n,t){return n>=t}},"<=":{expressionType:$data.Expressions.ExpressionType.LessThenOrEqual,type:"boolean",implementation:function(n,t){return n<=t}},"<":{expressionType:$data.Expressions.ExpressionType.LessThen,type:"boolean",implementation:function(n,t){return n<t}},"&&":{expressionType:$data.Expressions.ExpressionType.And,type:"boolean",implementation:function(n,t){return n&&t}},"||":{expressionType:$data.Expressions.ExpressionType.Or,type:"boolean",implementation:function(n,t){return n||t}},"&":{expressionType:$data.Expressions.ExpressionType.AndBitwise,type:"number",implementation:function(n,t){return n&t}},"|":{expressionType:$data.Expressions.ExpressionType.OrBitwise,type:"number",implementation:function(n,t){return n|t}},"+":{expressionType:$data.Expressions.ExpressionType.Add,type:"number",implementation:function(n,t){return n+t}},"-":{expressionType:$data.Expressions.ExpressionType.Subtract,type:"number",implementation:function(n,t){return n-t}},"/":{expressionType:$data.Expressions.ExpressionType.Divide,type:"number",implementation:function(n,t){return n/t}},"%":{expressionType:$data.Expressions.ExpressionType.Modulo,type:"number",implementation:function(n,t){return n%t}},"*":{expressionType:$data.Expressions.ExpressionType.Multiply,type:"number",implementation:function(n,t){return n*t}},"[":{expressionType:$data.Expressions.ExpressionType.ArrayIndex,type:"number",implementation:function(n,t){return n[t]}},"in":{expressionType:$data.Expressions.ExpressionType.In,type:"boolean",implementation:function(n,t){return n in t}}}},ParserUnaryOperators:{value:{"+":{arity:"prefix",expressionType:$data.Expressions.ExpressionType.Positive,type:"number",implementation:function(n){return+n}},"-":{arity:"prefix",expressionType:$data.Expressions.ExpressionType.Negative,type:"number",implementation:function(n){return-n}},"++true":{arity:"prefix",expressionType:$data.Expressions.ExpressionType.Increment,type:"number",implementation:function(n){return++n}},"--true":{arity:"prefix",expressionType:$data.Expressions.ExpressionType.Decrement,type:"number",implementation:function(n){return--n}},"++false":{arity:"suffix",expressionType:$data.Expressions.ExpressionType.Increment,type:"number",implementation:function(n){return n++}},"!":{arity:"prefix",expressionType:$data.Expressions.ExpressionType.Not,type:"boolean",implementation:function(n){return!n}},"--false":{arity:"suffix",expressionType:$data.Expressions.ExpressionType.Decrement,type:"number",implementation:function(n){return n--}}}},ParserUnaryExpression:function(n){return new $data.Expressions.UnaryExpression(this.ParserBuild(n.argument),this.ParserUnaryOperators[n.operator],this.ParserUnaryOperators[n.operator].expressionType)},ParserUpdateExpression:function(n){return new $data.Expressions.UnaryExpression(this.ParserBuild(n.argument),this.ParserUnaryOperators[n.operator+n.prefix],this.ParserUnaryOperators[n.operator+n.prefix].nodeType)},ParserBinaryExpression:function(n){return new $data.Expressions.SimpleBinaryExpression(this.ParserBuild(n.left),this.ParserBuild(n.right),this.ParserOperators[n.operator].expressionType,n.operator,this.ParserOperators[n.operator].type)},ParserThisExpression:function(){return new $data.Expressions.ThisExpression},ParserLiteral:function(n){return new $data.Expressions.ConstantExpression(n.value,typeof n.value)},ParserCallExpression:function(n){for(var r,u,t=this.ParserBuild(n.callee),f=new Array(n.arguments.length),i=0;i<n.arguments.length;i++)f[i]=this.ParserBuild(n.arguments[i]);switch(!0){case t instanceof $data.Expressions.PropertyExpression:u=t.expression;r=t.member;break;case t instanceof $data.Expressions.ParameterExpression:u=new $data.Expressions.ConstantExpression(null,"object");r=t}return new $data.Expressions.CallExpression(u,r,f)}});$C("$data.Expressions.ConstantExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.value=n;this.type=t;this.name=i;Object.isNullOrUndefined(this.value)||(this.type=Container.resolveType(this.type),Container.resolveType(Container.getTypeName(this.value))!==this.type&&(this.value=Container.convertTo(n,this.type)))},nodeType:{value:$data.Expressions.ExpressionType.Constant,enumerable:!0},type:{value:Object,writable:!0},value:{value:undefined,writable:!0},toString:function(){return this.value.toString()}});$C("$data.Expressions.FunctionExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.parameters=t||[];this.name=n;this.body=i},toString:function(n){var t=this.parameters.map(function(n){return n.toString()}),i;return t=t.join(","),i=this.body?this.body.toString(n):"","function "+this.name+"("+t+") { "+i+"}"},nodeType:{value:$data.Expressions.ExpressionType.Function,writable:!0},parameters:{value:undefined,dataType:Array,elementType:$data.Expressions.ParameterExpression},body:{value:undefined,dataType:$data.Expressions.ExpressionNode},type:{}},null);$C("$data.Expressions.ObjectFieldExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){this.fieldName=n;this.expression=t},nodeType:{value:$data.Expressions.ExpressionType.ObjectField,writable:!0},toString:function(){return"unimplemented"}},null);$C("$data.Expressions.ObjectLiteralExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n){this.members=n},nodeType:{value:$data.Expressions.ExpressionType.ObjectLiteral,writable:!0},toString:function(){return"unimplemented"},implementation:{get:function(){return function(n){var t={};return n.forEach(function(n){t[n.name]=n.value}),t}},set:function(){}}},null);$C("$data.Expressions.PagingExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.source=n;this.amount=t;this.nodeType=i},nodeType:{value:$data.Expressions.ExpressionType.Unknown,writable:!0},toString:function(){return"unimplemented"}},null);$C("$data.Expressions.ParameterExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.nodeType=i||$data.Expressions.ExpressionType.Parameter;this.name=n;this.type=t||"unknown"},owningFunction:{value:undefined,enumerable:!1},nodeType:{value:$data.Expressions.ExpressionType.Parameter,writable:!0},name:{value:undefined,dataType:String,writable:!0},type:{value:undefined,dataType:"object",writable:!0},toString:function(n){var t;return t=n?this.type+" ":"",t+this.name}},null);$C("$data.Expressions.PropertyExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){this.expression=n;this.member=t;this.type=t.dataType},nodeType:{value:$data.Expressions.ExpressionType.MemberAccess},expression:{value:undefined,dataType:$data.Expressions.ExpressionNode,writable:!0},implementation:{get:function(){return function(n,t){return n[t]===undefined&&Guard.raise(new Exception("Parameter '"+t+"' not found in context","Property not found!")),n[t]}},set:function(){}},member:{value:undefined,dataType:$data.MemberDefinition,writable:!0},type:{value:undefined,writable:!0},toString:function(){return this.expression.toString()+"."+this.member.toString()}});$C("$data.Expressions.SimpleBinaryExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i,r,u,f){this.left=n;this.right=t;this.nodeType=i;this.operator=r;this.type=u;this.resolution=f},implementation:{get:function(){return $data.binaryOperators.getOperator(this.operator).implementation},set:function(){}},type:{value:"number",writable:!0}});$C("$data.Expressions.ThisExpression",$data.Expressions.ExpressionNode,null,{nodeType:{value:$data.Expressions.ExpressionType.This}});$C("$data.Expressions.ExpressionVisitor",null,null,{constructor:function(){this._deep=0},Visit:function(n,t){if(!n)return n;var i=null;switch(n.expressionType){case $data.Expressions.ParameterExpression:i=this.VisitParameter(n,t);break;case $data.Expressions.ConstantExpression:i=this.VisitConstant(n,t);break;case $data.Expressions.FunctionExpression:i=this.VisitFunction(n,t);break;case $data.Expressions.CallExpression:i=this.VisitCall(n,t);break;case $data.Expressions.SimpleBinaryExpression:i=this.VisitBinary(n,t);break;case $data.Expressions.PropertyExpression:i=this.VisitProperty(n,t);break;case $data.Expressions.ThisExpression:i=this.VisitThis(n,t);break;case $data.Expressions.ObjectLiteralExpression:i=this.VisitObjectLiteral(n,t);break;case $data.Expressions.ObjectFieldExpression:i=this.VisitObjectField(n,t);break;case $data.Expressions.ArrayLiteralExpression:i=this.VisitArrayLiteral(n,t);break;case $data.Expressions.UnaryExpression:i=this.VisitUnary(n,t);break;case $data.Expressions.EntityContextExpression:i=this.VisitEntityContext(n,t)}return this._deep=this._deep-1,i},VisitArrayLiteral:function(n,t){var i=this,r=n.items.map(function(n){return i.Visit(n,t)});return Container.createArrayLiteralExpression(r)},VisitObjectLiteral:function(n,t){var i=this,r=n.members.map(function(n){return i.Visit(n,t)});return Container.createObjectLiteralExpression(r)},VisitObjectField:function(n,t){var i=this.Visit(n.expression,t);return Container.createObjectFieldExpression(n.fieldName,i)},VisitThis:function(n){return n},VisitCall:function(n,t){var f=this,i=n.args.map(function(n){return this.Visit(n,t)},this),r=this.Visit(n.expression,t),u=this.Visit(n.member,t);return new $data.Expressions.CallExpression(r,u,i)},VisitParameter:function(n){return n},VisitConstant:function(n){return n},VisitFunction:function(n,t){var i=this,r=n.parameters.map(function(n){return i.Visit(n,t)}),u=i.Visit(n.body,t);return new $data.Expressions.FunctionExpression(n.name,r,u)},VisitBinary:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return new $data.Expressions.SimpleBinaryExpression(i,r,n.nodeType,n.operator,n.type)},VisitProperty:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.member,t);return new $data.Expressions.PropertyExpression(i,r)},VisitUnary:function(n,t){var i=this.Visit(n.operand,t);return i===n.operand?n:new $data.Expressions.UnaryExpression(i,n.operator,n.nodeType)},VisitEntityContext:function(n){return n},VisitDecision:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.left,t),u=this.Visit(n.right,t);return i===n.expression&&r===n.left&&u===n.right?n:$data.Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(n.executable,i,r,u)},VisitNew:function(n,t){var i=this.VisitArray(n.values,t);return i===n.values?n:$data.Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,i)},VisitArrayAccess:function(n,t){var i=this.Visit(n.array,t),r=this.Visit(n.index,t);return i===n.array&&r===n.index?n:$data.Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,i,r)},VisitArray:function(n,t){for(var r=[],u=!0,i=0;i<n.length;i++)r[i]=this.Visit(n[i],t),u=u&&r[i]===n[i];return u?n:r},GetMemberChain:function(n,t){if(n.expression.type==MEMBERACCESS){var i=this.GetMemberChain(n.expression,t);return i.push(n.member),i}return[n.expression,n.member]}},{});$C("$data.Expressions.ParameterProcessor",$data.Expressions.ExpressionVisitor,null,{constructor:function(){},Visit:function(n,t){if((n instanceof $data.Expressions.ParameterExpression||n instanceof $data.Expressions.ThisExpression)&&this.canResolve(n)){var i=this.resolve(n,t);return i!==n&&(i.resolvedBy=this.constructor.name),i}return n},canResolve:function(){Guard.raise("Pure method")},resolve:function(){Guard.raise("Pure method")}});$C("$data.Expressions.GlobalContextProcessor",$data.Expressions.ParameterProcessor,null,{constructor:function(n){this.global=n},canResolve:function(n){return n.nodeType==$data.Expressions.ExpressionType.Parameter&&this.global&&typeof this.global=="object"&&n.name in this.global},resolve:function(n){var t=this.global[n.name];return Container.createConstantExpression(t,typeof t,n.name)}});$C("$data.Expressions.ConstantValueResolver",$data.Expressions.ParameterProcessor,null,{constructor:function(n,t,i){this.globalResolver=Container.createGlobalContextProcessor(t);this.paramResolver=Container.createGlobalContextProcessor(n);this.paramsObject=n;this.scopeContext=i},canResolve:function(n){return n.name==="$context"||n.nodeType==$data.Expressions.ExpressionType.This&&this.paramsObject?!0:this.paramResolver.canResolve(n)||this.globalResolver.canResolve(n)},resolve:function(n){return n.name==="$context"?Container.createEntityContextExpression(this.scopeContext):n.nodeType==$data.Expressions.ExpressionType.This?Container.createConstantExpression(this.paramsObject,typeof this.paramsObject,"this"):this.paramResolver.canResolve(n)?this.paramResolver.resolve(n):this.globalResolver.resolve(n)}});$C("$data.Expressions.LocalContextProcessor",$data.Expressions.GlobalContextProcessor,null,{constructor:function(n){this.canResolve=function(t){return t.nodeType==$data.Expressions.ExpressionType.Parameter&&n("typeof "+t.name)!=="undefined"};this.resolve=function(t){var i=n(t.name);return Container.createConstantExpression(i,typeof i)}}});$C("$data.Expressions.LambdaParameterProcessor",$data.Expressions.ParameterProcessor,null,{constructor:function(n){var t={};this.canResolve=function(i){var r,u;if(i.nodeType==$data.Expressions.ExpressionType.LambdaParameter){if(r=i.owningFunction.parameters,r.length==1&&i.name==r[0].name)return t[i.name]=n[0],!0;for(u=0;u<r.length;u++)if(r[u].name==i.name)return t[i.name]=n[u],!0;return!1}return!1};this.resolve=function(n){var r=t[n.name],i=Container.createParameterExpression(n.name,r,$data.Expressions.ExpressionType.LambdaParameter);return i.owningFunction=n.owningFunction,i}}});$C("$data.Expressions.ParameterResolverVisitor",$data.Expressions.ExpressionVisitor,null,{constructor:function(){this.lambdaParamCache={}},Visit:function(n,t){return $data.Expressions.ExpressionVisitor.prototype.Visit.call(this,n,t)},VisitArrayLiteral:function(n,t){var r=this,i=n.items.map(function(n){return r.Visit(n,t)}),u=i.every(function(n){return n instanceof $data.Expressions.ConstantExpression});return u?(i=i.map(function(n){return n.value}),Container.createConstantExpression(i,"array")):Container.createArrayLiteralExpression(i)},VisitObjectLiteral:function(n,t){var f=this,i=n.members.map(function(n){return f.Visit(n,t)}),e=i.every(function(n){return n.expression instanceof $data.Expressions.ConstantExpression}),u,r;return e?(u=i.map(function(n){return{name:n.fieldName,value:n.expression.value}}),r=n.implementation(u),Container.createConstantExpression(r,typeof r)):Container.createObjectLiteralExpression(i)},VisitThis:function(n,t){return t.Visit(n,t)},VisitParameter:function(n,t){var i,r;switch(n.nodeType){case $data.Expressions.ExpressionType.Parameter:case $data.Expressions.ExpressionType.LambdaParameter:return i=t.Visit(n,t),i.nodeType==$data.Expressions.ExpressionType.LambdaParameter&&(this.lambdaParamCache[i.name]=i),i;case $data.Expressions.ExpressionType.LambdaParameterReference:if(r=this.lambdaParamCache[n.name],r)return i=Container.createParameterExpression(n.name,r.type,$data.Expressions.ExpressionType.LambdaParameterReference),i.paramIndex=n.paramIndex,i;break;default:return n}return n},VisitConstant:function(n){return n},VisitFunction:function(n,t){var i=this,r=n.parameters.map(function(n){return i.Visit(n,t)}),u=i.Visit(n.body,t);return new $data.Expressions.FunctionExpression(n.name,r,u)},VisitBinary:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t),f=$data.Expressions,u;return i instanceof f.ConstantExpression&&r instanceof f.ConstantExpression?(u=n.implementation(i.value,r.value),Container.createConstantExpression(u,typeof u)):new Container.createSimpleBinaryExpression(i,r,n.nodeType,n.operator,n.type)},VisitUnary:function(n,t){var i=this.Visit(n.operand,t),u=$data.Expressions,r;return i instanceof u.ConstantExpression?(r=n.operator.implementation(i.value),Container.createConstantExpression(r,typeof r)):new Container.createUnaryExpression(i,n.operator,n.nodeType)},VisitProperty:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.member,t),u;return i instanceof $data.Expressions.ConstantExpression&&r instanceof $data.Expressions.ConstantExpression?(u=n.implementation(i.value,r.value),Container.createConstantExpression(u,typeof u,i.name+"$"+r.value)):i===n.expression&&r===n.member?n:Container.createPropertyExpression(i,r)},VisitCall:function(n){function o(n,t,i){return t instanceof $data.Expressions.ConstantExpression&&(!i||i instanceof $data.Expressions.ConstantExpression)&&n.every(function(n){return n instanceof $data.Expressions.ConstantExpression})}function s(n){return n instanceof $data.Expressions.ConstantExpression?n.value:n}var i=$data.Expressions.ExpressionVisitor.prototype.VisitCall.apply(this,arguments),r=i.expression,f=i.member,e=i.args,t,u;return o(e,f,r)?(t=f.value,typeof t=="string"&&r.value&&(t=r.value[t]),typeof t!="function"&&Guard.raise("Constant expression is not a method..."),u=n.implementation(r.value,t,e.map(s)),new $data.Expressions.ConstantExpression(u,typeof u)):i}},{});$C("$data.Expressions.AggregatedVisitor",$data.Expressions.ExpressionVisitor,null,{constructor:function(n){this.Visit=function(t,i){for(var u,r=0;r<n.length;r++)if(u=n[r].Visit(t,i),u!==t)return u;return t}}});$C("$data.Expressions.LogicalSchemaBinderVisitor",$data.Expressions.ExpressionVisitor,null,{constructor:function(){},VisitProperty:function(n,t){var r=this.Visit(n.expression,t),i=this.Visit(n.member,t),u=r.type,f=t.memberResolver.resolve(u,i.value);return i.type=f,Container.createPropertyExpression(r,i)}},{});$data.Class.define("$data.Expressions.ExpTreeVisitor",null,null,{constructor:function(){this._deep=0},Visit:function(n,t){this._deep=this._deep+1;var i=null;switch(n.type){case LITERAL:i=this.VisitLiteral(n,t);break;case VARIABLE:i=this.VisitVariable(n,t);break;case MEMBERACCESS:i=this.VisitMember(n,t);break;case BINARY:i=this.VisitBinary(n,t);break;case UNARY:i=this.VisitUnary(n,t);break;case INCDEC:i=this.VisitIncDec(n,t);break;case EQUALITY:i=this.VisitEquality(n,t);break;case DECISION:i=this.VisitDecision(n,t);break;case METHODCALL:i=this.VisitMethodCall(n,t);break;case NEW:i=this.VisitNew(n,t);break;case JSONASSIGN:i=this.VisitJsonAssign(n,t);break;case ARRAYACCESS:i=this.VisitArrayAccess(n,t);break;default:Guard.raise("Type isn't implemented: "+n.type)}return this._deep=this._deep-1,i},VisitLiteral:function(n){return n},VisitVariable:function(n){return n},VisitMember:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.member,t);return i===n.expression&&r===n.member?n:$data.Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(n.executable,i,r)},VisitBinary:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right?n:$data.Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(n.executable,n.operator,i,r)},VisitUnary:function(n,t){var i=this.Visit(n.operand,t);return i===n.operand?n:$data.Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(n.executable,n.operator,i)},VisitIncDec:function(n,t){var i=this.Visit(n.operand,t);return i===n.operand?n:$data.Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(n.executable,n.operator,i,n.suffix)},VisitEquality:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right?n:$data.Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(n.executable,n.operator,i,r)},VisitDecision:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.left,t),u=this.Visit(n.right,t);return i===n.expression&&r===n.left&&u===n.right?n:$data.Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(n.executable,i,r,u)},VisitMethodCall:function(n,t){var i=n.object?this.Visit(n.object,t):null,r=this.VisitArray(n.args,t);return i===n.object&&r===n.args?n:$data.Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(n.executable,i,n.method,r)},VisitNew:function(n,t){var i=this.VisitArray(n.values,t);return i===n.values?n:$data.Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,i)},VisitJsonAssign:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right?n:(i.JSONASSIGN=!0,r.JSONASSIGN=!0,$data.Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0,i,r))},VisitArrayAccess:function(n,t){var i=this.Visit(n.array,t),r=this.Visit(n.index,t);return i===n.array&&r===n.index?n:$data.Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,i,r)},VisitArray:function(n,t){for(var r=[],u=!0,i=0;i<n.length;i++)r[i]=this.Visit(n[i],t),u=u&&r[i]===n[i];return u?n:r},GetMemberChain:function(n,t){if(n.expression.type==MEMBERACCESS){var i=this.GetMemberChain(n.expression,t);return i.push(n.member),i}return[n.expression,n.member]}},{});$data.Class.define("$data.Expressions.SetExecutableVisitor",$data.Expressions.ExpTreeVisitor,null,{Visit:function(n,t){switch(n.type){case LITERAL:return this.VisitLiteral(n,t);case VARIABLE:return this.VisitVariable(n,t);case MEMBERACCESS:return this.VisitMember(n,t);case BINARY:return this.VisitBinary(n,t);case UNARY:return this.VisitUnary(n,t);case INCDEC:return this.VisitIncDec(n,t);case EQUALITY:return this.VisitEquality(n,t);case DECISION:return this.VisitDecision(n,t);case METHODCALL:return this.VisitMethodCall(n,t);case NEW:return this.VisitNew(n,t);case JSONASSIGN:return this.VisitJsonAssign(n,t);case ARRAYACCESS:return this.VisitArrayAccess(n,t);default:Guard.raise("Type isn't implemented: "+n.type)}},VisitBinary:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right&&i.executable&&r.executable==n.executable?n:$data.Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(i.executable&&r.executable,n.operator,i,r)},VisitUnary:function(n,t){var i=this.Visit(n.operand,t);return i===n.operand?n:$data.Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(i.executable,n.operator,i)},VisitIncDec:function(n,t){var i=this.Visit(n.operand,t);return i===n.operand?n:$data.Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(i.executable,n.operator,i,n.suffix)},VisitEquality:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right&&i.executable&&r.executable==n.executable?n:$data.Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(i.executable&&r.executable,n.operator,i,r)},VisitDecision:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.left,t),u=this.Visit(n.right,t);return i===n.expression&&r===n.left&&u===n.right&&r.executable&&u.executable&&i.executable==n.executable?n:$data.Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(r.executable&&u.executable&&i.executable,i,r,u)},VisitMethodCall:function(n,t){var i=n.object?this.Visit(n.object,t):null,r=this.VisitArray(n.args,t);return i===n.object&&r===n.args&&(i==null?!0:i.executable)==n.executable?n:$data.Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(i==null?!0:i.executable,i,n.method,r)},VisitNew:function(n,t){var i=this.VisitArray(n.values,t);return i===n.values?n:$data.Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,i)},VisitJsonAssign:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i===n.left&&r===n.right?n:(i.JSONASSIGN=!0,r.JSONASSIGN=!0,$data.Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0,i,r))},VisitArrayAccess:function(n,t){var i=this.Visit(n.array,t),r=this.Visit(n.index,t);return i===n.array&&r===n.index?n:$data.Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,i,r)},VisitArray:function(n,t){for(var r=[],u=!0,i=0;i<n.length;i++)r[i]=this.Visit(n[i],t),u=u&&r[i]===n[i];return u?n:r},VisitLiteral:function(n){return{type:n.type,executable:!0,value:n.value,valueType:n.valueType}},VisitVariable:function(n,t){return typeof t.paramContext[n.name]==undefined&&Guard.raise("Variable is not defined in the paramContext: "+n.name),$data.Expressions.ExpressionNodeTypes.VariableExpressionNode.create(!0,"Math","GLOBALOBJECT")},VisitMember:function(n,t){var u=this.GetMemberChain(n),i=u[0].name,f=t.lambdaParams.indexOf(i)>=0,r=i==t.paramsName;return r||f||Guard.raise("Variable is not defined in the paramContext or the lambda parameters: "+i),$data.Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(r,n.expression,n.member)}},null);$data.Class.define("$data.Expressions.ExecutorVisitor",$data.Expressions.ExpTreeVisitor,null,{VisitVariable:function(n,t){if(!n.executable)return n;var i=n.name==t.paramsName?t.paramContext:window[n.name];return typeof i=="undefined"&&Guard.raise(new Exception("Unknown variable in '"+t.operation+"' operation. The variable isn't referenced in the parameter context and it's not a global variable: '"+n.name+"'.","InvalidOperation",{operationName:t.operation,missingParameterName:n.name})),$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof i,i)},VisitMember:function(n,t){var u,r,i;if(!n.executable)return n;for(u=this.GetMemberChain(n),i=0;i<u.length;i++)r=i==0?t.paramContext:r[u[i].name];return $data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof r,r)},VisitUnary:function(eNode,context){var operand=this.Visit(eNode.operand,context),value,src,operandValue;return(operand!==eNode.operand&&(eNode=$data.Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(eNode.executable,eNode.operator,operand)),!eNode.executable)?eNode:(operandValue=operand.valueType=="string"?"'"+operand.value+"'":operand.value,src="value = "+eNode.operator+" "+operandValue,eval(src),$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof value,value))},VisitIncDec:function(n,t){var i=this.Visit(n.operand,t),r;return(i!==n.operand&&(n=$data.Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(n.executable,n.operator,i,n.suffix)),!n.executable)?n:(r=n.suffix?n.operator=="++"?i.value++:i.value--:n.operator=="++"?++i.value:--i.value,$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof r,r))},VisitBinary:function(eNode,context){var left=this.Visit(eNode.left,context),right=this.Visit(eNode.right,context),value,src,leftValue,rightValue;return((left!==eNode.left||right!==eNode.right)&&(eNode=$data.Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(eNode.executable,eNode.operator,left,right)),!eNode.executable)?eNode:(leftValue=left.valueType=="string"?"'"+left.value+"'":left.value,rightValue=right.valueType=="string"?"'"+right.value+"'":right.value,src="value = "+leftValue+" "+eNode.operator+" "+rightValue,eval(src),$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof value,value))},VisitEquality:function(eNode,context){var left=this.Visit(eNode.left,context),right=this.Visit(eNode.right,context),value,src,leftValue,rightValue;return((left!==eNode.left||right!==eNode.right)&&(eNode=$data.Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(eNode.executable,eNode.operator,left,right)),!eNode.executable)?eNode:(leftValue=left.valueType=="string"?"'"+left.value+"'":left.value,rightValue=right.valueType=="string"?"'"+right.value+"'":right.value,src="value = "+leftValue+" "+eNode.operator+" "+rightValue,eval(src),$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof value,value))},VisitDecision:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.left,t),u=this.Visit(n.right,t),f;return((i!==n.expression||r!==n.left||u!==n.right)&&(n=$data.Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(n.executable,i,r,u)),!n.executable)?n:(f=i.value?r.value:u.value,$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof f,f))},VisitMethodCall:function(eNode,context){var object=eNode.object?this.Visit(eNode.object,context):null,args=this.VisitArray(eNode.args,context),a,i,arg,t,value,src;if((object!==eNode.object||args!=eNode.args)&&(eNode=$data.Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(eNode.executable,object,eNode.method,args)),!eNode.executable)return eNode;for(a=[],i=0;i<args.length;i++)arg=args[i],t=typeof arg.value,a.push(t=="string"?"'"+arg.value+"'":arg.value);return src=object?"value = object.value[eNode.method]("+a.join(",")+");":"value = "+eNode.method+"("+a.join(",")+");",eval(src),$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof value,value)},VisitArrayAccess:function(n,t){var r=this.Visit(n.array,t),u=this.Visit(n.index,t),i=r.value[u.value];return $data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,typeof i,i)}},null);$data.Class.define("$data.Expressions.ExpressionBuilder",null,null,{constructor:function(n){this.context=n},_isLambdaParam:function(n){for(var i=this.context.lambdaParams,t=0;t<i.length;t++)if(i[t]==n)return!0;return!1},_isParam:function(n){return this.context.paramContext[n]!=undefined},_isParamRoot:function(n){return this.context.paramsName==n},Build:function(n,t){var i;switch(n.arity){case"infix":"("==n.value?i=this.BuildMethodCall(n,t):"."==n.value?i=this.BuildMember(n,t):["===","==","!==","!=",">","<",">=","<="].indexOf(n.value)>=0?i=this.BuildEquality(n,t):["&&","||"].indexOf(n.value)>=0?i=this.BuildBinary(n,t):["+","-","*","/","%"].indexOf(n.value)>=0?i=this.BuildBinary(n,t):"["==n.value?i=this.BuildArrayAccess(n,t):Guard.raise("Value of infix node isn't implemented: "+n.value);break;case"prefix":["+","-","!"].indexOf(n.value)>=0?i=this.BuildUnary(n,t):["++","--"].indexOf(n.value)>=0?i=this.BuildIncDec(n,t):"{"==n.value?i=this.BuildNewExpression(n,t):Guard.raise("Value of prefix node isn't implemented: "+n.value);break;case"suffix":["++","--"].indexOf(n.value)>=0?i=this.BuildIncDec(n,t):Guard.raise("Value of suffix node isn't implemented: "+n.value);break;case"string":case"number":i=this.BuildLiteral(n,t);break;case"ternary":n.value=="?"?i=this.BuildDecision(n,t):Guard.raise("Value of ternary node isn't implemented: "+n.value);break;case null:case undefined:i=n.type=="boolean"&&(n.value=="true"||n.value=="false")?this.BuildBoolLiteral(n,t):this.BuildVariable(n,t);break;default:Guard.raise("Arity isn't implemented: "+n.arity)}return i},BuildNewExpression:function(n){for(var t=$data.Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,[]),r=n.first,i=0;i<r.length;i++)t.values.push(this.Build(r[i],t));return t},BuildLiteral:function(n){return $data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,n.arity,n.value)},BuildBoolLiteral:function(n){return $data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,n.type,n.value=="true"?!0:!1)},BuildVariable:function(n,t){var i;if(!n.first)return t.type==MEMBERACCESS?i=this._isLambdaParam(n.value)?"LAMBDAPARAM":this._isParamRoot(n.value)?"PARAMETERROOT":this._isParam(n.value)?"PARAMETER":"PROPERTY":this._isLambdaParam(n.value)?i="LAMBDAPARAM":this._isParamRoot(n.value)?i="PARAMETERROOT":this._isParam(n.value)?i="PARAMETER":window[n.value]!=undefined?i="GLOBALOBJECT":Guard.raise(new Exception("Unknown variable in '"+this.context.operation+"' operation. The variable isn't referenced in the parameter context and it's not a global variable: '"+n.value+"'.","InvalidOperation",{operationName:this.context.operation,missingParameterName:n.value})),$data.Expressions.ExpressionNodeTypes.VariableExpressionNode.create(!0,n.value,i);var u=$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"name",n.value),r=$data.Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0),f=this.Build(n.first,r);return r.left=u,r.right=f,u.JSONASSIGN=!0,f.JSONASSIGN=!0,r},BuildMember:function(n){if(n.value!="."||n.arity!="infix")return n.type=="string"?$data.Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,n.arity,n.value):$data.Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(!0,null,n.value);var t=$data.Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(!0),i=this.Build(n.first,t),r=this.Build(n.second,t);return t.expression=i,t.member=r,t},BuildUnary:function(n){var t=$data.Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(!0,n.value);return t.operand=this.Build(n.first,t),t},BuildIncDec:function(n){var t=$data.Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(!0,n.value,null,n.arity=="suffix");return t.operand=this.Build(n.first,t),t},BuildBinary:function(n){n.first||Guard.raise("Cannot build binary: node.first is null");n.second||Guard.raise("Cannot build binary: node.second is null");var t=$data.Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(!0,n.value);return t.left=this.Build(n.first,t),t.right=this.Build(n.second,t),t},BuildEquality:function(n){var t=$data.Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(!0,n.value);return t.left=this.Build(n.first,t),t.right=this.Build(n.second,t),t},BuildDecision:function(n){var t=$data.Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(!0);return t.expression=this.Build(n.first,t),t.left=this.Build(n.second,t),t.right=this.Build(n.third,t),t},BuildMethodCall:function(n){var t=$data.Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(!0),r,u,i,f;for(n.first.type=="function"?(t.object=this.Build(n.first.first,t),t.method=n.first.second.value):(n.first.type!=null&&Guard.raise("Cannot build MethodCall because type is "+type),t.object=null,t.method=n.first.value),r=n.second,u=[],i=0;i<r.length;i++)f=r[i],u[i]=this.Build(f,t);return t.args=u,t},BuildArrayAccess:function(n){var t=$data.Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0);return t.array=this.Build(n.first,t),t.index=this.Build(n.second,t),t}},null);$C("$data.Expressions.AssociationInfoExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n){this.associationInfo=n},nodeType:{value:$data.Expressions.ExpressionType.AssociationInfo,enumerable:!0}});$C("$data.Expressions.CodeExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){Container.resolveType(Container.getTypeName(n))==$data.String&&n.replace(/^[\s\xA0]+/,"").match("^function")!="function"&&(n="function (it) { return "+n+"; }");this.source=n;this.parameters=t},nodeType:{value:$data.Expressions.ExpressionType.Code,enumerable:!0}});$C("$data.Expressions.CodeToEntityConverter",$data.Expressions.ExpressionVisitor,null,{constructor:function(n){this.scopeContext=n;this.parameters=[]},VisitBinary:function(n,t){var r=this.Visit(n.left,t),i=this.Visit(n.right,t),s,o,u,f,c,e,l,h,a,v;if((!(r instanceof $data.Expressions.ConstantExpression)&&i instanceof $data.Expressions.ConstantExpression||!(i instanceof $data.Expressions.ConstantExpression)&&r instanceof $data.Expressions.ConstantExpression)&&(i instanceof $data.Expressions.ConstantExpression?(s=r,o=i):(s=i,o=r),((u=s.selector)instanceof $data.Expressions.MemberInfoExpression||(u=s.operation)instanceof $data.Expressions.MemberInfoExpression)&&u.memberDefinition&&(u.memberDefinition.type||u.memberDefinition.dataType)&&(f=Container.resolveType(u.memberDefinition.type||u.memberDefinition.dataType),c=Container.resolveType(o.type),f!==c))){if(e=o.value,n.operator===$data.Expressions.ExpressionType.In)if(Array.isArray(e)){for(l=[],h=0;h<e.length;h++)l.push(new $data.Expressions.ConstantExpression(e[h],f));e=l;f=$data.Array}else f=c;i===o?i=new $data.Expressions.ConstantExpression(e,f,i.name):r=new $data.Expressions.ConstantExpression(e,f,r.name)}return a=this.scopeContext.resolveBinaryOperator(n.nodeType,n,t.frameType),v=Container.createSimpleBinaryExpression(r,i,n.nodeType,n.operator,n.type,a),v},VisitUnary:function(n,t){var i=this.Visit(n.operand,t),r=this.scopeContext.resolveUnaryOperator(n.nodeType,n,t.frameType);return Container.createUnaryExpression(i,n.operator,n.nodeType,r)},VisitParameter:function(n,t){var i;Guard.requireValue("context",t);i=$data.Expressions.ExpressionType;switch(n.nodeType){case i.LambdaParameterReference:return Container.createEntityExpression(t.lambdaParameters[n.paramIndex],{lambda:n.name});case i.LambdaParameter:break;default:Guard.raise("Global parameter "+n.name+" not found. For query parameters use 'this.field' notation")}},VisitThis:function(n,t){var i=this.parameters.push({name:"",value:undefined})-1;return Container.createQueryParameterExpression("",i,t.queryParameters,undefined)},VisitFunction:function(){var n=$data.Expressions.ExpressionVisitor.prototype.VisitFunction.apply(this,arguments);return n.body},VisitCall:function(n,t){var s=this,r=this.Visit(n.expression,t),i=this.Visit(n.member,t),f=n.args.map(function(n){return s.Visit(n,t)}),e,o,u;switch(!0){case r instanceof $data.Expressions.QueryParameterExpression:return o=f.map(function(n){return n.value}),e=n.implementation(r.value,i.value,o),Container.createQueryParameterExpression(r.name+"$"+i.value,r.index,e,typeof e);case r instanceof $data.Expressions.EntityFieldExpression:case r instanceof $data.Expressions.EntityFieldOperationExpression:return u=this.scopeContext.resolveFieldOperation(i.value,r,t.frameType),u||Guard.raise("Unknown entity field operation: "+i.getJSON()),i=Container.createMemberInfoExpression(u),Container.createEntityFieldOperationExpression(r,i,this._resolveFunctionArguments(f,u.parameters));case r instanceof $data.Expressions.EntitySetExpression:return u=this.scopeContext.resolveSetOperations(i.value,r,t.frameType),u||Guard.raise("Unknown entity field operation: "+i.getJSON()),i=Container.createMemberInfoExpression(u),Container.createFrameOperationExpression(r,i,this._resolveFunctionArguments(f,u.parameters));case r instanceof $data.Expressions.EntityExpression:return u=this.scopeContext.resolveTypeOperations(i.value,r,t.frameType),u||Guard.raise("Unknown entity function operation: "+i.getJSON()),i=Container.createMemberInfoExpression(u),Container.createEntityFunctionOperationExpression(r,i,this._resolveFunctionArguments(f,u.method.params));case r instanceof $data.Expressions.EntityContextExpression:return u=this.scopeContext.resolveContextOperations(i.value,r,t.frameType),u||Guard.raise("Unknown entity function operation: "+i.getJSON()),i=Container.createMemberInfoExpression(u),Container.createContextFunctionOperationExpression(r,i,this._resolveFunctionArguments(f,u.method.params));default:Guard.raise("VisitCall: Only fields can have operations: "+n.getType().name)}},_resolveFunctionArguments:function(n,t){return t&&(t=t.filter(function(n){return n.name!=="@expression"})),n.length===1&&n[0]instanceof $data.Expressions.ConstantExpression&&typeof n[0].value=="object"&&n[0].value&&t&&t[0]&&n[0].value.constructor===$data.Object&&t.some(function(t){return t.name in n[0].value})?t.map(function(t){var i=t.type||t.dataType||n[0].type;return new $data.Expressions.ConstantExpression(n[0].value[t.name],Container.resolveType(i),t.name)}):n.map(function(n,i){if(n instanceof $data.Expressions.ConstantExpression&&t&&t[i]){var r=t[i].type||t[i].dataType||n.type;return new $data.Expressions.ConstantExpression(n.value,Container.resolveType(r),t[i].name)}return n})},VisitProperty:function(n,t){var i=this.Visit(n.expression,t),r=this.Visit(n.member,t),u,a,f,s,h,e,c,o,l;Guard.requireType("member",r,$data.Expressions.ConstantExpression);switch(i.expressionType){case $data.Expressions.EntityExpression:u=i.getMemberDefinition(r.value);u||Guard.raise(new Exception("Unknown member: "+r.value,"MemberNotFound"));a=u.storageModel.PhysicalType.memberDefinitions.getMember(u.name);switch(a.kind){case"property":return f=Container.createMemberInfoExpression(u),Container.createEntityFieldExpression(i,f);case"navProperty":return(s=u.storageModel.Associations[u.name],h=Container.createEntitySetExpression(i,Container.createAssociationInfoExpression(s)),s.ToMultiplicity!=="*")?Container.createEntityExpression(h,{}):h;case"complexProperty":return f=Container.createMemberInfoExpression(u),Container.createComplexTypeExpression(i,f)}case $data.Expressions.ComplexTypeExpression:return(e=i.getMemberDefinition(r.value),e||Guard.raise("Unknown member "+r.value+" on "+i.entityType.name),c=Container.createMemberInfoExpression(e),Container.isPrimitiveType(Container.resolveType(e.dataType)))?Container.createEntityFieldExpression(i,c):Container.createComplexTypeExpression(i,c);case $data.Expressions.QueryParameterExpression:return o=n.implementation(i.value,r.value),this.parameters[i.index].name+="$"+r.value,this.parameters[i.index].value=o,Container.createQueryParameterExpression(i.name+"$"+r.value,i.index,o,Container.getTypeName(o));case $data.Expressions.EntityFieldExpression:case $data.Expressions.EntityFieldOperationExpression:return l=this.scopeContext.resolveFieldOperation(r.value,i,t.frameType),l||Guard.raise("Unknown entity field operation: "+r.getJSON()),r=Container.createMemberInfoExpression(l),Container.createEntityFieldOperationExpression(i,r,[]);default:Guard.raise("Unknown expression type to handle: "+i.expressionType.name)}}});$C("$data.Expressions.ComplexTypeExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){Guard.requireType("source",n,[$data.Expressions.EntityExpression,$data.Expressions.ComplexTypeExpression]);Guard.requireType("selector",t,[$data.Expressions.EntityExpression,$data.Expressions.MemberInfoExpression]);this.source=n;this.selector=t;var i=n.entityType.getMemberDefinition(t.memberName).dataType,r=Container.resolveType(i);this.entityType=r},getMemberDefinition:function(n){return this.entityType.getMemberDefinition(n)},nodeType:{value:$data.Expressions.ExpressionType.Com}});$C("$data.Expressions.EntityContextExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n){this.instance=n},instance:{enumerable:!1},nodeType:{value:$data.Expressions.ExpressionType.EntityContext,enumerable:!0}});$C("$data.Expressions.EntityExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){Guard.requireValue("source",n);Guard.requireValue("selector",t);n instanceof $data.Expressions.EntitySetExpression||n instanceof $data.Expressions.ServiceOperationExpression||Guard.raise("Only EntitySetExpressions can be the source for an EntityExpression");this.source=n;this.selector=t;this.entityType=this.source.elementType;this.storageModel=this.source.storageModel;Guard.requireValue("entityType",this.entityType);Guard.requireValue("storageModel",this.storageModel)},getMemberDefinition:function(n){var t=this.entityType.getMemberDefinition(n);return t||Guard.raise(new Exception("Unknown member "+n+" on type "+this.entityType.name,"MemberNotFound")),t.storageModel=this.storageModel,t},nodeType:{value:$data.Expressions.ExpressionType.Entity}});$C("$data.Expressions.EntityExpressionVisitor",null,null,{constructor:function(){this.lambdaTypes=[]},canVisit:function(n){return n instanceof $data.Expressions.ExpressionNode},Visit:function(n,t){var i,u,r;return this.canVisit(n)?(i="Visit"+n.getType().name,i in this)?(u=this[i],r=u.call(this,n,t),typeof r=="undefined")?n:r:n:n},VisitToArrayExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createToArrayExpression(i):n},VisitForEachExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createForEachExpression(i):n},VisitMemberInfoExpression:function(n){return n},VisitSingleExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createSingleExpression(i):n},VisitFirstExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createFirstExpression(i):n},VisitSomeExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createSomeExpression(i):n},VisitFindExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createFindExpression(i):n},VisitEveryExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createEveryExpression(i):n},VisitCountExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createCountExpression(i):n},VisitBatchDeleteExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createBatchDeleteExpression(i):n},VisitObjectLiteralExpression:function(n,t){for(var u=n.members.map(function(n){return this.Visit(n,t)},this),r=!0,i=0;i<n.members.length;i++)r=r&&n.members[i]===u[i];return r?n:Container.createObjectLiteralExpression(u)},VisitObjectFieldExpression:function(n,t){var i=this.Visit(n.expression,t);return n.expression!==i?Container.createObjectFieldExpression(n.fieldName,i):n},VisitIncludeExpression:function(n,t){var i=this.Visit(n.source,t);return i!==n.source?Container.createIncludeExpression(i,n.selector):n},VisitUnaryExpression:function(n,t){var i=this.Visit(n.operand,t);return n.operand!==i?Container.createUnaryExpression(i,n.operator,n.nodeType,n.resolution):n},VisitSimpleBinaryExpression:function(n,t){var i=this.Visit(n.left,t),r=this.Visit(n.right,t);return i!==n.left||r!==n.right?new $data.Expressions.SimpleBinaryExpression(i,r,n.nodeType,n.operator,n.type,n.resolution):n},VisitEntityContextExpression:function(n){return n},VisitCodeExpression:function(n){return n},VisitComplexTypeExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createComplexTypeExpression(i,r):n},VisitEntityExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createEntityExpression(i,r):n},VisitEntityFieldExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createEntityFieldExpression(i,r):n},VisitEntityFieldOperationExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.operation,t),u=n.parameters.map(function(n){return this.Visit(n)},this);return Container.createEntityFieldOperationExpression(i,r,u)},VisitParametricQueryExpression:function(n,t){var i=this.Visit(n.expression,t),r=n.parameters.map(function(n){return this.Visit(n)},this);return Container.createParametricQueryExpression(i,r)},VisitEntitySetExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createEntitySetExpression(i,r,n.params,n.instance):n},VisitInlineCountExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createInlineCountExpression(i,r,n.params,n.instance):n},VisitFilterExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createFilterExpression(i,r,n.params,n.instance):n},VisitProjectionExpression:function(n,t){var r=this.Visit(n.source,t),u=this.Visit(n.selector,t),i;return r!==n.source||u!==n.selector?(i=Container.createProjectionExpression(r,u,n.params,n.instance),i.projectionAs=n.projectionAs,i):n},VisitOrderExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.selector,t);return i!==n.source||r!==n.selector?Container.createOrderExpression(i,r,n.nodeType):n},VisitPagingExpression:function(n,t){var i=this.Visit(n.source,t),r=this.Visit(n.amount,t);return i!==n.source||r!==n.amount?Container.createPagingExpression(i,r,n.nodeType):n}});$C("$data.Expressions.ExpressionMonitor",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.Visit=function(t,i){var r=t,u,f,e;return this.canVisit(t)&&(n.VisitExpressionNode&&n.VisitExpressionNode.apply(n,arguments),u="Visit"+t.getType().name,u in n&&(r=n[u].apply(n,arguments))),f=arguments,r!==t&&(f=[r,i]),r=$data.Expressions.EntityExpressionVisitor.prototype.Visit.apply(this,f),f=[r,i],this.canVisit(r)&&(e=r.getType().name,n.MonitorExpressionNode&&n.MonitorExpressionNode.apply(n,f),u="Monitor"+e,u in n&&n[u].apply(n,f),n.MutateExpressionNode&&n.MutateExpressionNode.apply(n,f),u="Mutate"+e,u in n&&(r=n[u].apply(n,f))),r}}});$C("$data.Expressions.EntityFieldExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){this.selector=t;this.source=n;(this.selector instanceof $data.Expressions.MemberInfoExpression||this.selector.name)&&(this.memberName=this.selector.name)},nodeType:{value:$data.Expressions.ExpressionType.EntityField}});$C("$data.Expressions.EntityFieldOperationExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.source=n;this.operation=t;this.parameters=i},nodeType:{value:$data.Expressions.ExpressionType.EntityFieldOperation}});$C("$data.Expressions.EntitySetExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i,r){function f(){for(var t=n;t;){if(t instanceof $data.Expressions.EntityContextExpression)return t;t=t.source}}Guard.requireType("source",n,[$data.Expressions.EntityContextExpression,$data.Expressions.EntitySetExpression]);Guard.requireType("selector",n,[$data.Expressions.MemberInfoExpression,$data.Expressions.CodeExpression,$data.Expressions.ParametricQueryExpression]);this.source=n;this.selector=t;this.params=i;this.instance=r;this.storage_type={};var u=f();switch(!0){case this.source instanceof $data.Expressions.EntityContextExpression:Guard.requireType("selector",t,$data.Expressions.MemberInfoExpression);this.elementType=t.memberDefinition.elementType;this.storageModel=u.instance._storageModel.getStorageModel(this.elementType);break;case this.source instanceof $data.Expressions.EntityExpression:Guard.requireType("selector",t,$data.Expressions.AssociationInfoExpression);this.elementType=t.associationInfo.ToType;this.storageModel=u.instance._storageModel.getStorageModel(this.elementType);break;case this.source instanceof $data.Expressions.EntitySetExpression:this.elementType=this.source.elementType;this.storageModel=this.source.storageModel;break;case this.source instanceof $data.Expressions.ServiceOperationExpression:this.elementType=this.source.elementType;this.storageModel=this.source.storageModel;break;default:Guard.raise("take and skip must be the last expressions in the chain!")}},instance:{enumerable:!1},nodeType:{value:$data.Expressions.ExpressionType.EntitySet,enumerable:!0}});$C("$data.Expressions.FrameOperationExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.source=n;this.operation=t;this.parameters=i},nodeType:{value:$data.Expressions.ExpressionType.FrameOperation}});$C("$data.Expressions.EntityFunctionOperationExpression",$data.Expressions.FrameOperationExpression,null,{nodeType:{value:$data.Expressions.ExpressionType.EntityFunctionOperation}});$C("$data.Expressions.ContextFunctionOperationExpression",$data.Expressions.FrameOperationExpression,null,{nodeType:{value:$data.Expressions.ExpressionType.ContextFunctionOperation}});$C("$data.Expressions.FilterExpression",$data.Expressions.EntitySetExpression,null,{constructor:function(){this.resultType=$data.Array},nodeType:{value:$data.Expressions.ExpressionType.Filter,enumerable:!0}});$C("$data.Expressions.InlineCountExpression",$data.Expressions.EntitySetExpression,null,{constructor:function(){},nodeType:{value:$data.Expressions.ExpressionType.InlineCount,enumerable:!0}});$C("$data.Expressions.FrameOperator",$data.Expressions.ExpressionNode,null,{constructor:function(){this.isTerminated=!0}});$C("$data.Expressions.CountExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Integer},nodeType:{value:$data.Expressions.ExpressionType.Count,enumerable:!0}});$C("$data.Expressions.SingleExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Object},nodeType:{value:$data.Expressions.ExpressionType.Single,enumerable:!0}});$C("$data.Expressions.FindExpression",$data.Expressions.FrameOperator,null,{constructor:function(n,t){this.source=n;this.params=t;this.resultType=$data.Object},nodeType:{value:$data.Expressions.ExpressionType.Find,enumerable:!0}});$C("$data.Expressions.FirstExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Object},nodeType:{value:$data.Expressions.ExpressionType.First,enumerable:!0}});$C("$data.Expressions.ForEachExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Array},nodeType:{value:$data.Expressions.ExpressionType.ForEach,enumerable:!0}});$C("$data.Expressions.ToArrayExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Array},nodeType:{value:$data.Expressions.ExpressionType.ToArray,enumerable:!0}});$C("$data.Expressions.SomeExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Object},nodeType:{value:$data.Expressions.ExpressionType.Some,enumerable:!0}});$C("$data.Expressions.EveryExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Object},nodeType:{value:$data.Expressions.ExpressionType.Every,enumerable:!0}});$C("$data.Expressions.BatchDeleteExpression",$data.Expressions.FrameOperator,null,{constructor:function(n){this.source=n;this.resultType=$data.Integer},nodeType:{value:$data.Expressions.ExpressionType.BatchDelete,enumerable:!0}});$C("$data.Expressions.IncludeExpression",$data.Expressions.EntitySetExpression,null,{constructor:function(){},nodeType:{value:$data.Expressions.ExpressionType.Include,writable:!0},toString:function(){return"unimplemented"}},null);$C("$data.Expressions.MemberInfoExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n){this.memberDefinition=n;this.memberName=n.name},nodeType:{value:$data.Expressions.ExpressionType.MemberInfo,enumerable:!0}});$C("$data.Expressions.OrderExpression",$data.Expressions.EntitySetExpression,null,{constructor:function(n,t,i){this.nodeType=i},nodeType:{value:$data.Expressions.ExpressionType.OrderBy,writable:!0},toString:function(){return"unimplemented"}},null);$C("$data.Expressions.ParametricQueryExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t){this.expression=n;this.parameters=t||[]},nodeType:{value:$data.Expressions.ExpressionType.ParametricQuery,enumerable:!0}});$C("$data.Expressions.ProjectionExpression",$data.Expressions.EntitySetExpression,null,{constructor:function(){},nodeType:{value:$data.Expressions.ExpressionType.Projection,enumerable:!0}});$C("$data.Expressions.QueryExpressionCreator",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){Guard.requireValue("scopeContext",n);this.scopeContext=n},VisitEntitySetExpression:function(n){return n.source instanceof $data.Expressions.EntityContextExpression&&this.lambdaTypes.push(n),n},VisitServiceOperationExpression:function(n){return n.source instanceof $data.Expressions.EntityContextExpression&&this.lambdaTypes.push(n),n},VisitCodeExpression:function(n,t){var o=n.source.toString(),i=Container.createCodeParser(this.scopeContext).createExpression(o),r,u;this.scopeContext.log({event:"JSCodeExpression",data:i});r=Container.createConstantValueResolver(n.parameters,window,this.scopeContext);u=Container.createParameterResolverVisitor();i=u.Visit(i,r);this.scopeContext.log({event:"JSCodeExpressionResolved",data:i});var f=Container.createCodeToEntityConverter(this.scopeContext),e=f.Visit(i,{queryParameters:n.parameters,lambdaParameters:this.lambdaTypes,frameType:t.frameType}),s=Container.createParametricQueryExpression(e,f.parameters);return this.scopeContext.log({event:"EntityExpression",data:e}),s},VisitFilterExpression:function(n,t){var r=this.Visit(n.source,t),i;return(t=t||{},t.frameType=n.getType(),i=this.Visit(n.selector,t),r!==n.source||i!==n.selector)?Container.createFilterExpression(r,i,n.params,n.instance):n},VisitInlineCountExpression:function(n,t){var r=this.Visit(n.source,t),i;return(t=t||{},t.frameType=n.getType(),i=this.Visit(n.selector,t),r!==n.source||i!==n.selector)?Container.createInlineCountExpression(r,i,n.params,n.instance):n},VisitProjectionExpression:function(n,t){var u=this.Visit(n.source,t),i,r;return(t=t||{},t.frameType=n.getType(),i=this.Visit(n.selector,t),u!==n.source||i!==n.selector)?(r=Container.createProjectionExpression(u,i,n.params,n.instance),r.projectionAs=n.projectionAs,r):n},VisitOrderExpression:function(n,t){var r=this.Visit(n.source,t),i;return(t=t||{},t.frameType=n.getType(),i=this.Visit(n.selector,t),r!==n.source||i!==n.selector)?Container.createOrderExpression(r,i,n.nodeType):n}});$C("$data.Expressions.QueryParameterExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i){this.name=n;this.index=t;this.value=i;this.type=Container.getTypeName(i)},nodeType:{value:$data.Expressions.ExpressionType.QueryParameter,writable:!1}});$C("$data.Expressions.RepresentationExpression",$data.Expressions.ExpressionNode,null,{constructor:function(){},getMemberDefinition:function(n){return this.entityType.getMemberDefinition(n)},nodeType:{value:$data.Expressions.ExpressionType.Entity}});$C("$data.Expressions.ServiceOperationExpression",$data.Expressions.ExpressionNode,null,{constructor:function(n,t,i,r,u){function f(){for(var t=n;t;){if(t instanceof $data.Expressions.EntityContextExpression)return t;t=t.source}}Guard.requireType("source",n,[$data.Expressions.EntityContextExpression]);Guard.requireType("selector",n,[$data.Expressions.MemberInfoExpression]);this.source=n;this.selector=t;this.params=i;this.cfg=r;this.boundItem=u;var e=f();switch(!0){case this.source instanceof $data.Expressions.EntityContextExpression:this.elementType=r.elementType?Container.resolveType(r.elementType):this.elementType?Container.resolveType(r.returnType):null;this.storageModel=r.elementType?e.instance._storageModel.getStorageModel(Container.resolveType(r.elementType)):null;break;default:Guard.raise("Unknown source type for EntitySetExpression: "+this.source.getType().name)}},nodeType:{value:$data.Expressions.ExpressionType.ServiceOperation,enumerable:!0}});$C("$data.Expressions.ContinuationExpressionBuilder",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.mode=n},compile:function(n){var t={mode:"find",skipExists:!1},i,u,r;return this.Visit(n.expression,t),i={skip:t.skipSize,take:t.pageSize,message:""},"pageSize"in t?(r={mode:this.mode,pageSize:t.pageSize},!t.skipExists&&t.pageSize?(r.append=!0,u=this.Visit(n.expression,r)):t.skipExists&&(u=this.Visit(n.expression,r)),r.abort?(i.skip=(i.skip||0)-i.take,i.message="Invalid skip value!"):i.expression=u):i.message="take expression not defined in the chain!",i},VisitPagingExpression:function(n,t){var r,i;switch(t.mode){case"find":n.nodeType===$data.Expressions.ExpressionType.Take?t.pageSize=n.amount.value:(t.skipSize=n.amount.value,t.skipExists=!0);break;case"prev":if(n.nodeType===$data.Expressions.ExpressionType.Skip)return r=n.amount.value-t.pageSize,t.abort=r<0&&n.amount.value>=t.pageSize,i=Container.createConstantExpression(Math.max(r,0),"number"),Container.createPagingExpression(n.source,i,n.nodeType);t.append&&(t.abort=!0);break;case"next":if(n.nodeType===$data.Expressions.ExpressionType.Skip)return r=t.pageSize+n.amount.value,i=Container.createConstantExpression(r,"number"),Container.createPagingExpression(n.source,i,n.nodeType);if(t.append)return i=Container.createConstantExpression(t.pageSize,"number"),Container.createPagingExpression(n,i,$data.Expressions.ExpressionType.Skip)}this.Visit(n.source,t)}});$data.Class.define("$data.Validation.ValidationError",null,null,{constructor:function(n,t,i){this.Message=n;this.PropertyDefinition=t;this.Type=i},Type:{dataType:"string"},Message:{dataType:"string"},PropertyDefinition:{dataType:$data.MemberDefinition}},null);$data.Class.define("$data.Validation.EntityValidationBase",null,null,{ValidateEntity:function(){return[]},ValidateEntityField:function(){return[]},getValidationValue:function(){Guard.raise("Pure class")},getValidationMessage:function(){Guard.raise("Pure class")}},null);$data.Validation=$data.Validation||{};$data.Validation.Entity=new $data.Validation.EntityValidationBase;$data.Class.define("$data.Validation.Defaults",null,null,null,{validators:{value:{required:function(n){return!Object.isNullOrUndefined(n)},customValidator:function(n,t){return Object.isNullOrUndefined(n)||typeof t=="function"?t(n):!0},minValue:function(n,t){return Object.isNullOrUndefined(n)||n>=t},maxValue:function(n,t){return Object.isNullOrUndefined(n)||n<=t},minLength:function(n,t){return Object.isNullOrUndefined(n)||n.length>=t},maxLength:function(n,t){return Object.isNullOrUndefined(n)||n.length<=t},length:function(n,t){return Object.isNullOrUndefined(n)||n.length==t},regex:function(n,t){return Object.isNullOrUndefined(n)||n.match(typeof t=="string"?new RegExp(t.indexOf("/")===0&&t.lastIndexOf("/")===t.length-1?t.slice(1,-1):t):t)}}},_getGroupValidations:function(n){var r={},t,i;if(Array.isArray(n))for(t=0;t<n.length;t++)i=n[t],typeof this.validators[i]=="function"&&(r[i]=this.validators[i]);return r}});$data.Class.define("$data.Validation.EntityValidation",$data.Validation.EntityValidationBase,null,{ValidateEntity:function(n){var t=[];return n.getType().memberDefinitions.getPublicMappedProperties().forEach(function(i){t=t.concat(this.ValidateEntityField(n,i,undefined,!0))},this),t},ValidateEntityField:function(n,t,i,r){var f=[],u=Container.resolveType(t.dataType),e=Container.resolveName(u),o=r?n[t.name]:i;return!t.inverseProperty&&u&&typeof u.isAssignableTo=="function"&&u.isAssignableTo($data.Entity)&&(e=$data.Entity.fullName),this.fieldValidate(n,t,o,f,e),f},getValidationValue:function(n,t){var i,r;return i=n[t]&&n[t].value?n[t].value:n[t],this.convertableValidation[t]&&(r=this.convertableValidation[t]===!0?n.type:this.convertableValidation[t],r&&(i=Container.convertTo(i,r,n.elementType))),i},getValidationMessage:function(n,t,i){var r=i;return typeof n[t]=="object"&&n[t].message?r=n[t].message:n.errorMessage&&(r=n.errorMessage),r},createValidationError:function(n,t,i){return new $data.Validation.ValidationError(this.getValidationMessage(n,t,i),n,t)},convertableValidation:{value:{required:"$data.Boolean",minValue:!0,maxValue:!0,minLength:"$data.Integer",maxLength:"$data.Integer",length:"$data.Integer"}},supportedValidations:{value:{"$data.ObjectID":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Byte":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.SByte":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Decimal":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Float":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Number":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int16":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Integer":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int32":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int64":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.String":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minLength","maxLength","length","regex"]),"$data.Date":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.DateTimeOffset":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Time":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Boolean":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Array":$data.Validation.Defaults._getGroupValidations(["required","customValidator","length"]),"$data.Object":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Guid":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Blob":$data.Validation.Defaults._getGroupValidations(["required","customValidator","minLength","maxLength","length"]),"$data.GeographyPoint":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyLineString":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyPolygon":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiPoint":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiLineString":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiPolygon":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyCollection":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryPoint":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryLineString":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryPolygon":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiPoint":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiLineString":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiPolygon":$data.Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryCollection":$data.Validation.Defaults._getGroupValidations(["required","customValidator"])}},fieldValidate:function(n,t,i,r,u){var f,e;n.entityState==$data.EntityState.Modified&&n.changedProperties&&n.changedProperties.indexOf(t)<0||(f=this.supportedValidations[u],f&&(e=Object.keys(f),e.forEach(function(u){t[u]&&f[u]&&!f[u].call(n,i,this.getValidationValue(t,u))&&r.push(this.createValidationError(t,u,"Validation error!"))},this),u===$data.Entity.fullName&&i instanceof $data.Entity&&!i.isValid()&&r.push(this.createValidationError(t,"ComplexProperty","Validation error!"))))}},null);$data.Validation.Entity=new $data.Validation.EntityValidation;$data.Class.define("$data.Notifications.ChangeDistributorBase",null,null,{distributeData:function(){Guard.raise("Pure class")}},null);$data.Class.define("$data.Notifications.ChangeCollectorBase",null,null,{buildData:function(){Guard.raise("Pure class")},processChangedData:function(n){this.Distrbutor&&this.Distrbutor.distributeData&&this.Distrbutor.distributeData(this.buildData(n))},Distrbutor:{enumerable:!1,dataType:$data.Notifications.ChangeDistributorBase,storeOnObject:!0}},null);$data.Class.define("$data.Notifications.ChangeDistributor",$data.Notifications.ChangeDistributorBase,null,{constructor:function(n){this.broadcastUrl=n},distributeData:function(n){$data.ajax({url:this.broadcastUrl,type:"POST",data:"data="+JSON.stringify(n),succes:this.success,error:this.error})},broadcastUrl:{dataType:"string"},success:function(){},error:function(){}},null);$data.Class.define("$data.Notifications.ChangeCollector",$data.Notifications.ChangeCollectorBase,null,{buildData:function(n){var t=[];return n.forEach(function(n){var r={entityState:n.data.entityState,typeName:n.data.getType().name},i=[];switch(n.data.entityState){case $data.EntityState.Added:i=n.data.getType().memberDefinitions.getPublicMappedProperties();break;case $data.EntityState.Modified:i=n.data.changedProperties;break;case $data.EntityState.Deleted:i=n.data.getType().memberDefinitions.getKeyProperties()}i.forEach(function(t){r[t.name]=n.data[t.name]});t.push(r)}),t}},null);$data.Class.define("$data.Transaction",null,null,{constructor:function(){this._objectId=(new Date).getTime();$data.Trace.log("create: ",this._objectId);this.oncomplete=new $data.Event("oncomplete",this);this.onerror=new $data.Event("onerror",this)},abort:function(){Guard.raise(new Exception("Not Implemented","Not Implemented",arguments))},_objectId:{type:$data.Integer},transaction:{type:$data.Object},oncomplete:{type:$data.Event},onerror:{type:$data.Event}},null);$data.Class.define("$data.Access",null,null,{},{isAuthorized:function(n,t,i,r){var u=new $data.PromiseHandler,f=u.createCallback(r),e=u.getPromise();return f.success(!0),e},getAccessBitmaskFromPermission:function(n){var t=$data.Access.None;return n.Create&&(t|=$data.Access.Create),n.Read&&(t|=$data.Access.Read),n.Update&&(t|=$data.Access.Update),n.Delete&&(t|=$data.Access.Delete),n.DeleteBatch&&(t|=$data.Access.DeleteBatch),n.Execute&&(t|=$data.Access.Execute),t},None:{value:0},Create:{value:1},Read:{value:2},Update:{value:4},Delete:{value:8},DeleteBatch:{value:16},Execute:{value:32}});$data.Class.define("$data.Promise",null,null,{always:function(){Guard.raise(new Exception("$data.Promise.always","Not implemented!"))},done:function(){Guard.raise(new Exception("$data.Promise.done","Not implemented!"))},fail:function(){Guard.raise(new Exception("$data.Promise.fail","Not implemented!"))},isRejected:function(){Guard.raise(new Exception("$data.Promise.isRejected","Not implemented!"))},isResolved:function(){Guard.raise(new Exception("$data.Promise.isResolved","Not implemented!"))},pipe:function(){Guard.raise(new Exception("$data.Promise.pipe","Not implemented!"))},progress:function(){Guard.raise(new Exception("$data.Promise.progress","Not implemented!"))},promise:function(){Guard.raise(new Exception("$data.Promise.promise","Not implemented!"))},state:function(){Guard.raise(new Exception("$data.Promise.state","Not implemented!"))},then:function(){Guard.raise(new Exception("$data.Promise.then","Not implemented!"))}},null);$data.Class.define("$data.PromiseHandlerBase",null,null,{constructor:function(){},createCallback:function(n){return n=$data.typeSystem.createCallbackSetting(n),cbWrapper={success:n.success,error:n.error,notify:n.notify}},getPromise:function(){return new $data.Promise}},null);$data.PromiseHandler=$data.PromiseHandlerBase;EventSubscriber=$data.Class.define("EventSubscriber",null,null,{constructor:function(n,t,i){this.handler=n;this.state=t;this.thisArg=i},handler:{},state:{},thisArg:{}});$data.Event=Event=$data.Class.define("$data.Event",null,null,{constructor:function(n,t){function r(n,t){n.forEach(function(i,r){i.handler==t&&n.splice(r,1)})}var i=null,u=t;this.attach=function(n,r,u){i||(i=[]);i.push(new EventSubscriber(n,r,u||t))};this.detach=function(n){r(i,n)};this.fire=function(n,r){var u=r||t||this;i&&i.forEach(function(t){try{t.handler.call(t.thisArg,u,n,t.state)}catch(i){console.log("unhandled exception in event handler. exception suppressed");console.dir(i)}})};this.fireCancelAble=function(n,r){var f=r||t||this,u=!0;return i&&i.forEach(function(t){try{u=u&&(t.handler.call(t.thisArg,f,n,t.state)===!1?!1:!0)}catch(i){console.log("unhandled exception in event handler. exception suppressed");console.dir(i)}}),u}}});var eventData=$data.Class.define("EventData",null,null,{eventName:{}}),PropertyChangeEventData=$data.Class.define("PropertyChangeEventData",EventData,null,{constructor:function(n,t,i){this.propertyName=n;this.oldValue=t;this.newValue=i},propertyName:{},oldValue:{},newValue:{}}),PropertyValidationEventData=$data.Class.define("PropertyValidationEventData",EventData,null,{constructor:function(n,t,i,r){this.propertyName=n;this.oldValue=t;this.newValue=i;this.errors=r;this.cancel=!1},propertyName:{},oldValue:{},newValue:{},errors:{},cancel:{}});$data.Entity=Entity=$data.Class.define("$data.Entity",null,null,{constructor:function(n,t){var i,s,f,h,r,o;if(this.initData={},i=this.getType(),i.__copyPropertiesToInstance&&$data.typeSystem.writePropertyValues(this),s=null,this.context=s,"setDefaultValues"in i&&(t&&t.setDefaultValues===!1||(!n||Object.keys(n).length<1)&&(n=i.setDefaultValues(n))),typeof n=="object"){f=i.memberDefinitions;h=f.getPublicMappedPropertyNames();for(r in n)if(h.indexOf(r)>-1){var e=f.getMember(r),c=Container.resolveType(e.type),u=n[r];e.concurrencyMode===$data.ConcurrencyMode.Fixed?this.initData[r]=u:(t&&t.converters&&(o=t.converters[Container.resolveName(c)],o&&(u=o(u))),this.initData[r]=Container.convertTo(u,c,e.elementType,t))}}t&&t.entityBuilder&&t.entityBuilder(this,i.memberDefinitions.asArray(),i);this.changedProperties=undefined;this.entityState=undefined},toString:function(){return this.getType().fullName+"("+(this.Id||this.Name||"")+")"},toJSON:function(){var n={},t=this;return this.getType().memberDefinitions.getPublicMappedProperties().forEach(function(i){n[i.name]=t[i.name]instanceof Date&&i.type&&Container.resolveType(i.type)===$data.DateTimeOffset?new $data.DateTimeOffset(t[i.name]):t[i.name]}),n},equals:function(n){var i,t;if(n.getType()!==this.getType())return!1;for(i=this.getType().memberDefinitions.getKeyProperties(),t=0;t<i.length;t++)if(this[i[t].name]!=n[i[t].name])return!1;return!0},propertyChanging:{dataType:$data.Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyChanging||(this._propertyChanging=new Event("propertyChanging",this)),this._propertyChanging},set:function(n){this._propertyChanging=n}},propertyChanged:{dataType:$data.Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyChanged||(this._propertyChanged=new Event("propertyChanged",this)),this._propertyChanged},set:function(n){this._propertyChanged=n}},propertyValidationError:{dataType:$data.Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyValidationError||(this._propertyValidationError=new Event("propertyValidationError",this)),this._propertyValidationError},set:function(n){this._propertyValidationError=n}},storeProperty:function(n,t){var i,f,r,u,e;(n.concurrencyMode!==$data.ConcurrencyMode.Fixed&&(t=Container.convertTo(t,n.type,n.elementType)),i=null,n.monitorChanges!=!1&&(this._propertyChanging||this._propertyChanged||"instancePropertyChanged"in this.constructor)&&(r=this[n.name],i=new PropertyChangeEventData(n.name,r,t),this._propertyChanging&&this.propertyChanging.fire(i)),n.monitorChanges!=!1&&(this._propertyValidationError||"instancePropertyValidationError"in this.constructor)&&(f=$data.Validation.Entity.ValidateEntityField(this,n,t),f.length>0&&(r=this[n.name],u=new PropertyValidationEventData(n.name,r,t,f),this._propertyValidationError&&this.propertyValidationError.fire(u),"instancePropertyValidationError"in this.constructor&&this.constructor.instancePropertyValidationError.fire(u,this),u.cancel==!0)))||(n.storeOnObject==!0?(e="_"+n.name,this[e]=t):this.initData[n.name]=t,this.isValidated=!1,n.monitorChanges!=!1&&this.entityState==$data.EntityState.Unchanged&&(this.entityState=$data.EntityState.Modified),this._setPropertyChanged(n),n.monitorChanges!=!1&&(this._propertyChanged&&this.propertyChanged.fire(i),"instancePropertyChanged"in this.constructor&&this.constructor.instancePropertyChanged.fire(i,this)))},_setPropertyChanged:function(n){n.monitorChanges!=!1&&(this.changedProperties||(this.changedProperties=[]),this.changedProperties.some(function(t){return t.name==n.name})||this.changedProperties.push(n))},retrieveProperty:function(n){if(n.storeOnObject==!0){var t="_"+n.name;return this[t]}return this.initData[n.name]},getProperty:function(n,t,i){var u,f,r,e;if(t=$data.typeSystem.createCallbackSetting(t),this[n.name]!=undefined){i instanceof $data.Transaction?t.success(this[n.name],i):t.success(this[n.name]);return}if(u=this.context,this.context)return u.loadItemProperty(this,n,t,i);try{if(f=this,r=this.storeToken||this.getType().storeToken,r&&typeof r.factory=="function")return e=r.factory(),e.onReady().then(function(i){return i.loadItemProperty(f,n,t)})}catch(o){}Guard.raise(new Exception("Entity not in context","Invalid operation"))},setProperty:function(n,t,i){this[n.name]=t;var r=new $data.PromiseHandler;return i=r.createCallback(i),i.success(this[n.name]),r.getPromise()},isValid:function(){return this.isValidated||(this.ValidationErrors=$data.Validation.Entity.ValidateEntity(this),this.isValidated=!0),this.ValidationErrors.length==0},isValidated:{dataType:"bool",storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,value:!1},ValidationErrors:{dataType:Array,elementType:$data.Validation.ValidationError,storeOnObject:!0,monitorChanges:!0,notMapped:!0,enumerable:!1},resetChanges:function(){delete this._changedProperties},changedProperties:{dataType:Array,elementType:window.MemberDefinition,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1},entityState:{dataType:"integer",storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1},remove:function(){if($data.ItemStore&&"EntityInstanceRemove"in $data.ItemStore)return $data.ItemStore.EntityInstanceRemove.apply(this,arguments);throw"not implemented";},save:function(){if($data.ItemStore&&"EntityInstanceSave"in $data.ItemStore)return $data.ItemStore.EntityInstanceSave.apply(this,arguments);throw"not implemented";},refresh:function(){if($data.ItemStore&&"EntityInstanceSave"in $data.ItemStore)return $data.ItemStore.EntityInstanceRefresh.apply(this,arguments);throw"not implemented";},storeToken:{type:Object,monitorChanges:!1,notMapped:!0,storeOnObject:!0},getFieldUrl:function(n){var i,t;if(this.context)return this.context.getFieldUrl(this,n);if(this.getType().storeToken&&typeof this.getType().storeToken.factory=="function")return i=this.getType().storeToken.factory(),i.getFieldUrl(this,n);if(this.getType().storeToken)try{if(t=$data.ItemStore._getContextPromise("default",this.getType()),t instanceof $data.EntityContext)return t.getFieldUrl(this,n)}catch(r){}return"#"}},{__setPropertyfunctions:{value:!0,notMapped:!0,enumerable:!1,storeOnObject:!0},__copyPropertiesToInstance:{value:!1,notMapped:!0,enumerable:!1,storeOnObject:!0},inheritedTypeProcessor:function(n){$data.ItemStore&&"EntityInheritedTypeProcessor"in $data.ItemStore&&$data.ItemStore.EntityInheritedTypeProcessor.apply(this,arguments);n.defaultValues={};n.memberDefinitions.asArray().forEach(function(t){t.hasOwnProperty("defaultValue")&&(n.defaultValues[t.name]=t.defaultValue)});Object.keys(n.defaultValues).length>0&&(n.setDefaultValues=function(t,i){var u,r,f;t=t||{};u=n.defaultValues;for(r in u)r in t||(f=u[r],t[r]="function"==typeof f?u[r](r,i):u[r]);return t})},addEventListener:function(n,t){var i="on"+n;i in this||(this[i]=new $data.Event(n,this));this[i].attach(t)},removeEventListener:function(n,t){var i="on"+n;i in this&&this[i].detach(t)},raiseEvent:function(n,t){var i="on"+n;i in this&&this[i].fire(t)},getFieldNames:function(){return this.memberDefinitions.getPublicMappedPropertyNames()},"from$data.Object":function(n,t,i,r){if(Object.isNullOrUndefined(n))return n;var u;return r&&r.converters&&(u={converters:r.converters}),new this(n,u)}});$data.define=function(n,t,i){var u,e;if(!t||t instanceof $data.ContainerClass||(i=t,t=undefined),!i)throw new Error("json object type is not supported yet");var r={},f=[];if(Object.keys(i).forEach(function(n){var t=i[n];typeof t=="object"&&("type"in t||"get"in t||"set"in t)?(r[n]=t,t.key&&f.push(t),!("get"in t||"set"in t)||"notMapped"in t&&t.notMapped!==!0||(t.notMapped=!0,t.storeOnObject=!0),"get"in t&&!("set"in t)?t.set=function(){}:"set"in t&&!("get"in t)&&(t.get=function(){})):r[n]={type:t}}),f.length<1){switch(!0){case"id"in r:u="id";break;case"Id"in r:u="Id";break;case"ID"in r:u="ID"}u?(r[u].key=!0,e=$data.Container.resolveName(r[u].type),r[u].computed=!0):r.Id={type:"int",key:!0,computed:!0}}return $data.Entity.extend(n,t,r)};$data.implementation=function(n){return Container.resolveType(n)},function(){$data.defaults=$data.defaults||{};$data.defaults.defaultDatabaseName="JayDataDefault"}();$data.Class.define("$data.StorageModel",null,null,{constructor:function(){this.ComplexTypes=[];this.Associations=[]},LogicalType:{},LogicalTypeName:{},PhysicalType:{},PhysicalTypeName:{},EventHandlers:{},TableName:{},TableOptions:{value:undefined},ComplexTypes:{},Associations:{},ContextType:{},Roles:{}},null);$data.Class.define("$data.Association",null,null,{constructor:function(n){n&&(this.From=n.From,this.FromType=n.FromType,this.FromMultiplicity=n.FromMultiplicity,this.FromPropertyName=n.FromPropertyName,this.To=n.To,this.ToType=n.ToType,this.ToMultiplicity=n.ToMultiplicity,this.ToPropertyName=n.ToPropertyName)},From:{},FromType:{},FromMultiplicity:{},FromPropertyName:{},To:{},ToType:{},ToMultiplicity:{},ToPropertyName:{},ReferentialConstraint:{}},null);$data.Class.define("$data.ComplexType",$data.Association,null,{},null);$data.Class.define("$data.EntityContext",null,null,{constructor:function(n){var t,i,r;$data.ItemStore&&"ContextRegister"in $data.ItemStore&&$data.ItemStore.ContextRegister.apply(this,arguments);n.queryCache&&(this.queryCache=n.queryCache);"string"==typeof n&&(n=0===n.indexOf("http")?{name:"oData",oDataServiceHost:n}:{name:"local",databaseName:n});"provider"in n&&(n.name=n.provider);this.lazyLoad=!1;this.trackChanges=!1;this._entitySetReferences={};this._storageModel=[];t=this;t._isOK=!1;i=this._successInitProvider;this._successInitProvider=function(n){n instanceof $data.EntityContext?i(t):i(t,n)};this._storageModel.getStorageModel=function(n){var i=Container.resolveName(n);return t._storageModel[i]};typeof n.name=="string"&&(r=n.name,n.name=[r]);var f=[].concat(n.name),u=$data.typeSystem.createCallbackSetting({success:this._successInitProvider,error:this._successInitProvider});this._initStorageModelSync();t._initializeEntitySets(t.getType());$data.StorageProviderLoader.load(f,{success:function(i){t.storageProvider=new i(n,t);t.storageProvider.setContext(t);t.stateManager=new $data.EntityStateManager(t);var r=t.getType();i.name in r._storageModelCache?t._storageModel=r._storageModelCache[i.name]:(t._initializeStorageModel(),r._storageModelCache[i.name]=t._storageModel);n&&n.user&&Object.defineProperty(t,"user",{value:n.user,enumerable:!0});n&&n.checkPermission&&Object.defineProperty(t,"checkPermission",{value:n.checkPermission,enumerable:!0});t._initializeStore(u)},error:function(){u.error("Provider fallback failed!")}});this.addEventListener=function(n,t){var i="on"+n;i in this||(this[i]=new $data.Event(n,this));this[i].attach(t)};this.removeEventListener=function(n,t){var i="on"+n;i in this&&this[i].detach(t)};this.raiseEvent=function(n,t){var i="on"+n;i in this&&this[i].fire(t)};this.ready=this.onReady({success:$data.defaultSuccessCallback,error:function(){$data.PromiseHandler!==$data.PromiseHandlerBase?$data.defaultErrorCallback.apply(this,arguments):$data.Trace.error(arguments)}})},beginTransaction:function(){function t(t){Object.isNullOrUndefined(t)||(typeof t=="boolean"?u=t:Array.isArray(t)?r=t:n=t)}var r=null,n=null,u=!1,i;return t(arguments[0]),t(arguments[1]),t(arguments[2]),i=new $data.PromiseHandler,n=i.createCallback(n),this.storageProvider._beginTran(r,u,n),i.getPromise()},_isReturnTransaction:function(n){return n instanceof $data.Base||n==="returnTransaction"},_applyTransaction:function(n,t,i,r,u){u===!0?r instanceof $data.Transaction?(Array.prototype.push.call(i,r),t.apply(n,i)):this.beginTransaction(function(r){Array.prototype.push.call(i,r);t.apply(n,i)}):t.apply(n,i)},getDataType:function(dataType){if(typeof dataType=="string"){var memDef_dataType=this[dataType];return(memDef_dataType===undefined||memDef_dataType===null)&&(memDef_dataType=eval(dataType)),memDef_dataType}return dataType},_initializeEntitySets:function(n){for(var t,i,r=0,u=this._storageModel.length;r<u;r++)t=this._storageModel[r],this[t.ItemName]=new $data.EntitySet(t.LogicalType,this,t.ItemName,t.EventHandlers,t.Roles),i=this[t.ItemName],i.name=t.ItemName,i.tableName=t.TableName,i.tableOptions=t.TableOptions,i.eventHandlers=t.EventHandlers,this._entitySetReferences[t.LogicalType.name]=i,this._initializeActions(i,n,n.getMemberDefinition(t.ItemName))},_initializeStore:function(n){this.storageProvider&&this.storageProvider.initializeStore(n)},_initStorageModelSync:function(){for(var t,i,r,n,e,f=this.getType().memberDefinitions.asArray(),u=0;u<f.length;u++)t=f[u],"dataType"in t&&(i=Container.resolveType(t.dataType),i&&i.isAssignableTo&&i.isAssignableTo($data.EntitySet)&&(r=Container.resolveType(t.elementType),n=new $data.StorageModel,n.TableName=t.tableName||t.name,n.TableOptions=t.tableOptions,n.ItemName=t.name,n.LogicalType=r,n.LogicalTypeName=r.name,n.PhysicalTypeName=$data.EntityContext._convertLogicalTypeNameToPhysical(n.LogicalTypeName),n.ContextType=this.getType(),n.Roles=t.roles,t.indices&&(n.indices=t.indices),t.beforeCreate&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.beforeCreate=t.beforeCreate),t.beforeRead&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.beforeRead=t.beforeRead),t.beforeUpdate&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.beforeUpdate=t.beforeUpdate),t.beforeDelete&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.beforeDelete=t.beforeDelete),t.afterCreate&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.afterCreate=t.afterCreate),t.afterRead&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.afterRead=t.afterRead),t.afterUpdate&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.afterUpdate=t.afterUpdate),t.afterDelete&&(n.EventHandlers||(n.EventHandlers={}),n.EventHandlers.afterDelete=t.afterDelete),this._storageModel.push(n),e=Container.resolveName(r),this._storageModel[e]=n))},_initializeStorageModel:function(){var c=this.getType().memberDefinitions.asArray(),u,n,r,f,t,i,s,e,h,o;if(typeof intellisense=="undefined")for(u=0;u<this._storageModel.length;u++){for(n=this._storageModel[u],r={},n.Associations=n.Associations||[],n.ComplexTypes=n.ComplexTypes||[],f=0;f<n.LogicalType.memberDefinitions.getPublicMappedProperties().length;f++){if(t=n.LogicalType.memberDefinitions.getPublicMappedProperties()[f],i=Container.resolveType(t.dataType),this.storageProvider.supportedDataTypes.indexOf(i)>-1&&Object.isNullOrUndefined(t.inverseProperty)){s=JSON.parse(JSON.stringify(t));s.dataType=i;r[t.name]=s;continue}this._buildDbType_navigationPropertyComplite(t,i,n);(i===$data.Array||i.isAssignableTo&&i.isAssignableTo($data.EntitySet))&&t.inverseProperty&&t.inverseProperty!=="$$unbound"?this._buildDbType_Collection_OneManyDefinition(r,n,i,t):t.inverseProperty?t.inverseProperty==="$$unbound"?i===$data.Array?this._buildDbType_Collection_OneManyDefinition(r,n,i,t):this._buildDbType_ElementType_OneManyDefinition(r,n,i,t):(e=i.memberDefinitions.getMember(t.inverseProperty),e?e.elementType?(h=Container.resolveType(e.elementType),h===n.LogicalType?this._buildDbType_ElementType_OneManyDefinition(r,n,i,t):typeof intellisense=="undefined"&&Guard.raise(new Exception("Inverse property not valid, refereed item element type not match: "+n.LogicalTypeName,", property: "+t.name))):this._buildDbType_ElementType_OneOneDefinition(r,n,i,t):typeof intellisense=="undefined"&&Guard.raise(new Exception("Inverse property not valid"))):this._buildDbType_addComplexTypePropertyDefinition(r,n,i,t)}this._buildDbType_modifyInstanceDefinition(r,n,this);o={};o.convertTo=this._buildDbType_generateConvertToFunction(n,this);this._buildDbType_modifyClassDefinition(o,n,this);n.PhysicalType=$data.Class.define(n.PhysicalTypeName,$data.Entity,n.LogicalType.container,r,o)}},_initializeActions:function(n,t,i){var o,u,r,f,e;if(i&&i.actions)for(o=Object.keys(i.actions),u=0;u<o.length;u++)r=o[u],f=i.actions[r],typeof f=="function"?n[r]=f:(e=$data.MemberDefinition.translateDefinition(f,r,t),e instanceof $data.MemberDefinition&&e.kind===$data.MemberTypes.method&&(n[r]=e.method))},_buildDbType_navigationPropertyComplite:function(n,t,i){var u,o,e,r,h,f,s;if(n.inverseProperty)f=null,f=t===$data.Array||t.isAssignableTo&&t.isAssignableTo($data.EntitySet)?this._storageModel.getStorageModel(Container.resolveType(n.elementType)):this._storageModel.getStorageModel(t),s=f.LogicalType.memberDefinitions.getMember(n.inverseProperty),s&&(s.inverseProperty?s.inverseProperty!=n.name&&typeof intellisense=="undefined"&&Guard.raise(new Exception("Inverse property mismatch")):s.inverseProperty=n.name);else{if(u=null,t===$data.Array||t.isAssignableTo&&t.isAssignableTo($data.EntitySet)){if(f=this._storageModel.getStorageModel(Container.resolveType(n.elementType)),f)for(u=[],o=f.LogicalType.memberDefinitions.getPublicMappedProperties(),e=0;e<o.length;e++)r=o[e],r.inverseProperty==n.name&&Container.resolveType(r.dataType)===Container.resolveType(i.LogicalType)&&u.push(r)}else if(f=this._storageModel.getStorageModel(t),f)for(u=[],o=f.LogicalType.memberDefinitions.getPublicMappedProperties(),e=0;e<o.length;e++)r=o[e],r.elementType&&r.inverseProperty==n.name&&Container.resolveType(r.elementType)===i.LogicalType?u.push(r):r.inverseProperty==n.name&&Container.resolveType(r.dataType)===i.LogicalType&&u.push(r);u&&(u.length>1&&typeof intellisense!="undefined"&&Guard.raise(new Exception("More than one inverse property refer to this member definition: "+n.name+", type: "+Container.resolveName(i.LogicalType))),h=u.pop(),h&&(n.inverseProperty=h.name))}},_buildDbType_generateConvertToFunction:function(){return function(n){return n}},_buildDbType_modifyInstanceDefinition:function(){return},_buildDbType_modifyClassDefinition:function(){return},_buildDbType_addComplexTypePropertyDefinition:function(n,t,i,r){this._addNavigationPropertyDefinition(n,r,r.name,$data.MemberTypes.complexProperty);var u=this._createComplexElement(t.LogicalType,"",r.name,i,"","");t.ComplexTypes[r.name]=u;t.ComplexTypes.push(u)},_buildDbType_Collection_OneManyDefinition:function(n,t,i,r){var u=Container.resolveType(r.elementType),f,o,e;(u===undefined||u===null)&&typeof intellisense=="undefined"&&Guard.raise(new Exception("Element type definition error","Field definition",r));f=this._storageModel.getStorageModel(u);f||typeof intellisense=="undefined"&&Guard.raise(new Exception("No EntitySet definition for the following element type","Field definition",r));this._addNavigationPropertyDefinition(n,r,r.name);o=r.inverseProperty==="$$unbound"?"$$unbound":"0..1";e=this._addAssociationElement(t.LogicalType,o,r.name,f.LogicalType,"*",r.inverseProperty);t.Associations[r.name]=e;t.Associations.push(e)},_buildDbType_ElementType_OneManyDefinition:function(n,t,i,r){var u=Container.resolveType(r.dataType),f,o,e;(u===undefined||u===null)&&typeof intellisense=="undefined"&&Guard.raise(new Exception("Element type definition error","Field definition",r));f=this._storageModel.getStorageModel(u);f||typeof intellisense=="undefined"&&Guard.raise(new Exception("No EntitySet definition for the following element type","Field definition",r));this._addNavigationPropertyDefinition(n,r,r.name);o=r.inverseProperty==="$$unbound"?"$$unbound":"*";e=this._addAssociationElement(t.LogicalType,o,r.name,f.LogicalType,"0..1",r.inverseProperty);t.Associations[r.name]=e;t.Associations.push(e)},_buildDbType_ElementType_OneOneDefinition:function(n,t,i,r){var f=Container.resolveType(r.dataType),u,o,e;(f===undefined||f===null)&&typeof intellisense=="undefined"&&Guard.raise(new Exception("Element type definition error","Field definition",r));u=this._storageModel.getStorageModel(f);u||typeof intellisense=="undefined"&&Guard.raise(new Exception("No EntitySet definition following element type","Field definition",r));o=u.LogicalType.memberDefinitions.getMember(r.inverseProperty);o.required||r.required||typeof intellisense=="undefined"&&typeof intellisense=="undefined"&&Guard.raise(new Exception("In one to one connection, one side must required!","One to One connection",r));this._addNavigationPropertyDefinition(n,r,r.name);e=this._addAssociationElement(t.LogicalType,r.required?"0..1":"1",r.name,u.LogicalType,r.required?"1":"0..1",r.inverseProperty);t.Associations[r.name]=e;t.Associations.push(e)},_addNavigationPropertyDefinition:function(n,t,i,r){var u=JSON.parse(JSON.stringify(t));u.dataType=$data.EntitySet;u.notMapped=!0;u.kind=r?r:$data.MemberTypes.navProperty;u.association=i;n[t.name]=u},_addAssociationElement:function(n,t,i,r,u,f){return new $data.Association({From:n.name,FromType:n,FromMultiplicity:t,FromPropertyName:i,To:r.name,ToType:r,ToMultiplicity:u,ReferentialConstraint:[],ToPropertyName:f})},_createComplexElement:function(n,t,i,r,u,f){return new $data.ComplexType({From:n.name,FromType:n,FromMultiplicity:t,FromPropertyName:i,To:r.name,ToType:r,ToMultiplicity:u,ReferentialConstraint:[],ToPropertyName:f})},_successInitProvider:function(n,t){var i;if(n instanceof $data.EntityContext&&n._isOK!==undefined)if(t){if(n._isOK=t,n.onReadyFunction){for(i=0;i<n.onReadyFunction.length;i++)n.onReadyFunction[i].error(t);n.onReadyFunction=undefined}}else if(n._isOK=!0,n.onReadyFunction){for(i=0;i<n.onReadyFunction.length;i++)n.onReadyFunction[i].success(n);n.onReadyFunction=undefined}},onReady:function(n){var i=new $data.PromiseHandler,t=i.createCallback(n);return this._isOK===!0?t.success(this):this._isOK!==!1?t.error(this._isOK):(this.onReadyFunction=this.onReadyFunction||[],this.onReadyFunction.push(t)),i.getPromise()},ready:{type:$data.Promise},getEntitySetFromElementType:function(elementType){var result=this._entitySetReferences[elementType];if(!result)try{result=this._entitySetReferences[eval(elementType).name]}catch(ex){}return result},executeQuery:function(n,t,i){var r=new $data.Query(n.expression,n.defaultType,this),o,u,f,e,s;r.transaction=i instanceof $data.Transaction?i:undefined;o=this._isReturnTransaction(i);t=$data.typeSystem.createCallbackSetting(t);u=this;f={};f.success=function(n){var i;if($data.QueryCache&&$data.QueryCache.isCacheable(u,n)&&$data.QueryCache.addToCache(u,n),n.buildResultSet(u),$data.ItemStore&&"QueryResultModifier"in $data.ItemStore&&$data.ItemStore.QueryResultModifier.call(u,n),n.expression.nodeType===$data.Expressions.ExpressionType.Single||n.expression.nodeType===$data.Expressions.ExpressionType.Find||n.expression.nodeType===$data.Expressions.ExpressionType.Count||n.expression.nodeType===$data.Expressions.ExpressionType.BatchDelete||n.expression.nodeType===$data.Expressions.ExpressionType.Some||n.expression.nodeType===$data.Expressions.ExpressionType.Every){if(n.result.length!==1){t.error(new Exception("result count failed"));return}i=n.result[0]}else if(n.expression.nodeType===$data.Expressions.ExpressionType.First){if(n.result.length===0){t.error(new Exception("result count failed"));return}i=n.result[0]}else typeof n.__count=="number"&&n.result&&(n.result.totalCount=n.__count),u.storageProvider._buildContinuationFunction(u,n),i=n.result;var f=function(){u._applyTransaction(t,t.success,[i],n.transaction,o)},e=0,r=n.getEntitySets(),s=function(){var u=r[e],t;u.afterRead?(e++,t=u.afterRead.call(this,i,r,n),typeof t=="function"?t.call(this,e<r.length?s:f,i,r,n):e<r.length?s():f()):f()};r.length?s():f()};f.error=function(){o?t.error.apply(this,arguments):t.error.apply(this,Array.prototype.filter.call(arguments,function(n){return!(n instanceof $data.Transaction)}))};e=r.getEntitySets();s=function(){var n=!0,o=u,t=function(t){t===!1&&(n=!1);n?r.transaction?$data.QueryCache&&$data.QueryCache.isInCache(u,r)?$data.QueryCache.executeQuery(u,r,f):o.storageProvider.executeQuery(r,f):o.beginTransaction(function(n){r.transaction=n;$data.QueryCache&&$data.QueryCache.isInCache(u,r)?$data.QueryCache.executeQuery(u,r,f):o.storageProvider.executeQuery(r,f)}):(r.rawDataList=[],r.result=[],f.success(r))},i=0,s=function(u){var o,f;u===!1&&(n=!1);o=e[i];o.beforeRead?(i++,f=o.beforeRead.call(this,e,r),typeof f=="function"?f.call(this,i<e.length&&n?s:t,e,r):(f===!1&&(n=!1),i<e.length&&n?s():t())):t()};e.length?s():t()};this.user&&this.checkPermission?this.checkPermission(r.expression.nodeType===$data.Expressions.ExpressionType.BatchDelete?$data.Access.DeleteBatch:$data.Access.Read,this.user,e,{success:s,error:f.error}):s()},saveChanges:function(n,t){var rt,r,ut,ti,ht,wt,ct,bt,lt,u,a,kt,at,ei,ft,it,dt,l,vt,e,h,v,ui,i,y,s,d;$data.QueryCache&&$data.QueryCache.reset(this);for(var f=[],w=this.stateManager.trackedEntities,ni=new $data.PromiseHandler,c=ni.createCallback(n),pt=ni.getPromise(),st=this._isReturnTransaction(t),tt=[];w.length>0;){for(rt=[],i=0;i<w.length;i++){for(r=w[i],ut=this._storageModel.getStorageModel(r.data.getType()),r.data.entityState==$data.EntityState.Unchanged?(r.skipSave=!0,tt.push(r.data)):r.data.entityState==$data.EntityState.Modified&&r.data.changedProperties&&(ti=r.data.changedProperties.some(function(n){var r=ut.PhysicalType.memberDefinitions.getMember(n.name),t,i;return r.kind==$data.MemberTypes.navProperty?(t=ut.Associations[r.association],i=t.FromMultiplicity+t.ToMultiplicity,i=="*0..1"||i=="0..11"):!0}),ti||(r.skipSave=!0,tt.push(r.data))),this.processEntityTypeBeforeEventHandler(tt,r),ht=[],wt=ut.PhysicalType.memberDefinitions.asArray(),ct=0;ct<wt.length;ct++)bt=wt[ct],bt.kind==$data.MemberTypes.navProperty&&ht.push(bt);for(h=0;h<ht.length;h++){var ii=ht[h],b=ut.Associations[ii.name],fi=ii.name,k=b.ToPropertyName,ri=[].concat(r.data[fi]);for(lt=0;lt<ri.length;lt++)if(u=ri[lt],u){if(a=u[k],kt=b.FromMultiplicity+b.ToMultiplicity,b.FromMultiplicity==="$$unbound")if(u instanceof $data.Array)for(r.dependentOn=r.dependentOn||[],at=0;at<u.length;at++)ei=u[at],r.dependentOn.indexOf(u)<0&&u.skipSave!==!0&&r.dependentOn.push(u);else r.dependentOn=r.dependentOn||[],r.dependentOn.indexOf(u)<0&&u.skipSave!==!0&&r.dependentOn.push(u);else{switch(kt){case"*0..1":a?a instanceof Array?a.indexOf(r.data)==-1&&(a.push(r.data),u.initData[k]=a,u._setPropertyChanged(b.ToType.getMemberDefinition(k))):typeof intellisense=="undefined"&&Guard.raise("Item must be array or subtype of array"):(u.initData[k]=[r.data],u._setPropertyChanged(b.ToType.getMemberDefinition(k)));break;default:a?a!==r.data&&typeof intellisense=="undefined"&&Guard.raise("Integrity check error! Item assigned to another entity!"):(u.initData[k]=r.data,u._setPropertyChanged(b.ToType.getMemberDefinition(k)))}switch(kt){case"*0..1":case"0..11":r.dependentOn=r.dependentOn||[];r.dependentOn.indexOf(u)<0&&u.skipSave!==!0&&r.dependentOn.push(u)}}u.entityState||(u.entityState=u.storeToken===this.storeToken?$data.EntityState.Modified:$data.EntityState.Added);rt.indexOf(u)==-1&&rt.push(u)}}}for(i=0;i<w.length;i++)e=w[i],e.skipSave!==!0&&f.push(e);for(w=[],i=0;i<rt.length;i++)ft=rt[i],tt.some(function(n){return n==ft})||f.some(function(n){return n.data==ft})||w.push({data:ft,entitySet:this.getEntitySetFromElementType(ft.getType().name)})}for(h=0;h<f.length;h++)if(it=f[h],it.dependentOn){for(dt=[],i=0;i<it.dependentOn.length;i++)tt.indexOf(it.dependentOn[i])<0&&dt.push(it.dependentOn[i]);it.dependentOn=dt}if(tt=null,l=this,f.length==0)return this.stateManager.trackedEntities.length=0,l._applyTransaction(c,c.success,[0],t,st),pt;for(vt=[],i=0;i<f.length;i++){if(e=f[i],e.data.entityState===$data.EntityState.Added)for(h=0;h<e.data.getType().memberDefinitions.getPublicMappedProperties().length;h++)if(v=e.data.getType().memberDefinitions.getPublicMappedProperties()[h],ui=Container.resolveType(v.type),v.required&&!v.computed&&!e.data[v.name]&&!v.isDependentProperty)switch(ui){case $data.String:case $data.Number:case $data.Float:case $data.Decimal:case $data.Integer:case $data.Int16:case $data.Int32:case $data.Int64:case $data.Byte:case $data.SByte:case $data.Date:case $data.Boolean:e.data[v.name]=Container.getDefault(v.dataType)}e.data.entityState!==$data.EntityState.Added&&e.data.entityState!==$data.EntityState.Modified||e.data.isValid()||vt.push({item:e.data,errors:e.data.ValidationErrors})}if(vt.length>0)return c.error(vt),pt;var yt=$data.Access.None,o={},gt=[];for(i=0;i<f.length;i++)if(y=f[i],s=y.entitySet.elementType.name,gt.indexOf(y.entitySet)<0&&gt.push(y.entitySet),d=this._entitySetReferences[s],d.beforeCreate||d.beforeUpdate||d.beforeDelete||this.user&&this.checkPermission){o[s]||(o[s]={});switch(y.data.entityState){case $data.EntityState.Added:yt|=$data.Access.Create;d.beforeCreate&&(o[s].createAll||(o[s].createAll=[]),o[s].createAll.push(y));break;case $data.EntityState.Modified:yt|=$data.Access.Update;d.beforeUpdate&&(o[s].modifyAll||(o[s].modifyAll=[]),o[s].modifyAll.push(y));break;case $data.EntityState.Deleted:yt|=$data.Access.Delete;d.beforeDelete&&(o[s].deleteAll||(o[s].deleteAll=[]),o[s].deleteAll.push(y))}}var g=function(n){if(n===!1&&(p="async",f.length=0),f.length){var i={success:function(n){l._postProcessSavedItems(c,f,n,st)},error:function(){st?c.error.apply(this,arguments):c.error.apply(this,Array.prototype.filter.call(arguments,function(n){return!(n instanceof $data.Transaction)}))}};t instanceof $data.Transaction?l.storageProvider.saveChanges(i,f,t):l.beginTransaction(!0,function(n){l.storageProvider.saveChanges(i,f,n)})}else p?c.error(new Exception("Cancelled event in "+p,"CancelEvent")):l._applyTransaction(c,c.success,[0],t,st)},p,nt=Object.getOwnPropertyNames(o),i=0,et=["beforeUpdate","beforeDelete","beforeCreate"],oi={beforeCreate:"createAll",beforeDelete:"deleteAll",beforeUpdate:"modifyAll"},ot=function(n){var r,u,e,s,a,v;if(n===!1){p="async";f.length=0;g(n);return}var c=l._entitySetReferences[nt[i]],h=et.pop(),y=o[nt[i]],t=y[oi[h]];if(t){for(r=[],u=0;u<t.length;u++)r.push(t[u].data);if(et.length||(et=["beforeUpdate","beforeDelete","beforeCreate"],i++),e=c[h].call(l,r),typeof e=="function")e.call(l,i<nt.length&&!p?ot:g,r);else if(e===!1){for(p=c.name+"."+h,s=0;s<t.length;s++)a=t[s],v=f.indexOf(a),f.splice(v,1);g()}else i<nt.length&&!p?ot():g()}else et.length||(et=["beforeUpdate","beforeDelete","beforeCreate"],i++),i<nt.length&&!p?ot():g()};return this.user&&this.checkPermission?this.checkPermission(yt,this.user,gt,{success:function(){i<nt.length?ot():g()},error:c.error}):i<nt.length?ot():g(),pt},processEntityTypeBeforeEventHandler:function(n,t){if(!t.skipSave){var i=t.data,r=i.getType(),u=i.entityState;switch(!0){case u===$data.EntityState.Added&&r.onbeforeCreate instanceof $data.Event:r.onbeforeCreate.fireCancelAble(i)===!1&&(t.skipSave=!0,n.push(i));break;case u===$data.EntityState.Modified&&r.onbeforeUpdate instanceof $data.Event:r.onbeforeUpdate.fireCancelAble(i)===!1&&(t.skipSave=!0,n.push(i));break;case u===$data.EntityState.Deleted&&r.onbeforeDelete instanceof $data.Event:r.onbeforeDelete.fireCancelAble(i)===!1&&(t.skipSave=!0,n.push(i))}}},processEntityTypeAfterEventHandler:function(n){var i=n.data,t=i.getType(),r=i.entityState;switch(!0){case r===$data.EntityState.Added&&t.onafterCreate instanceof $data.Event:t.onafterCreate.fire(i);break;case r===$data.EntityState.Modified&&t.onafterUpdate instanceof $data.Event:t.onafterUpdate.fire(i);break;case r===$data.EntityState.Deleted&&t.onafterDelete instanceof $data.Event:t.onafterDelete.fire(i)}},bulkInsert:function(n,t,i,r){var e=new $data.PromiseHandler,u,o,f;if(r=e.createCallback(r),typeof n=="string"){for(o in this._entitySetReferences)if(f=this._entitySetReferences[o],f.tableName===n){u=f;break}u||(u=this[n]);n=u}return n?this.storageProvider.bulkInsert(n,t,i,r):r.error(new Exception("EntitySet not found")),e.getPromise()},prepareRequest:function(){},_postProcessSavedItems:function(n,t,i,r){var u,s,e,f,p;for(this.ChangeCollector&&this.ChangeCollector instanceof $data.Notifications.ChangeCollectorBase&&this.ChangeCollector.processChangedData(t),u={},s=this,e=0;e<t.length;e++){f=t[e];f.data.storeToken||(f.data.storeToken=s.storeToken);this.processEntityTypeAfterEventHandler(f);p=f.data.entityState;f.data.entityState=$data.EntityState.Unchanged;f.data.changedProperties=[];f.physicalData=undefined;var o=f.entitySet.elementType.name,h=s._entitySetReferences[o],l=undefined;switch(p){case $data.EntityState.Added:l="added";break;case $data.EntityState.Deleted:l="deleted";break;case $data.EntityState.Modified:l="updated"}if(l&&this.raiseEvent(l,f),h.afterCreate||h.afterUpdate||h.afterDelete){u[o]||(u[o]={});switch(p){case $data.EntityState.Added:h.afterCreate&&(u[o].createAll||(u[o].createAll=[]),u[o].createAll.push(f));break;case $data.EntityState.Modified:h.afterUpdate&&(u[o].modifyAll||(u[o].modifyAll=[]),u[o].modifyAll.push(f));break;case $data.EntityState.Deleted:h.afterDelete&&(u[o].deleteAll||(u[o].deleteAll=[]),u[o].deleteAll.push(f))}}}var c=Object.getOwnPropertyNames(u),e=0,s=this,a=["afterUpdate","afterDelete","afterCreate"],w={afterCreate:"createAll",afterDelete:"deleteAll",afterUpdate:"modifyAll"},v=function(){s.trackChanges||s.stateManager.reset();s._applyTransaction(n,n.success,[t.length],i,r)},y=function(){var o=s._entitySetReferences[c[e]],f=a.pop(),h=u[c[e]],i=h[w[f]],n,t,r;if(i){for(n=[],t=0;t<i.length;t++)n.push(i[t].data);a.length||(a=["afterUpdate","afterDelete","afterCreate"],e++);r=o[f].call(s,n);typeof r=="function"?r.call(s,e<c.length?y:v,n):e<c.length?y():v()}else a.length||(a=["afterUpdate","afterDelete","afterCreate"],e++),e<c.length?y():v()};e<c.length?y():v()},forEachEntitySet:function(n,t){var i,r;for(i in this._entitySetReferences)r=this._entitySetReferences[i],n.call(t,r)},loadItemProperty:function(n,t,i,r){var e,k,y,l,a,b,c,f,o,u,s,v;if(Guard.requireType("entity",n,$data.Entity),e=typeof t=="string"?n.getType().memberDefinitions.getMember(t):t,k=this._isReturnTransaction(r),n[e.name]!=undefined)return y=new $data.PromiseHandler,callBack=y.createCallback(i),this._applyTransaction(i,i.success,[n[e.name]],r,k),y.getPromise();var p=!0,w=this._storageModel.getStorageModel(n.getType().fullName),h=Container.resolveType(e.dataType);if(h===$data.Array||h.isAssignableTo&&h.isAssignableTo($data.EntitySet))h=Container.resolveType(e.elementType),p=!1;else{for(a=0;a<w.Associations.length;a++)if(b=w.Associations[a],b.FromPropertyName==e.name){l=b;break}l&&l.FromMultiplicity==="0..1"&&l.ToMultiplicity==="1"&&(p=!1)}if(c=w.LogicalType.memberDefinitions.getKeyProperties(),p===!0){for(f="function (e) { return",o={},u=0;u<c.length;u++)s=c[u],u>0&&(f+=" &&"),f+=" e."+s.name+" == this.key"+u,o["key"+u]=n[s.name];return f+="; }",v=this.getEntitySetFromElementType(n.getType()),v.map("function (e) { return e."+e.name+" }").single(f,o,i,r)}for(f="function (e) { return",o={},u=0;u<c.length;u++)s=c[u],u>0&&(f+=" &&"),f+=" e."+e.inverseProperty+"."+s.name+" == this.key"+u,o["key"+u]=n[s.name];return f+="; }",v=this.getEntitySetFromElementType(h),v.filter(f,o).toArray(i,r)},getTraceString:function(n){var t=new $data.Query(n.expression,n.defaultType,this);return this.storageProvider.getTraceString(t)},log:function(){},resolveBinaryOperator:function(n,t,i){return this.storageProvider.resolveBinaryOperator(n,t,i)},resolveUnaryOperator:function(n,t,i){return this.storageProvider.resolveUnaryOperator(n,t,i)},resolveFieldOperation:function(n,t,i){return this.storageProvider.resolveFieldOperation(n,t,i)},resolveSetOperations:function(n,t,i){return this.storageProvider.resolveSetOperations(n,t,i)},resolveTypeOperations:function(n,t,i){return this.storageProvider.resolveTypeOperations(n,t,i)},resolveContextOperations:function(n,t,i){return this.storageProvider.resolveContextOperations(n,t,i)},_generateServiceOperationQueryable:function(n,t,i,r){var f,u,e,o;for(typeof console!="undefined"&&console.log&&console.log("Obsolate: _generateServiceOperationQueryable, $data.EntityContext"),f=[],u=0;u<r.length;u++)e={},e[r[u]]=Container.resolveType(Container.getTypeName(i[u])),f.push(e);return o=$data.EntityContext.generateServiceOperation({serviceName:n,returnType:$data.Queryable,elementType:this[t].elementType,params:f}),o.apply(this,i)},attach:function(n,t){n instanceof $data.EntityWrapper&&(n=n.getEntity());var i=this.getEntitySetFromElementType(n.getType());return i.attach(n,t)},attachOrGet:function(n,t){n instanceof $data.EntityWrapper&&(n=n.getEntity());var i=this.getEntitySetFromElementType(n.getType());return i.attachOrGet(n,t)},addMany:function(n){var t=this;return n.forEach(function(n){t.add(n)}),n},add:function(n){n instanceof $data.EntityWrapper&&(n=n.getEntity());var t=this.getEntitySetFromElementType(n.getType());return t.add(n)},remove:function(n){n instanceof $data.EntityWrapper&&(n=n.getEntity());var t=this.getEntitySetFromElementType(n.getType());return t.remove(n)},storeToken:{type:Object},getFieldUrl:function(n,t,i){var r,f,e,u;try{return r=typeof i=="string"?this[i]:i,f=typeof t=="string"?t:t.name,n instanceof $data.Entity?r=this.getEntitySetFromElementType(n.getType()):Object.isNullOrUndefined(n)||n.constructor===$data.Object||(e=r.elementType.memberDefinitions.getKeyProperties()[0],u={},u[e.name]=n,n=u),n instanceof $data.Entity||(n=new r.elementType(n)),this.storageProvider.getFieldUrl(n,f,r)}catch(o){}return"#"}},{inheritedTypeProcessor:function(n){n.resolveForwardDeclarations&&n.resolveForwardDeclarations()},generateServiceOperation:function(n){var t,r,u,i,f,e;if(n.serviceMethod?(r=n.returnType?Container.resolveType(n.returnType):{},t=r.isAssignableTo&&r.isAssignableTo($data.Queryable)?n.serviceMethod:function(){var u=arguments[arguments.length-1],i=new $data.PromiseHandler,t,e=arguments,r;typeof u=="function"?(t=i.createCallback(u),arguments[arguments.length-1]=t):(t=i.createCallback(),arguments.push(t));try{r=n.serviceMethod.apply(this,arguments);r!==undefined&&t.success(r)}catch(f){t.error(f)}return i.getPromise()}):t=function(){var r=this,e,s,o,u,h,c,t;if(this instanceof $data.Entity){if(n.method||(n.method="POST"),this.context)r=this.context;else{Guard.raise("entity not attached into context");return}e={data:this,entitySet:r.getEntitySetFromElementType(this.getType())}}if(s=n.elementType?r.getEntitySetFromElementType(Container.resolveType(n.elementType)):null,o=null,n.params)for(o=[],u=0;u<n.params.length;u++)for(h in n.params[u])o.push(Container.createConstantExpression(arguments[u],Container.resolveType(n.params[u][h]),h));var l=Container.createEntityContextExpression(r),a=(e?e.data:r).getType().getMemberDefinition(n.serviceName),f=Container.createServiceOperationExpression(l,Container.createMemberInfoExpression(a),o,n,e),i=arguments[arguments.length-1];return typeof i!="function"&&(i=undefined),s?(t=Container.createQueryable(s,f),i)?(f.isTerminated=!0,t._runQuery(i)):t:(c=n.returnType?Container.resolveType(n.returnType):null,t=Container.createQueryable(r,f),t.defaultType=c||$data.Object,c===$data.Queryable)?(t.defaultType=Container.resolveType(n.elementType),i)?(f.isTerminated=!0,t._runQuery(i)):t:(f.isTerminated=!0,t._runQuery(i))},u=[],n.params)for(i=0;i<n.params.length;i++){f=n.params[i];for(e in f)u.push({name:e,type:f[e]})}return $data.typeSystem.extend(t,n,{params:u}),t},_convertLogicalTypeNameToPhysical:function(n){return n+"_$db$"},_storageModelCache:{get:function(){return this.__storageModelCache||(this.__storageModelCache={}),this.__storageModelCache},set:function(){}}});$data.Class.define("$data.QueryProvider",null,null,{constructor:function(){this.requiresExpressions=!1},executeQuery:function(){},getTraceString:function(){}},null);$data.Class.define("$data.ModelBinder",null,null,{constructor:function(n){if(this.context=n,this.providerName=null,this.context.storageProvider&&typeof this.context.storageProvider.getType=="function"){this.references=!(this.context.storageProvider.providerConfiguration.modelBinderOptimization||!1);for(var t in $data.RegisteredStorageProviders)$data.RegisteredStorageProviders[t]===this.context.storageProvider.getType()&&(this.providerName=t)}},_deepExtend:function(n,t){var i,r;if(n===null||n===undefined)return t;for(i in t)if(n.hasOwnProperty(i)){if(typeof t[i]=="object")if(Array.isArray(t[i]))for(r=0;r<t[i].length;r++)n[i].indexOf(t[i][r])<0&&n[i].push(t[i][r]);else this._deepExtend(n[i],t[i])}else n[i]=t[i];return this._finalize(n)},_finalize:function(n){return n instanceof $data.Entity&&(n.changedProperties=undefined,n.storeToken=this.context.storeToken),n},_buildSelector:function(n,t){var i,u,f,r;if(n.$selector){for(Array.isArray(n.$selector)||(n.$selector=[n.$selector]),i=0;i<n.$selector.length;i++){for(u=n.$selector[i].replace("json:",""),t.src+="if(",f=u.split("."),r=0;r<f.length;r++)t.src+="di."+f.slice(0,r+1).join(".")+(r<f.length-1?" && ":" !== undefined && typeof di."+u+' === "object"');t.src+="){di = di."+u+";}"+(i<n.$selector.length-1?"else ":"")}t.src+="if (di === null){";t.iter&&(t.src+=t.iter+" = null;");t.src+="return null;";t.src+="}"}},_buildKey:function(n,t,i,r,u){var t,o,f,e;if(i){if(t=Container.resolveType(t),o=Container.getIndex(t),t=t.fullName||t.name,r.src+="var "+n+"Fn = function(di){",Array.isArray(i)&&i.length!=1)for(r.src+='var key = "";',f=0;f<i.length;f++)e=typeof i[f]!="object"?i[f]:i[f].$source,r.src+="if (typeof di."+e+' === "undefined") return undefined;',r.src+="if (di."+e+" === null) return null;",r.src+='key += ("'+t+"_"+o+"_"+e+'#" + di.'+e+");";else typeof i!="string"&&(i=i[0]),r.src+="if (typeof di."+i+' === "undefined") return undefined;',r.src+="if (di."+i+" === null) return null;",r.src+='var key = ("'+t+"_"+o+"_"+i+'#" + di.'+i+");";r.src+="return key;};"}r.src+="var "+n+" = "+(i?n+"Fn("+(u||"di")+")":"undefined")+";"},build:function(n,t){var u,c,h,a,v,s,i,r,e;if(n.$selector)for(Array.isArray(n.$selector)||(n.$selector=[n.$selector]),i=0;i<n.$selector.length;i++)n.$selector[i]=n.$selector[i].replace("json:","");if(n.$value)if(typeof n.$value=="function")if(t.src+="var di = di || data;",t.src+="var fn = function(){ return meta"+(t.meta.length?"."+t.meta.join("."):"")+".$value.call(self, meta"+(t.meta.length?"."+t.meta.join("."):"")+", di); };",n.$type){var f=Container.resolveName(Container.resolveType(n.$type)),e=Container.getIndex(Container.resolveType(n.$type)),s=this.context.storageProvider.fieldConverter.fromDb[f];t.item=s?'self.context.storageProvider.fieldConverter.fromDb["'+f+'"](fn())':"new (Container.resolveByIndex("+e+"))(fn())"}else t.item="fn()";else if(n.$type){var f=Container.resolveName(Container.resolveType(n.$type)),e=Container.getIndex(Container.resolveType(n.$type)),s=this.context.storageProvider.fieldConverter.fromDb[f];t.item=s?'self.context.storageProvider.fieldConverter.fromDb["'+f+'"]('+n.$value+")":"new (Container.resolveByIndex("+e+"))("+n.$value+")"}else t.item=n.$value;else if(n.$source){var f=Container.resolveName(Container.resolveType(n.$type)),e=Container.getIndex(Container.resolveType(n.$type)),s=this.context.storageProvider.fieldConverter.fromDb[f],r="_"+f.replace(/\./gi,"_")+"_";t.forEach||(t.src+="var di = data;");t.item=r;this._buildSelector(n,t);t.src+=s?"var "+r+' = self.context.storageProvider.fieldConverter.fromDb["'+f+'"](di.'+n.$source+");":"var "+r+" = new (Container.resolveByIndex("+e+"))(di."+n.$source+");"}else if(n.$item)t.meta.push("$item"),u=t.item&&t.current?t.item+"."+t.current:t.item?t.item:"result",t.iter=u,u.indexOf(".")<0&&(t.src+="var "+u+";"),t.src+="var fn = function(di){",n.$selector&&(t.src+='if (typeof di !== "undefined" && !(Array.isArray(di))){',this._buildSelector(n,t),t.src+="}"),this.references&&n.$keys&&this._buildKey("forKey",n.$type,n.$keys,t),t.src+=u+" = typeof "+u+' == "undefined" ? [] : '+u+";",this.references&&n.$item.$keys&&(c="keycache_"+u.replace(/\./gi,"_"),t.src+="var "+c+";",t.src+="var kci = keycacheIter.indexOf("+u+");",t.src+="if (kci < 0){",t.src+=c+" = [];",t.src+="keycache.push("+c+");",t.src+="keycacheIter.push("+u+");",t.src+="}else{",t.src+=c+" = keycache[kci];",t.src+="}"),t.iter=undefined,t.forEach=!0,h="itemForKey_"+u.replace(/\./gi,"_"),t.src+="var forEachFn = function(di, i){",t.src+="var diBackup = di;",this.providerName=="sqLite"&&this.references&&n.$item.$keys&&this._buildKey(h,n.$type,n.$item.$keys,t),r=t.item||"iter",t.item=r,n.$item.$source||this._buildSelector(n.$item,t),this.build(n.$item,t),this.references&&n.$keys?(t.src+="if (forKey){",t.src+="if (cache[forKey]){",t.src+=u+" = cache[forKey];",t.src+="if ("+u+".indexOf("+(t.item||r)+") < 0){",t.src+=u+".push("+(t.item||r)+");",t.src+="}}else{",t.src+="cache[forKey] = "+u+";",t.src+=u+".push("+(t.item||r)+");",t.src+="}}else{",this.references&&n.$item.$keys&&this._buildKey("cacheKey",n.$type,n.$item.$keys,t,"diBackup"),t.src+='if (typeof cacheKey != "undefined" && cacheKey !== null){',t.src+="if (keycache_"+u.replace(/\./gi,"_")+" && cacheKey){",t.src+="if (keycache_"+u.replace(/\./gi,"_")+".indexOf(cacheKey) < 0){",t.src+=u+".push("+(t.item||r)+");",t.src+="keycache_"+u.replace(/\./gi,"_")+".push(cacheKey);",t.src+="}",t.src+="}else{",t.src+=u+".push("+(t.item||r)+");",t.src+="}",t.src+="}",t.src+="}"):this.references&&n.$item.$keys?(t.src+="if (typeof "+h+' !== "undefined" && '+h+" !== null){",t.src+="if (typeof keycache_"+u.replace(/\./gi,"_")+' !== "undefined" && '+h+"){",t.src+="if (keycache_"+u.replace(/\./gi,"_")+".indexOf("+h+") < 0){",t.src+=u+".push("+(t.item||r)+");",t.src+="keycache_"+u.replace(/\./gi,"_")+".push("+h+");",t.src+="}}else{",t.src+=u+".push("+(t.item||r)+");",t.src+="}}else{",t.src+=u+".push("+(t.item||r)+");",t.src+="}"):t.src+=u+".push("+(t.item||r)+");",t.src+="};",t.src+="if (Array.isArray(di)) di.forEach(forEachFn);",t.src+="else forEachFn(di, 0);",t.forEach=!1,t.item=null,t.src+='};fn(typeof di === "undefined" ? data : di);',t.meta.pop();else if(n.$type){t.forEach||(t.src+='if (typeof di === "undefined"){',t.src+="var di = data;",this._buildSelector(n,t),t.src+="}");var o=Container.resolveType(n.$type),f=Container.resolveName(o),e=Container.getIndex(o),p=o.isAssignableTo&&o.isAssignableTo($data.Entity),r="_"+f.replace(/\./gi,"_")+"_";t.item==r&&(r+="new_");t.item=r;a=!1;n.$source||n.$value||o===$data.Array||o===$data.Object||o.isAssignableTo||(a=!0);(o===$data.Object||o===$data.Array)&&(v=Object.keys(n),(v.length==1||v.length==2&&n.$selector)&&(a=!0));a?(s=this.context.storageProvider.fieldConverter.fromDb[f],t.src+=s?"var "+r+' = di != undefined ? self.context.storageProvider.fieldConverter.fromDb["'+f+'"](di) : di;':"var "+r+" = di;"):this.references&&n.$keys?(this._buildKey("itemKey",n.$type,n.$keys,t),t.src+="if (itemKey === null) return null;",t.src+="var "+r+";",t.src+="if (itemKey && cache[itemKey]){",t.src+=r+" = cache[itemKey];",t.src+="}else{",t.src+=p?r+" = new (Container.resolveByIndex("+e+"))(undefined, { setDefaultValues: false });":r+" = new (Container.resolveByIndex("+e+"))();",t.src+="if (itemKey){",t.src+="cache[itemKey] = "+r+";",t.src+="}",t.src+="}"):t.src+=p?"var "+r+" = new (Container.resolveByIndex("+e+"))(undefined, { setDefaultValues: false });":"var "+r+" = new (Container.resolveByIndex("+e+"))();";for(i in n)if(i.indexOf("$")<0)if(t.current=i,n[i].$item)t.meta.push(i),this.build(n[i],t),t.item=r,t.meta.pop();else if(n[i].$value)t.meta.push(i),r=t.item,this.build(n[i],t),t.src+=r+"."+i+" = "+t.item+";",t.item=r,t.meta.pop();else if(n[i].$source){if(t.src+="var fn = function(di){",this._buildSelector(n[i],t),n[i].$type){var f=Container.resolveName(Container.resolveType(n[i].$type)),e=Container.getIndex(Container.resolveType(n[i].$type)),s=this.context.storageProvider.fieldConverter.fromDb[f];t.src+=s?'return self.context.storageProvider.fieldConverter.fromDb["'+f+'"](di.'+n[i].$source+");":"return new (Container.resolveByIndex("+e+"))(di."+n[i].$source+");"}else t.src+=r+"."+i+" = di."+n[i].$source+";";t.src+="};";t.src+=n[i].$type?r+"."+i+" = fn(di);":"fn(di);"}else if(n[i].$type)t.meta.push(i),t.src+="var fn = function(di){",this._buildSelector(n[i],t),this.build(n[i],t),t.src+="return "+t.item+";};",t.src+=n[i].$type===$data.Object?r+"."+i+" = self._deepExtend("+r+"."+i+", fn(di));":r+"."+i+" = fn(di);",t.item=r,t.meta.pop();else if(n.$type){var l=Container.resolveType(n.$type).memberDefinitions.getMember(i),f=Container.resolveName(l.type),w=Container.resolveType(n.$type),y=Container.getIndex(n.$type),s=this.context.storageProvider.fieldConverter.fromDb[f];this.providerName&&l&&l.converter&&l.converter[this.providerName]&&typeof l.converter[this.providerName].fromDb=="function"?t.src+=r+"."+i+' = Container.resolveByIndex("'+y+'").memberDefinitions.getMember("'+i+'").converter.'+this.providerName+".fromDb(di."+n[i]+', Container.resolveByIndex("'+y+'").memberDefinitions.getMember("'+i+'"), self.context, Container.resolveByIndex("'+y+'"));':s?t.src+=r+"."+i+' = self.context.storageProvider.fieldConverter.fromDb["'+f+'"](di.'+n[i]+");":(e=Container.getIndex(Container.resolveType(f.memberDefinitions.getMember(i).type)),t.src+=r+"."+i+" = new (Container.resolveByIndex("+e+"))(di."+n[i]+");")}t.src+=r+" = self._finalize("+r+");"}},call:function(n,t){var i,r,u;return Object.getOwnPropertyNames(t).length?(i={src:"",meta:[]},i.src+="var self = this;",i.src+="var result;",i.src+="var cache = {};",i.src+="var keycache = [];",i.src+="var keycacheIter = [];",this.build(t,i),i.item&&(i.src+='if (typeof result === "undefined") result = '+i.item+";"),i.src+="return result;",r=new Function("meta","data",i.src).bind(this),u=r(t,n),u):n}});$C("$data.queryBuilder",null,null,{constructor:function(){this._fragments={};this.selectedFragment=null;this._binderConfig={};this.modelBinderConfig=this._binderConfig;this._binderConfigPropertyStack=[]},selectTextPart:function(n){this._fragments[n]||(this._fragments[n]={text:"",params:[]});this.selectedFragment=this._fragments[n]},getTextPart:function(n){return this._fragments[n]},addText:function(n){this.selectedFragment.text+=n},addParameter:function(n){this.selectedFragment.params.push(n)},selectModelBinderProperty:function(n){this._binderConfigPropertyStack.push(this.modelBinderConfig);n in this.modelBinderConfig||(this.modelBinderConfig[n]={});this.modelBinderConfig=this.modelBinderConfig[n]},popModelBinderProperty:function(){this.modelBinderConfig=this._binderConfigPropertyStack.length===0?this._binderConfig():this._binderConfigPropertyStack.pop()},resetModelBinderProperty:function(){this._binderConfigPropertyStack=[];this.modelBinderConfig=this._binderConfig},addKeyField:function(n){this.modelBinderConfig.$keys||(this.modelBinderConfig.$keys=[]);this.modelBinderConfig.$keys.push(n)}});$C("$data.Query",null,null,{constructor:function(n,t,i){this.expression=n;this.context=i;this.expressions=n;this.defaultType=t;this.result=[];this.rawDataList=[];this.modelBinderConfig={};this.context=i},rawDataList:{dataType:"Array"},result:{dataType:"Array"},resultType:{},buildResultSet:function(){var n=new $data.ModelBinder(this.context);this.result=n.call(this.rawDataList,this.modelBinderConfig);return},getEntitySets:function(){var n=[],t=this.context,i=function(r){r instanceof $data.Expressions.EntitySetExpression&&n.indexOf(t._entitySetReferences[r.elementType.name])<0&&n.push(t._entitySetReferences[r.elementType.name]);r.source&&i(r.source)};return i(this.expression),n}},null);$data.Class.define("$data.Queryable",null,null,{constructor:function(n,t){var i=n instanceof $data.EntityContext?n:n.entityContext;this.defaultType=n instanceof $data.EntityContext?null:n.defaultType;this.entityContext=i;this.expression=t},filter:function(n,t){var i,r,u,f,e;return arguments.length===3&&(n="it."+arguments[0]+(arguments[1][0]==="."?arguments[1]+"(param)":" "+arguments[1]+" param"),t={param:arguments[2]}),this._checkOperation("filter"),i=Container.createCodeExpression(n,t),r=this.expression,this.expression instanceof $data.Expressions.FilterExpression&&(r=this.expression.source,u=this.entityContext.storageProvider.resolveBinaryOperator("and"),i=Container.createSimpleBinaryExpression(this.expression.selector,i,"and","filter","boolean",u)),f=Container.createFilterExpression(r,i),e=Container.createQueryable(this,f),e},where:function(n,t){return this.filter(n,t)},map:function(n,t,i){var u,r;return this._checkOperation("map"),u=Container.createCodeExpression(n,t),r=Container.createProjectionExpression(this.expression,u),r.projectionAs=i==="default"?this.defaultType:i?Container.resolveType(i):$data.Object,Container.createQueryable(this,r)},select:function(n,t,i){return this.map(n,t,i)},length:function(n,t){var i;this._checkOperation("length");var r=new $data.PromiseHandler,u=r.createCallback(n),f=Container.createCountExpression(this.expression),e=Container.createQueryExpressionCreator(this.entityContext);try{i=e.Visit(f);this.entityContext.log({event:"EntityExpression",data:i});this.entityContext.executeQuery(Container.createQueryable(this,i),u,t)}catch(o){u.error(o)}return r.getPromise()},count:function(n,t){return this.length(n,t)},forEach:function(n,t){function f(t){t.forEach(n)}var i,r;this._checkOperation("forEach");i=new $data.PromiseHandler;var u=i.createCallback(f),e=Container.createForEachExpression(this.expression),o=Container.createQueryExpressionCreator(this.entityContext);try{r=o.Visit(e);this.entityContext.log({event:"EntityExpression",data:r});this.entityContext.executeQuery(Container.createQueryable(this,r),u,t)}catch(s){u.error(s)}return i.getPromise()},toArray:function(n,t){var i;if(n instanceof $data.Array)return this.toArray(function(t){n.length=0;t.forEach(function(t){n.push(t)})});this._checkOperation("toArray");var r=new $data.PromiseHandler,u=r.createCallback(n),f=Container.createToArrayExpression(this.expression),e=Container.createQueryExpressionCreator(this.entityContext);try{i=e.Visit(f);this.entityContext.log({event:"EntityExpression",data:i});this.entityContext.executeQuery(Container.createQueryable(this,i),u,t)}catch(o){u.error(o)}return r.getPromise()},toLiveArray:function(n,t){var u=this,i=[],r=function(n){return function(u){var f=new $data.PromiseHandler,e=f.createCallback(u),s=function(n){i.length=0;var t=n;$data.typeSystem.extend(i,t);i.prev=r(function(n){t.prev(n)});i.next=r(function(n){t.next(n)});e.success.apply(this,[i].concat(Array.prototype.slice.call(arguments,1)))},o;return n({success:s,error:e.error},t),o=f.getPromise(),$data.typeSystem.extend(i,o),i}};return i.refresh=r(function(n){u.toArray(n)}),i.refresh.apply(i,arguments)},single:function(n,t,i,r){var u,f;this._checkOperation("single");u=this;n&&(u=this.filter(n,t));u=u.take(2);var e=new $data.PromiseHandler,o=e.createCallback(i),s=Container.createSingleExpression(u.expression),h=Container.createQueryExpressionCreator(u.entityContext);try{f=h.Visit(s);this.entityContext.log({event:"EntityExpression",data:f});u.entityContext.executeQuery(Container.createQueryable(u,f),o,r)}catch(c){o.error(c)}return e.getPromise()},some:function(n,t,i,r){var u,f;this._checkOperation("some");u=this;n&&(u=this.filter(n,t));u=u.take(1);var e=new $data.PromiseHandler,o=e.createCallback(i),s=Container.createSomeExpression(u.expression),h=Container.createQueryExpressionCreator(u.entityContext);try{f=h.Visit(s);this.entityContext.log({event:"EntityExpression",data:f});u.entityContext.executeQuery(Container.createQueryable(u,f),o,r)}catch(c){o.error(c)}return e.getPromise()},every:function(n,t,i,r){var u,f;this._checkOperation("every");u=this;n&&(u=this.filter(n,t));u=u.take(1);var e=new $data.PromiseHandler,o=e.createCallback(i),s=Container.createEveryExpression(u.expression),h=Container.createQueryExpressionCreator(u.entityContext);try{f=h.Visit(s);this.entityContext.log({event:"EntityExpression",data:f});u.entityContext.executeQuery(Container.createQueryable(u,f),o,r)}catch(c){o.error(c)}return e.getPromise()},take:function(n){this._checkOperation("take");var t=Container.createConstantExpression(n,"number"),i=Container.createPagingExpression(this.expression,t,$data.Expressions.ExpressionType.Take);return Container.createQueryable(this,i)},skip:function(n){this._checkOperation("skip");var t=Container.createConstantExpression(n,"number"),i=Container.createPagingExpression(this.expression,t,$data.Expressions.ExpressionType.Skip);return Container.createQueryable(this,i)},order:function(n){if(n===""||n===undefined||n===null)return this;if(n[0]==="-"){var t="it."+n.replace("-","");return this.orderByDescending(t)}return this.orderBy("it."+n)},orderBy:function(n,t){this._checkOperation("orderBy");var i=Container.createCodeExpression(n,t),r=Container.createOrderExpression(this.expression,i,$data.Expressions.ExpressionType.OrderBy);return Container.createQueryable(this,r)},orderByDescending:function(n,t){this._checkOperation("orderByDescending");var i=Container.createCodeExpression(n,t),r=Container.createOrderExpression(this.expression,i,$data.Expressions.ExpressionType.OrderByDescending);return Container.createQueryable(this,r)},first:function(n,t,i,r){var u,f;this._checkOperation("first");u=this;n&&(u=this.filter(n,t));u=u.take(1);var e=new $data.PromiseHandler,o=e.createCallback(i),s=Container.createFirstExpression(u.expression),h=Container.createQueryExpressionCreator(u.entityContext);try{f=h.Visit(s);u.entityContext.log({event:"EntityExpression",data:f});u.entityContext.executeQuery(Container.createQueryable(u,f),o,r)}catch(c){o.error(c)}return e.getPromise()},find:function(n,t,i){var v=new $data.PromiseHandler,o=v.createCallback(t),s=this.defaultType.memberDefinitions.getKeyProperties(),c,u,f,y,p,w,l,h,a,r,e;try{if(s.length===1&&typeof n!="object"&&(c={},c[s[0].name]=n,n=c),typeof n!="object")throw new Exception("Key parameter is invalid");else{for(u=[],r=0;r<s.length;r++){if(f=s[r],!(f.name in n))throw new Exception("Key value missing");u.push(Container.createConstantExpression(n[f.name],f.type,f.name))}if(y=this.entityContext.storageProvider.supportedSetOperations.find,y){p=Container.createFindExpression(this.expression,u);w=Container.createQueryExpressionCreator(this.entityContext);try{l=w.Visit(p);this.entityContext.log({event:"EntityExpression",data:l});this.entityContext.executeQuery(Container.createQueryable(this,l),o,i)}catch(b){o.error(b)}}else{for(h="",a={},r=0;r<u.length;r++)e=u[r],a[e.name]=e.value,r>0&&(h+=" && "),h+="it."+e.name+" == this."+e.name;this.single(h,a,o,i)}}}catch(b){o.error(b)}return v.getPromise()},include:function(n){this._checkOperation("include");var t=Container.createConstantExpression(n,"string"),i=Container.createIncludeExpression(this.expression,t);return Container.createQueryable(this,i)},withInlineCount:function(n){this._checkOperation("withInlineCount");var t=Container.createConstantExpression(n||"allpages","string"),i=Container.createInlineCountExpression(this.expression,t);return Container.createQueryable(this,i)},removeAll:function(n,t){var i;this._checkOperation("batchDelete");var r=new $data.PromiseHandler,u=r.createCallback(n),f=Container.createBatchDeleteExpression(this.expression),e=Container.createQueryExpressionCreator(this.entityContext);try{i=e.Visit(f);this.entityContext.log({event:"EntityExpression",data:i});this.entityContext.executeQuery(Container.createQueryable(this,i),u,t)}catch(o){u.error(o)}return r.getPromise()},_runQuery:function(n,t){var r=new $data.PromiseHandler,u=r.createCallback(n),f=Container.createQueryExpressionCreator(this.entityContext),i;try{i=f.Visit(this.expression);this.entityContext.log({event:"EntityExpression",data:i});this.entityContext.executeQuery(Container.createQueryable(this,i),u,t)}catch(e){u.error(e)}return r.getPromise()},toTraceString:function(n){var t=this.expression,r,i;return t=n?Container["create"+n+"Expression"](t):Container.createToArrayExpression(t),r=Container.createQueryExpressionCreator(this.entityContext),t=r.Visit(t),i=Container.createQueryable(this,t),i.entityContext.getTraceString(i)},_checkOperation:function(n){var t=this.entityContext.resolveSetOperations(n);t.invokable==undefined||t.invokable||Guard.raise(new Exception("Operation '"+n+"' is not invokable with the provider"))},defaultType:{}},null);$data.EntitySchemaConfig=function(){this.Name=""};$data.entitySetState={created:0,defined:1,active:2};$data.Class.defineEx("$data.EntitySet",[{type:$data.Queryable,params:[new ConstructorParameter(1)]}],null,{constructor:function(n,t,i,r,u){var e,f;this.createNew=this[n.name]=this.elementType=this.defaultType=n;e=this;t["createAdd"+n.name]=function(t){var i=new n(t);return e.add(i)};this.stateManager=new $data.EntityStateManager(this);this.collectionName=i;this.roles=u;for(f in r)this[f]=r[f]},addNew:function(n,t){var r=$data.typeSystem.createCallbackSetting(t),i=new this.createNew(n);return this.entityContext.saveChanges(t),i},executeQuery:function(n,t){var i=$data.typeSystem.createCallbackSetting(t);this.entityContext.executeQuery(n,i)},getTraceString:function(n){return this.entityContext.getTraceString(n)},setContext:function(n){this.entitySetState=$data.entitySetState.active;this.entityContext=n;this.entityContext[this.schema.name]=this[this.schema.name]},_trackEntity:function(n){for(var t=this.entityContext.stateManager.trackedEntities,i=0;i<t.length;i++)if(t[i].data===n)return;t.push({entitySet:this,data:n})},add:function(n){var t=n;return n instanceof $data.EntityWrapper?t=n.getEntity():n instanceof this.createNew||(t=new this.createNew(n)),t.entityState=$data.EntityState.Added,t.changedProperties=undefined,t.context=this.entityContext,this._trackEntity(t),t},addMany:function(n){var t=[],i=this;return n.forEach(function(n){t.push(i.add(n))}),t},remove:function(n){var t=n;n instanceof $data.EntityWrapper?t=n.getEntity():n instanceof this.createNew||(t=new this.createNew(n));t.entityState=$data.EntityState.Deleted;t.changedProperties=undefined;this._trackEntity(t)},attach:function(n,t){var i=n,r,u,f;for(n instanceof $data.EntityWrapper?i=n.getEntity():n instanceof this.createNew||(i=new this.createNew(n)),r=0;r<this.entityContext.stateManager.trackedEntities.length;r++){if(u=this.entityContext.stateManager.trackedEntities[r],u.data===i)break;u.data.equals(i)&&Guard.raise(new Exception("Context already contains this entity!!!"))}t===!0?i.entityState=i.changedProperties&&i.changedProperties.length>0?$data.EntityState.Modified:$data.EntityState.Unchanged:(typeof t=="string"&&(t=$data.EntityAttachMode[t]),f=t||$data.EntityAttachMode[$data.EntityAttachMode.defaultMode],typeof f=="function"?f.call($data.EntityAttachMode,i):(i.entityState=$data.EntityState.Unchanged,i.changedProperties=undefined));i.context=this.entityContext;this._trackEntity(i)},detach:function(n){var r=n,u,i,t,f;for(n instanceof $data.EntityWrapper?r=n.getEntity():n instanceof this.createNew||(r=new this.createNew(n)),i=this.entityContext.stateManager.trackedEntities,t=0;t<i.length;t++)i[t].data.equals(r)&&(u=i[t]);if(u){f=this.entityContext.stateManager.trackedEntities.indexOf(u);n.entityState=$data.EntityState.Detached;this.entityContext.stateManager.trackedEntities.splice(f,1);return}},attachOrGet:function(n,t){var i=n,f,u,r,e;for(n instanceof $data.EntityWrapper?i=n.getEntity():n instanceof this.createNew||(i=new this.createNew(n)),u=this.entityContext.stateManager.trackedEntities,r=0;r<u.length;r++)u[r].data.equals(i)&&(f=u[r]);return f?f.data:(typeof t=="string"&&(t=$data.EntityAttachMode[t]),e=t||$data.EntityAttachMode[$data.EntityAttachMode.defaultMode],typeof e=="function"?e.call($data.EntityAttachMode,i):(i.entityState=$data.EntityState.Unchanged,i.changedProperties=undefined),i.context=this.entityContext,this._trackEntity(i),i)},loadItemProperty:function(n,t,i){return this.entityContext.loadItemProperty(n,t,i)},saveChanges:function(){return this.entityContext.saveChanges.apply(this.entityContext,arguments)},addProperty:function(){return this.elementType.addProperty.apply(this.elementType,arguments)},expression:{get:function(){if(!this._expression){var n=Container.createEntityContextExpression(this.entityContext),t=this.entityContext.getType().getMemberDefinition(this.collectionName),i=Container.createEntitySetExpression(n,Container.createMemberInfoExpression(t),null,this);this._expression=i}return this._expression},set:function(n){this._expression=n}},getFieldUrl:function(n,t){return this.entityContext.getFieldUrl(n,t,this)},bulkInsert:function(n,t,i){return this.entityContext.bulkInsert(this,n,t,i)}},null);$data.EntityState={Detached:0,Unchanged:10,Added:20,Modified:30,Deleted:40};$data.Class.define("$data.EntityAttachMode",null,null,{},{defaultMode:"Default",AllChanged:function(n){for(var i=n.getType().memberDefinitions.getPublicMappedProperties(),t=0;t<i.length;t++)n._setPropertyChanged(i[t]);n.entityState=$data.EntityState.Modified},KeepChanges:function(n){n.entityState=n.changedProperties&&n.changedProperties.length>0?$data.EntityState.Modified:$data.EntityState.Unchanged},Default:function(n){n.entityState=$data.EntityState.Unchanged;n.changedProperties=undefined}});$data.Class.define("$data.EntityStateManager",null,null,{constructor:function(n){this.entityContext=null;this.trackedEntities=[];this.init(n)},init:function(n){this.entityContext=n},reset:function(){this.trackedEntities=[]}},null);$data.Class.define("$data.ItemStoreClass",null,null,{constructor:function(){var n=this;n.itemStoreConfig={aliases:{},contextTypes:{}};n.resetStoreToDefault("local",!0);$data.addStore=function(){return n.addItemStoreAlias.apply(n,arguments)};$data.implementation=n.implementation;$data.Entity.addMember("storeToken",{get:function(){if(this.storeConfigs&&this.storeConfigs["default"])return this.storeConfigs.stores[this.storeConfigs["default"]]},set:function(t){n._setTypeStoreConfig(this,"default",t)}},!0)},itemStoreConfig:{},addItemStoreAlias:function(n,t,i){var r=this,u=new $data.PromiseHandler,f=u.createCallback(),s,e,o;if("string"==typeof n){if("object"==typeof t&&"factory"in t)return s=Container.resolveType(t.typeName),r.itemStoreConfig.aliases[n]=t.factory,r.itemStoreConfig.contextTypes[n]=s,i&&(r.itemStoreConfig["default"]=n),f.success(),u.getPromise();if("function"==typeof t)return e=t(),e&&e instanceof $data.EntityContext?(f.success(e),o=u.getPromise()):o=e,o.then(function(e){return typeof e=="function"?r.addItemStoreAlias(n,e,i):e instanceof $data.EntityContext?e.onReady().then(function(u){return r.itemStoreConfig.aliases[n]=t,r.itemStoreConfig.contextTypes[n]=u.getType(),i&&(r.itemStoreConfig["default"]=n),u}):(u=new $data.PromiseHandler,f=u.createCallback(),f.error(new Exception("factory dont have context instance","Invalid arguments")),u.getPromise())})}return f.error(new Exception("Name or factory missing","Invalid arguments")),u.getPromise()},resetStoreToDefault:function(n,t){this.itemStoreConfig.aliases[n]=this._getDefaultItemStoreFactory;delete this.itemStoreConfig.contextTypes[n];t&&(this.itemStoreConfig["default"]=n)},_setStoreAlias:function(n,t){return"object"!=typeof t||n.storeToken||(n.storeToken=t),n},_getStoreAlias:function(n,t){var i,r;if(n instanceof $data.Entity){if(r=t||n.storeToken,r)return r;i=n.getType()}else i=n;return t||(i.storeConfigs?i.storeConfigs["default"]:undefined)||i.storeToken},_getStoreContext:function(n,t,i){var r=this._getContextPromise(n,t),u,f;return(!r||r instanceof $data.EntityContext)&&(u=new $data.PromiseHandler,f=u.createCallback(),f.success(r),r=u.getPromise()),r.then(function(n){if(n instanceof $data.EntityContext)return n.onReady();if(i)return null;var t=new $data.PromiseHandler,r=t.createCallback();return r.error(new Exception("factory return type error","Error")),t.getPromise()})},_getContextPromise:function(n,t){if(n&&"object"==typeof n&&"function"==typeof n.factory)return n.factory(t);if(n&&"object"==typeof n&&"object"==typeof n.args&&"string"==typeof n.typeName){var t=Container.resolveType(n.typeName);return new t(JSON.parse(JSON.stringify(n.args)))}return n&&"string"==typeof n&&t.storeConfigs&&t.storeConfigs.stores[n]&&typeof t.storeConfigs.stores[n].factory=="function"?t.storeConfigs.stores[n].factory():n&&"string"==typeof n&&t.storeConfigs&&t.storeConfigs.stores[n]?this._getDefaultItemStoreFactory(t,t.storeConfigs.stores[n]):n&&"string"==typeof n&&this.itemStoreConfig.aliases[n]?this.itemStoreConfig.aliases[n](t):n&&"function"==typeof n?n():this.itemStoreConfig.aliases[this.itemStoreConfig["default"]](t)},_getStoreEntitySet:function(n,t){var r=this._getStoreAlias(t,n),i="function"==typeof t?t:t.getType();return this._getStoreContext(r,i).then(function(n){var r=n.getEntitySetFromElementType(i),t,u;return r?r:(t=new $data.PromiseHandler,u=t.createCallback(),u.error("EntitySet not exist for "+i.fullName),t.getPromise())})},_getDefaultItemStoreFactory:function(n,t){var o,f;if(n){var e="function"==typeof n?n:n.getType(),r=$data.Container.resolveName(e)+"_items",r=r.replace(/\./g,"_"),i=$data.typeSystem.extend({collectionName:t&&t.collectionName?t.collectionName:"Items",tableName:r,initParam:{provider:"local",databaseName:r}},t),u={};return u[i.collectionName]={type:$data.EntitySet,elementType:e},i.tableName&&(u[i.collectionName].tableName=i.tableName),o=$data.EntityContext.extend(r,u),f=new o(i.initParam),t&&typeof t=="object"&&(t.factory=f._storeToken.factory),f}return undefined},implementation:function(n,t){var i=$data.ItemStore,r;return typeof t=="string"?t=i.itemStoreConfig.contextTypes[t]:t instanceof $data.EntityContext?t=t.getType():typeof t=="function"&&t.isAssignableTo||(t=i.itemStoreConfig.contextTypes[i.itemStoreConfig["default"]]),t&&(r=i._resolveFromContext(t,n)),r||(r=Container.resolveType(n)),r},_resolveFromContext:function(n,t){for(var i,u,f,e=n.memberDefinitions.getPublicMappedProperties(),r=0;r<e.length;r++)if(i=e[r],i.type&&(u=Container.resolveType(i.type),u.isAssignableTo&&u.isAssignableTo($data.EntitySet)&&(f=Container.resolveType(i.elementType),f.name===t)))return f;return null},EntityInstanceSave:function(n,t){var r=$data.ItemStore,i=this;return r._getStoreEntitySet(n,i).then(function(u){return r._getSaveMode(i,u,t,n).then(function(n){n=n||"add";switch(n){case"add":u.add(i);break;case"attach":u.attach(i,!0);i.entityState=$data.EntityState.Modified;break;default:var t=new $data.PromiseHandler,f=t.createCallback();return f.error("save mode not supported: "+n),t.getPromise()}return u.entityContext.saveChanges().then(function(){return r._setStoreAlias(i,u.entityContext.storeToken),i})})})},EntityInstanceRemove:function(n){var i=$data.ItemStore,t=this;return i._getStoreEntitySet(n,t).then(function(n){return n.remove(t),n.entityContext.saveChanges().then(function(){return t})})},EntityInstanceRefresh:function(n,t){var u=$data.ItemStore,i=this,r=i.getType(),f=u._getKeyObjectFromEntity(i,r);return r.read(f,n).then(function(n){return r.memberDefinitions.getPublicMappedProperties().forEach(function(t){i[t.name]=n[t.name]}),i.storeToken=(t?i.storeToken:undefined)||n.storeToken,i.changedProperties=undefined,i})},EntityInheritedTypeProcessor:function(n){var t=$data.ItemStore;n.readAll=t.EntityTypeReadAll(n);n.read=t.EntityTypeRead(n);n.removeAll=t.EntityTypeRemoveAll(n);n.remove=t.EntityTypeRemove(n);n.get=t.EntityTypeGet(n);n.save=t.EntityTypeSave(n);n.addMany=t.EntityTypeAddMany(n);n.itemCount=t.EntityTypeItemCount(n);n.query=t.EntityTypeQuery(n);n.takeFirst=t.EntityTypeTakeFirst(n);n.setStore=t.EntityTypeSetStore(n)},EntityTypeReadAll:function(n){return function(t){var i=$data.ItemStore;return i._getStoreEntitySet(t,n).then(function(n){return n.forEach(function(t){i._setStoreAlias(t,n.entityContext.storeToken)})})}},EntityTypeRemoveAll:function(n){return function(t){var i=$data.ItemStore;return i._getStoreEntitySet(t,n).then(function(n){return n.toArray().then(function(t){return t.forEach(function(t){n.remove(t)}),n.entityContext.saveChanges().then(function(){return t})})})}},EntityTypeRead:function(n){return function(t,i){var r=$data.ItemStore;return r._getStoreEntitySet(i,n).then(function(n){var i,u,f;try{return i=r._findByIdQueryable(n,t),n.single(i.predicate,i.thisArgs).then(function(t){return r._setStoreAlias(t,n.entityContext.storeToken)})}catch(e){return u=new $data.PromiseHandler,f=u.createCallback(),f.error(e),u.getPromise()}})}},EntityTypeGet:function(n){return function(t,i){var u=$data.ItemStore,r=new n(u._getKeyObjectFromEntity(t));return r.refresh(i),r}},EntityTypeSave:function(n){return function(t,i,r){var f=$data.ItemStore,u=new n(t);return u.save(i,r)}},EntityTypeAddMany:function(n){return function(t,i){var r=$data.ItemStore;return r._getStoreEntitySet(i,n).then(function(n){var i=n.addMany(t);return n.entityContext.saveChanges().then(function(){return i})})}},EntityTypeRemove:function(n){return function(t,i){var e=$data.ItemStore,f=n.memberDefinitions.getKeyProperties(),r,u;return f.length===1?(u={},u[f[0].name]=t,r=new n(u)):r=new n(t),r.remove(i)}},EntityTypeItemCount:function(n){return function(t){var i=$data.ItemStore;return i._getStoreEntitySet(t,n).then(function(n){return n.length()})}},EntityTypeQuery:function(n){return function(t,i,r){var u=$data.ItemStore;return u._getStoreEntitySet(r,n).then(function(n){return n.filter(t,i).forEach(function(t){u._setStoreAlias(t,n.entityContext.storeToken)})})}},EntityTypeTakeFirst:function(n){return function(t,i,r){var u=$data.ItemStore;return u._getStoreEntitySet(r,n).then(function(n){return n.first(t,i).then(function(t){return u._setStoreAlias(t,n.entityContext.storeToken)})})}},EntityTypeSetStore:function(n){return function(t,i){var e,u,r,f,o;if(typeof t=="object"&&typeof i=="undefined"&&(i=t,t="default"),e=$data.ItemStore,u={},i){if(i.tableName&&(u.tableName=i.tableName,delete i.tableName),i.collectionName&&(u.collectionName=i.collectionName,delete i.collectionName),typeof i.dataSource=="string"){r=i.dataSource;r.lastIndexOf("/")===r.length-1&&(r=r.substring(0,r.lastIndexOf("/")));f=r.substring(0,r.lastIndexOf("/"));u.tableName||(u.tableName=r.substring(r.lastIndexOf("/")+1));o=i.provider||i.name;switch(o){case"oData":i.oDataServiceHost=i.oDataServiceHost||f;break;case"webApi":i.apiUrl=i.apiUrl||f}}}else i={name:"local"};return u.initParam=i,e._setTypeStoreConfig(n,t,u),n}},_setTypeStoreConfig:function(n,t,i){n.storeConfigs||(n.storeConfigs={stores:{}});n.storeConfigs.stores[t]=i;t==="default"&&(n.storeConfigs["default"]=t)},_findByIdQueryable:function(n,t){var i=n.defaultType.memberDefinitions.getKeyProperties(),f,e,r,u;if(i.length>1&&t&&"object"==typeof t){for(f="",e={},r=0;r<i.length;r++)r>0&&(f+=" && "),u=i[r],f+="it."+u.name+" == this."+u.name,e[u.name]=t[u.name];return{predicate:f,thisArgs:e}}if(i.length===1)return{predicate:"it."+i[0].name+" == this.value",thisArgs:{value:t}};throw"invalid keys";},_getKeyObjectFromEntity:function(n,t){var r,i=t.memberDefinitions.getKeyProperties(),u;if(i.length===1)r=n&&typeof n=="object"?n[i[0].name]:n;else for(r={},u=0;u<i.length;u++)r[i[0].name]=n?n[i[0].name]:n;return r},_getSaveMode:function(n,t,i,r){var o=this,e=new $data.PromiseHandler,u=e.createCallback(),f=n.getType();switch(!0){case i==="update":u.success("attach");break;case i==="new":u.success("add");break;case!1===f.memberDefinitions.getKeyProperties().every(function(t){return n[t.name]}):u.success("add");break;case!!n.storeToken:u.success("attach");break;default:r=this._getStoreAlias(n,r);f.read(o._getKeyObjectFromEntity(n,f),r).then(function(){u.success("attach")}).fail(function(){u.success("add")})}return e.getPromise()},ContextRegister:function(n){var o=this,e=JSON.parse(JSON.stringify(n)),u,t,i,r,f;for(this.storeToken={typeName:this.getType().fullName,args:e,factory:function(){return new(o.getType())(e)}},u=this.getType().memberDefinitions.getPublicMappedProperties(),t=0;t<u.length;t++)i=u[t],i.type&&(r=Container.resolveType(i.type),r&&r.isAssignableTo&&r.isAssignableTo($data.EntitySet)&&(f=Container.resolveType(i.elementType),f.storeToken||(f.storeToken=this.storeToken)))},QueryResultModifier:function(n){var e=$data.ItemStore,o=n.context,i=n.modelBinderConfig.$type,s,t,f,r,u;if("string"==typeof i&&(i=Container.resolveType(i)),i===$data.Array&&n.modelBinderConfig.$item&&n.modelBinderConfig.$item.$type&&(i=n.modelBinderConfig.$item.$type),typeof i=="undefined"&&n.result&&n.result[0]instanceof $data.Entity)for(s=i?i.memberDefinitions.getPublicMappedProperties().filter(function(n){return!!n.inverseProperty}):[],t=0;t<n.result.length;t++)for(e._setStoreAlias(n.result[t],o.storeToken),f=0;f<s.length;f++)if(r=s[f],n.result[t][r.name]instanceof $data.Entity)e._setStoreAlias(n.result[t][r.name],o.storeToken);else if(Array.isArray(n.result[t][r.name]))for(u=0;u<n.result[t][r.name].length;u++)n.result[t][r.name][u]instanceof $data.Entity&&e._setStoreAlias(n.result[t][r.name][u],o.storeToken)}});$data.ItemStore=new $data.ItemStoreClass;$data.Entity.addMember("field",function(n){var t=this.memberDefinitions.getMember(n);if(t){if(t.definedBy===this)return new $data.MemberWrapper(t);Guard.raise(new Exception("Member '"+n+"' defined on '"+t.definedBy.fullName+"'!","Invalid Operation"))}else Guard.raise(new Exception("Member '"+n+"' not exists!","Invalid Operation"));return this},!0);$data.Class.define("$data.MemberWrapper",null,null,{constructor:function(n){this.memberDefinition=n},setKey:function(n){return this.memberDefinition.key=n||n===undefined?!0:!1,this},setComputed:function(n){return this.memberDefinition.computed=n||n===undefined?!0:!1,this},setRequired:function(n){return this.memberDefinition.required=n||n===undefined?!0:!1,this},setNullable:function(n){return this.memberDefinition.nullable=n||n===undefined?!0:!1,this},changeDefinition:function(n,t){return this.memberDefinition[n]=t,this}});$data.Class.define("$data.StorageProviderLoaderBase",null,null,{isSupported:function(n){$data.Trace.log("Detecting "+n+" provider support");var t=!0;switch(n){case"indexedDb":t=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB&&!/^file:/.test(window.location.href);break;case"storm":t="XMLHttpRequest"in window;break;case"webSql":case"sqLite":t="openDatabase"in window;break;case"LocalStore":t="localStorage"in window&&window.localStorage?!0:!1;break;case"sqLite":t="openDatabase"in window;break;case"mongoDB":t=$data.mongoDBDriver}return $data.Trace.log(n+" provider is "+(t?"":"not")+" supported"),t},scriptLoadTimeout:{type:"int",value:1e3},scriptLoadInterval:{type:"int",value:50},npmModules:{value:{indexedDb:"jaydata-indexeddb",InMemory:"jaydata-inmemory",LocalStore:"jaydata-inmemory",mongoDB:"jaydata-mongodb",oData:"jaydata-odata",webApi:"jaydata-webapi",sqLite:"jaydata-sqlite",webSql:"jaydata-sqlite",storm:"jaydata-storm"}},ProviderNames:{value:{indexedDb:"IndexedDb",InMemory:"InMemory",LocalStore:"InMemory",oData:"oData",webApi:"WebApi",sqLite:"SqLite",webSql:"SqLite",storm:"Storm"}},load:function(n,t){$data.RegisteredStorageProviders=$data.RegisteredStorageProviders||{};$data.Trace.log("Loading provider(s): "+n);t=$data.typeSystem.createCallbackSetting(t);var i=this,r=n.join(",");i._fallbackCache=i._fallbackCache||{};i._fallbackCache[r]?t.success(i._fallbackCache[r]):this.find(n,{success:function(n){i._fallbackCache[r]=n;t.success.call(this,n)},error:t.error})},find:function(n,t){var i=n.shift(),i=this.getVirtual(i),r;for(Array.isArray(i)&&(n=i,i=n.shift());i&&!this.isSupported(i);)i=n.shift();if($data.Trace.log("First supported provider is "+i),i||($data.Trace.log("Provider fallback failed"),t.error()),$data.RegisteredStorageProviders){if($data.Trace.log("Is the "+i+" provider already registered?"),r=$data.RegisteredStorageProviders[i],r){$data.Trace.log(i+" provider registered");t.success(r);return}$data.Trace.log(i+" provider not registered")}typeof module!="undefined"&&typeof module.exports!="undefined"?($data.Trace.log("node.js detected trying to load NPM module"),this.loadNpmModule(i,n,t)):($data.Trace.log("Browser detected trying to load provider"),this.loadProvider(i,n,t))},loadProvider:function(n,t,i){var e=this,r=$data.StorageProviderLoader.ProviderNames[n]||n,u,f;$data.Trace.log(n+" provider is mapped to name "+r+"Provider");r&&(u=this.getUrl(r),$data.Trace.log(n+" provider from URL: "+u),f=this.loadScript,document&&document.createElement&&($data.Trace.log("document and document.createElement detected, using script element loader method"),f=this.loadScriptElement),f.call(this,u,n,function(r){var u=$data.RegisteredStorageProviders[n];r&&u?($data.Trace.log(n+" provider successfully registered"),i.success(u)):t.length>0?($data.Trace.log(n+" provider failed to load, trying to fallback to "+t+" provider(s)"),e.find(t,i)):($data.Trace.log(n+" provider failed to load"),i.error())}))},getUrl:function(n){var t=document.querySelector('script[src$="jaydata.min.js"]'),i=document.querySelector('script[src$="jaydata.js"]');return t?t.src.substring(0,t.src.lastIndexOf("/")+1)+"jaydataproviders/"+n+"Provider.min.js":i?i.src.substring(0,i.src.lastIndexOf("/")+1)+"jaydataproviders/"+n+"Provider.js":"jaydataproviders/"+n+"Provider.js"},loadScript:function(n,t,i){function u(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject!==undefined)return new ActiveXObject("MsXml2.XmlHttp");$data.Trace.log("XMLHttpRequest or MsXml2.XmlHttp ActiveXObject not found");i(!1);return}if(!n){i(!1);return}var r=u();r.onreadystatechange=function(){$data.Trace.log("HTTP request is in state: "+r.readyState);r.readyState==4&&(r.status==200||r.status==304?($data.Trace.log("HTTP request succeeded"),$data.Trace.log("HTTP request response text: "+r.responseText),eval.call(window,r.responseText),typeof i=="function"?i(!0):$data.Trace.log("Callback function is undefined")):($data.Trace.log("HTTP request status: ",r.status),typeof i=="function"?i(!1):$data.Trace.log("Callback function is undefined")))};r.open("GET",n,!0);r.send(null)},loadScriptElement:function(n,t,i){function o(){$data.Trace.log("Script element watcher iteration "+r);var n=$data.RegisteredStorageProviders[t];n?($data.Trace.log(t+" provider registered"),i(!0)):(r--,r>0?($data.Trace.log("Script element watcher next iteration"),setTimeout(o,f)):($data.Trace.log("Script element loader failed"),i(!1)))}var e=document.getElementsByTagName("head")[0]||document.documentElement,u=document.createElement("script"),f,r;u.type="text/javascript";u.src=n;$data.Trace.log("Appending child "+u+" to "+e);e.appendChild(u);f=this.scriptLoadInterval||50;r=Math.ceil(this.scriptLoadTimeout/f);$data.Trace.log("Script element watcher iterating "+r+" times");setTimeout(o,f)},loadNpmModule:function(n,t,i){var r=null;try{require(this.npmModules[n]);r=$data.RegisteredStorageProviders[n];$data.Trace.log("NPM module loader successfully registered "+n+" provider")}catch(u){$data.Trace.log("NPM module loader failed for "+n+" provider")}r?i.success(r):t.length>0?this.find(t,i):i.error()},virtualProviders:{type:$data.Array,value:{local:{fallbacks:["webSql","indexedDb","LocalStore"]}}},getVirtual:function(n){return this.virtualProviders[n]?[].concat(this.virtualProviders[n].fallbacks):n}});$data.StorageProviderLoader=new $data.StorageProviderLoaderBase;$data.storageProviders={DbCreationType:{Merge:10,DropTableIfChanged:20,DropTableIfChange:20,DropAllExistingTables:30,ErrorIfChange:40,DropDbIfChange:50}};$data.ConcurrencyMode={Fixed:"fixed",None:"none"};$data.Class.define("$data.StorageProviderBase",null,null,{constructor:function(n){var i,t;if(this.providerConfiguration=n||{},this.name=this.getType().name,$data.RegisteredStorageProviders)for(i=Object.keys($data.RegisteredStorageProviders),t=0;t<i.length;t++)if(this instanceof $data.RegisteredStorageProviders[i[t]]){this.name=i[t];break}},providers:{},supportedDataTypes:{value:[],writable:!1},initializeStore:function(){Guard.raise("Pure class")},executeQuery:function(){Guard.raise("Pure class")},loadRawData:function(n,t){t=$data.typeSystem.createCallbackSetting(t);t.error(new Exception("loadRawData is not supported","Invalid Operation"))},buildIndependentBlocks:function(n){function g(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}for(var i,r,h,w,u,c,b,f,l,t,e,k,a,y,p,d,o=[],v=[],s=0;s<n.length;s++)if(i=n[s],i.dependentOn&&i.dependentOn.length!=0){for(r=null,h=0;h<i.dependentOn.length;h++)if(w=i.dependentOn[h],w.entityState!=$data.EntityState.Unchanged){for(r=r||{},u=-1,c=0;c<n.length;c++)if(n[c].data==w){u=c;break}u==-1&&Guard.raise(new Exception("Dependent object not found","ObjectNotFound",i.dependentOn[h]));r[u]=!0;from=v[u]||{};from[s]=!0;v[u]=from}r!==null&&(o[s]=r)}for(b=[],f=[],l=0;l<n.length;l++)o.hasOwnProperty(l)||f.push(l);while(f.length>0){for(t=[].concat(f),f=[],e=0;e<t.length;e++){if(k=v[t[e]],typeof k!="undefined")for(a in k)delete o[a][t[e]],g(o[a])||(delete o[a],f.push(a));delete v[t[e]]}for(y=[],p=0;p<t.length;p++)d=n[t[p]],d.data.entityState!=$data.EntityState.Unchanged&&y.push(d);y.length>0&&b.push(y)}return b},getTraceString:function(){Guard.raise("Pure class")},setContext:function(n){this.context=n},_buildContinuationFunction:function(n,t){Array.isArray(t.result)&&(t.result.next=this._buildPagingMethod(n,t,"next"),t.result.prev=this._buildPagingMethod(n,t,"prev"))},_buildPagingMethod:function(n,t,i){return function(r){var e=new $data.PromiseHandler,o=e.createCallback(r),s=new $data.Expressions.ContinuationExpressionBuilder(i),u=s.compile(t),f;return u.expression?(f=Container.createQueryable(n,u.expression),f.defaultType=t.defaultType,n.executeQuery(f,o)):o.error(new Exception(u.message,"Invalid Operation",u)),e.getPromise()}},buildDbType_modifyInstanceDefinition:function(n,t){var i=function(t,i){var r;return i?(r=JSON.parse(JSON.stringify(n[i])),r.kind=t.kind,r.name=t.name,r.notMapped=!1):r=JSON.parse(JSON.stringify(t)),r.dataType=Container.resolveType(t.dataType),r.type=r.dataType,r.key=!1,r.computed=!1,r},r=function(n,t,i,r,u){var f={};return f[n.name]=i,f[t.name]=u?u:r+"__"+i,f};t.Associations&&t.Associations.forEach(function(t){var h=!1,o=t.FromType,f=t.ToType,s=t.ToPropertyName,u=t.FromType.getMemberDefinition(t.FromPropertyName),e=[];u&&typeof u.keys=="string"&&u.keys?e=[u.keys]:u&&Array.isArray(u.keys)&&(e=[].concat(u.keys));t.ReferentialConstraint=t.ReferentialConstraint||[];(t.FromMultiplicity=="*"&&t.ToMultiplicity=="0..1"||t.FromMultiplicity=="0..1"&&t.ToMultiplicity=="1")&&(o=t.ToType,f=t.FromType,s=t.FromPropertyName,h=!0);o.memberDefinitions.getPublicMappedProperties().filter(function(n){return n.key}).forEach(function(u,c){var a=r(o,f,u.name,s,e[c]),l;h&&(n[a[f.name]]=i(u,s),l=f.getMemberDefinition(e[c]),l&&(l.isDependentProperty=!0,l.navigationPropertyName=t.FromPropertyName));t.ReferentialConstraint.push(a)},this)},this);t.ComplexTypes&&t.ComplexTypes.forEach(function(t){t.ReferentialConstraint=t.ReferentialConstraint||[];t.ToType.memberDefinitions.getPublicMappedProperties().forEach(function(u){n[t.FromPropertyName+"__"+u.name]=i(u);t.ReferentialConstraint.push(r(t.ToType,t.FromType,u.name,t.FromPropertyName))},this)},this)},buildDbType_generateConvertToFunction:function(n){return function(t){var i=new n.PhysicalType;return i.entityState=t.entityState,n.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(n){t[n.name]!==undefined&&(i[n.name]=t[n.name])},this),n.Associations&&n.Associations.forEach(function(n){if(n.FromMultiplicity=="*"&&n.ToMultiplicity=="0..1"||n.FromMultiplicity=="0..1"&&n.ToMultiplicity=="1"){var r=t[n.FromPropertyName];r!==undefined&&n.ReferentialConstraint.forEach(function(t){i[t[n.From]]=r!==null?r[t[n.To]]:null},this)}},this),n.ComplexTypes&&n.ComplexTypes.forEach(function(n){var r=t[n.FromPropertyName];r!==undefined&&n.ReferentialConstraint.forEach(function(t){i[t[n.From]]=r!==null?r[t[n.To]]:null},this)},this),i}},bulkInsert:function(n,t,i,r){r.error(new Exception("Not Implemented"))},supportedFieldOperations:{value:{length:{dataType:"number",allowedIn:"filter, map"},substr:{dataType:"string",allowedIn:"filter",parameters:[{name:"startFrom",dataType:"number"},{name:"length",dataType:"number"}]},toLowerCase:{dataType:"string"}},enumerable:!0,writable:!0},resolveFieldOperation:function(n,t,i){var r=this.supportedFieldOperations[n],u;if(Array.isArray(r)){for(u=0;u<r.length;u++)if(r[u].allowedType==="default"||Container.resolveType(r[u].allowedType)===Container.resolveType(t.selector.memberDefinition.type)&&i&&r[u].allowedIn&&(Array.isArray(r[u].allowedIn)&&r[u].allowedIn.some(function(n){return i===Container.resolveType(n)})||!Array.isArray(r[u].allowedIn)&&i===Container.resolveType(r[u].allowedIn))){r=r[u];break}u===r.length&&(r=undefined)}return r||Guard.raise(new Exception("Field operation '"+n+"' is not supported by the provider")),i&&r.allowedIn&&((!(r.allowedIn instanceof Array)||r.allowedIn.some(function(n){return i===Container.resolveType(n)}))&&(r.allowedIn instanceof Array||i===Container.resolveType(r.allowedIn))||Guard.raise(new Exception(n+" not supported in: "+i.name))),r.name=n,r},supportedBinaryOperators:{value:{equal:{mapTo:"eq",dataType:"boolean"}},enumerable:!0,writable:!0},resolveBinaryOperator:function(n,t,i){var r=this.supportedBinaryOperators[n];return r||Guard.raise(new Exception("Binary operator '"+n+"' is not supported by the provider")),i&&r.allowedIn&&((!(r.allowedIn instanceof Array)||r.allowedIn.some(function(n){return i===Container.resolveType(n)}))&&(r.allowedIn instanceof Array||i===Container.resolveType(r.allowedIn))||Guard.raise(new Exception(n+" not supported in: "+i.name))),r.name=n,r},supportedUnaryOperators:{value:{not:{mapTo:"not"}},enumerable:!0,writable:!0},resolveUnaryOperator:function(n,t,i){var r=this.supportedUnaryOperators[n];return r||Guard.raise(new Exception("Unary operator '"+n+"' is not supported by the provider")),i&&r.allowedIn&&((!(r.allowedIn instanceof Array)||r.allowedIn.some(function(n){return i===Container.resolveType(n)}))&&(r.allowedIn instanceof Array||i===Container.resolveType(r.allowedIn))||Guard.raise(new Exception(n+" not supported in: "+i.name))),r.name=n,r},supportedSetOperations:{value:{toArray:{invokable:!0,allowedIn:[]}},enumerable:!0,writable:!0},resolveSetOperations:function(n,t,i){var u=this.supportedSetOperations[n],r;return u||Guard.raise(new Exception("Operation '"+n+"' is not supported by the provider")),r=u.allowedIn||[],i&&r&&((!(r instanceof Array)||r.some(function(n){return i===Container.resolveType(n)}))&&(r instanceof Array||i===Container.resolveType(r))||Guard.raise(new Exception(n+" not supported in: "+i.name))),u},resolveTypeOperations:function(n,t){Guard.raise(new Exception("Entity '"+t.entityType.name+"' Operation '"+n+"' is not supported by the provider"))},resolveContextOperations:function(n,t){Guard.raise(new Exception("Context '"+t.instance.getType().name+"' Operation '"+n+"' is not supported by the provider"))},makePhysicalTypeDefinition:function(){},_beginTran:function(n,t,i){i.success(new $data.Transaction)},getFieldUrl:function(){return"#"},supportedAutoincrementKeys:{value:{}}},{onRegisterProvider:{value:new $data.Event},registerProvider:function(n,t){this.onRegisterProvider.fire({name:n,provider:t},this);$data.RegisteredStorageProviders=$data.RegisteredStorageProviders||[];$data.RegisteredStorageProviders[n]=t},getProvider:function(n){var t=$data.RegisteredStorageProviders[n];return t||console.warn("Provider not found: '"+n+"'"),t},isSupported:{get:function(){return!0},set:function(){}}});$data.Class.define("$data.ServiceOperation",null,null,{},{translateDefinition:function(n,t){n.serviceName=t;var i=new $data.MemberDefinition(this.generateServiceOperation(n),this);return i.name=t,i},generateServiceOperation:function(n){var t,i,r;return n.serviceMethod?(i=n.returnType?Container.resolveType(n.returnType):{},t=i.isAssignableTo&&i.isAssignableTo($data.Queryable)?n.serviceMethod:function(){var u=arguments[arguments.length-1],i=new $data.PromiseHandler,t,e=arguments,r;typeof u=="function"?(t=i.createCallback(u),arguments[arguments.length-1]=t):(t=i.createCallback(),arguments.push(t));try{r=n.serviceMethod.apply(this,arguments);r!==undefined&&t.success(r)}catch(f){t.error(f)}return i.getPromise()}):t=function(){var u=this,c,s,e,y,l,h,a,i,t,p,o,r,v,f;if(this instanceof $data.Entity||this instanceof $data.EntitySet){if(this instanceof $data.Entity)if(this.context)u=this.context,e=u.getEntitySetFromElementType(this.getType());else if(this.storeToken&&typeof this.storeToken.factory=="function")u=this.storeToken.factory(),e=u.getEntitySetFromElementType(this.getType());else{Guard.raise(new Exception("entity can't resolve context","Not Found!",this));return}else this instanceof $data.EntitySet&&(u=this.entityContext,e=this,y=u.getType().getMemberDefinition(e.name),c=$data.MemberDefinition.translateDefinition(y.actions[n.serviceName],n.serviceName,e.getType()));s={data:this,entitySet:e}}if(l=n.elementType?u.getEntitySetFromElementType(Container.resolveType(n.elementType)):null,h=null,n.params)if(h=[],arguments[0]&&typeof arguments[0]=="object"&&arguments[0].constructor===$data.Object&&n.params&&n.params[0]&&n.params[0].name in arguments[0])for(a=arguments[0],i=0;i<n.params.length;i++)t=n.params[i],t.name&&t.type&&t.name in a&&h.push(Container.createConstantExpression(a[t.name],Container.resolveType(t.type),t.name));else for(i=0;i<n.params.length;i++){if(typeof arguments[i]=="function")break;t=n.params[i];t.name&&t.type&&arguments[i]!==undefined&&h.push(Container.createConstantExpression(arguments[i],Container.resolveType(t.type),t.name))}return p=Container.createEntityContextExpression(u),c||(c=s&&s.data?s.data.getType().getMemberDefinition(n.serviceName):u.getType().getMemberDefinition(n.serviceName)),o=Container.createServiceOperationExpression(p,Container.createMemberInfoExpression(c),h,n,s),r=arguments[arguments.length-1],typeof r=="function"||typeof r=="object"&&(typeof r.success=="function"||typeof r.error=="function")||(r=undefined),l?(f=Container.createQueryable(l,o),r)?(o.isTerminated=!0,f._runQuery(r)):f:(v=n.returnType?Container.resolveType(n.returnType):null,f=Container.createQueryable(u,o),f.defaultType=v||$data.Object,v===$data.Queryable)?(f.defaultType=Container.resolveType(n.elementType),r)?(o.isTerminated=!0,f._runQuery(r)):f:(o.isTerminated=!0,f._runQuery(r))},r=n.params||[],$data.typeSystem.extend(t,n,{params:r}),t}});$data.Class.define("$data.ServiceAction",$data.ServiceOperation,null,{},{generateServiceOperation:function(n){return n.method||(n.method="POST"),$data.ServiceOperation.generateServiceOperation.apply(this,arguments)}});$data.Base.extend("$data.EntityWrapper",{getEntity:function(){Guard.raise("pure object")}});typeof jQuery!="undefined"&&jQuery.ajax&&($data.ajax=$data.ajax||jQuery.ajax);typeof WinJS!="undefined"&&WinJS.xhr&&($data.ajax=$data.ajax||function(n){var i,t;$data.typeSystem.extend(n,{dataType:"json",headers:{}});i={json:{accept:"application/json, text/javascript",convert:JSON.parse},text:{accept:"text/plain",convert:function(n){return n}},html:{accept:"text/html",convert:function(n){return n}},xml:{accept:"application/xml, text/xml",convert:function(n){return n}}};t=i[n.dataType.toLowerCase()];n.headers.Accept=t.accept;var r=n.success||$data.defaultSuccessCallback,u=n.error||$data.defaultErrorCallback,f=n.progress,e=function(n){var i=t.convert(n.responseText);r(i)},o=function(n){var i=t.convert(n.responseText);u(i)},s=f;WinJS.xhr(n).done(e,o,s)});typeof Ext!="undefined"&&typeof Ext.Ajax&&($data.ajax=$data.ajax||function(n){Ext.Ajax.request(n)});$data.ajax=$data.ajax||function(){var n=arguments[arguments.length-1],t=$data.typeSystem.createCallbackSetting(n);t.error("Not implemented")};$C("$data.modelBinder.FindProjectionVisitor",$data.Expressions.EntityExpressionVisitor,null,{VisitProjectionExpression:function(n){this.projectionExpression=n}});$C("$data.modelBinder.ModelBinderConfigCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n,t,i){this._query=n;this._includes=t;this._isoDataProvider=i||!1},VisitSingleExpression:function(n){this._defaultModelBinder(n)},VisitSomeExpression:function(n){this._defaultModelBinder(n)},VisitFindExpression:function(n){this._defaultModelBinder(n)},VisitEveryExpression:function(n){this._defaultModelBinder(n)},VisitToArrayExpression:function(n){this._defaultModelBinder(n)},VisitFirstExpression:function(n){this._defaultModelBinder(n)},VisitForEachExpression:function(n){this._defaultModelBinder(n)},VisitServiceOperationExpression:function(n){var t,i;n.cfg.returnType&&(t=Container.resolveType(n.cfg.returnType),typeof t.isAssignableTo=="function"&&t.isAssignableTo($data.Queryable)||t===$data.Array?this._defaultModelBinder(n):(i=Container.createqueryBuilder(),i.modelBinderConfig.$type=t,typeof t.isAssignableTo=="function"&&t.isAssignableTo($data.Entity)?i.modelBinderConfig.$selector=["json:"+n.cfg.serviceName]:(i.modelBinderConfig.$type=t,i.modelBinderConfig.$value=function(t,i){return n.cfg.serviceName in i?i[n.cfg.serviceName]:i.value}),this.VisitExpression(n,i),i.resetModelBinderProperty(),this._query.modelBinderConfig=i.modelBinderConfig))},VisitCountExpression:function(){var n=Container.createqueryBuilder();n.modelBinderConfig.$type=$data.Array;n.selectModelBinderProperty("$item");n.modelBinderConfig.$type=$data.Integer;n.modelBinderConfig.$source="cnt";n.resetModelBinderProperty();this._query.modelBinderConfig=n.modelBinderConfig},VisitBatchDeleteExpression:function(){var n=Container.createqueryBuilder();n.modelBinderConfig.$type=$data.Array;n.selectModelBinderProperty("$item");n.modelBinderConfig.$type=$data.Integer;n.modelBinderConfig.$source="cnt";n.resetModelBinderProperty();this._query.modelBinderConfig=n.modelBinderConfig},VisitConstantExpression:function(n,t){t.modelBinderConfig.$type=n.type;t.modelBinderConfig.$value=n.value},VisitExpression:function(n,t){var i=Container.createFindProjectionVisitor();i.Visit(n);i.projectionExpression?this.Visit(i.projectionExpression,t):this.DefaultSelection(t,this._query.defaultType,this._includes)},_defaultModelBinder:function(n){var t=Container.createqueryBuilder();t.modelBinderConfig.$type=$data.Array;this._isoDataProvider&&(t.modelBinderConfig.$selector=["json:d.results","json:d","json:results"]);t.modelBinderConfig.$item={};t.selectModelBinderProperty("$item");this.VisitExpression(n,t);t.resetModelBinderProperty();this._query.modelBinderConfig=t.modelBinderConfig},_addPropertyToModelBinderConfig:function(n,t){var i=this._query.context._storageModel.getStorageModel(n);n.memberDefinitions?n.memberDefinitions.getPublicMappedProperties().forEach(function(n){var r,u;i&&(!i||i.Associations[n.name]||i.ComplexTypes[n.name])||(r=Container.resolveType(n.dataType),!i&&this._query.context.storageProvider.supportedDataTypes.indexOf(r)<0?(t.selectModelBinderProperty(n.name),t.modelBinderConfig.$type=r,t.modelBinderConfig.$selector=this._isoDataProvider?["json:"+n.name+".results","json:"+n.name]:"json:"+n.name,this._addPropertyToModelBinderConfig(r,t),t.popModelBinderProperty()):(n.key&&t.addKeyField(n.name),n.concurrencyMode===$data.ConcurrencyMode.Fixed?t.modelBinderConfig[n.name]={$selector:"json:__metadata",$source:"etag"}:r===$data.Array&&n.elementType?(t.selectModelBinderProperty(n.name),t.modelBinderConfig.$type=r,t.modelBinderConfig.$selector=this._isoDataProvider?["json:"+n.name+".results","json:"+n.name]:"json:"+n.name,t.selectModelBinderProperty("$item"),u=Container.resolveType(n.elementType),t.modelBinderConfig.$type=u,this._addPropertyToModelBinderConfig(u,t),t.popModelBinderProperty(),t.popModelBinderProperty()):t.modelBinderConfig[n.name]=n.name))},this):(t._binderConfig.$item=t._binderConfig.$item||{},t.modelBinderConfig=t._binderConfig.$item);i&&this._addComplexTypeProperties(i.ComplexTypes,t)},_addComplexTypeProperties:function(n,t){n.forEach(function(n){var f,i,u,r;if(n.ToType!==$data.Array)t.selectModelBinderProperty(n.FromPropertyName),t.modelBinderConfig.$type=n.ToType,t.modelBinderConfig.$selector=this._isoDataProvider?["json:"+n.FromPropertyName+".results","json:"+n.FromPropertyName]:"json:"+n.FromPropertyName,this._addPropertyToModelBinderConfig(n.ToType,t),t.popModelBinderProperty();else if(f=n.ToType,i=Container.resolveType(n.FromType.memberDefinitions.getMember(n.FromPropertyName).elementType),f===$data.Array&&i&&i.isAssignableTo&&i.isAssignableTo($data.Entity)){for(config={$type:$data.Array,$selector:"json:"+n.FromPropertyName,$item:{$type:i}},u=i.memberDefinitions.getPublicMappedProperties(),r=0;r<u.length;r++)config.$item[u[r].name]={$type:u[r].type,$source:u[r].name};t.modelBinderConfig[n.FromPropertyName]=config}else t.modelBinderConfig[n.FromPropertyName]={$type:n.ToType,$source:n.FromPropertyName}},this)},DefaultSelection:function(n,t,i){n.modelBinderConfig.$type=t;var r=this._query.context._storageModel.getStorageModel(t);this._addPropertyToModelBinderConfig(t,n);i&&i.forEach(function(t){for(var i=t.name.split("."),f=null,e=r,o=0,u=0;u<i.length;u++)n.modelBinderConfig.$item&&(n.selectModelBinderProperty("$item"),o++),n.selectModelBinderProperty(i[u]),f=e.Associations[i[u]],e=this._query.context._storageModel.getStorageModel(f.ToType);for(n.modelBinderConfig.$selector=this._isoDataProvider?["json:"+i[i.length-1]+".results","json:"+i[i.length-1]]:"json:"+i[i.length-1],f.ToMultiplicity==="*"?(n.modelBinderConfig.$type=$data.Array,n.selectModelBinderProperty("$item"),n.modelBinderConfig.$type=t.type,this._addPropertyToModelBinderConfig(t.type,n),n.popModelBinderProperty()):(n.modelBinderConfig.$type=t.type,this._addPropertyToModelBinderConfig(t.type,n)),u=0;u<i.length+o;u++)n.popModelBinderProperty()},this)},VisitProjectionExpression:function(n,t){this.hasProjection=!0;this.Visit(n.selector,t);n.selector&&n.selector.expression instanceof $data.Expressions.ObjectLiteralExpression&&(t.modelBinderConfig.$type=n.projectionAs||t.modelBinderConfig.$type||$data.Object)},VisitParametricQueryExpression:function(n,t){n.expression instanceof $data.Expressions.EntityExpression||n.expression instanceof $data.Expressions.EntitySetExpression?this.VisitEntityAsProjection(n,t):this.Visit(n.expression,t)},VisitEntityAsProjection:function(n,t){this.mapping="";this.Visit(n.expression,t);var i;this.mapping&&this._includes instanceof Array&&(i=this._includes.filter(function(n){return n.name.indexOf(this.mapping+".")===0},this),i=i.map(function(n){return{name:n.name.replace(this.mapping+".",""),type:n.type}},this),i.length>0&&this.DefaultSelection(t,n.expression.entityType,i));n.expression instanceof $data.Expressions.EntityExpression?this.DefaultSelection(t,n.expression.entityType):n.expression instanceof $data.Expressions.EntitySetExpression&&(t.modelBinderConfig.$type=$data.Array,t.modelBinderConfig.$item={},t.selectModelBinderProperty("$item"),this.DefaultSelection(t,n.expression.elementType),t.popModelBinderProperty())},VisitEntityFieldExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t)},VisitMemberInfoExpression:function(n,t){t.modelBinderConfig.$type=n.memberDefinition.type;n.memberDefinition.storageModel&&n.memberName in n.memberDefinition.storageModel.ComplexTypes?this._addPropertyToModelBinderConfig(Container.resolveType(n.memberDefinition.type),t):t.modelBinderConfig.$type&&Container.resolveType(t.modelBinderConfig.$type).isAssignableTo&&Container.resolveType(t.modelBinderConfig.$type).isAssignableTo($data.Entity)||(t.modelBinderConfig.$source=n.memberName)},VisitEntitySetExpression:function(n,t){n.source instanceof $data.Expressions.EntityExpression&&(this.Visit(n.source,t),this.Visit(n.selector,t))},VisitComplexTypeExpression:function(n,t){if(this.Visit(n.source,t),this.Visit(n.selector,t),"$selector"in t.modelBinderConfig&&t.modelBinderConfig.$selector.length>0)if(t.modelBinderConfig.$selector instanceof $data.Array){var i=t.modelBinderConfig.$selector[1];t.modelBinderConfig.$selector[0]=i+"."+n.selector.memberName+".results";t.modelBinderConfig.$selector[1]=i+"."+n.selector.memberName}else t.modelBinderConfig.$selector+="."+n.selector.memberName;else t.modelBinderConfig.$selector=this._isoDataProvider?["json:"+n.selector.memberName+".results","json:"+n.selector.memberName]:"json:"+n.selector.memberName},VisitEntityExpression:function(n,t){this.Visit(n.source,t)},VisitAssociationInfoExpression:function(n,t){if("$selector"in t.modelBinderConfig&&t.modelBinderConfig.$selector.length>0)if(t.modelBinderConfig.$selector instanceof $data.Array){var i=t.modelBinderConfig.$selector[1];t.modelBinderConfig.$selector[0]=i+"."+n.associationInfo.FromPropertyName+".results";t.modelBinderConfig.$selector[1]=i+"."+n.associationInfo.FromPropertyName}else t.modelBinderConfig.$selector+="."+n.associationInfo.FromPropertyName;else t.modelBinderConfig.$selector=this._isoDataProvider?["json:"+n.associationInfo.FromPropertyName+".results","json:"+n.associationInfo.FromPropertyName]:"json:"+n.associationInfo.FromPropertyName;this.mapping&&this.mapping.length>0&&(this.mapping+=".");this.mapping+=n.associationInfo.FromPropertyName},VisitObjectLiteralExpression:function(n,t){t.modelBinderConfig.$type=$data.Object;n.members.forEach(function(n){this.Visit(n,t)},this)},VisitObjectFieldExpression:function(n,t){t.selectModelBinderProperty(n.fieldName);n.expression instanceof $data.Expressions.EntityExpression||n.expression instanceof $data.Expressions.EntitySetExpression?this.VisitEntityAsProjection(n,t):this.Visit(n.expression,t);t.popModelBinderProperty()}});$data.Class.define("$data.Authentication.AuthenticationBase",null,null,{constructor:function(n){this.configuration=n||{};this.Authenticated=!1},Login:function(){Guard.raise("Pure class")},Logout:function(){Guard.raise("Pure class")},CreateRequest:function(){Guard.raise("Pure class")}},null);$data.Class.define("$data.Authentication.Anonymous",$data.Authentication.AuthenticationBase,null,{constructor:function(n){this.configuration=n||{};this.Authenticated=!1},Login:function(){},Logout:function(){},CreateRequest:function(n){$data.ajax(n)}},null);$data.Class.define("$data.Authentication.FacebookAuth",$data.Authentication.AuthenticationBase,null,{constructor:function(n){this.configuration=$data.typeSystem.extend({Url_code:"",type_code:"",scope:"",Url_token:"",type_token:"",access_token:"",app_id:""},n)},Login:function(n){if(!this.Authenticated){var t=this;t.configuration.stateCallbacks=n||{};$data.ajax({url:this.configuration.Url_code,data:"type="+t.configuration.type_code+"&client_id="+t.configuration.app_id+"&scope="+t.configuration.scope,type:"POST",dataType:"json",success:function(n){typeof t.configuration.stateCallbacks.pending=="function"&&t.configuration.stateCallbacks.pending(n);t._processRequestToken(n);t.Authenticated=!0},error:function(){typeof t.configuration.stateCallbacks.error=="function"&&t.configuration.stateCallbacks.error(arguments)}})}},Logout:function(){this.Authenticated=!1},CreateRequest:function(n){var i,t;n&&(i=this,n.url.indexOf("access_token=")===-1&&n.url&&this.Authenticated&&(t="?",n.url.indexOf(t)>0&&(t="&"),this.configuration.access_token&&(n.url=n.url+t+"access_token="+this.configuration.access_token)),$data.ajax(n))},_processRequestToken:function(verification_data){var provider=this;$data.ajax({url:provider.configuration.Url_token,data:"type="+provider.configuration.type_token+"&client_id="+provider.configuration.app_id+"&code="+verification_data.code,type:"POST",dataType:"json",success:function(n){provider.configuration.access_token=n.access_token;typeof provider.configuration.stateCallbacks.success=="function"&&provider.configuration.stateCallbacks.success(n)},error:function(obj){var data=eval("("+obj.responseText+")");data.error&&(data.error.message=="authorization_pending"?setTimeout(function(){provider._processRequestToken(verification_data)},2e3):"authorization_declined"&&typeof provider.configuration.stateCallbacks.abort=="function"&&provider.configuration.stateCallbacks.abort(arguments))}})}},null);$data.Class.define("$data.Authentication.BasicAuth.BasicAuth",$data.Authentication.AuthenticationBase,null,{constructor:function(n){this.configuration=$data.typeSystem.extend({Username:"",Password:""},n)},Login:function(n){n&&typeof n.pending=="function"&&n.pending()},Logout:function(){},CreateRequest:function(n){if(n){var t=this,i=n.beforeSend;n.beforeSend=function(n){n.setRequestHeader("Authorization","Basic  "+t.__encodeBase64(t.configuration.Username+":"+t.configuration.Password));typeof i=="function"&&i(n)};$data.ajax(n)}},__encodeBase64:function(n){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";input=n;var s="",f,t,i="",h,c,e,r="",o=0;do f=input.charCodeAt(o++),t=input.charCodeAt(o++),i=input.charCodeAt(o++),h=f>>2,c=(f&3)<<4|t>>4,e=(t&15)<<2|i>>6,r=i&63,isNaN(t)?e=r=64:isNaN(i)&&(r=64),s=s+u.charAt(h)+u.charAt(c)+u.charAt(e)+u.charAt(r),f=t=i="",h=c=e=r="";while(o<input.length);return s}},null);$data.Class.define("$data.MetadataLoaderClass",null,null,{load:function(n,t,i){var r={EntityBaseClass:"$data.Entity",ContextBaseClass:"$data.EntityContext",AutoCreateContext:!1,DefaultNamespace:("ns"+Math.random()).replace(".","")+n.replace(/[^\w]/g,"_"),ContextInstanceName:"context",EntitySetBaseClass:"$data.EntitySet",CollectionBaseClass:"Array",url:n,user:undefined,password:undefined,withCredentials:undefined,httpHeaders:undefined,typeFilter:"",navigation:!0,generateKeys:!0,dependentRelationsOnly:!1},n,u;if($data.typeSystem.extend(r,i||{}),r.DefaultNamespace&&r.DefaultNamespace.lastIndexOf(".")!==r.DefaultNamespace.length-1&&(r.DefaultNamespace+="."),this.factoryCache=this.factoryCache||{},t=$data.typeSystem.createCallbackSetting(t),n in this.factoryCache){t.success.apply({},this.factoryCache[n]);return}r.url?(r.SerivceUri=r.url.replace("/$metadata",""),r.metadataUri=r.url.indexOf("/$metadata")===-1?r.url.replace(/\/+$/,"")+"/$metadata":r.url):t.error("metadata url is missing");u=this;u._loadXMLDoc(r,function(n,i){if(i.statusCode<200||i.statusCode>299){t.error(i);return}var f=u._findVersion(n);u.xsltRepoUrl?(console.log("XSLT: "+u.xsltRepoUrl+u._supportedODataVersionXSLT),u._loadXMLDoc({metadataUri:u.xsltRepoUrl+u._supportedODataVersionXSLT,user:r.user,password:r.password,httpHeaders:r.httpHeaders},function(i,e){var o,s;if(e.statusCode<200||e.statusCode>299){t.error(e);return}o=e.responseText;o=o.replace('xmlns:edm="@@VERSIONNS@@"','xmlns:edm="'+f.ns+'"');o=o.replace("@@VERSION@@",f.version);window.ActiveXObject===undefined?(s=new DOMParser,i=s.parseFromString(o,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(o));u._transform(t,f,n,i,r)})):u._transform(t,f,n,undefined,r)})},debugMode:{type:"bool",value:!1},xsltRepoUrl:{type:"string",value:""},createFactoryFunc:function(n,t,i){var r=this;return function(r){if(n){var u=$data.typeSystem.extend({name:"oData",oDataServiceHost:t.SerivceUri,user:t.user,password:t.password,withCredentials:t.withCredentials,maxDataServiceVersion:i.maxVersion||"3.0"},r);return new n(u)}return null}},_transform:function(callBack,versionInfo,xml,xsl,cnf){var self=this,codeText=self._processResults(cnf.url,versionInfo,xml,xsl,cnf),ctxType,factoryFn;try{eval(codeText)}catch(e){callBack.error(new Exception("SyntaxError","Unexpected model",[e,codeText]));return}if(!$data.generatedContexts||!(ctxType=$data.generatedContexts.pop())){callBack.error(new Exception("No context found in service","Not found",[cnf,codeText]));return}factoryFn=self.createFactoryFunc(ctxType,cnf,versionInfo);this.factoryCache[cnf.url]=[factoryFn,ctxType];factoryFn.type=ctxType;self.debugMode?(factoryFn.codeText=codeText,callBack.success(factoryFn,ctxType,codeText)):callBack.success(factoryFn,ctxType)},_loadXMLDoc:function(n,t){var i=this;$data.postMessageODataHandler?(n.user&&n.password&&(!n.httpHeaders||n.httpHeaders&&!n.httpHeaders.Authorization)&&(httpHeader=httpHeader||{},httpHeader.Authorization="Basic "+this.__encodeBase64(n.user+":"+n.password)),$data.postMessageODataHandler.requestProxy({url:n.metadataUri,httpHeaders:n.httpHeaders,success:function(n){var i,r;typeof module!="undefined"&&typeof require!="undefined"?i=n.responseText:window.ActiveXObject?(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n.responseText)):(r=new DOMParser,i=r.parseFromString(n.responseText,"text/xml"));t(i,n)},error:function(){i._loadXHTTP_XMLDoc(n,t)}})):this._loadXHTTP_XMLDoc(n,t)},_loadXHTTP_XMLDoc:function(n,t){var i=new XMLHttpRequest;i.open("GET",n.metadataUri,!0);n.httpHeaders&&Object.keys(n.httpHeaders).forEach(function(t){i.setRequestHeader(t,n.httpHeaders[t])});i.onreadystatechange=function(){if(i.readyState===4){var r={requestUri:n.metadataUri,statusCode:i.status,statusText:i.statusText,responseText:i.responseText};t(i.responseXML||i.responseText,r)}};n.user&&n.password&&(!n.httpHeaders||n.httpHeaders&&!n.httpHeaders.Authorization)&&i.setRequestHeader("Authorization","Basic "+this.__encodeBase64(n.user+":"+n.password));i.send("")},_processResults:function(n,t,i,r,u){var c=this.getCurrentXSLTVersion(t,i),s,f,h,a,l,v,e,o;if(u.typeFilter=this._prepareTypeFilter(i,t,u),window.ActiveXObject!==undefined){if(o=new ActiveXObject("Msxml2.XSLTemplate.6.0"),s=new ActiveXObject("Msxml2.FreeThreadedDOMDocument.6.0"),s.async=!1,r?s.load(r):s.loadXML(c),s.parseError.errorCode!=0)a=s.parseError;else if(o.stylesheet=s,h=new ActiveXObject("Msxml2.DOMDocument.6.0"),h.async=!1,h.load(i),h.parseError.errorCode!=0)a=h.parseError;else return f=o.createProcessor(),f.input=h,f.addParameter("SerivceUri",u.SerivceUri),f.addParameter("EntityBaseClass",u.EntityBaseClass),f.addParameter("ContextBaseClass",u.ContextBaseClass),f.addParameter("AutoCreateContext",u.AutoCreateContext),f.addParameter("ContextInstanceName",u.ContextInstanceName),f.addParameter("EntitySetBaseClass",u.EntitySetBaseClass),f.addParameter("CollectionBaseClass",u.CollectionBaseClass),f.addParameter("DefaultNamespace",u.DefaultNamespace),f.addParameter("MaxDataserviceVersion",t.maxVersion||"3.0"),f.addParameter("AllowedTypesList",u.typeFilter),f.addParameter("GenerateNavigationProperties",u.navigation),f.transform(),f.output;return""}return typeof document!="undefined"&&document.implementation&&document.implementation.createDocument?(r?l=r:(v=new DOMParser,l=v.parseFromString(c,"text/xml")),e=new XSLTProcessor,e.importStylesheet(l),e.setParameter(null,"SerivceUri",u.SerivceUri),e.setParameter(null,"EntityBaseClass",u.EntityBaseClass),e.setParameter(null,"ContextBaseClass",u.ContextBaseClass),e.setParameter(null,"AutoCreateContext",u.AutoCreateContext),e.setParameter(null,"ContextInstanceName",u.ContextInstanceName),e.setParameter(null,"EntitySetBaseClass",u.EntitySetBaseClass),e.setParameter(null,"CollectionBaseClass",u.CollectionBaseClass),e.setParameter(null,"DefaultNamespace",u.DefaultNamespace),e.setParameter(null,"MaxDataserviceVersion",t.maxVersion||"3.0"),e.setParameter(null,"AllowedTypesList",u.typeFilter),e.setParameter(null,"GenerateNavigationProperties",u.navigation),resultDocument=e.transformToFragment(i,document),resultDocument.textContent):typeof module!="undefined"&&typeof require!="undefined"?(o=require("node_xslt"),o.transform(o.readXsltString(c),o.readXmlString(i),["SerivceUri","'"+u.SerivceUri+"'","EntityBaseClass","'"+u.EntityBaseClass+"'","ContextBaseClass","'"+u.ContextBaseClass+"'","AutoCreateContext","'"+u.AutoCreateContext+"'","ContextInstanceName","'"+u.ContextInstanceName+"'","EntitySetBaseClass","'"+u.EntitySetBaseClass+"'","CollectionBaseClass","'"+u.CollectionBaseClass+"'","DefaultNamespace","'"+u.DefaultNamespace+"'","MaxDataserviceVersion","'"+(t.maxVersion||"3.0")+"'","AllowedTypesList","'"+u.typeFilter+"'","GenerateNavigationProperties","'"+u.navigation+"'"])):void 0},_prepareTypeFilter:function(n,t,i){var a="",h,e,f,u,v,y,p,c,w,l,o,b,k,r,s;if(!(typeof n=="object"&&"querySelector"in n&&"querySelectorAll"in n))return a;if(h=[],typeof i.typeFilter=="object"&&i.typeFilter){for(e=Object.keys(i.typeFilter),r=0;r<e.length;r++){if(f=i.typeFilter[e[r]],u={},typeof f=="object"&&f)Array.isArray(f)?(u.Name=e[r],u.Fields=f):(u.Name=f.name||e[r],u.Fields=f.members||[]);else if(f)u.Name=e[r],u.Fields=[];else continue;for(v=u.Name,y="",u.Name.lastIndexOf(".")>0&&(y=u.Name.substring(0,u.Name.lastIndexOf(".")),v=u.Name.substring(u.Name.lastIndexOf(".")+1)),p=n.querySelectorAll("EntityContainer[Name = '"+y+"']"),c=0;c<p.length;c++)if(w=p[c].querySelector("EntitySet[Name = '"+v+"']"),w!=null){u.Name=w.attributes.EntityType.value;break}h.push(u)}for(l=i.dependentRelationsOnly?this._discoverProperyDependencies(h,n,i.navigation,i.generateKeys):this._discoverTypeDependencies(h,n,i.navigation,i.generateKeys),o=n.querySelectorAll("ComplexType"),r=0;r<o.length;r++)b=o[r].parentNode.attributes.Namespace.value,k=b?b+"."+o[r].attributes.Name.value:o[r].attributes.Name.value,l.push({Name:k,Fields:[]});for(r=0;r<l.length;r++)s=l[r],a+=s.Fields.length>0?s.Name+":"+s.Fields.join(",")+";":s.Name+";"}return a},_discoverTypeDependencies:function(n,t,i,r){for(var o,e=[],s=[],f=[],u=0;u<n.length;u++)o=f.indexOf(n[u].Name),o>=0&&f.splice(o,1),this._discoverType(n[u],t,e,s,i,r,!0,f);for(u=0;u<f.length;u++)this._discoverType({Name:f[u],Fields:[]},t,e,s,i,r,!1,[]);return e},_discoverType:function(n,t,i,r,u,f,e,o){var s=n.Name,a,b,c,v,y,k,d,h,p,l;if(!(r.indexOf(s)>=0)&&(console.log("Discover: "+s),a=s,b="",s.lastIndexOf(".")>0&&(b=s.substring(0,s.lastIndexOf(".")),a=s.substring(s.lastIndexOf(".")+1)),c=t.querySelector("Schema[Namespace = '"+b+"']"),c!=null&&(v=c.querySelector("EntityType[Name = '"+a+"'], ComplexType[Name = '"+a+"']"),v!=null))){if(i.push(n),r.push(s),f&&n.Fields.length>0&&(y=v.querySelectorAll("Key PropertyRef"),y!=null))for(h=0;h<y.length;h++)k=y[h].attributes.Name.value,n.Fields.indexOf(k)<0&&n.Fields.splice(h,0,k);if(u)for(d=v.querySelectorAll("NavigationProperty"),h=0;h<d.length;h++)if(p=d[h],n.Fields.length==0||n.Fields.indexOf(p.attributes.Name.value)>=0){var g=p.attributes.FromRole.value,nt=p.attributes.ToRole.value,w=c.querySelector("Association End[Role = '"+g+"']:not([Type = '"+s+"'])");w==null&&(w=c.querySelector("Association End[Role = '"+nt+"']:not([Type = '"+s+"'])"));w!=null&&(l=w.attributes.Type.value,e?o.indexOf(l)<0&&r.indexOf(l)<0&&o.push(l):this._discoverType({Name:l,Fields:[]},t,i,r,u,f,!1,o))}}},_discoverProperyDependencies:function(n,t,i,r){for(var f=[],e=n.map(function(n){return n.Name}),u=0;u<n.length;u++)this._discoverProperties(n[u],t,f,e,i,r);return f},_discoverProperties:function(n,t,i,r,u,f){var o=n.Name,c,s,l,g,y,h,b,a,e,k;console.log("Discover: "+o);var tt=n.Fields.length!=0,v=o,d="";if(o.lastIndexOf(".")>0&&(d=o.substring(0,o.lastIndexOf(".")),v=o.substring(o.lastIndexOf(".")+1)),c=t.querySelector("Schema[Namespace = '"+d+"']"),c!=null&&(s=c.querySelector("EntityType[Name = '"+v+"'], ComplexType[Name = '"+v+"']"),s!=null))if(i.push(n),tt){if(f&&(a=s.querySelectorAll("Key PropertyRef"),a!=null))for(e=0;e<a.length;e++)k=a[e].attributes.Name.value,n.Fields.indexOf(k)<0&&n.Fields.splice(e,0,k)}else{if(l=s.querySelectorAll("Property"),l!=null)for(e=0;e<l.length;e++)g=l[e].attributes.Name.value,n.Fields.push(g);if(u)for(y=s.querySelectorAll("NavigationProperty"),e=0;e<y.length;e++){var p=y[e],it=p.attributes.Name.value,nt=[p.attributes.FromRole.value,p.attributes.ToRole.value],w="";for(h=0;h<nt.length;h++)if(b=c.querySelector("Association End[Role = '"+nt[h]+"']"),b!=null&&(w=b.attributes.Type.value,w!=o||h==1))break;r.indexOf(w)>=0&&n.Fields.push(it)}}},_findVersion:function(n){var r="",i,t,f,u;if(typeof n=="object"&&"getElementsByTagName"in n)return i="http://schemas.microsoft.com/ado/2008/09/edm",t=n.getElementsByTagName("Schema"),t&&(t=t[0]),t&&(t=t.attributes),t&&(t=t.getNamedItem("xmlns")),t&&(i=t.value),r=n.getElementsByTagName("edmx:DataServices")[0]||n.getElementsByTagName("DataServices")[0],r&&(r=r.attributes.getNamedItem("m:MaxDataServiceVersion")),r&&i&&(r=r.value),f=this._supportedODataVersions[i],{ns:i,version:f||"unknown",maxVersion:r||this._maxDataServiceVersions[i||"unknown"]};if(typeof module!="undefined"&&typeof require!="undefined"){var o=n,e="http://schemas.microsoft.com/ado/2008/09/edm",i="nodejs";for(u in this._supportedODataVersions)if(o.search(new RegExp('<Schema.+xmlns="'+u+'"',"gi"))>=0){e=u;i=this._supportedODataVersions[u];break}return{ns:e,version:i,maxVersion:this._maxDataServiceVersions[i||"unknown"]}}},_supportedODataVersions:{value:{"http://schemas.microsoft.com/ado/2006/04/edm":"V1","http://schemas.microsoft.com/ado/2008/09/edm":"V2","http://schemas.microsoft.com/ado/2009/11/edm":"V3","http://schemas.microsoft.com/ado/2007/05/edm":"V11","http://schemas.microsoft.com/ado/2009/08/edm":"V22"}},_maxDataServiceVersions:{value:{"http://schemas.microsoft.com/ado/2006/04/edm":"2.0","http://schemas.microsoft.com/ado/2008/09/edm":"2.0","http://schemas.microsoft.com/ado/2009/11/edm":"3.0","http://schemas.microsoft.com/ado/2007/05/edm":"2.0","http://schemas.microsoft.com/ado/2009/08/edm":"2.0"}},_supportedODataVersionXSLT:{value:"JayDataContextGenerator.xslt"},getCurrentXSLTVersion:function(n){return this._metadataConverterXSLT.replace("@@VERSIONNS@@",n.ns).replace("@@VERSION@@",n.version)},__encodeBase64:function(n){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=n,h="",e,t,i="",c,l,o,r="",s=0;do e=f.charCodeAt(s++),t=f.charCodeAt(s++),i=f.charCodeAt(s++),c=e>>2,l=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),h=h+u.charAt(c)+u.charAt(l)+u.charAt(o)+u.charAt(r),e=t=i="",c=l=o=r="";while(s<f.length);return h},_metadataConverterXSLT:{type:"string",value:'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" \r\n                xmlns:edm="@@VERSIONNS@@" \r\n                xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" \r\n                xmlns:metadata="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" \r\n                xmlns:annot="http://schemas.microsoft.com/ado/2009/02/edm/annotation" \r\n                xmlns:exsl="http://exslt.org/common" \r\n                xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">\r\n\r\n  <xsl:key name="entityType" match="edm:EntityType" use="concat(string(../@Namespace),\'.\', string(@Name))"/>\r\n  <xsl:key name="associations" match="edm:Association" use="concat(string(../@Namespace),\'.\', string(@Name))"/>\r\n\r\n  <xsl:strip-space elements="property item unprocessed"/>\r\n  <xsl:output method="text" indent="no"  />\r\n  <xsl:param name="contextNamespace" />\r\n\r\n  <xsl:param name="SerivceUri" />\r\n  <xsl:param name="EntityBaseClass"/>\r\n  <xsl:param name="ContextBaseClass"/>\r\n  <xsl:param name="AutoCreateContext"/>\r\n  <xsl:param name="ContextInstanceName"/>\r\n  <xsl:param name="EntitySetBaseClass"/>\r\n  <xsl:param name="CollectionBaseClass"/>\r\n  <xsl:param name="DefaultNamespace"/>\r\n  <xsl:param name="MaxDataserviceVersion"/>\r\n  <xsl:param name="AllowedTypesList" />\r\n  <xsl:param name="GenerateNavigationProperties" />\r\n\r\n  <xsl:param name="AllowedTypesListX">Microsoft.Crm.Sdk.Data.Services.Product;Microsoft.Crm.Sdk.Data.Services.LeadAddress:Telephone1,City,UTCOffset;<\/xsl:param>\r\n\r\n  <xsl:variable name="fullmetadata" select="/" />\r\n  \r\n  <xsl:template name="createFieldsList">\r\n    <xsl:param name="fields" />\r\n    <!--<xsl:message terminate="no">\r\n      create field: @<xsl:value-of select="$fields"/>@\r\n    <\/xsl:message>-->\r\n      <xsl:variable name="thisField">\r\n        <xsl:choose>\r\n          <xsl:when test="contains($fields,\',\')">\r\n            <xsl:value-of select="substring-before($fields, \',\')"/>\r\n          <\/xsl:when>\r\n          <xsl:otherwise>\r\n            <xsl:value-of select="$fields"/>\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:variable>\r\n      <xsl:element name="field">\r\n        <xsl:attribute name="name">\r\n          <xsl:value-of select="$thisField"/>\r\n        <\/xsl:attribute> \r\n      <\/xsl:element>\r\n      <xsl:variable name="remaining" select="substring($fields, string-length($thisField) + 2)" />\r\n      <xsl:if test="string-length($remaining) > 0">\r\n        <xsl:call-template name="createFieldsList">\r\n          <xsl:with-param name="fields" select="$remaining" />\r\n        <\/xsl:call-template>\r\n      <\/xsl:if>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template name="createType">\r\n    <xsl:param name="typeFull" />\r\n    <!--<xsl:message terminate="no">\r\n      create type: <xsl:value-of select="$typeFull"/>\r\n    <\/xsl:message>-->\r\n    <xsl:variable name="typeName">\r\n      <xsl:choose>\r\n        <xsl:when test="contains($typeFull,\':\')">\r\n          <xsl:value-of select="substring-before($typeFull, \':\') "/>\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:value-of select="$typeFull"/>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/xsl:variable>\r\n    <xsl:variable name="fields" select="substring($typeFull, string-length($typeName) + 2)" />\r\n    <xsl:element name="type">\r\n      <xsl:attribute name="name">\r\n        <xsl:value-of select="$typeName"/>\r\n      <\/xsl:attribute>\r\n      <xsl:if test="string-length($fields) > 0">\r\n        <xsl:call-template name="createFieldsList">\r\n          <xsl:with-param name="fields" select="$fields" />\r\n        <\/xsl:call-template>\r\n      <\/xsl:if>\r\n    <\/xsl:element>\r\n  <\/xsl:template>\r\n  \r\n  <xsl:template name="createTypeList">\r\n    <xsl:param name="types" />\r\n    <!--<xsl:message terminate="no">\r\n      createTypeList: <xsl:value-of select="$types"/>\r\n    <\/xsl:message>-->\r\n        \r\n    <xsl:variable name="thisTypeFull">\r\n      <xsl:choose>\r\n        <xsl:when test="contains($types, \';\')">\r\n          <xsl:value-of select="substring-before($types, \';\')"/>\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:value-of select="$types"/>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/xsl:variable>\r\n\r\n    <xsl:if test="string-length($thisTypeFull) > 0">\r\n      <xsl:call-template name="createType">\r\n        <xsl:with-param name="typeFull" select="$thisTypeFull" />\r\n      <\/xsl:call-template>\r\n    <\/xsl:if>\r\n    \r\n    <xsl:variable name="remaining" select="substring($types, string-length($thisTypeFull) + 2)" />\r\n    <!--<xsl:message terminate="no">\r\n      rem: @<xsl:value-of select="$remaining"/>@  \r\n    <\/xsl:message>-->\r\n    \r\n    <xsl:if test="string-length($remaining) > 0">\r\n      <xsl:call-template name="createTypeList">\r\n        <xsl:with-param name="types" select="$remaining" />\r\n      <\/xsl:call-template>\r\n    <\/xsl:if>\r\n  <\/xsl:template>\r\n\r\n  <xsl:variable name="allowedTypes">\r\n    <xsl:call-template name="createTypeList">\r\n      <xsl:with-param name="types" select="$AllowedTypesList" />\r\n    <\/xsl:call-template>\r\n  <\/xsl:variable>\r\n  \r\n\r\n<!-- TODO EXSLT node-set -->\r\n  <!--<xsl:variable name="hasTypeFilter" select="boolean(count(msxsl:node-set($allowedTypes)/type) > 0)"/>-->\r\n  <xsl:variable name="hasTypeFilter">\r\n    <xsl:choose>\r\n      <xsl:when test="function-available(\'msxsl:node-set\')"><xsl:value-of select="boolean(count(msxsl:node-set($allowedTypes)/type) > 0)"/><\/xsl:when>\r\n      <xsl:otherwise><xsl:value-of select="boolean(count(exsl:node-set($allowedTypes)/type) > 0)"/><\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:variable>\r\n  <xsl:template match="/">\r\n\r\n/*//////////////////////////////////////////////////////////////////////////////////////\r\n////// Autogenerated by JaySvcUtil.exe http://JayData.org for more info        /////////\r\n//////                             oData @@VERSION@@                                    /////////\r\n//////////////////////////////////////////////////////////////////////////////////////*/\r\n(function(global, $data, undefined) {\r\n\r\n    \r\n<xsl:for-each select="//edm:EntityType | //edm:ComplexType" xml:space="default">\r\n  <xsl:variable name="thisName" select="concat(../@Namespace, \'.\', @Name)" />\r\n  <!-- TODO EXSLT node-set-->\r\n  <!--<xsl:variable name="thisTypeNode" select="msxsl:node-set($allowedTypes)/type[@name = $thisName]" />-->\r\n  <xsl:variable name="thisTypeNode">\r\n    <xsl:choose>\r\n      <xsl:when test="function-available(\'msxsl:node-set\')">\r\n        <xsl:copy-of select="msxsl:node-set($allowedTypes)/type[@name = $thisName]"/>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:copy-of select="exsl:node-set($allowedTypes)/type[@name = $thisName]"/>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:variable>\r\n  <xsl:variable name="thisTypeNodeExists">\r\n    <xsl:choose>\r\n      <xsl:when test="function-available(\'msxsl:node-set\')">\r\n        <xsl:copy-of select="(count(msxsl:node-set($allowedTypes)/type[@name = $thisName]) > 0)"/>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:copy-of select="(count(exsl:node-set($allowedTypes)/type[@name = $thisName]) > 0)"/>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:variable>\r\n  <!--<xsl:variable name="filterFields" select="(count($thisTypeNode/field) > 0)" />-->\r\n  <xsl:variable name="filterFields">\r\n    <xsl:choose>\r\n      <xsl:when test="function-available(\'msxsl:node-set\')">\r\n        <xsl:copy-of select="(count(msxsl:node-set($thisTypeNode)/type/field) > 0)"/>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:copy-of select="(count(exsl:node-set($thisTypeNode)/type/field) > 0)"/>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:variable>\r\n  <xsl:if test="($hasTypeFilter = \'false\') or ($thisTypeNodeExists = \'true\')">\r\n\r\n      <xsl:message terminate="no">Info: generating type <xsl:value-of select="concat(../@Namespace, \'.\', @Name)"/><\/xsl:message>\r\n    \r\n      <xsl:variable name="BaseType">\r\n        <xsl:choose>\r\n          <xsl:when test="@BaseType">\r\n            <xsl:value-of select="concat($DefaultNamespace,@BaseType)"/>\r\n          <\/xsl:when>\r\n          <xsl:otherwise>\r\n            <xsl:value-of select="$EntityBaseClass"  />\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:variable>\r\n\r\n\r\n     <xsl:variable name="props">\r\n       <xsl:for-each select="*[local-name() != \'NavigationProperty\' or ($GenerateNavigationProperties = \'true\' and local-name() = \'NavigationProperty\')]">\r\n         <xsl:variable name="fname" select="@Name" />\r\n         <xsl:variable name="isAllowedField">\r\n           <xsl:choose>\r\n             <xsl:when test="function-available(\'msxsl:node-set\')">\r\n               <xsl:copy-of select="(count(msxsl:node-set($thisTypeNode)/type/field[@name = $fname]) > 0)"/>\r\n             <\/xsl:when>\r\n             <xsl:otherwise>\r\n               <xsl:copy-of select="(count(exsl:node-set($thisTypeNode)/type/field[@name = $fname]) > 0)"/>\r\n             <\/xsl:otherwise>\r\n           <\/xsl:choose>\r\n         <\/xsl:variable>\r\n         <xsl:if test="($filterFields = \'false\') or ($isAllowedField = \'true\')">\r\n           <xsl:apply-templates select="." />\r\n         <\/xsl:if> \r\n       <\/xsl:for-each>\r\n      <\/xsl:variable>\r\n    \r\n      <xsl:text xml:space="preserve">  <\/xsl:text><xsl:value-of select="$BaseType"  />.extend(\'<xsl:value-of select="concat($DefaultNamespace,../@Namespace)"/>.<xsl:value-of select="@Name"/>\', {\r\n     <xsl:choose>\r\n        <xsl:when test="function-available(\'msxsl:node-set\')">\r\n          <xsl:for-each select="msxsl:node-set($props)/*">\r\n            <xsl:value-of select="."/>\r\n            <xsl:if test="position() != last()">\r\n            <xsl:text>,&#10;     <\/xsl:text>  \r\n            <\/xsl:if>\r\n          <\/xsl:for-each>\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:for-each select="exsl:node-set($props)/*">\r\n            <xsl:value-of select="."/>\r\n            <xsl:if test="position() != last()">,&#10;     <\/xsl:if>\r\n          <\/xsl:for-each>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n      <xsl:variable name="currentName"><xsl:value-of select="concat(../@Namespace,\'.\',@Name)"/><\/xsl:variable>\r\n      <xsl:for-each select="//edm:FunctionImport[@IsBindable and edm:Parameter[1]/@Type = $currentName]"><xsl:if test="position() = 1">,\r\n      <\/xsl:if>\r\n        <xsl:apply-templates select="."><\/xsl:apply-templates><xsl:if test="position() != last()">,\r\n      <\/xsl:if>\r\n      <\/xsl:for-each>\r\n  });\r\n\r\n<\/xsl:if>\r\n<\/xsl:for-each>\r\n\r\n<xsl:for-each select="//edm:EntityContainer">\r\n  <xsl:text xml:space="preserve">  <\/xsl:text><xsl:value-of select="$ContextBaseClass"  />.extend(\'<xsl:value-of select="concat(concat($DefaultNamespace,../@Namespace), \'.\', @Name)"/>\', {\r\n     <!--or (@IsBindable = \'true\' and (@IsAlwaysBindable = \'false\' or @m:IsAlwaysBindable = \'false\' or @metadata:IsAlwaysBindable = \'false\'))-->\r\n\r\n   <xsl:variable name="subset">\r\n    <xsl:for-each select="edm:EntitySet | edm:FunctionImport">\r\n      <xsl:choose>\r\n        <xsl:when test="function-available(\'msxsl:node-set\')">\r\n          <xsl:if test="($hasTypeFilter = \'false\') or msxsl:node-set($allowedTypes)/type[@name = current()/@EntityType]">\r\n            <xsl:copy-of select="."/>\r\n          <\/xsl:if>\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:if test="($hasTypeFilter = \'false\') or exsl:node-set($allowedTypes)/type[@name = current()/@EntityType]">\r\n            <xsl:copy-of select="."/>\r\n          <\/xsl:if>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/xsl:for-each>\r\n  <\/xsl:variable>\r\n\r\n  \r\n  <xsl:choose>\r\n    <xsl:when test="function-available(\'msxsl:node-set\')">\r\n      <xsl:for-each select="msxsl:node-set($subset)/*[local-name() != \'FunctionImport\' or not(@IsBindable) or @IsBindable = \'false\']">\r\n        <xsl:apply-templates select="."><\/xsl:apply-templates>\r\n        <xsl:if test="position() != last()">,\r\n     <\/xsl:if>\r\n      <\/xsl:for-each>\r\n    <\/xsl:when>\r\n    <xsl:otherwise>\r\n      <xsl:for-each select="exsl:node-set($subset)/*[local-name() != \'FunctionImport\' or not(@IsBindable) or @IsBindable = \'false\']">\r\n        <xsl:apply-templates select="."><\/xsl:apply-templates>\r\n        <xsl:if test="position() != last()">,\r\n     <\/xsl:if>\r\n      <\/xsl:for-each>\r\n    <\/xsl:otherwise>\r\n  <\/xsl:choose>\r\n  });\r\n\r\n  $data.generatedContexts = $data.generatedContexts || [];\r\n  $data.generatedContexts.push(<xsl:value-of select="concat(concat($DefaultNamespace,../@Namespace), \'.\', @Name)" />);\r\n  <xsl:if test="$AutoCreateContext = \'true\'">\r\n  /*Context Instance*/\r\n  <xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="$ContextInstanceName" /> = new <xsl:value-of select="concat(concat($DefaultNamespace,../@Namespace), \'.\', @Name)" />({ name:\'oData\', oDataServiceHost: \'<xsl:value-of select="$SerivceUri" />\', maxDataServiceVersion: \'<xsl:value-of select="$MaxDataserviceVersion" />\' });\r\n<\/xsl:if>\r\n\r\n<\/xsl:for-each>\r\n      \r\n})(window, $data);\r\n      \r\n    <\/xsl:template>\r\n\r\n  <xsl:template match="edm:Key"><\/xsl:template>\r\n\r\n  <xsl:template match="edm:FunctionImport">\r\n    <xsl:text>\'<\/xsl:text>\r\n    <xsl:value-of select="@Name"/>\r\n    <xsl:text>\': { type: <\/xsl:text>\r\n    <xsl:choose>\r\n      <xsl:when test="@IsBindable = \'true\'">\r\n        <xsl:text>$data.ServiceAction<\/xsl:text>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:text>$data.ServiceOperation<\/xsl:text>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n\r\n    <xsl:apply-templates select="@*" mode="FunctionImport-mode"/>\r\n\r\n    <xsl:variable name="IsBindable">\r\n      <xsl:value-of select="@IsBindable"/>\r\n    <\/xsl:variable>\r\n    <xsl:text>, params: [<\/xsl:text>\r\n    <xsl:for-each select="edm:Parameter[($IsBindable = \'true\' and position() > 1) or (($IsBindable = \'false\' or $IsBindable = \'\') and position() > 0)]">\r\n      <xsl:text>{ name: \'<\/xsl:text>\r\n      <xsl:value-of select="@Name"/>\r\n      <xsl:text>\', type: \'<\/xsl:text>\r\n      <xsl:variable name="curr" select="@Type"/>\r\n      <xsl:choose>\r\n        <xsl:when test="$fullmetadata//edm:Schema[starts-with($curr, @Namespace)]">\r\n          <xsl:value-of select="concat($DefaultNamespace,$curr)" />\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:value-of select="$curr" />\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n      <xsl:text>\' }<\/xsl:text>\r\n      <xsl:if test="position() != last()">, <\/xsl:if>\r\n    <\/xsl:for-each>    \r\n    <xsl:text>]<\/xsl:text>\r\n\r\n    <xsl:text> }<\/xsl:text>\r\n  <\/xsl:template>\r\n  \r\n  <xsl:template match="@ReturnType" mode="FunctionImport-mode">\r\n    <xsl:text>, returnType: <\/xsl:text>\r\n    <xsl:choose>\r\n      <xsl:when test="not(.)">null<\/xsl:when>\r\n      <xsl:when test="starts-with(., \'Collection\')">$data.Queryable<\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:text>\'<\/xsl:text>\r\n        <xsl:variable name="curr" select="."/>\r\n        <xsl:choose>\r\n          <xsl:when test="$fullmetadata//edm:Schema[starts-with($curr, @Namespace)]">\r\n            <xsl:value-of select="concat($DefaultNamespace,$curr)" />\r\n          <\/xsl:when>\r\n          <xsl:otherwise>\r\n            <xsl:value-of select="$curr" />\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n        <xsl:text>\'<\/xsl:text>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n\r\n    <xsl:if test="starts-with(., \'Collection\')">\r\n      <xsl:variable name="len" select="string-length(.)-12"/>\r\n      <xsl:variable name="curr" select="substring(.,12,$len)"/>\r\n      <xsl:variable name="ElementType" >\r\n        <xsl:choose>\r\n          <xsl:when test="$fullmetadata//edm:Schema[starts-with($curr, @Namespace)]">\r\n            <xsl:value-of select="concat($DefaultNamespace,$curr)" />\r\n          <\/xsl:when>\r\n          <xsl:otherwise>\r\n            <xsl:value-of select="$curr" />\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:variable>\r\n      <xsl:text>, elementType: \'<\/xsl:text>\r\n      <xsl:value-of select="$ElementType"/>\r\n      <xsl:text>\'<\/xsl:text>\r\n    <\/xsl:if>\r\n  <\/xsl:template>\r\n  <xsl:template match="@Name" mode="FunctionImport-mode"><\/xsl:template>\r\n  <xsl:template match="@m:HttpMethod" mode="FunctionImport-mode">\r\n    <xsl:text>, method: \'<\/xsl:text>\r\n    <xsl:value-of select="."/>\r\n    <xsl:text>\'<\/xsl:text>\r\n  <\/xsl:template>\r\n  <xsl:template match="@IsBindable | @IsSideEffecting | @IsAlwaysBindable | @m:IsAlwaysBindable | @metadata:IsAlwaysBindable | @IsComposable" mode="FunctionImport-mode">\r\n    <xsl:text>, <\/xsl:text>\r\n    <xsl:call-template name="GetAttributeName">\r\n      <xsl:with-param name="Name" select="name()" />\r\n    <\/xsl:call-template>\r\n    <xsl:text>: <\/xsl:text>\r\n    <xsl:value-of select="."/>\r\n  <\/xsl:template>\r\n  <xsl:template match="@*" mode="FunctionImport-mode">\r\n    <xsl:text>, \'<\/xsl:text>\r\n    <xsl:call-template name="GetAttributeName">\r\n      <xsl:with-param name="Name" select="name()" />\r\n    <\/xsl:call-template>\r\n    <xsl:text>\': \'<\/xsl:text>\r\n    <xsl:value-of select="."/>        \r\n    <xsl:text>\'<\/xsl:text>\r\n  <\/xsl:template>\r\n  <xsl:template name="GetAttributeName">\r\n    <xsl:param name="Name" />\r\n    <xsl:choose>\r\n      <xsl:when test="contains($Name, \':\')">\r\n        <xsl:value-of select="substring-after($Name, \':\')"/>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <xsl:value-of select="$Name"/>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="edm:EntitySet">\'<xsl:value-of select="@Name"/>\': { type: <xsl:value-of select="$EntitySetBaseClass"  />, elementType: <xsl:value-of select="concat($DefaultNamespace,@EntityType)"/><xsl:text> <\/xsl:text><xsl:apply-templates select="." mode="Collection-Actions" />}<\/xsl:template>\r\n\r\n  <xsl:template match="edm:EntitySet" mode="Collection-Actions">\r\n    <xsl:variable name="CollectionType" select="concat(\'Collection(\', @EntityType, \')\')" />\r\n    <xsl:for-each select="//edm:FunctionImport[edm:Parameter[1]/@Type = $CollectionType]">\r\n      <xsl:if test="position() = 1">\r\n        <xsl:text>, actions: { \r\n        <\/xsl:text>\r\n      <\/xsl:if>\r\n        <xsl:apply-templates select="."><\/xsl:apply-templates><xsl:if test="position() != last()">,\r\n        <\/xsl:if>\r\n      <xsl:if test="position() = last()">\r\n        <xsl:text>\r\n      }<\/xsl:text>\r\n      <\/xsl:if>\r\n    <\/xsl:for-each>\r\n  <\/xsl:template>\r\n  \r\n  <xsl:template match="edm:Property | edm:NavigationProperty">\r\n    <property>\r\n    <xsl:variable name="memberDefinition">\r\n      <xsl:if test="parent::edm:EntityType/edm:Key/edm:PropertyRef[@Name = current()/@Name]"><attribute name="key">true<\/attribute><\/xsl:if>\r\n      <xsl:apply-templates select="@*[local-name() != \'Name\']" mode="render-field" />\r\n    <\/xsl:variable>\'<xsl:value-of select="@Name"/>\': { <xsl:choose><xsl:when test="function-available(\'msxsl:node-set\')"><xsl:for-each select="msxsl:node-set($memberDefinition)/*">\'<xsl:if test="@extended = \'true\'">$<\/xsl:if><xsl:value-of select="@name"/>\':<xsl:value-of select="."/>\r\n      <xsl:if test="position() != last()">,<xsl:text> <\/xsl:text>\r\n    <\/xsl:if> <\/xsl:for-each><\/xsl:when>\r\n  <xsl:otherwise><xsl:for-each select="exsl:node-set($memberDefinition)/*">\'<xsl:if test="@extended = \'true\'">$<\/xsl:if><xsl:value-of select="@name"/>\':<xsl:value-of select="."/>\r\n      <xsl:if test="position() != last()">,<xsl:text> <\/xsl:text>\r\n    <\/xsl:if> <\/xsl:for-each><\/xsl:otherwise>\r\n    <\/xsl:choose> }<\/property>\r\n<\/xsl:template>\r\n  \r\n  <xsl:template match="@Name" mode="render-field">\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@Type" mode="render-field">\r\n    <xsl:choose>\r\n      <xsl:when test="starts-with(., \'Collection\')">\r\n        <attribute name="type">\'Array\'<\/attribute>\r\n        <xsl:variable name="len" select="string-length(.)-12"/>\r\n        <xsl:variable name="currType" select="substring(.,12,$len)"/>\r\n        <xsl:choose>\r\n          <xsl:when test="starts-with($currType, ../../../@Namespace)">\r\n            <attribute name="elementType">\'<xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="$currType" />\'<\/attribute>\r\n          <\/xsl:when>\r\n          <xsl:otherwise>\r\n            <attribute name="elementType">\'<xsl:value-of select="$currType" />\'<\/attribute>\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:when>\r\n      <xsl:when test="starts-with(., ../../../@Namespace)">\r\n        <attribute name="type">\'<xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="."/>\'<\/attribute>\r\n      <\/xsl:when>\r\n      <xsl:otherwise>\r\n        <attribute name="type">\'<xsl:value-of select="."/>\'<\/attribute>\r\n      <\/xsl:otherwise>\r\n    <\/xsl:choose>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@ConcurrencyMode" mode="render-field">\r\n    <attribute name="concurrencyMode">$data.ConcurrencyMode.<xsl:value-of select="."/><\/attribute>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@Nullable" mode="render-field">\r\n    <attribute name="nullable"><xsl:value-of select="."/><\/attribute>\r\n    \r\n    <xsl:if test=". = \'false\'">\r\n      <xsl:choose>\r\n        <xsl:when test="parent::edm:Property/@annot:StoreGeneratedPattern = \'Identity\' or parent::edm:Property/@annot:StoreGeneratedPattern = \'Computed\'"><\/xsl:when>\r\n        <xsl:otherwise><attribute name="required">true<\/attribute><\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/xsl:if>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@annot:StoreGeneratedPattern" mode="render-field">\r\n    <xsl:if test=". != \'None\'"><attribute name="computed">true<\/attribute><\/xsl:if>    \r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@MaxLength" mode="render-field">\r\n    <attribute name="maxLength">\r\n      <xsl:choose>\r\n        <xsl:when test="string(.) = \'Max\'">Number.POSITIVE_INFINITY<\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:value-of select="."/>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/attribute>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@FixedLength | @Unicode | @Precision | @Scale" mode="render-field">\r\n  <\/xsl:template>\r\n  <xsl:template match="@*" mode="render-field">\r\n    <xsl:variable name="nameProp">\r\n      <xsl:choose>\r\n        <xsl:when test="substring-after(name(), \':\') != \'\'">\r\n          <xsl:value-of select="substring-after(name(), \':\')"/>\r\n        <\/xsl:when>\r\n        <xsl:otherwise>\r\n          <xsl:value-of select="name()"/>\r\n        <\/xsl:otherwise>\r\n      <\/xsl:choose>\r\n    <\/xsl:variable>\r\n    <xsl:element name="attribute"><xsl:attribute name="extended">true<\/xsl:attribute><xsl:attribute name="name"><xsl:value-of select="$nameProp"/><\/xsl:attribute>\'<xsl:value-of select="."/>\'<\/xsl:element>\r\n  <\/xsl:template>\r\n\r\n  <xsl:template match="@Relationship" mode="render-field">\r\n    <xsl:variable name="relationName" select="string(../@ToRole)"/>\r\n    <xsl:variable name="relationshipName" select="string(.)" />\r\n    <xsl:variable name="relation" select="key(\'associations\',string(.))/edm:End[@Role = $relationName]" />\r\n    <xsl:variable name="otherName" select="../@FromRole" />\r\n    <xsl:variable name="otherProp" select="//edm:NavigationProperty[@ToRole = $otherName and @Relationship = $relationshipName]" />\r\n    <xsl:variable name="m" select="$relation/@Multiplicity" />\r\n    <xsl:choose>\r\n      <xsl:when test="$m = \'*\'">\r\n        <attribute name="type">\'<xsl:value-of select="$CollectionBaseClass"/>\'<\/attribute>\r\n        <attribute name="elementType">\'<xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="$relation/@Type"/>\'<\/attribute>\r\n        <xsl:if test="not($otherProp/@Name)">\r\n          <attribute name="inverseProperty">\'$$unbound\'<\/attribute><\/xsl:if>\r\n        <xsl:if test="$otherProp/@Name">\r\n          <attribute name="inverseProperty">\'<xsl:value-of select="$otherProp/@Name"/>\'<\/attribute><\/xsl:if>\r\n      <\/xsl:when>\r\n      <xsl:when test="$m = \'0..1\'">\r\n        <attribute name="type">\'<xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="$relation/@Type"/>\'<\/attribute>\r\n        <xsl:choose>\r\n          <xsl:when test="$otherProp">\r\n            <attribute name="inverseProperty">\'<xsl:value-of select="$otherProp/@Name"/>\'<\/attribute>\r\n          <\/xsl:when >\r\n          <xsl:otherwise>\r\n            <attribute name="inverseProperty">\'$$unbound\'<\/attribute>\r\n            <xsl:message terminate="no">  Warning: inverseProperty other side missing: <xsl:value-of select="."/>\r\n          <\/xsl:message>\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:when>\r\n      <xsl:when test="$m = \'1\'">\r\n        <attribute name="type">\'<xsl:value-of select="$DefaultNamespace"/><xsl:value-of select="$relation/@Type"/>\'<\/attribute>\r\n        <attribute name="required">true<\/attribute>\r\n        <xsl:choose>\r\n          <xsl:when test="$otherProp">\r\n            <attribute name="inverseProperty">\'<xsl:value-of select="$otherProp/@Name"/>\'<\/attribute>\r\n          <\/xsl:when >\r\n          <xsl:otherwise>\r\n            <attribute name="inverseProperty">\'$$unbound\'<\/attribute>\r\n            <xsl:message terminate="no">\r\n              Warning: inverseProperty other side missing: <xsl:value-of select="."/>\r\n            <\/xsl:message>\r\n          <\/xsl:otherwise>\r\n        <\/xsl:choose>\r\n      <\/xsl:when>\r\n    <\/xsl:choose>\r\n  <\/xsl:template>\r\n\r\n\r\n  <xsl:template match="@FromRole | @ToRole" mode="render-field"><\/xsl:template>\r\n\r\n  <xsl:template match="*" mode="render-field">\r\n    <!--<unprocessed>!!<xsl:value-of select="name()"/>!!<\/unprocessed>-->\r\n    <xsl:message terminate="no">  Warning: <xsl:value-of select="../../@Name"/>.<xsl:value-of select="../@Name"/>:<xsl:value-of select="name()"/> is an unknown/unprocessed attribued<\/xsl:message>\r\n  <\/xsl:template>\r\n  <!--<xsl:template match="*">\r\n    !<xsl:value-of select="name()"/>!\r\n  <\/xsl:template>-->\r\n<\/xsl:stylesheet>\r\n'}});$data.MetadataLoader=new $data.MetadataLoaderClass;$data.service=function(n,t,i){function e(n){switch(typeof n){case"object":typeof n.success=="function"||typeof n.error=="function"?u=n:r=n;break;case"function":u=n}}var r,u,f;return e(t),e(i),typeof n=="object"&&(r=$data.typeSystem.extend(n,r),n=n.url,delete r.url),f=new $data.PromiseHandler,u=f.createCallback(u),$data.MetadataLoader.load(n,{success:function(n){var i=n.type,t;r&&(t=r.serviceName||r.storeAlias,t&&"addStore"in $data&&$data.addStore(t,n,r.isDefault===undefined||r.isDefault));u.success(n,i)},error:u.error},r),f.getPromise()},function(n){typeof jQuery!="undefined"&&(n.Class.define("$data.Deferred",n.PromiseHandlerBase,null,{constructor:function(){this.deferred=new $.Deferred},deferred:{},createCallback:function(t){t=n.typeSystem.createCallbackSetting(t);var i=this;return cbWrapper={success:function(){t.success.apply(i.deferred,arguments);i.deferred.resolve.apply(i.deferred,arguments)},error:function(){Array.prototype.push.call(arguments,i.deferred);t.error.apply(i.deferred,arguments)},notify:function(){t.notify.apply(i.deferred,arguments);i.deferred.notify.apply(i.deferred,arguments)}}},getPromise:function(){return this.deferred.promise()}},null),n.PromiseHandler=n.Deferred)}($data),function(n){n.initService=function(t,i){var u=new n.PromiseHandler,r,f,e;return typeof t=="object"?(r=t,f=r.isSSL||r.isSSL===undefined?"https":"http",e=r.port?":"+r.port:"",t=typeof r.license=="string"&&r.license.toLowerCase()==="business"?r.appId&&r.serviceName?f+"://"+r.appId+".jaystack.net"+e+"/"+r.serviceName:r.url:r.ownerId&&r.appId&&r.serviceName?f+"://open.jaystack.net/"+r.ownerId+"/"+r.appId+"/api/"+r.serviceName:r.url,delete r.url,r=n.typeSystem.extend(r,i)):r=i,n.service(t,r).then(function(n){var t=n();return t.onReady().then(function(t){t.serviceFactory=n;u.deferred.resolve(t,n,n.type)}).fail(function(){u.deferred.reject.apply(u.deferred,arguments)})}).fail(function(){u.deferred.reject.apply(u.deferred,arguments)}),u.getPromise()}}($data);$data.Class.define("$data.dbClient.DbCommand",null,null,{connection:{},parameters:{},execute:function(){Guard.raise("Pure class")}},null);$data.Class.define("$data.dbClient.DbConnection",null,null,{connectionParams:{},database:{},isOpen:function(){Guard.raise("Pure class")},open:function(){Guard.raise("Pure class")},close:function(){Guard.raise("Pure class")},createCommand:function(){Guard.raise("Pure class")}},null);$data.Class.define("$data.dbClient.openDatabaseClient.OpenDbCommand",$data.dbClient.DbCommand,null,{constructor:function(n,t,i){this.query=t;this.connection=n;this.parameters=i},executeNonQuery:function(n,t,i){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error,t,i)},executeQuery:function(n,t,i){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error,t,i)},exec:function(n,t,i,r,u,f){this.connection.open({error:r,success:function(f){function h(){--o==0&&i(s?e[0]:e,u)}var s=!1,e,o;n instanceof Array||(s=!0,n=[n],t=[t]);e=[];o=0;n.forEach(function(i,u){o++;i?f.executeSql(n[u],t[u],function(n,t){var i={rows:[]},f,r;try{i.insertId=t.insertId}catch(o){}if(typeof i.insertId!="number")for(i.rowsAffected=t.rowsAffected,f=t.rows.length,r=0;r<f;r++)i.rows.push(t.rows.item(r));e[u]=i;h(n)},function(n,t){var f=i,e=u;return r&&r(t),!0}):(e[u]=null,h())})}},u,f)}},null);$data.Class.define("$data.dbClient.openDatabaseClient.OpenDbConnection",$data.dbClient.DbConnection,null,{constructor:function(n){this.connectionParams=n},isOpen:function(){return this.database!==null&&this.database!==undefined&&this.transaction!==null&&this.transaction!==undefined},open:function(n,t,i){if(i===undefined&&(i=!0),n.oncomplete=n.oncomplete||function(){},t)n.success(t.transaction);else if(this.database)i?this.database.transaction(function(t){n.success(t)},n.error,n.oncomplete):this.database.readTransaction(function(t){n.success(t)},n.error,n.oncomplete);else{var r=this.connectionParams,u=this;this.database=openDatabase(r.fileName,r.version,r.displayName,r.maxSize);this.database.readTransaction||(this.database.readTransaction=function(){u.database.transaction.apply(u.database,arguments)});i?this.database.transaction(function(t){n.success(t)},n.error,n.oncomplete):this.database.readTransaction(function(t){n.success(t)},n.error,n.oncomplete)}},close:function(){this.transaction=undefined;this.database=undefined},createCommand:function(n,t){return new $data.dbClient.openDatabaseClient.OpenDbCommand(this,n,t)}},null);$data.Class.define("$data.dbClient.jayStorageClient.JayStorageCommand",$data.dbClient.DbCommand,null,{constructor:function(n,t,i){this.query=t;this.connection=n;this.parameters=i},executeNonQuery:function(n){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error)},executeQuery:function(n){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error)},exec:function(n,t,i,r){var f;(t==null||t==undefined)&&(t={});f=!1;n instanceof Array||(f=!0,n=[n],t=[t]);var s=this,u=[],o=n.length,e=function(){--o==0&&i(f?u[0]:u)};n.forEach(function(n,i){n?$data.ajax({url:"http"+(this.connection.connectionParams.storage.ssl?"s":"")+"://"+this.connection.connectionParams.storage.src.replace("http://","").replace("https://","")+"?db="+this.connection.connectionParams.storage.key,type:"POST",headers:{"X-PINGOTHER":"pingpong"},data:{query:n,parameters:t[i]},dataType:"json",contentType:"application/json;charset=UTF-8",success:function(n){if(n&&n.error){console.log("JayStorage error",n.error);r(n.error);return}u[i]=this.lastID?{insertId:this.lastID,rows:(n||{rows:[]}).rows}:{rows:(n||{rows:[]}).rows};e()}}):(u[i]=null,e())},this)}},null);$data.Class.define("$data.dbClient.jayStorageClient.JayStorageConnection",$data.dbClient.DbConnection,null,{constructor:function(n){this.connectionParams=n},isOpen:function(){return!0},open:function(){},close:function(){},createCommand:function(n,t){return new $data.dbClient.jayStorageClient.JayStorageCommand(this,n,t)}},null);$data.Class.define("$data.dbClient.sqLiteNJClient.SqLiteNjCommand",$data.dbClient.DbCommand,null,{constructor:function(n,t,i){this.query=t;this.connection=n;this.parameters=i},executeNonQuery:function(n){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error)},executeQuery:function(n){n=$data.typeSystem.createCallbackSetting(n);this.exec(this.query,this.parameters,n.success,n.error)},exec:function(n,t,i,r){var f;this.connection.isOpen()||this.connection.open();(t==null||t==undefined)&&(t={});f=!1;n instanceof Array||(f=!0,n=[n],t=[t]);var e=this,u=[],o=0,s=function(){--o==0&&(e.connection.database.exec("COMMIT"),i(f?u[0]:u))};e.connection.database.exec("BEGIN");n.forEach(function(n,i){if(o++,n){var h=function(n,t){if(n!=null){r(n);return}u[i]=this.lastID?{insertId:this.lastID,rows:[]}:{rows:t};s()},f=e.connection.database.prepare(n,t[i]);n.indexOf("SELECT")==0?f.all(h):f.run(h);f.finalize()}else u[i]=null,s()},this)}},null);$data.Class.define("$data.dbClient.sqLiteNJClient.SqLiteNjConnection",$data.dbClient.DbConnection,null,{constructor:function(n){this.connectionParams=n},isOpen:function(){return this.database!==null&&this.database!==undefined},open:function(){if(this.database==null){var n=this.connectionParams;this.database=new sqLiteModule.Database(n.fileName)}},close:function(){},createCommand:function(n,t){return new $data.dbClient.sqLiteNJClient.SqLiteNjCommand(this,n,t)}},null);$data.SqLiteConverter={fromDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":function(n){return n!=null?new Date(n):n},"$data.DateTimeOffset":function(n){return n!=null?new Date(n):n},"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":function(n){return n===1?!0:!1},"$data.Blob":function(n){return n?$data.Container.convertTo(atob(n),$data.Blob):n},"$data.Array":function(){return arguments.length==0?[]:arguments[0]?JSON.parse(arguments[0]):undefined},"$data.Guid":function(n){return n?$data.parseGuid(n).toString():n},"$data.GeographyPoint":function(n){return n?new $data.GeographyPoint(JSON.parse(n)):n},"$data.GeographyLineString":function(n){return n?new $data.GeographyLineString(JSON.parse(n)):n},"$data.GeographyPolygon":function(n){return n?new $data.GeographyPolygon(JSON.parse(n)):n},"$data.GeographyMultiPoint":function(n){return n?new $data.GeographyMultiPoint(JSON.parse(n)):n},"$data.GeographyMultiLineString":function(n){return n?new $data.GeographyMultiLineString(JSON.parse(n)):n},"$data.GeographyMultiPolygon":function(n){return n?new $data.GeographyMultiPolygon(JSON.parse(n)):n},"$data.GeographyCollection":function(n){return n?new $data.GeographyCollection(JSON.parse(n)):n},"$data.GeometryPoint":function(n){return n?new $data.GeometryPoint(JSON.parse(n)):n},"$data.GeometryLineString":function(n){return n?new $data.GeometryLineString(JSON.parse(n)):n},"$data.GeometryPolygon":function(n){return n?new $data.GeometryPolygon(JSON.parse(n)):n},"$data.GeometryMultiPoint":function(n){return n?new $data.GeometryMultiPoint(JSON.parse(n)):n},"$data.GeometryMultiLineString":function(n){return n?new $data.GeometryMultiLineString(JSON.parse(n)):n},"$data.GeometryMultiPolygon":function(n){return n?new $data.GeometryMultiPolygon(JSON.parse(n)):n},"$data.GeometryCollection":function(n){return n?new $data.GeometryCollection(JSON.parse(n)):n}},toDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":function(n){return n?n.valueOf():null},"$data.DateTimeOffset":function(n){return n?n.valueOf():null},"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":function(n){return n?1:0},"$data.Blob":function(n){return n?$data.Blob.toBase64(n):n},"$data.Array":function(n){return n?JSON.stringify(n):n},"$data.Guid":function(n){return n?n.toString():n},"$data.Object":function(n){if(n===null)return null;throw"Not supported exception";},"$data.GeographyPoint":function(n){return n?JSON.stringify(n):n},"$data.GeographyLineString":function(n){return n?JSON.stringify(n):n},"$data.GeographyPolygon":function(n){return n?JSON.stringify(n):n},"$data.GeographyMultiPoint":function(n){return n?JSON.stringify(n):n},"$data.GeographyMultiLineString":function(n){return n?JSON.stringify(n):n},"$data.GeographyMultiPolygon":function(n){return n?JSON.stringify(n):n},"$data.GeographyCollection":function(n){return n?JSON.stringify(n):n},"$data.GeometryPoint":function(n){return n?JSON.stringify(n):n},"$data.GeometryLineString":function(n){return n?JSON.stringify(n):n},"$data.GeometryPolygon":function(n){return n?JSON.stringify(n):n},"$data.GeometryMultiPoint":function(n){return n?JSON.stringify(n):n},"$data.GeometryMultiLineString":function(n){return n?JSON.stringify(n):n},"$data.GeometryMultiPolygon":function(n){return n?JSON.stringify(n):n},"$data.GeometryCollection":function(n){return n?JSON.stringify(n):n}}};$data.SqLiteFieldMapping={"$data.Byte":"INTEGER","$data.SByte":"INTEGER","$data.Decimal":"TEXT","$data.Float":"REAL","$data.Int16":"INTEGER","$data.Int64":"TEXT","$data.Integer":"INTEGER","$data.Int32":"INTEGER","$data.Number":"REAL","$data.Date":"REAL","$data.Time":"TEXT","$data.DateTimeOffset":"REAL","$data.String":"TEXT","$data.Boolean":"INTEGER","$data.Blob":"BLOB","$data.Array":"TEXT","$data.Guid":"TEXT","$data.Object":"TEXT","$data.GeographyPoint":"TEXT","$data.GeographyLineString":"TEXT","$data.GeographyPolygon":"TEXT","$data.GeographyMultiPoint":"TEXT","$data.GeographyMultiLineString":"TEXT","$data.GeographyMultiPolygon":"TEXT","$data.GeographyCollection":"TEXT","$data.GeometryPoint":"TEXT","$data.GeometryLineString":"TEXT","$data.GeometryPolygon":"TEXT","$data.GeometryMultiPoint":"TEXT","$data.GeometryMultiLineString":"TEXT","$data.GeometryMultiPolygon":"TEXT","$data.GeometryCollection":"TEXT"};$data.Class.define("$data.storageProviders.sqLite.SqLiteStorageProvider",$data.StorageProviderBase,null,{constructor:function(n,t){this.SqlCommands=[];this.context=t;this.providerConfiguration=$data.typeSystem.extend({databaseName:$data.defaults.defaultDatabaseName,version:"",displayName:"JayData default db",maxSize:1048576,dbCreation:$data.storageProviders.DbCreationType.DropTableIfChanged},n);this.providerName="";for(var i in $data.RegisteredStorageProviders)$data.RegisteredStorageProviders[i]===this.getType()&&(this.providerName=i);this.context&&this.context._buildDbType_generateConvertToFunction&&this.buildDbType_generateConvertToFunction&&(this.context._buildDbType_generateConvertToFunction=this.buildDbType_generateConvertToFunction);this.context&&this.context._buildDbType_modifyInstanceDefinition&&this.buildDbType_modifyInstanceDefinition&&(this.context._buildDbType_modifyInstanceDefinition=this.buildDbType_modifyInstanceDefinition)},_createSqlConnection:function(){var t={fileName:this.providerConfiguration.databaseName,version:"",displayName:this.providerConfiguration.displayName,maxSize:this.providerConfiguration.maxSize,storage:this.providerConfiguration.storage},n;return this.connection?this.connection:(n=null,n=this.providerConfiguration.storage?new $data.dbClient.jayStorageClient.JayStorageConnection(t):typeof sqLiteModule!="undefined"?new $data.dbClient.sqLiteNJClient.SqLiteNjConnection(t):new $data.dbClient.openDatabaseClient.OpenDbConnection(t),this.connection=n,n)},supportedDataTypes:{value:[$data.Array,$data.Integer,$data.String,$data.Number,$data.Blob,$data.Boolean,$data.Date,$data.Guid,$data.GeographyPoint,$data.GeographyLineString,$data.GeographyPolygon,$data.GeographyMultiPoint,$data.GeographyMultiLineString,$data.GeographyMultiPolygon,$data.GeographyCollection,$data.GeometryPoint,$data.GeometryLineString,$data.GeometryPolygon,$data.GeometryMultiPoint,$data.GeometryMultiLineString,$data.GeometryMultiPolygon,$data.GeometryCollection,$data.Byte,$data.SByte,$data.Decimal,$data.Float,$data.Int16,$data.Int32,$data.Int64,$data.Time,$data.DateTimeOffset],writable:!1},fieldConverter:{value:$data.SqLiteConverter},supportedFieldOperations:{value:{length:{dataType:"number",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression]},substr:{dataType:"string",allowedIn:$data.Expressions.FilterExpression,parameters:[{name:"startFrom",dataType:"number"},{name:"length",dataType:"number"}]},toLowerCase:{dataType:"string",mapTo:"lower"},toUpperCase:{dataType:"string",mapTo:"upper"},contains:{mapTo:"like",dataType:"boolean",allowedIn:$data.Expressions.FilterExpression,parameters:[{name:"strFragment",dataType:"string",prefix:"%",suffix:"%"}]},startsWith:{mapTo:"like",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression],parameters:[{name:"strFragment",dataType:"string",suffix:"%"}]},endsWith:{mapTo:"like",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression],parameters:[{name:"strFragment",dataType:"string",prefix:"%"}]},trim:{dataType:$data.String,allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression],mapTo:"trim",parameters:[{name:"@expression",dataType:$data.String},{name:"chars",dataType:$data.String}]},ltrim:{dataType:$data.String,allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression],mapTo:"ltrim",parameters:[{name:"@expression",dataType:$data.String},{name:"chars",dataType:$data.String}]},rtrim:{dataType:$data.String,allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.ProjectionExpression],mapTo:"rtrim",parameters:[{name:"@expression",dataType:$data.String},{name:"chars",dataType:$data.String}]}},enumerable:!0,writable:!0},supportedBinaryOperators:{value:{equal:{mapTo:"=",dataType:"boolean",nullMap:" is null"},notEqual:{mapTo:"!=",dataType:"boolean",nullMap:" is not null"},equalTyped:{mapTo:"=",dataType:"boolean"},notEqualTyped:{mapTo:"!=",dataType:"boolean"},greaterThan:{mapTo:">",dataType:"boolean"},greaterThanOrEqual:{mapTo:">=",dataType:"boolean"},lessThan:{mapTo:"<",dataType:"boolean"},lessThenOrEqual:{mapTo:"<=",dataType:"boolean"},or:{mapTo:"OR",dataType:"boolean"},and:{mapTo:"AND",dataType:"boolean"},add:{mapTo:"+",dataType:"number"},divide:{mapTo:"/"},multiply:{mapTo:"*"},subtract:{mapTo:"-"},modulo:{mapTo:"%"},orBitwise:{maptTo:"|"},andBitwsise:{mapTo:"&"},"in":{mapTo:"in",dataType:"boolean"}}},supportedUnaryOperators:{value:{not:{mapTo:"not"},positive:{mapTo:"+"},negative:{maptTo:"-"}}},supportedSetOperations:{value:{filter:{},map:{},length:{},forEach:{},toArray:{},single:{},take:{},skip:{},orderBy:{},orderByDescending:{},first:{},include:{}},enumerable:!0,writable:!0},supportedAutoincrementKeys:{value:{"$data.Integer":!0,"$data.Int32":!0,"$data.Guid":function(){return $data.createGuid()}}},initializeStore:function(n){n=$data.typeSystem.createCallbackSetting(n);this.context._storageModel.forEach(function(n){this.SqlCommands.push(this.createSqlFromStorageModel(n)+" ")},this);var i=this._createSqlConnection(),r=i.createCommand("SELECT * FROM sqlite_master WHERE type = 'table'",null),t=this;r.executeQuery({success:function(r){for(var h,c,a,s,f,v,y,l,o,e={},u=0;u<r.rows.length;u++)h=r.rows[u],e[h.tbl_name]=h;switch(t.providerConfiguration.dbCreation){case $data.storageProviders.DbCreationType.Merge:Guard.raise(new Exception("Not supported db creation type"));break;case $data.storageProviders.DbCreationType.DropTableIfChanged:for(c=[],u=0;u<t.SqlCommands.length;u++)t.SqlCommands[u]!=""&&(a=new RegExp("^CREATE TABLE IF NOT EXISTS ([^ ]*) (\\(.*\\))","g"),s=a.exec(t.SqlCommands[u]),s&&(f=s[1],v=s[2],e[f.slice(1,f.length-1)]&&(y=new RegExp("\\(.*\\)","g"),l=e[f.slice(1,f.length-1)].sql.match(y),l&&v.toLowerCase()==l[0].toLowerCase()||c.push("DROP TABLE IF EXISTS ["+e[f.slice(1,f.length-1)].tbl_name+"];"))));t.SqlCommands=t.SqlCommands.concat(c);break;case $data.storageProviders.DbCreationType.DropAllExistingTables:for(o in e)!o||o.match("^__")||o.match("^sqlite_")||t.SqlCommands.push("DROP TABLE IF EXISTS ["+e[o].tbl_name+"];")}t._runSqlCommands(i,{success:n.success,error:n.error})},error:n.error})},executeQuery:function(n,t){var r,i,u,f;t=$data.typeSystem.createCallbackSetting(t);r=this._createSqlConnection();i=this._compile(n);n.actionPack=i.actions;n.sqlConvertMetadata=i.converter;n.modelBinderConfig=i.modelBinderConfig;u=r.createCommand(i.sqlText,i.params);f=this;u.executeQuery({success:function(i){t.success&&(n.rawDataList=i.rows,t.success(n))},error:t.error})},_compile:function(n){var t=new $data.storageProviders.sqLite.SQLiteCompiler,i=t.compile(n);return i.hasSelect=t.select!=null,i},getTraceString:function(n){return this._compile(n)},_runSqlCommands:function(n,t){if(this.SqlCommands&&this.SqlCommands.length>0){var r=this.SqlCommands.pop(),u=n.createCommand(r,null),i=this,f=function(){i._runSqlCommands.apply(i,[n,t])};u.executeQuery({success:f,error:t.error})}else t.success(this.context)},setContext:function(n){this.context=n},saveChanges:function(n,t){var i=this._createSqlConnection(),u=this,r=this.buildIndependentBlocks(t);this.saveIndependentBlocks(t,r,i,n)},saveIndependentBlocks:function(n,t,i,r){function e(){if(f.length===0){r.success();return}var t=f.shift(),n=t.map(function(n){var t=u.context._storageModel.getStorageModel(n.data.getType()).PhysicalType;return n.physicalData=t.convertTo(n.data),n},this);try{u.saveIndependentItems(n,i,{success:function(){u.postProcessItems(n);e()},error:r.error})}catch(o){r.error(o)}}var u=this,f=[].concat(t);e()},saveIndependentItems:function(n,t,i){function f(n,t){var i={query:[],param:[]};return t.forEach(function(n,t){n&&(n.query&&(i.query[t]=n.query),n.param&&(i.param[t]=n.param))}),n.createCommand(i.query,i.param)}var u=this,r=n.map(function(n){return u.saveEntitySet(n)}),e;if(r=r.filter(function(n){return n}),r.length===0){i.success(n);return}e=f(t,r);e.executeQuery({success:function(r){var o=r.map(function(i,r){return i&&i.insertId?u.save_reloadSavedEntity(i.insertId,n[r].entitySet.tableName,t):null}),e=f(t,o);e.query.length>0?e.executeQuery(function(t){t.forEach(function(t,i){t&&t.rows&&(n[i].physicalData.initData=t.rows[0])});i.success(n)}):i.success(0)},error:i.error})},postProcessItems:function(n){function i(n){var i=n.name,r;return t.hasOwnProperty(i)?t[i]:(r=n.memberDefinitions.getPublicMappedProperties().filter(function(n){return n.computed}),t[i]=r)}var t={};n.forEach(function(n){n.physicalData&&i(n.data.getType()).forEach(function(t){n.data[t.name]=n.physicalData[t.name]},this)},this)},saveEntitySet:function(n){switch(n.data.entityState){case $data.EntityState.Added:return this.save_NewEntity(n);case $data.EntityState.Deleted:return this.save_DeleteEntity(n);case $data.EntityState.Modified:return this.save_UpdateEntity(n);case $data.EntityState.Unchanged:return;default:Guard.raise(new Exception("Not supported entity state"))}},save_DeleteEntity:function(n){for(var t="DELETE FROM ["+n.entitySet.tableName+"] WHERE(",i=!1,u=!1,r=[];!i;)n.physicalData.constructor.memberDefinitions.getPublicMappedProperties().forEach(function(f){if(i&&!t.match(" AND $")&&(t+=" AND "),f.key||u){t+="(["+f.name+"] == ?)";var e=n.data.getType().memberDefinitions.getMember(f.name);e&&e.converter&&e.converter[this.providerName]&&typeof e.converter[this.providerName].toDb=="function"?r.push(e.converter[this.providerName].toDb(n.data[e.name],e,this.context,e.dataType)):r.push(this.fieldConverter.toDb[Container.resolveName(f.dataType)](n.data[f.name]));i=!0}},this),i||(u=!0);return t.match(" AND $")&&(t=t.slice(0,t.length-5)),t+=");",{query:t,param:r}},save_UpdateEntity:function(n){var t=" SET ",i="WHERE(",o=n.entitySet.createNew.memberDefinitions.length,r=!1,u=[],f=[],e;return n.physicalData.constructor.memberDefinitions.getPublicMappedProperties().forEach(function(e){var o;n.physicalData[e.name]!==undefined&&(r&&!i.match(" AND $")&&(i+=" AND "),t.length>5&&!t.match(",$")&&(t+=","),e.key?(i+="(["+e.name+"] == ?)",o=n.data.getType().memberDefinitions.getMember(e.name),o&&o.converter&&o.converter[this.providerName]&&typeof o.converter[this.providerName].toDb=="function"?u.push(o.converter[this.providerName].toDb(n.physicalData[o.name],e,this.context,o.dataType)):u.push(this.fieldConverter.toDb[Container.resolveName(e.dataType)](n.physicalData[e.name])),r=!0):(t+="["+e.name+"] = ?",o=n.data.getType().memberDefinitions.getMember(e.name),o&&o.converter&&o.converter[this.providerName]&&typeof o.converter[this.providerName].toDb=="function"?f.push(e.converter[this.providerName].toDb(n.physicalData[o.name],o,this.context,o.dataType)):f.push(this.fieldConverter.toDb[Container.resolveName(e.dataType)](n.physicalData[e.name]))))},this),r||Guard.raise(new Exception("Not supported UPDATE function without primary key!")),i.match(" AND $")&&(i=i.slice(0,i.length-5)),t.match(",$")&&(t=t.slice(0,t.length-1)),e="UPDATE ["+n.entitySet.tableName+"]"+t+" "+i+");",{query:e,param:f.concat(u)}},save_NewEntity:function(n){var u="INSERT INTO ["+n.entitySet.tableName+"](",t="",i="",r=[];return n.physicalData.constructor.memberDefinitions.getPublicMappedProperties().forEach(function(u){var o,e,f;if(u.key&&!u.computed&&Object.isNullOrUndefined(n.physicalData[u.name])){Guard.raise(new Exception("Key is not set","Value exception",n));return}u.key&&u.computed&&Object.isNullOrUndefined(n.physicalData[u.name])&&(o=Container.resolveName(u.type),typeof this.supportedAutoincrementKeys[o]=="function"&&(n.physicalData[u.name]=this.supportedAutoincrementKeys[o]()));t.length>0&&t[t.length-1]!=","&&(t+=",",i+=",");e=u.name;n.physicalData[e]!==undefined&&u.dataType&&(!u.dataType.isAssignableTo||u.dataType.isAssignableTo&&!u.dataType.isAssignableTo($data.EntitySet))&&(i+="?",t+="["+e+"]",f=n.data.getType().memberDefinitions.getMember(u.name),f&&f.converter&&f.converter[this.providerName]&&typeof f.converter[this.providerName].toDb=="function"?r.push(f.converter[this.providerName].toDb(n.physicalData[e],f,this.context,f.dataType)):r.push(this.fieldConverter.toDb[Container.resolveName(u.dataType)](n.physicalData[e])))},this),r.length<1?u="INSERT INTO ["+n.entitySet.tableName+"] Default values":(t[t.length-1]==","&&(t=t.slice(0,t.length-1)),i[i.length-1]==","&&(i=i.slice(0,i.length-1)),u+=t+") VALUES("+i+");"),{query:u,param:r}},save_reloadSavedEntity:function(n,t){return{query:"SELECT * FROM "+t+" WHERE rowid=?",param:[n]}},createSqlFromStorageModel:function(n){var u,i,t,r;return(n===undefined||n===null||n.PhysicalType===undefined)&&Guard.raise("StorageModel not contains physical entity definition"),u=0,i=0,n.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(n){n.key&&u++;n.computed&&i++},this),i===1&&u>1&&Guard.raise(new Exception("Do not use computed field with multiple primary key!")),i>1&&u>1&&Guard.raise(new Exception("Do not use multiple computed field!")),n.PhysicalType.memberDefinitions.getKeyProperties().forEach(function(n){var t=Container.resolveName(n.type);!n.computed||t in this.supportedAutoincrementKeys||console.log("WARRNING! '"+t+"' not supported as computed Key!")},this),t="CREATE TABLE IF NOT EXISTS ["+n.TableName+"] (",r=",PRIMARY KEY (",n.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(u,f){f>0&&!t.match(", $")&&!t.match("\\($")&&(t+=", ");t+=this.createSqlFragmentFromField(u,i===1,n);i===0&&u.key&&(r.length>14&&!r.match(", $")&&(r+=", "),r+="["+u.name+"]")},this),t.match(", $")&&(t=t.substr(0,t.length-2)),i===0&&r.length>14&&(t+=r+")"),t+=");"},createSqlFragmentFromField:function(n,t,i){if("schemaCreate"in n&&n.schemaCreate)return n.schemaCreate(n);var r=new this.FieldTypeBuilder(n,this,t,i);return r.build()},FieldTypeBuilder:function(n,t,i,r){this.fieldDef="";this.fld=n;this.provider=t;this.parsePk=i;this.entitySet=r;this.build=function(){var t=Container.resolveName(this.fld.dataType),n=$data.SqLiteFieldMapping[t];return n?this.buildFieldNameAndType(n):this.buildRelations(),this.fieldDef};this.buildFieldNameAndType=function(n){this.fieldDef="["+this.fld.name+"] "+n;this.parsePk?this.buildPrimaryKey():this.buildNotNull()};this.buildPrimaryKey=function(){if(this.fld.key){this.fieldDef+=" PRIMARY KEY";var n=Container.resolveName(this.fld.dataType);this.provider.supportedAutoincrementKeys[n]===!0&&this.buildAutoIncrement()}else this.buildNotNull()};this.buildNotNull=function(){this.fld.required&&(this.fieldDef+=" NOT NULL")};this.buildAutoIncrement=function(){this.fld.computed&&(this.fieldDef+=" AUTOINCREMENT")}}},{isSupported:{get:function(){return"openDatabase"in window},set:function(){}}});$data.storageProviders.sqLite.SqLiteStorageProvider.isSupported&&($data.StorageProviderBase.registerProvider("webSql",$data.storageProviders.sqLite.SqLiteStorageProvider),$data.StorageProviderBase.registerProvider("sqLite",$data.storageProviders.sqLite.SqLiteStorageProvider),$data.webSqlProvider=$data.storageProviders.sqLite.SqLiteStorageProvider);SqlStatementBlocks={beginGroup:"(",endGroup:")",nameSeparator:".",valueSeparator:", ",select:"SELECT ",where:" WHERE ",from:" FROM ",skip:" OFFSET ",take:" LIMIT ",parameter:"?",order:" ORDER BY ",as:" AS ",scalarFieldName:"d",rowIdName:"rowid$$",count:"select count(*) cnt from ("};$C("$data.sqLite.SqlBuilder",$data.queryBuilder,null,{constructor:function(n,t){this.sets=n;this.entityContext=t},getExpressionAlias:function(n){var t=this.sets.indexOf(n);return t==-1&&(t=this.sets.push(n)-1),"T"+t}});$C("$data.sqLite.SqlCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n,t){this.queryExpression=n;this.sets=t.sets;this.infos=t.infos;this.entityContext=t.entityContext;this.associations=[];this.filters=[];this.newFilters={};this.sortedFilterPart=["projection","from","filter","order","take","skip"]},compile:function(){var n=$data.sqLite.SqlBuilder.create(this.sets,this.entityContext),t;this.Visit(this.queryExpression,n);n.getTextPart("projection")===undefined&&this.VisitDefaultProjection(n);n.selectTextPart("result");this.sortedFilterPart.forEach(function(t){var t=n.getTextPart(t);t&&(n.addText(t.text),n.selectedFragment.params=n.selectedFragment.params.concat(t.params))},this);t=n.getTextPart("count");t!==undefined&&(n.selectedFragment.text=t.text+n.selectedFragment.text,n.addText(SqlStatementBlocks.endGroup),n.selectedFragment.params=n.selectedFragment.params.concat(t.params));n.resetModelBinderProperty();this.filters.push(n)},VisitToArrayExpression:function(n,t){this.Visit(n.source,t)},VisitCountExpression:function(n,t){this.Visit(n.source,t);t.selectTextPart("count");t.addText(SqlStatementBlocks.count)},VisitFilterExpression:function(n,t){this.Visit(n.source,t);t.selectTextPart("filter");t.addText(SqlStatementBlocks.where);var i=$data.sqLite.SqlFilterCompiler.create();return i.Visit(n.selector,t),n},VisitOrderExpression:function(n,t){this.Visit(n.source,t);t.selectTextPart("order");this.addOrders?t.addText(SqlStatementBlocks.valueSeparator):(this.addOrders=!0,t.addText(SqlStatementBlocks.order));var i=$data.sqLite.SqlOrderCompiler.create();return i.Visit(n,t),n},VisitPagingExpression:function(n,t){this.Visit(n.source,t);switch(n.nodeType){case $data.Expressions.ExpressionType.Skip:t.selectTextPart("skip");t.addText(SqlStatementBlocks.skip);break;case $data.Expressions.ExpressionType.Take:t.selectTextPart("take");t.addText(SqlStatementBlocks.take);break;default:Guard.raise("Not supported nodeType")}var i=$data.sqLite.SqlPagingCompiler.create();return i.Visit(n,t),n},VisitProjectionExpression:function(n,t){this.Visit(n.source,t);t.selectTextPart("projection");this.hasProjection=!0;t.addText(SqlStatementBlocks.select);var i=$data.sqLite.SqlProjectionCompiler.create();i.Visit(n,t)},VisitEntitySetExpression:function(n,t){t.selectTextPart("from");t.addText(SqlStatementBlocks.from);t.sets.forEach(function(n,i){var u;if(i>0&&t.addText(" \n\tLEFT OUTER JOIN "),u=t.getExpressionAlias(n),t.addText(n.instance.tableName+" "),t.addText(u),i>0){t.addText(" ON (");var r=this.infos[i],o="T"+r.AliasNumber,s=r.NavigationPath.substring(0,r.NavigationPath.lastIndexOf(".")),f=this.infos.filter(function(n){return n.NavigationPath==s},this),e="T0";f.length>0&&(e="T"+f[0].AliasNumber);r.Association.associationInfo.ReferentialConstraint.forEach(function(n,i){i>0&&t.addText(" AND ");t.addText(e+"."+n[r.Association.associationInfo.From]);t.addText(" = ");t.addText(o+"."+n[r.Association.associationInfo.To])},this);t.addText(")")}},this)},VisitDefaultProjection:function(n){n.selectTextPart("projection");var t=this.infos.filter(function(n){return n.IsMapped}).length>1;n.sets.length>1?(n.addText(SqlStatementBlocks.select),n.sets.forEach(function(i,r){if(this.infos[r].IsMapped){var u=n.getExpressionAlias(i);i.storageModel.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(i,f){(f>0||r>0)&&n.addText(SqlStatementBlocks.valueSeparator);n.addText(u+".");n.addText(i.name);t&&(n.addText(SqlStatementBlocks.as),n.addText(u+"__"+i.name))},this)}},this)):n.addText("SELECT *")}});$data.Expressions.ExpressionNode.prototype.monitor=function(n,t){var i=$data.sqLite.SqlExpressionMonitor.create(n);return i.Visit(this,t)};$C("$data.storageProviders.sqLite.SQLiteCompiler",null,null,{compile:function(n){var f=n.expression,t={sets:[],infos:[],entityContext:n.context},e=f.monitor({MonitorEntitySetExpression:function(n,t){n.source instanceof $data.Expressions.EntityContextExpression&&t.sets.indexOf(n)==-1&&(this.backupEntitySetExpression=n)},VisitCountExpression:function(n,t){return t.hasCountFrameOperator=!0,n},MutateIncludeExpression:function(n,t){var i=null,r;if(t.hasCountFrameOperator)i=n.source;else{r=n.selector.value;Container.createCodeExpression("function(it){return it."+r+";}",null);var u=Container.createCodeParser(this.backupEntitySetExpression.source.instance).createExpression("function(it){return it."+r+";}"),f=Container.createCodeToEntityConverter(this.backupEntitySetExpression.source.instance),e=f.Visit(u,{queryParameters:undefined,lambdaParameters:[this.backupEntitySetExpression]});i=Container.createIncludeExpression(n.source,e)}return i}},t),r=e.monitor({MonitorEntitySetExpression:function(n,t){n.source instanceof $data.Expressions.EntityContextExpression&&t.sets.indexOf(n)==-1&&(t.sets.push(n),t.infos.push({AliasNumber:0,Association:null,FromType:null,FromPropertyName:null,IsMapped:!0}))},MutateEntitySetExpression:function(n,t){var r,u,f,i,e;return n.source instanceof $data.Expressions.EntityContextExpression?(this.backupContextExpression=n.source,this.path="",n):(n.selector.associationInfo.FromMultiplicity=="0..1"&&n.selector.associationInfo.FromMultiplicity=="*"&&Guard.raise("Not supported query on this navigation property: "+n.selector.associationInfo.From+" "+n.selector.associationInfo.FromPropertyName),this.path+="."+n.selector.associationInfo.FromPropertyName,r=t.infos.filter(function(n){return n.NavigationPath==this.path},this),r.length>0)?t.sets[r[0].AliasNumber]:(u=this.backupContextExpression.instance.getType().memberDefinitions.getMember(n.storageModel.ItemName),u||Guard.raise("Context schema error"),f=Container.createMemberInfoExpression(u),i=Container.createEntitySetExpression(this.backupContextExpression,f),i.instance=this.backupContextExpression.instance[n.storageModel.ItemName],e=t.sets.push(i),t.infos.push({AliasNumber:e-1,Association:n.selector,NavigationPath:this.path,IsMapped:this.isMapped}),i)}},t),i=$data.sqLite.SqlCompiler.create(r,t),o,u;return i.compile(),o=$data.sqLite.SqlBuilder.create(this.sets,this.entityContext),n.modelBinderConfig={},u=$data.sqLite.sqLite_ModelBinderCompiler.create(n,t),u.Visit(r),{sqlText:i.filters[0].selectedFragment.text,params:i.filters[0].selectedFragment.params,modelBinderConfig:n.modelBinderConfig}}},null);$C("$data.sqLite.SqlPagingCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.provider=n},compile:function(n,t){this.Visit(n,t)},VisitPagingExpression:function(n,t){this.Visit(n.amount,t)},VisitConstantExpression:function(n,t){t.addParameter(n.value);t.addText(SqlStatementBlocks.parameter)}});$C("$data.sqLite.SqlOrderCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.provider=n},compile:function(n,t){this.Visit(n,t)},VisitEntitySetExpression:function(n,t){var i=t.getExpressionAlias(n);t.addText(i);t.addText(SqlStatementBlocks.nameSeparator)},VisitOrderExpression:function(n,t){this.Visit(n.selector,t);n.nodeType==$data.Expressions.ExpressionType.OrderByDescending?t.addText(" DESC"):t.addText(" ASC")},VisitParametricQueryExpression:function(n,t){this.Visit(n.expression,t)},VisitEntityFieldExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t)},VisitMemberInfoExpression:function(n,t){t.addText(n.memberName)},VisitComplexTypeExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t);t.addText("__")}});$C("$data.sqLite.SqlProjectionCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(){this.anonymFiledPrefix="";this.currentObjectLiteralName=null},VisitProjectionExpression:function(n,t){this.Visit(n.selector,t)},VisitParametricQueryExpression:function(n,t){n.expression instanceof $data.Expressions.EntityExpression?(this.VisitEntitySetExpression(t.sets[0],t),t.addText("rowid AS "+this.anonymFiledPrefix+SqlStatementBlocks.rowIdName+", "),this.VisitEntityExpressionAsProjection(n,t)):n.expression instanceof $data.Expressions.EntitySetExpression?(this.VisitEntitySetExpression(t.sets[0],t),t.addText("rowid AS "+this.anonymFiledPrefix+SqlStatementBlocks.rowIdName+", "),this.anonymFiledPrefix=t.getExpressionAlias(n.expression)+"__",this.MappedFullEntitySet(n.expression,t)):n.expression instanceof $data.Expressions.ObjectLiteralExpression?(this.VisitEntitySetExpression(t.sets[0],t),t.addText("rowid AS "+this.anonymFiledPrefix+SqlStatementBlocks.rowIdName+", "),this.Visit(n.expression,t)):(this.VisitEntitySetExpression(t.sets[0],t),t.addText("rowid"),t.addText(SqlStatementBlocks.as),t.addText(SqlStatementBlocks.rowIdName),t.addText(", "),t.addKeyField(SqlStatementBlocks.rowIdName),this.Visit(n.expression,t),n.expression instanceof $data.Expressions.ComplexTypeExpression||(t.addText(SqlStatementBlocks.as),t.addText(SqlStatementBlocks.scalarFieldName)))},VisitEntityExpressionAsProjection:function(n,t){var r=n.expression,u=t.getExpressionAlias(r.source),i=this.anonymFiledPrefix+(n.fieldName?n.fieldName:"");i=i?i+"__":"";r.storageModel.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(n,r){r>0&&t.addText(SqlStatementBlocks.valueSeparator);var f=i+n.name;t.addText(u);t.addText(SqlStatementBlocks.nameSeparator);t.addText(n.name);t.addText(SqlStatementBlocks.as);t.addText(f)},this)},VisitEntityFieldOperationExpression:function(n,t){var i,u,r;Guard.requireType("expression.operation",n.operation,$data.Expressions.MemberInfoExpression);i=n.operation.memberDefinition;u=i.mapTo||i.name;t.addText(u);t.addText(SqlStatementBlocks.beginGroup);u==="like"?(r=$data.sqLite.SqlBuilder.create(),this.Visit(n.parameters[0],r),r.params.forEach(function(n){var r=n,u=i.parameters[0],r=u.prefix?u.prefix+r:r;r=u.suffix?r+u.suffix:r;t.addParameter(r)}),t.addText(r.sql),t.addText(" , "),this.Visit(n.source,t)):(this.Visit(n.source,t),n.parameters.forEach(function(n){t.addText(" , ");this.Visit(n,t)},this));t.addText(SqlStatementBlocks.endGroup)},VisitUnaryExpression:function(n,t){t.addText(n.resolution.mapTo);t.addText(SqlStatementBlocks.beginGroup);this.Visit(n.operand,t);t.addText(SqlStatementBlocks.endGroup)},VisitSimpleBinaryExpression:function(n,t){var r,i;t.addText(SqlStatementBlocks.beginGroup);this.Visit(n.left,t);r=this;t.addText(" "+n.resolution.mapTo+" ");n.nodeType=="in"?(Guard.requireType("expression.right",n.right,$data.Expressions.ConstantExpression),i=n.right.value,i instanceof Array?(t.addText(SqlStatementBlocks.beginGroup),i.forEach(function(n,i){i>0&&t.addText(SqlStatementBlocks.valueSeparator);var u=Container.createConstantExpression(n);r.Visit(u,t)}),t.addText(SqlStatementBlocks.endGroup)):i instanceof $data.Queryable?Guard.raise("not yet... but coming"):Guard.raise(new Exception("Only constant arrays and Queryables can be on the right side of 'in' operator","UnsupportedType"))):this.Visit(n.right,t);t.addText(SqlStatementBlocks.endGroup)},VisitConstantExpression:function(n,t){var i=n.value;t.addParameter(i);t.addText(SqlStatementBlocks.parameter)},VisitEntityFieldExpression:function(n,t){if(n.source instanceof $data.Expressions.ComplexTypeExpression){var u=t.getExpressionAlias(n.source.source.source),i=n.source.source.storageModel.ComplexTypes[n.source.selector.memberName],r=i.ReferentialConstraint.filter(function(t){return t[n.source.selector.memberName]==n.selector.memberName})[0];if(!r){Guard.raise(new Exception("Compiler error! ComplexType does not contain "+n.source.selector.memberName+" property!"));return}t.addText(u);t.addText(SqlStatementBlocks.nameSeparator);t.addText(r[i.From])}else this.Visit(n.source,t),this.Visit(n.selector,t)},VisitEntitySetExpression:function(n,t){var i=t.getExpressionAlias(n);t.addText(i);t.addText(SqlStatementBlocks.nameSeparator)},VisitComplexTypeExpression:function(n,t){var r=t.getExpressionAlias(n.source.source),i=n.source.storageModel.ComplexTypes[n.selector.memberName];i.ReferentialConstraint.forEach(function(n,u){u>0&&t.addText(SqlStatementBlocks.valueSeparator);t.addText(r);t.addText(SqlStatementBlocks.nameSeparator);t.addText(n[i.From]);t.addText(SqlStatementBlocks.as);t.addText(this.anonymFiledPrefix+n[i.To])},this)},VisitMemberInfoExpression:function(n,t){t.addText(n.memberName)},VisitObjectLiteralExpression:function(n,t){for(var r=n.members.length,i=0;i<r;i++)i!=0&&t.addText(SqlStatementBlocks.valueSeparator),this.Visit(n.members[i],t)},MappedFullEntitySet:function(n,t){var i=t.getExpressionAlias(n),r=n.storageModel.PhysicalType.memberDefinitions.getPublicMappedProperties();r.forEach(function(n,r){n.association||(r>0&&t.addText(SqlStatementBlocks.valueSeparator),t.addText(i),t.addText(SqlStatementBlocks.nameSeparator),t.addText(n.name),t.addText(SqlStatementBlocks.as),t.addText(this.anonymFiledPrefix+n.name))},this)},VisitObjectFieldExpression:function(n,t){var r=this.currentObjectLiteralName,i;this.currentObjectLiteralName?this.currentObjectLiteralName+="."+n.fieldName:this.currentObjectLiteralName=n.fieldName;n.expression instanceof $data.Expressions.EntityExpression?this.VisitEntityExpressionAsProjection(n,t):(i=this.anonymFiledPrefix,this.anonymFiledPrefix+=n.fieldName+"__",n.expression instanceof $data.Expressions.EntitySetExpression?this.MappedFullEntitySet(n.expression,t):this.Visit(n.expression,t),this.anonymFiledPrefix=i,n.expression instanceof $data.Expressions.ObjectLiteralExpression||n.expression instanceof $data.Expressions.ComplexTypeExpression||n.expression instanceof $data.Expressions.EntitySetExpression||(t.addText(SqlStatementBlocks.as),t.addText(this.anonymFiledPrefix+n.fieldName)));this.currentObjectLiteralName=r}},null);$C("$data.sqLite.SqlExpressionMonitor",$data.Expressions.ExpressionMonitor,null,{constructor:function(n){this.VisitIncludeExpression=function(t,i){var u=this.Visit(t.source,i),r;return(n.isMapped=!0,r=this.Visit(t.selector,i),n.isMapped=!1,u!==t.source||r!==t.selector)?Container.createIncludeExpression(u,r):t};this.VisitProjectionExpression=function(t,i){var f=this.Visit(t.source,i),r,u;return(n.isMapped=!0,r=this.Visit(t.selector,i),n.isMapped=!1,f!==t.source||r!==t.selector)?(u=Container.createProjectionExpression(f,r,t.params,t.instance),u.projectionAs=t.projectionAs,u):t}}});$C("$data.sqLite.SqlFilterCompiler",$data.Expressions.EntityExpressionVisitor,null,{VisitParametricQueryExpression:function(n,t){this.Visit(n.expression,t)},VisitUnaryExpression:function(n,t){t.addText(n.resolution.mapTo);t.addText(SqlStatementBlocks.beginGroup);this.Visit(n.operand,t);t.addText(SqlStatementBlocks.endGroup)},VisitSimpleBinaryExpression:function(n,t){var r=this,i;n.nodeType=="arrayIndex"?this.Visit(n.left,t):(t.addText(SqlStatementBlocks.beginGroup),n.left instanceof $data.Expressions.EntityFieldExpression&&n.right instanceof $data.Expressions.ConstantExpression&&n.right.value===null?(this.Visit(n.left,t),t.addText(n.resolution.nullMap)):n.right instanceof $data.Expressions.EntityFieldExpression&&n.left instanceof $data.Expressions.ConstantExpression&&n.left.value===null?(this.Visit(n.right,t),t.addText(n.resolution.nullMap)):(this.Visit(n.left,t),t.addText(" "+n.resolution.mapTo+" "),n.nodeType=="in"?(Guard.requireType("expression.right",n.right,$data.Expressions.ConstantExpression),i=n.right.value,i instanceof Array?(t.addText(SqlStatementBlocks.beginGroup),i.forEach(function(n,i){i>0&&t.addText(SqlStatementBlocks.valueSeparator);r.Visit(n,t)}),t.addText(SqlStatementBlocks.endGroup)):i instanceof $data.Queryable?t.addText("(SELECT d FROM ("+i.toTraceString().sqlText+"))"):Guard.raise(new Exception("Only constant arrays and Queryables can be on the right side of 'in' operator","UnsupportedType"))):this.Visit(n.right,t)),t.addText(SqlStatementBlocks.endGroup))},VisitEntitySetExpression:function(n,t){var i=t.getExpressionAlias(n);t.addText(i);t.addText(SqlStatementBlocks.nameSeparator)},VisitEntityFieldOperationExpression:function(n,t){var i,u,r,f;Guard.requireType("expression.operation",n.operation,$data.Expressions.MemberInfoExpression);i=n.operation.memberDefinition;u=i.mapTo||i.name;t.addText(u);t.addText(SqlStatementBlocks.beginGroup);u==="like"?(r=$data.sqLite.SqlBuilder.create([],t.entityContext),r.selectTextPart("fragment"),this.Visit(n.parameters[0],r),f=r.getTextPart("fragment"),f.params.forEach(function(n){var r=n,u=i.parameters[0],r=u.prefix?u.prefix+r:r;r=u.suffix?r+u.suffix:r;t.addParameter(r)}),t.addText(f.text),t.addText(" , "),this.Visit(n.source,t)):(this.Visit(n.source,t),n.parameters.forEach(function(n){t.addText(" , ");this.Visit(n,t)},this));t.addText(SqlStatementBlocks.endGroup)},VisitMemberInfoExpression:function(n,t){t.addText(n.memberName)},VisitQueryParameterExpression:function(n,t){var i=null;i=n.type=="array"?n.value[n.index]:n.value;t.addParameter(i);t.addText(SqlStatementBlocks.parameter)},VisitConstantExpression:function(n,t){var i=t.entityContext.storageProvider.fieldConverter.toDb[Container.resolveName(Container.resolveType(n.type))](n.value);t.addParameter(i);t.addText(SqlStatementBlocks.parameter)},VisitEntityFieldExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t)},VisitComplexTypeExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t);t.addText("__")}});$C("$data.sqLite.sqLite_ModelBinderCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n,t){this._query=n;this.sqlContext=t;this._sqlBuilder=$data.sqLite.SqlBuilder.create(t.sets,t.entityContext)},VisitSingleExpression:function(n){this._defaultModelBinder(n)},VisitSomeExpression:function(n){this._defaultModelBinder(n)},VisitFindExpression:function(n){this._defaultModelBinder(n)},VisitEveryExpression:function(n){this._defaultModelBinder(n)},VisitToArrayExpression:function(n){this._defaultModelBinder(n)},VisitFirstExpression:function(n){this._defaultModelBinder(n)},VisitForEachExpression:function(n){this._defaultModelBinder(n)},VisitCountExpression:function(){var n=Container.createqueryBuilder();n.modelBinderConfig.$type=$data.Array;n.selectModelBinderProperty("$item");n.modelBinderConfig.$type=$data.Integer;n.modelBinderConfig.$source="cnt";n.resetModelBinderProperty();this._query.modelBinderConfig=n.modelBinderConfig},VisitExpression:function(n,t){var i=Container.createFindProjectionVisitor();i.Visit(n);i.projectionExpression?this.Visit(i.projectionExpression,t):this.DefaultSelection(t)},_defaultModelBinder:function(n){var t=Container.createqueryBuilder();t.modelBinderConfig.$type=$data.Array;t.modelBinderConfig.$item={};t.selectModelBinderProperty("$item");this.VisitExpression(n,t);t.resetModelBinderProperty();this._query.modelBinderConfig=t.modelBinderConfig},_addPropertyToModelBinderConfig:function(n,t){var i=this._query.context._storageModel.getStorageModel(n);n.memberDefinitions.getPublicMappedProperties().forEach(function(n){i&&(!i||i.Associations[n.name]||i.ComplexTypes[n.name])||(n.key&&(this.currentObjectFieldName?t.addKeyField(this.currentObjectFieldName+"__"+n.name):t.addKeyField(n.name)),t.modelBinderConfig[n.name]=this.currentObjectFieldName?this.currentObjectFieldName+"__"+n.name:n.name)},this);i&&this._addComplexTypeProperties(i.ComplexTypes,t)},_addComplexTypeProperties:function(n,t){n.forEach(function(n){t.selectModelBinderProperty(n.FromPropertyName);t.modelBinderConfig.$type=n.ToType;var i=this.currentObjectFieldName;this.currentObjectFieldName?this.currentObjectFieldName+="__":this.currentObjectFieldName="";this.currentObjectFieldName+=n.FromPropertyName;this._addPropertyToModelBinderConfig(n.ToType,t);t.popModelBinderProperty();this.currentObjectFieldName=i},this)},DefaultSelection:function(n){n.modelBinderConfig.$type=this._query.defaultType;var i=this._query.context._storageModel.getStorageModel(this._query.defaultType),t=this.sqlContext.infos.filter(function(n){return n.IsMapped}).length>1;t&&(this.currentObjectFieldName=this._sqlBuilder.getExpressionAlias(this.sqlContext.sets[0]));this._addPropertyToModelBinderConfig(this._query.defaultType,n);this.sqlContext.infos.forEach(function(t,i){var r,u;if(i>0&&t.IsMapped)for(r=t.NavigationPath.split("."),r.shift(),r.forEach(function(u,f){if(u)if(n.modelBinderConfig[u])n.selectModelBinderProperty(u);else{n.selectModelBinderProperty(u);var e=!1;t.Association.associationInfo.ToMultiplicity==="*"&&r.length-1===f&&(n.modelBinderConfig.$type=$data.Array,n.selectModelBinderProperty("$item"),e=!0);n.modelBinderConfig.$type=this.sqlContext.sets[i].elementType;this.currentObjectFieldName=this._sqlBuilder.getExpressionAlias(this.sqlContext.sets[i]);this._addPropertyToModelBinderConfig(this.sqlContext.sets[i].elementType,n);e&&n.popModelBinderProperty()}},this),u=0;u<r.length;u++)n.popModelBinderProperty()},this)},VisitProjectionExpression:function(n,t){this.hasProjection=!0;this.Visit(n.selector,t);n.selector&&n.selector.expression instanceof $data.Expressions.ObjectLiteralExpression&&(t.modelBinderConfig.$type=n.projectionAs||t.modelBinderConfig.$type||$data.Object)},VisitParametricQueryExpression:function(n,t){n.expression instanceof $data.Expressions.EntityExpression?(this.VisitEntityAsProjection(n.expression,t),t.modelBinderConfig.$keys.unshift("rowid$$")):n.expression instanceof $data.Expressions.EntitySetExpression?(this.currentObjectFieldName=this._sqlBuilder.getExpressionAlias(n.expression),this.VisitEntitySetAsProjection(n.expression,t),t.modelBinderConfig.$keys=["rowid$$"]):n.expression instanceof $data.Expressions.ComplexTypeExpression?this.VisitEntityAsProjection(n.expression,t):(t.modelBinderConfig.$keys=["rowid$$"],this.Visit(n.expression,t),n.expression instanceof $data.Expressions.EntityFieldExpression&&(t.modelBinderConfig.$source="d"))},VisitConstantExpression:function(n,t){t.modelBinderConfig.$type=n.type;t.modelBinderConfig.$source=this.currentObjectFieldName},VisitEntityAsProjection:function(n,t){this.Visit(n.source,t);t.modelBinderConfig.$type=n.entityType;this._addPropertyToModelBinderConfig(n.entityType,t)},VisitEntitySetAsProjection:function(n,t){t.modelBinderConfig.$type=$data.Array;t.selectModelBinderProperty("$item");t.modelBinderConfig.$type=n.elementType;this._addPropertyToModelBinderConfig(n.elementType,t);t.popModelBinderProperty()},VisitComplexTypeExpression:function(n){return n},VisitEntityFieldExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t)},VisitMemberInfoExpression:function(n,t){n.memberDefinition instanceof $data.MemberDefinition&&(t.modelBinderConfig.$type=n.memberDefinition.type,n.memberDefinition.storageModel&&n.memberName in n.memberDefinition.storageModel.ComplexTypes?this._addPropertyToModelBinderConfig(Container.resolveType(n.memberDefinition.type),t):t.modelBinderConfig.$source=this.currentObjectFieldName)},VisitEntitySetExpression:function(n,t){n.source instanceof $data.Expressions.EntityExpression&&(this.Visit(n.source,t),this.Visit(n.selector,t))},VisitEntityExpression:function(n,t){this.Visit(n.source,t)},VisitAssociationInfoExpression:function(n,t){"$selector"in t.modelBinderConfig&&t.modelBinderConfig.$selector.length>0?t.modelBinderConfig.$selector+=".":t.modelBinderConfig.$selector="json:";t.modelBinderConfig.$selector+=n.associationInfo.FromPropertyName},VisitSimpleBinaryExpression:function(n,t){this.Visit(n.left,t);this.Visit(n.right,t);t.modelBinderConfig.$type=undefined},VisitObjectLiteralExpression:function(n,t){t.modelBinderConfig.$type=$data.Object;n.members.forEach(function(n){this.Visit(n,t)},this)},VisitObjectFieldExpression:function(n,t){var i=this.currentObjectFieldName;t.selectModelBinderProperty(n.fieldName);this.currentObjectFieldName?this.currentObjectFieldName+="__":this.currentObjectFieldName="";this.currentObjectFieldName+=n.fieldName;n.expression instanceof $data.Expressions.EntityExpression||n.expression instanceof $data.Expressions.ComplexTypeExpression?this.VisitEntityAsProjection(n.expression,t):n.expression instanceof $data.Expressions.EntitySetExpression?this.VisitEntitySetAsProjection(n.expression,t):this.Visit(n.expression,t);this.currentObjectFieldName=i;t.popModelBinderProperty()}});$data.IndexedDBConverter={fromDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":$data.Container.proxyConverter,"$data.DateTimeOffset":$data.Container.proxyConverter,"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":$data.Container.proxyConverter,"$data.Blob":function(n){return n?$data.Container.convertTo(n,$data.Blob):n},"$data.Array":function(n){return n===undefined?new $data.Array:n},"$data.Object":$data.Container.proxyConverter,"$data.Guid":function(n){return n?$data.parseGuid(n).toString():n},"$data.GeographyPoint":function(n){return n?new $data.GeographyPoint(n):n},"$data.GeographyLineString":function(n){return n?new $data.GeographyLineString(n):n},"$data.GeographyPolygon":function(n){return n?new $data.GeographyPolygon(n):n},"$data.GeographyMultiPoint":function(n){return n?new $data.GeographyMultiPoint(n):n},"$data.GeographyMultiLineString":function(n){return n?new $data.GeographyMultiLineString(n):n},"$data.GeographyMultiPolygon":function(n){return n?new $data.GeographyMultiPolygon(n):n},"$data.GeographyCollection":function(n){return n?new $data.GeographyCollection(n):n},"$data.GeometryPoint":function(n){return n?new $data.GeometryPoint(n):n},"$data.GeometryLineString":function(n){return n?new $data.GeometryLineString(n):n},"$data.GeometryPolygon":function(n){return n?new $data.GeometryPolygon(n):n},"$data.GeometryMultiPoint":function(n){return n?new $data.GeometryMultiPoint(n):n},"$data.GeometryMultiLineString":function(n){return n?new $data.GeometryMultiLineString(n):n},"$data.GeometryMultiPolygon":function(n){return n?new $data.GeometryMultiPolygon(n):n},"$data.GeometryCollection":function(n){return n?new $data.GeometryCollection(n):n}},toDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":$data.Container.proxyConverter,"$data.DateTimeOffset":$data.Container.proxyConverter,"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":$data.Container.proxyConverter,"$data.Blob":function(n){return n?$data.Blob.toString(n):n},"$data.Array":function(n){return n?JSON.parse(JSON.stringify(n)):n},"$data.Object":$data.Container.proxyConverter,"$data.Guid":function(n){return n?n.toString():n},"$data.GeographyPoint":function(n){return n,n},"$data.GeographyLineString":function(n){return n,n},"$data.GeographyPolygon":function(n){return n,n},"$data.GeographyMultiPoint":function(n){return n,n},"$data.GeographyMultiLineString":function(n){return n,n},"$data.GeographyMultiPolygon":function(n){return n,n},"$data.GeographyCollection":function(n){return n,n},"$data.GeometryPoint":function(n){return n,n},"$data.GeometryLineString":function(n){return n,n},"$data.GeometryPolygon":function(n){return n,n},"$data.GeometryMultiPoint":function(n){return n,n},"$data.GeometryMultiLineString":function(n){return n,n},"$data.GeometryMultiPolygon":function(n){return n,n},"$data.GeometryCollection":function(n){return n,n}}};$data.Class.define("$data.storageProviders.indexedDb.IndexedDBStorageProvider",$data.StorageProviderBase,null,{constructor:function(n,t){this.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;this.IDBRequest=window.IDBRequest||window.webkitIDBRequest||window.mozIDBRequest||window.msIDBRequest;this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.msIDBTransaction;this.IDBTransactionType={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSIONCHANGE:"versionchange"};typeof this.IDBTransaction.READ_ONLY!="undefined"&&typeof this.IDBTransaction.READ_WRITE!="undefined"&&(this.IDBTransactionType.READ_ONLY=this.IDBTransaction.READ_ONLY,this.IDBTransactionType.READ_WRITE=this.IDBTransaction.READ_WRITE);this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange;this.IDBDatabaseException=window.IDBDatabaseException||window.webkitIDBDatabaseException||window.mozIDBDatabaseException||window.msIDBDatabaseException;this.IDBOpenDBRequest=window.IDBOpenDBRequest||window.webkitIDBOpenDBRequest||window.mozIDBOpenDBRequest||window.msIDBOpenDBRequest;this.newVersionAPI=!!(window.IDBFactory&&IDBFactory.prototype.deleteDatabase);this.sequenceStore="__jayData_sequence";this.SqlCommands=[];this.context={};this.providerConfiguration=$data.typeSystem.extend({databaseName:$data.defaults.defaultDatabaseName,version:1,dbCreation:$data.storageProviders.DbCreationType.DropTableIfChanged,memoryOperations:!0},n);this._setupExtensionMethods();t&&(this.originalContext=t.getType())},supportedBinaryOperators:{value:{equal:{mapTo:" == ",dataType:$data.Boolean},notEqual:{mapTo:" != ",dataType:$data.Boolean},equalTyped:{mapTo:" == ",dataType:$data.Boolean},notEqualTyped:{mapTo:" != ",dataType:$data.Boolean},greaterThan:{mapTo:" > ",dataType:$data.Boolean},greaterThanOrEqual:{mapTo:" >= ",dataType:$data.Boolean},lessThan:{mapTo:" < ",dataType:$data.Boolean},lessThenOrEqual:{mapTo:" <= ",dataType:$data.Boolean},or:{mapTo:" || ",dataType:$data.Boolean},and:{mapTo:" && ",dataType:$data.Boolean}}},supportedSetOperations:{value:{length:{},toArray:{},forEach:{}},enumerable:!0,writable:!0},supportedFieldOperations:{value:{},enumerable:!0,writable:!0},supportedUnaryOperators:{value:{},enumerable:!0,writable:!0},_setupExtensionMethods:function(){var u=this,n=this.IDBRequest,t=this.IDBTransaction,i=this.IDBOpenDBRequest,r=function(n){typeof n!="object"&&Guard.raise(new Exception("Invalid callbackSettings",null,n));for(var t in n)typeof this[t]!="undefined"&&typeof n[t]=="function"&&(this[t]=n[t]);return this};n&&typeof n.prototype.setCallbacks!="function"&&(n.prototype.setCallbacks=r);t&&typeof t.prototype.setCallbacks!="function"&&(t.prototype.setCallbacks=r);i&&typeof i.prototype.setCallbacks!="function"&&(i.prototype.setCallbacks=r)},supportedDataTypes:{value:[$data.Integer,$data.Number,$data.Date,$data.String,$data.Boolean,$data.Blob,$data.Array,$data.Object,$data.Guid,$data.GeographyPoint,$data.GeographyLineString,$data.GeographyPolygon,$data.GeographyMultiPoint,$data.GeographyMultiLineString,$data.GeographyMultiPolygon,$data.GeographyCollection,$data.GeometryPoint,$data.GeometryLineString,$data.GeometryPolygon,$data.GeometryMultiPoint,$data.GeometryMultiLineString,$data.GeometryMultiPolygon,$data.GeometryCollection,$data.Byte,$data.SByte,$data.Decimal,$data.Float,$data.Int16,$data.Int32,$data.Int64,$data.Time,$data.DateTimeOffset],writable:!1},fieldConverter:{value:$data.IndexedDBConverter},supportedAutoincrementKeys:{value:{"$data.Integer":!0,"$data.Int32":!0,"$data.Guid":function(){return $data.createGuid()}}},_getObjectStoreDefinition:function(n){var r={storeName:n.TableName},t=n.PhysicalType.memberDefinitions.getKeyProperties(),u,i,f;if(0==t.length){u=new Error("Entity must have a key field: "+r.storeName);u.name="KeyNotFoundError";throw u;}for(t.length>2&&t.some(function(n){return n.computed})&&Guard.raise("With multiple keys the computed field is not allowed: "+r.storeName,"MultipleComputedKeyFieldError"),i=0;i<t.length;i++)f=Container.resolveName(t[i].type),t[i].computed&&!this.supportedAutoincrementKeys[f]&&console.log("WARRNING! '"+f+"' not supported as computed Key!");return r.keyFields=t,r},_getObjectStoreDefinitions:function(){var n=[],t=this;return t.context._storageModel.forEach(function(i){var r=t._getObjectStoreDefinition(i);n.push(r)}),n},_oldCreateDB:function(n,t,i){var r=this;n.db.onversionchange=function(n){return n.target.close()};r._createDB(n.db,t);n.oncomplete=i},_createDB:function(n,t){for(var r,u,f,i=0;i<t.length;i++)t[i].dropIfExists&&n.objectStoreNames.contains(t[i].storeName)&&n.deleteObjectStore(t[i].storeName);for(i=0;i<t.length;i++)if(r=t[i],!n.objectStoreNames.contains(r.storeName)){if(u={},r.keyFields.length==1)u={keyPath:r.keyFields[0].name},f=Container.resolveName(r.keyFields[0].type),u.autoIncrement=this.supportedAutoincrementKeys[f]?!0:!1;else for(u.key=[],i=0;i<r.keyFields.length;i++)u.key.push(r.keyFields[i].name);n.createObjectStore(r.storeName,u)}},_hasDbChanges:function(n,t,i){for(var r=!0,u=0;u<t.length;u++)r=r&&n.objectStoreNames.contains(t[u].storeName),i&&(t[u].dropIfExists=!0,r=!1);return!r},onupgradeneeded:function(n){var t=this;return function(i){var r=i.target.result,u;r.onversionchange=function(n){return n.target.close()};u=t._hasDbChanges(r,n,t.providerConfiguration.dbCreation==$data.storageProviders.DbCreationType.DropAllExistingTables);u&&t._createDB(r,n)}},initializeStore:function(n){n=$data.typeSystem.createCallbackSetting(n);var t=this;this.initializeMemoryStore({success:function(){var i;try{i=t._getObjectStoreDefinitions()}catch(r){console.log(i);n.error(r);return}t.indexedDB.open(t.providerConfiguration.databaseName).setCallbacks({onsuccess:function(r){var u=r.target.result,f,e;if(u.onversionchange=function(n){return n.target.close()},f=t._hasDbChanges(u,i,t.providerConfiguration.dbCreation==$data.storageProviders.DbCreationType.DropAllExistingTables),u.setVersion){if(u.version===""||f){u.setVersion((parseInt(u.version)||0)+1).setCallbacks({onsuccess:function(r){var u=r.target.result;t._oldCreateDB(u,i,function(i){t.db=i.target.db;n.success(t.context)})},onerror:function(){var n=arguments},onblocked:function(){var n=arguments}});return}}else if(f){u.close();e=parseInt(u.version)+1;t.indexedDB.open(t.providerConfiguration.databaseName,e).setCallbacks({onsuccess:function(i){t.db=i.target.result;n.success(t.context)},onupgradeneeded:t.onupgradeneeded(i),onerror:n.error,onabort:n.error,onblocked:n.error});return}t.db=u;n.success(t.context)},onupgradeneeded:t.onupgradeneeded(i),onerror:n.error,onabort:n.error,onblocked:n.error})},error:n.error})},initializeMemoryStore:function(n){n=$data.typeSystem.createCallbackSetting(n);var t=this;if(t.originalContext&&t.providerConfiguration.memoryOperations){t.operationProvider=new t.originalContext({name:"InMemory"});t.operationProvider.onReady({success:function(){t.supportedBinaryOperators=t.operationProvider.storageProvider.supportedBinaryOperators;t.supportedSetOperations=t.operationProvider.storageProvider.supportedSetOperations;t.supportedFieldOperations=t.operationProvider.storageProvider.supportedFieldOperations;t.supportedUnaryOperators=t.operationProvider.storageProvider.supportedUnaryOperators;n.success()},error:n.error})}else n.success()},_initializeStore:function(n){n=$data.typeSystem.createCallbackSetting(n);var t=this,r=function(n){n.onversionchange=function(n){return n.target.close()};var i=[];return t.context._storageModel.forEach(function(r){function u(){var f={},u=t._getKeySettings(r);t.newVersionAPI?u.autoIncrement&&i.push(r.TableName):f.autoIncrement=u.autoIncrement;u.keyPath!==undefined&&(f.keyPath=u.keyPath);n.createObjectStore(r.TableName,f)}n.objectStoreNames.contains(r.TableName)?t.providerConfiguration.dbCreation===$data.storageProviders.DbCreationType.DropAllExistingTables&&(n.deleteObjectStore(r.TableName),u()):u()}),i.length>0&&!n.objectStoreNames.contains(t.sequenceStore)&&(n.createObjectStore(t.sequenceStore,{keyPath:"store"}),i=[]),i},i=null,u={onupgradeneeded:function(n){i=r(n.target.result)},onerror:n.error,onblocked:n.error,onsuccess:function(u){var f,e;if(t.db=u.target.result,t.db.onversionchange=function(n){n.target.close()},t.newVersionAPI){if(i&&i.length>0){f=t.db.transaction([t.sequenceStore],t.IDBTransactionType.READ_WRITE).setCallbacks({onerror:n.error,oncomplete:function(){n.success(t.context)}}).objectStore(t.sequenceStore);switch(t.providerConfiguration.dbCreation){case $data.storageProviders.DbCreationType.DropAllExistingTables:case $data.storageProviders.DbCreationType.DropTableIfChanged:f.clear();break;default:i.forEach(function(n){f["delete"](n)})}}n.success(t.context)}else e=t.db.setVersion(t.providerConfiguration.version.toString()).setCallbacks({onerror:n.error,onblocked:n.error,onsuccess:function(){r(t.db);e.result.oncomplete=function(){n.success(t.context)}}})}};t.newVersionAPI?t.indexedDB.open(t.providerConfiguration.databaseName,parseInt(t.providerConfiguration.version,10)).setCallbacks(u):t.indexedDB.open(t.providerConfiguration.databaseName).setCallbacks(u)},executeQuery:function(n,t){t=$data.typeSystem.createCallbackSetting(t);var i=this,r=n.context.getEntitySetFromElementType(n.defaultType),u=i.db.transaction([r.tableName],i.IDBTransactionType.READ_ONLY).setCallbacks({onerror:t.error,onabort:t.error,oncomplete:function(){i.operationProvider?(i.operationProvider.storageProvider.dataSource[r.tableName]=n.rawDataList,i.operationProvider.storageProvider.executeQuery(n,{success:function(n){n.expression.nodeType===$data.Expressions.ExpressionType.Count&&(n.rawDataList[0]={cnt:n.rawDataList[0]});t.success(n)},error:t.error})):t.success(n)}}).objectStore(r.tableName),f=Container.createModelBinderConfigCompiler(n,[]);if(f.Visit(n.expression),i.operationProvider)u.openCursor().onsuccess=function(t){var i=t.target.result,r;i&&(r=i.value,n.rawDataList.push(i.value),i["continue"]())};else switch(n.expression.nodeType){case $data.Expressions.ExpressionType.Count:u.count().onsuccess=function(t){var i=t.target.result;n.rawDataList.push({cnt:i})};break;default:u.openCursor().onsuccess=function(t){var i=t.target.result,r;i&&(r=i.value,n.rawDataList.push(i.value),i["continue"]())}}},_getKeySettings:function(n){var r=this,t={autoIncrement:!1},i=[];return n.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(n){if(n.key&&i.push(n.name),n.computed){n.key||Guard.raise(new Exception("Only key field can be a computed field!"));var u=Container.resolveName(n.type);r.supportedAutoincrementKeys[u]===!0&&(t.autoIncrement=!0)}}),i.length>1?(t.autoIncrement&&Guard.raise(new Exception("Auto increment is only valid for a single key!")),t.keys=i):i.length==1?t.keyPath=i[0]:Guard.raise(new Exception("No valid key found!")),t},saveChanges:function(n,t){function u(){var o,t,s;if(r.length===0)n.success();else{var h=r.shift(),f={},c=h.map(function(n){return f[n.entitySet.tableName]=!0,n.physicalData={},n.entitySet.elementType.memberDefinitions.getPublicMappedProperties().forEach(function(t){var r=Container.resolveName(t.type),f,u;if(t.key&&t.computed&&n.data[t.name]==undefined)if(typeof i.supportedAutoincrementKeys[r]=="function")f=i.supportedAutoincrementKeys[r](),n.data[t.name]=i.fieldConverter.toDb[r](f);else return;!t.inverseProperty&&typeof t.concurrencyMode=="undefined"&&(t.key===!0||n.data.entityState===$data.EntityState.Added||n.data.changedProperties&&n.data.changedProperties.some(function(n){return n.name===t.name}))&&(i.fieldConverter.toDb[r]?n.physicalData[t.name]=i.fieldConverter.toDb[r](n.data[t.name]):(u=n.data[t.name],u!==undefined&&(u=JSON.parse(JSON.stringify(u))),n.physicalData[t.name]=u))}),n}),e=[];for(o in f)e.push(o);t=i.db.transaction(e,i.IDBTransactionType.READ_WRITE).setCallbacks({onerror:function(t){(!t.target||!i.IDBDatabaseException||t.target&&i.IDBDatabaseException&&t.target.errorCode!==i.IDBDatabaseException.ABORT_ERR)&&n.error(t)},oncomplete:function(){u()}});function l(){var n={};this.getSettingsForItem=function(t){var r=t.data.getType().fullName;return n.hasOwnProperty(r)||(n[r]=i._getKeySettings(i.context._storageModel.getStorageModel(t.data.getType()))),n[r]}}s=new l;c.forEach(function(r){var f=t.objectStore(r.entitySet.tableName),u=s.getSettingsForItem(r),o=u.keys&&u.keys.map(function(n){return r.physicalData[n]})||null,e;try{e=function(e){var s=u.keyPath?r.physicalData[u.keyPath]:o,h=r.physicalData;f.openCursor(i.IDBKeyRange.only(s)).onsuccess=function(i){try{var u=i.target.result;u?e(u,s,h):Guard.raise(new Exception("Object not found",null,r))}catch(f){t.abort();n.error(f)}}};switch(r.data.entityState){case $data.EntityState.Added:u.keyPath?f.add(r.physicalData).onsuccess=function(n){r.data[u.keyPath]=n.target.result}:f.add(r.physicalData,o);break;case $data.EntityState.Deleted:e(function(n){n["delete"]()});break;case $data.EntityState.Modified:e(function(n,t,i){n.update($data.typeSystem.extend(n.value,i))});break;case $data.EntityState.Unchanged:break;default:Guard.raise(new Exception("Not supported entity state",null,r))}}catch(h){t.abort();n.error(h)}})}}var i=this,r=i.buildIndependentBlocks(t);u()},_compile:function(n){return Container.createIndexedDBCompiler().compile(n)}},{isSupported:{get:function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB?!0:!1},set:function(){}}});$data.storageProviders.indexedDb.IndexedDBStorageProvider.isSupported&&$data.StorageProviderBase.registerProvider("indexedDb",$data.storageProviders.indexedDb.IndexedDBStorageProvider);$data.InMemoryConverter={fromDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":$data.Container.proxyConverter,"$data.DateTimeOffset":$data.Container.proxyConverter,"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":$data.Container.proxyConverter,"$data.Blob":$data.Container.proxyConverter,"$data.Object":function(n){return n===undefined?new $data.Object:n},"$data.Array":function(n){return n===undefined?new $data.Array:n},"$data.Guid":function(n){return n?$data.parseGuid(n).toString():n},"$data.GeographyPoint":function(n){return n?new $data.GeographyPoint(n):n},"$data.GeographyLineString":function(n){return n?new $data.GeographyLineString(n):n},"$data.GeographyPolygon":function(n){return n?new $data.GeographyPolygon(n):n},"$data.GeographyMultiPoint":function(n){return n?new $data.GeographyMultiPoint(n):n},"$data.GeographyMultiLineString":function(n){return n?new $data.GeographyMultiLineString(n):n},"$data.GeographyMultiPolygon":function(n){return n?new $data.GeographyMultiPolygon(n):n},"$data.GeographyCollection":function(n){return n?new $data.GeographyCollection(n):n},"$data.GeometryPoint":function(n){return n?new $data.GeometryPoint(n):n},"$data.GeometryLineString":function(n){return n?new $data.GeometryLineString(n):n},"$data.GeometryPolygon":function(n){return n?new $data.GeometryPolygon(n):n},"$data.GeometryMultiPoint":function(n){return n?new $data.GeometryMultiPoint(n):n},"$data.GeometryMultiLineString":function(n){return n?new $data.GeometryMultiLineString(n):n},"$data.GeometryMultiPolygon":function(n){return n?new $data.GeometryMultiPolygon(n):n},"$data.GeometryCollection":function(n){return n?new $data.GeometryCollection(n):n}},toDb:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":$data.Container.proxyConverter,"$data.DateTimeOffset":$data.Container.proxyConverter,"$data.Time":$data.Container.proxyConverter,"$data.String":$data.Container.proxyConverter,"$data.Boolean":$data.Container.proxyConverter,"$data.Blob":$data.Container.proxyConverter,"$data.Object":$data.Container.proxyConverter,"$data.Array":$data.Container.proxyConverter,"$data.Guid":function(n){return n?n.toString():n},"$data.GeographyPoint":function(n){return n,n},"$data.GeographyLineString":function(n){return n,n},"$data.GeographyPolygon":function(n){return n,n},"$data.GeographyMultiPoint":function(n){return n,n},"$data.GeographyMultiLineString":function(n){return n,n},"$data.GeographyMultiPolygon":function(n){return n,n},"$data.GeographyCollection":function(n){return n,n},"$data.GeometryPoint":function(n){return n,n},"$data.GeometryLineString":function(n){return n,n},"$data.GeometryPolygon":function(n){return n,n},"$data.GeometryMultiPoint":function(n){return n,n},"$data.GeometryMultiLineString":function(n){return n,n},"$data.GeometryMultiPolygon":function(n){return n,n},"$data.GeometryCollection":function(n){return n,n}},escape:{"$data.Byte":$data.Container.proxyConverter,"$data.SByte":$data.Container.proxyConverter,"$data.Decimal":$data.Container.proxyConverter,"$data.Float":$data.Container.proxyConverter,"$data.Int16":$data.Container.proxyConverter,"$data.Int64":$data.Container.proxyConverter,"$data.Integer":$data.Container.proxyConverter,"$data.Int32":$data.Container.proxyConverter,"$data.Number":$data.Container.proxyConverter,"$data.Date":function(n){return n?"new Date(Date.parse('"+n.toISOString()+"'))":n},"$data.DateTimeOffset":function(n){return n?"new Date(Date.parse('"+n.toISOString()+"'))":n},"$data.Time":function(n){return n?"'"+n+"'":n},"$data.String":function(n){return"'"+n.replace(/'/g,"''")+"'"},"$data.Boolean":function(n){return n?"true":"false"},"$data.Blob":function(n){return"'"+$data.Blob.toString(n)+"'"},"$data.Object":function(n){return JSON.stringify(n)},"$data.Array":function(n){return JSON.stringify(n)},"$data.Guid":function(n){return n?"'"+n.toString()+"'":n}}};$C("$data.storageProviders.InMemory.InMemoryProvider",$data.StorageProviderBase,null,{constructor:function(n,t){this.context=t;this.providerConfiguration=$data.typeSystem.extend({source:null,persistentData:!1,localStoreName:"JayData_InMemory_Provider",databaseName:"JayData_InMemory_Provider",__instaceId:$data.createGuid().toString()},n);this.dataSource=this.providerConfiguration.source;delete this.providerConfiguration.source;this.providerConfiguration.databaseName==="JayData_InMemory_Provider"&&(this.providerConfiguration.databaseName=this.providerConfiguration.localStoreName)},initializeStore:function(n){var h,f,e,o,t,v,u,c,s,i,r,l;n=$data.typeSystem.createCallbackSetting(n);h=[];for(i in this.context._entitySetReferences)h.push(this.context._entitySetReferences[i].collectionName);if(f=null,this.providerConfiguration.persistentData&&window.localStorage&&this.providerConfiguration.dbCreation!==$data.storageProviders.DbCreationType.DropAllExistingTables){var y=this.providerConfiguration.databaseName||"JayData_InMemory_Provider",p=this,a=window.localStorage.getItem(y);Object.isNullOrUndefined(a)||(f=JSON.parse(a,function(n,t){return h.indexOf(n)>-1&&t.map?t.map(function(t){return new p.context[n].createNew(t)}):t}))}for(e=f||this.dataSource||{},this.dataSource={inmemory_sequence:{}},o=0;o<this.context._storageModel.length;o++)if(t=this.context._storageModel[o],this.dataSource[t.TableName]=[],v=t.LogicalType.memberDefinitions.getKeyProperties(),u=v.filter(function(n){return n.computed}),u.length>1&&Guard.raise(new Exception("More than one computed field not supported in "+t.TableName+" entity set.")),c=!1,u.length===1&&(s=Container.resolveName(u[0].type),this.supportedAutoincrementKeys[s]===!0?(this.dataSource.inmemory_sequence[t.TableName]=0,c=!0):typeof this.supportedAutoincrementKeys[s]=="function"||console.log("WARRNING! '"+s+"' not supported as computed Key!")),e[t.TableName])for(i=0;i<e[t.TableName].length;i++)r=e[t.TableName][i],r instanceof t.LogicalType||(f?r=new t.LogicalType(r):Guard.raise(new Exception("Invalid element in source: "+t.TableName))),c&&(l=r[u[0].name],l>this.dataSource.inmemory_sequence[t.TableName]&&(this.dataSource.inmemory_sequence[t.TableName]=l)),this.dataSource[t.TableName].push(r);n.success(this.context)},executeQuery:function(n,t){var i,u,r;t=$data.typeSystem.createCallbackSetting(t);try{i=this._compile(n)}catch(f){t.error(f);return}u=n.context.getEntitySetFromElementType(n.defaultType).tableName;r=[].concat(this.dataSource[u]||[]);i.$filter&&!i.$every&&(r=r.filter(i.$filter));i.$map&&Object.keys(n.modelBinderConfig).length===0&&(r=r.map(i.$map));i.$order&&i.$order.length>0&&r.sort(function(n,t){for(var r,u,e,f=0,o=i.$order.length;f<o;f++)if(e=0,r=i.$order[f](n),u=i.$order[f](t),e=i.$order[f].ASC?r===u?0:r>u||u===null?1:-1:r===u?0:r<u||r===null?1:-1,e!==0)break;return e});i.$take!==undefined&&i.$skip!==undefined?r=r.slice(i.$skip,i.$skip+i.$take):i.$take!==undefined&&r.length>i.$take?r=r.slice(0,i.$take):i.$skip&&(r=r.slice(i.$skip,r.length));i.$some&&(r=[r.length>0]);i.$length&&(r=[r.length]);n.rawDataList=r;t.success(n)},_compile:function(n){var t=new $data.storageProviders.InMemory.InMemoryCompiler(this);return t.compile(n)},saveChanges:function(n,t){for(var i,u,o,e,f,r=0;r<t.length;r++){i=t[r];switch(i.data.entityState){case $data.EntityState.Added:this._save_add_processPk(i);this.dataSource[i.entitySet.tableName].push(i.data);break;case $data.EntityState.Deleted:var u=this.dataSource[i.entitySet.tableName],o=this._save_getEntity(i,u),c=u.indexOf(o);u.splice(c,1);break;case $data.EntityState.Modified:if(i.data.changedProperties&&i.data.changedProperties.length>0)for(u=this.dataSource[i.entitySet.tableName],o=this._save_getEntity(i,u),e=0;e<i.data.changedProperties.length;e++)f=i.data.changedProperties[e],!f.key&&i.entitySet.elementType.memberDefinitions.getPublicMappedPropertyNames().indexOf(f.name)>-1&&(o[f.name]=i.data[f.name])}}if(this.providerConfiguration.persistentData&&window.localStorage){var l=this.providerConfiguration.databaseName||"JayData_InMemory_Provider",s=this,h=[];for(r in this.context._entitySetReferences)h.push(this.context._entitySetReferences[r].collectionName);localStorageData=window.localStorage.setItem(l,JSON.stringify(this.dataSource,function(n,t){var r,i,u;if(h.indexOf(n)>-1&&Array.isArray(t)){for(r=[],i=0;i<t.length;i++)u={},s.context[n].elementType.memberDefinitions.getPublicMappedProperties().forEach(function(n){if(!n.inverseProperty){var f=Container.resolveName(n.type),r=s.fieldConverter.fromDb[f];u[n.name]=r?r(t[i][n.name]):t[i][n.name]}}),r.push(u);return r}return t}))}n.success()},_save_add_processPk:function(n){var t=n.entitySet.elementType.memberDefinitions.getKeyProperties(),r,u,f,i;if(t.length===1&&t[0].computed)r=t[0],u=Container.resolveName(r.type),typeof this.supportedAutoincrementKeys[u]=="function"?n.data[r.name]=this.supportedAutoincrementKeys[u]():this.supportedAutoincrementKeys[u]===!0&&(f=this.dataSource.inmemory_sequence[n.entitySet.tableName],n.data[r.name]=f+1,this.dataSource.inmemory_sequence[n.entitySet.tableName]=f+1);else for(i=0;i<t.length;i++)(n.data[t[i].name]===null||n.data[t[i].name]===undefined)&&Guard.raise(new Exception("Key field must set value! Key field name without value: "+t[i].name))},_save_getEntity:function(n,t){var i=n.entitySet.elementType.memberDefinitions.getKeyProperties();return entities=t.filter(function(t){for(var u=!0,r=0;r<i.length;r++)u=u&&t[i[r].name]===n.data[i[r].name];return u}),entities>1&&Guard.raise(new Exception("Inconsistent storage!")),entities[0]},getTraceString:function(n){return this._compile(n)},supportedDataTypes:{value:[$data.Integer,$data.String,$data.Number,$data.Blob,$data.Boolean,$data.Date,$data.Object,$data.Guid,$data.GeographyPoint,$data.GeographyLineString,$data.GeographyPolygon,$data.GeographyMultiPoint,$data.GeographyMultiLineString,$data.GeographyMultiPolygon,$data.GeographyCollection,$data.GeometryPoint,$data.GeometryLineString,$data.GeometryPolygon,$data.GeometryMultiPoint,$data.GeometryMultiLineString,$data.GeometryMultiPolygon,$data.GeometryCollection,$data.Byte,$data.SByte,$data.Decimal,$data.Float,$data.Int16,$data.Int32,$data.Int64,$data.Time,$data.DateTimeOffset],writable:!1},supportedBinaryOperators:{value:{equal:{mapTo:" == ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},notEqual:{mapTo:" != ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},equalTyped:{mapTo:" === ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},notEqualTyped:{mapTo:" !== ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},greaterThan:{mapTo:" > ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},greaterThanOrEqual:{mapTo:" >= ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},lessThan:{mapTo:" < ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},lessThenOrEqual:{mapTo:" <= ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},or:{mapTo:" || ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},and:{mapTo:" && ",dataType:"boolean",allowedIn:[$data.Expressions.FilterExpression,$data.Expressions.OrderExpression]},"in":{mapTo:".indexOf(",allowedIn:[$data.Expressions.FilterExpression],rightValue:") > -1",reverse:!0}}},supportedUnaryOperators:{value:{not:{mapTo:"!"}}},supportedFieldOperations:{value:{contains:{mapTo:"$data.StringFunctions.contains(",rightValue:")",dataType:"boolean",parameters:[{name:"@expression",dataType:"string"},{name:"strFragment",dataType:"string"}]},startsWith:{mapTo:"$data.StringFunctions.startsWith(",rightValue:")",dataType:"boolean",parameters:[{name:"@expression",dataType:"string"},{name:"strFragment",dataType:"string"}]},endsWith:{mapTo:"$data.StringFunctions.endsWith(",rightValue:")",dataType:"boolean",parameters:[{name:"@expression",dataType:"string"},{name:"strFragment",dataType:"string"}]},length:{dataType:"number",propertyFunction:!0},substr:{mapTo:"substr(",rightValue:")",dataType:"string",parameters:[{name:"startFrom",dataType:"number"},{name:"length",dataType:"number"}],propertyFunction:!0},toLowerCase:{dataType:"string",mapTo:"toLowerCase()",propertyFunction:!0},toUpperCase:{dataType:"string",mapTo:"toUpperCase()",propertyFunction:!0},trim:{dataType:$data.String,mapTo:"trim()",propertyFunction:!0},ltrim:{dataType:$data.String,mapTo:"trimLeft()",propertyFunction:!0},rtrim:{dataType:$data.String,mapTo:"trimRight()",propertyFunction:!0}},enumerable:!0,writable:!0},supportedSetOperations:{value:{filter:{},map:{},length:{},forEach:{},toArray:{},single:{},some:{},take:{},skip:{},orderBy:{},orderByDescending:{},first:{}},enumerable:!0,writable:!0},fieldConverter:{value:$data.InMemoryConverter},supportedAutoincrementKeys:{value:{"$data.Integer":!0,"$data.Int32":!0,"$data.Guid":function(){return $data.createGuid()}}}},null);$C("$data.storageProviders.InMemory.LocalStorageProvider",$data.storageProviders.InMemory.InMemoryProvider,null,{constructor:function(){this.providerConfiguration.persistentData=!0}},null);$data.StorageProviderBase.registerProvider("InMemory",$data.storageProviders.InMemory.InMemoryProvider);$data.StorageProviderBase.registerProvider("LocalStore",$data.storageProviders.InMemory.LocalStorageProvider);$C("$data.storageProviders.InMemory.InMemoryCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.provider=n},compile:function(n){var i={urlText:""},r,t;this.Visit(n.expression,i);r={};for(t in i)t.indexOf("$")==0&&(r[t]=i[t]);return r},VisitOrderExpression:function(n,t){var r,i;this.Visit(n.source,t);t.data="";t.lambda="";r=Container.createInMemoryFunctionCompiler(this.provider);r.compile(n.selector,t);t.$order=t.$order||[];i=new Function(t.lambda,"return "+t.data+";");i.ASC=n.nodeType=="OrderBy";t.$order.push(i);t.data="";t.lambda=""},VisitIncludeExpression:function(n,t){this.Visit(n.source,t);t.$include=t.$include||[];t.$include.indexOf(n.selector.value)<0&&t.$include.push(n.selector.value)},VisitPagingExpression:function(n,t){this.Visit(n.source,t);t["$"+n.nodeType.toLowerCase()]=n.amount.value},VisitProjectionExpression:function(n,t){this.defaultFunctionCompiler(n,t,"$map")},VisitFilterExpression:function(n,t){this.defaultFunctionCompiler(n,t,"$filter")},VisitSomeExpression:function(n,t){this.defaultFunctionCompiler(n,t,"$some")},VisitEveryExpression:function(n,t){this.defaultFunctionCompiler(n,t,"$every")},VisitCountExpression:function(n,t){this.Visit(n.source,t);t.$length=!0},VisitServiceOperationExpression:function(n,t){t.$serviceOperation={name:n.cfg.serviceName,params:n.params}},defaultFunctionCompiler:function(n,t,i){this.Visit(n.source,t);t.data="";t.lambda="";var r=Container.createInMemoryFunctionCompiler(this.provider);r.compile(n.selector,t);t[i]=new Function(t.lambda,"return "+t.data+";");t.data="";t.lambda=""}},{});$C("$data.storageProviders.InMemory.InMemoryFunctionCompiler",$data.Expressions.EntityExpressionVisitor,null,{constructor:function(n){this.provider=n},compile:function(n,t){this.Visit(n,t)},VisitParametricQueryExpression:function(n,t){this.Visit(n.expression,t)},VisitUnaryExpression:function(n,t){t.data+=n.resolution.mapTo;t.data+="(";this.Visit(n.operand,t);t.data+=")"},VisitSimpleBinaryExpression:function(n,t){var u=this,r,i;n.resolution.reverse?(t.data+="(",n.resolution.name==="in"&&Array.isArray(n.right.value)?(t.data+="[",n.right.value.forEach(function(n,i){i>0&&(t.data+=",");u.Visit(n,t)}),t.data+="]"):i=this.Visit(n.right,t),t.data+=n.resolution.mapTo,r=this.Visit(n.left,t),n.resolution.rightValue&&(t.data+=n.resolution.rightValue),t.data+=")"):(t.data+="(",r=this.Visit(n.left,t),t.data+=n.resolution.mapTo,i=this.Visit(n.right,t),t.data+=")")},VisitConstantExpression:function(n,t){var r=Container.resolveType(n.type),u=Container.resolveName(r),i=this.provider.fieldConverter.escape[u];t.data+=i?i(n.value):n.value},VisitMemberInfoExpression:function(n,t){t.data+=".";t.data+=n.memberName},VisitComplexTypeExpression:function(n,t){this.Visit(n.source,t);this.Visit(n.selector,t)},VisitEntityExpression:function(n,t){t.data+=n.selector.lambda;t.lambda=n.selector.lambda;this.Visit(n.source,t)},VisitEntitySetExpression:function(){},VisitObjectLiteralExpression:function(n,t){var i,r;for(t.data+="{ ",i=0;i<n.members.length;i++)r=n.members[i],i>0&&(t.data+=", "),this.Visit(r,t);t.data+=" }"},VisitObjectFieldExpression:function(n,t){t.data+=n.fieldName+": ";this.Visit(n.expression,t)},VisitEntityFieldOperationExpression:function(n,t){var i,r;Guard.requireType("expression.operation",n.operation,$data.Expressions.MemberInfoExpression);i=n.operation.memberDefinition;i.propertyFunction&&(this.Visit(n.source,t),t.data+=".");r=i.mapTo||i.name;t.data+=r;var u=0,f=i.parameters||[],e=f.map(function(t){return t.name==="@expression"?n.source:n.parameters[u++]});e.forEach(function(n,i){n&&(i>0&&(t.data+=","),this.Visit(n,t))},this);t.data+=i.rightValue||""}});
/*! @license
    Slip.js 1.2.0
    © 2014 Kornel Lesiński <kornel@geekhood.net>. All rights reserved.
    Redistribution and use in source and binary forms, with or without modification,
    are permitted provided that the following conditions are met:
    1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
       the following disclaimer in the documentation and/or other materials provided with the distribution.
    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
    INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
    DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
    SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
    WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
    USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
window.Slip=function(){"use strict";function e(n,t){if("string"==typeof n&&(n=document.querySelector(n)),!n||!n.addEventListener)throw new Error("Please specify DOM node to attach to");if(!this||this===window)return new e(n,t);this.options=t=t||{};this.options.keepSwipingPercent=t.keepSwipingPercent||0;this.options.minimumSwipeVelocity=t.minimumSwipeVelocity||1;this.options.minimumSwipeTime=t.minimumSwipeTime||110;this.cancel=this.setState.bind(this,this.states.idle);this.onTouchStart=this.onTouchStart.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onSelection=this.onSelection.bind(this);this.setState(this.states.idle);this.attach(n)}function s(t){var r=t.style[n],i;return r?{value:r,original:r}:window.getComputedStyle&&(i=window.getComputedStyle(t).getPropertyValue(u),i&&i!=="none")?{value:i,original:""}:{value:"",original:""}}function y(n,t){for(var r=0,u=0,i=0;i<t.length;i++)t[i].nodeType===1&&(u++,t[i]===n.node&&(r=u-1));return r}var h=/Chrome\/[34]/.test(navigator.userAgent),p=h,c=h,i=document.createElement("div"),t="webkitTransition"in i.style?"webkitTransition":"transition",n="webkitTransform"in i.style?"webkitTransform":"transform",u=n==="webkitTransform"?"-webkit-transform":"transform",l="webkitUserSelect"in i.style?"webkitUserSelect":"userSelect",r,a;i.style[n]="translateZ(0)";r=i.style[n]?"translateZ(0) ":"";a=i.style[n]?"translateZ(1px) ":"";i=null;var o=0,f=!1,v=function(){};return e.prototype={container:null,options:{},state:null,target:null,usingTouch:!1,mouseHandlersAttached:!1,startPosition:null,latestPosition:null,previousPosition:null,canPreventScrolling:!1,states:{idle:function(){return this.target=null,this.usingTouch=!1,this.removeMouseHandlers(),{allowTextSelection:!0}},undecided:function(){if(this.target.height=this.target.node.offsetHeight,this.target.node.style[t]="",this.dispatch(this.target.originalTarget,"beforewait"))var n=setTimeout(function(){var n=this.getAbsoluteMovement();this.canPreventScrolling&&n.x<15&&n.y<25&&this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder)}.bind(this),300);else this.dispatch(this.target.originalTarget,"beforereorder")&&this.setState(this.states.reorder);return{leaveState:function(){clearTimeout(n)},onMove:function(){var n=this.getAbsoluteMovement();if(n.x>20&&n.y<Math.max(100,this.target.height)){if(this.dispatch(this.target.originalTarget,"beforeswipe",{directionX:n.directionX,directionY:n.directionY}))return this.setState(this.states.swipe),!1;this.setState(this.states.idle)}return n.y>20&&this.setState(this.states.idle),n.x>n.y*1.2?!1:void 0},onLeave:function(){this.setState(this.states.idle)},onEnd:function(){var n=this.dispatch(this.target.originalTarget,"tap");return this.setState(this.states.idle),n}}},swipe:function(){function f(){i.className=i.className.replace(/(?:^| )slip-swiping-container/,"")}var u=!1,i=this.container,e=y(this.target,this.container.childNodes);return i.className+=" slip-swiping-container",this.target.height=this.target.node.offsetHeight,{leaveState:function(){u?this.animateSwipe(function(i){if(i.node.style[n]=i.baseTransform.original,i.node.style[t]="",this.dispatch(i.node,"afterswipe"))return f(),!0;this.animateToZero(undefined,i)}.bind(this)):(this.animateToZero(f),this.dispatch(this.target.node,"cancelswipe"))},onMove:function(){var t=this.getTotalMovement();if(Math.abs(t.y)<this.target.height+20)return this.target.node.style[n]="translate("+t.x+"px,0) "+r+this.target.baseTransform.value,!1;this.setState(this.states.idle)},onLeave:function(){this.state.onEnd.call(this)},onEnd:function(){var n=this.getAbsoluteMovement(),i=n.x/n.time,r=Math.abs((this.startPosition.x-this.previousPosition.x)/this.container.clientWidth)*100,t=i>this.options.minimumSwipeVelocity&&n.time>this.options.minimumSwipeTime||this.options.keepSwipingPercent&&r>this.options.keepSwipingPercent;return t&&this.dispatch(this.target.node,"swipe",{direction:n.directionX,originalIndex:e})&&(u=!0),this.setState(this.states.idle),!t}}},reorder:function(){function w(){var t,u;return o&&(clearTimeout(o),o=null),t=this.getTotalMovement(),this.target.node.style[n]="translate(0,"+t.y+"px) "+a+this.target.baseTransform.value,u=this.target.height,i.forEach(function(i){var f=0;i.pos<0&&t.y<0&&i.pos>t.y?f=u:i.pos>0&&t.y>0&&i.pos<t.y&&(f=-u);i.node.style[n]=f?"translate(0,"+f+"px) "+r+i.baseTransform.value:i.baseTransform.original}),!1}var f,h;this.target.height=this.target.node.offsetHeight;var e=this.container.childNodes,v=y(this.target,e),o,p=this.target.node.offsetTop+this.target.height/2,i=[];for(f=0;f<e.length;f++)e[f].nodeType==1&&e[f]!==this.target.node&&(h=e[f].offsetTop,e[f].style[t]=u+" 0.2s ease-in-out",i.push({node:e[f],baseTransform:s(e[f]),pos:h+(h<p?e[f].offsetHeight:0)-p}));return this.target.node.className+=" slip-reordering",this.target.node.style.zIndex="99999",this.target.node.style[l]="none",c&&(this.container.style.webkitTransformStyle="preserve-3d"),w.call(this),{leaveState:function(){o&&clearTimeout(o);c&&(this.container.style.webkitTransformStyle="");this.target.node.className=this.target.node.className.replace(/(?:^| )slip-reordering/,"");this.target.node.style[l]="";this.animateToZero(function(n){n.node.style.zIndex=""});i.forEach(function(i){i.node.style[n]=i.baseTransform.original;i.node.style[t]=""})},onMove:w,onLeave:function(){o&&clearTimeout(o);o=setTimeout(function(){o=null;this.cancel()}.bind(this),700)},onEnd:function(){var t=this.getTotalMovement(),n;if(t.y<0){for(n=0;n<i.length;n++)if(i[n].pos>t.y){this.dispatch(this.target.node,"reorder",{spliceIndex:n,insertBefore:i[n].node,originalIndex:v});break}}else for(n=i.length-1;n>=0;n--)if(i[n].pos<t.y){this.dispatch(this.target.node,"reorder",{spliceIndex:n+1,insertBefore:i[n+1]?i[n+1].node:null,originalIndex:v});break}return this.setState(this.states.idle),!1}}}},attach:function(n){o++;this.container&&this.detach();!f&&p&&(f=!0,document.body.addEventListener("touchstart",v,!1));this.container=n;this.otherNodes=[];document.addEventListener("selectionchange",this.onSelection,!1);this.container.addEventListener("touchcancel",this.cancel,!1);this.container.addEventListener("touchstart",this.onTouchStart,!1);this.container.addEventListener("touchmove",this.onTouchMove,!1);this.container.addEventListener("touchend",this.onTouchEnd,!1);this.container.addEventListener("mousedown",this.onMouseDown,!1)},detach:function(){this.cancel();this.container.removeEventListener("mousedown",this.onMouseDown,!1);this.container.removeEventListener("touchend",this.onTouchEnd,!1);this.container.removeEventListener("touchmove",this.onTouchMove,!1);this.container.removeEventListener("touchstart",this.onTouchStart,!1);this.container.removeEventListener("touchcancel",this.cancel,!1);document.removeEventListener("selectionchange",this.onSelection,!1);o--;!o&&f&&(f=!1,document.body.removeEventListener("touchstart",v,!1))},setState:function(n){if(this.state){if(this.state.ctor===n)return;this.state.leaveState&&this.state.leaveState.call(this)}var i=this.state,t=n.call(this);this.state===i&&(t.ctor=n,this.state=t)},findTargetNode:function(n){while(n&&n.parentNode!==this.container)n=n.parentNode;return n},onSelection:function(n){var t=n.target===document||this.findTargetNode(n);t&&(n.cancelable||n.defaultPrevented?this.state.allowTextSelection||n.preventDefault():this.setState(this.states.idle))},addMouseHandlers:function(){this.mouseHandlersAttached||(this.mouseHandlersAttached=!0,document.documentElement.addEventListener("mouseleave",this.onMouseLeave,!1),window.addEventListener("mousemove",this.onMouseMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),window.addEventListener("blur",this.cancel,!1))},removeMouseHandlers:function(){this.mouseHandlersAttached&&(this.mouseHandlersAttached=!1,document.documentElement.removeEventListener("mouseleave",this.onMouseLeave,!1),window.removeEventListener("mousemove",this.onMouseMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),window.removeEventListener("blur",this.cancel,!1))},onMouseLeave:function(n){this.usingTouch||(n.target===document.documentElement||n.relatedTarget===document.documentElement)&&this.state.onLeave&&this.state.onLeave.call(this)},onMouseDown:function(n){!this.usingTouch&&n.button==0&&this.setTarget(n)&&(this.addMouseHandlers(),this.canPreventScrolling=!0,this.startAtPosition({x:n.clientX,y:n.clientY,time:n.timeStamp}))},onTouchStart:function(n){if(this.usingTouch=!0,this.canPreventScrolling=!0,n.touches.length>1){this.setState(this.states.idle);return}this.setTarget(n)&&this.startAtPosition({x:n.touches[0].clientX,y:n.touches[0].clientY-window.scrollY,time:n.timeStamp})},setTarget:function(n){var i=this.findTargetNode(n.target),t;if(!i)return this.setState(this.states.idle),!1;for(t=i.parentNode;t;)if(t.scrollHeight>t.clientHeight&&window.getComputedStyle(t)["overflow-y"]!="visible")break;else t=t.parentNode;return this.target={originalTarget:n.target,node:i,scrollContainer:t,baseTransform:s(i)},!0},startAtPosition:function(n){this.startPosition=this.previousPosition=this.latestPosition=n;this.setState(this.states.undecided)},updatePosition:function(n,t){var f;if(this.target!=null){this.latestPosition=t;var r=40,u=0,i=this.target.scrollContainer||document.body,e=i.getBoundingClientRect(),o=this.target.node.getBoundingClientRect(),s=Math.min(e.bottom,window.innerHeight)-o.bottom,h=o.top-Math.max(e.top,0);s<r?u=r-s:h<r&&(u=h-r);f=i.scrollTop;i.scrollTop+=u;f!=i.scrollTop&&(this.startPosition.y+=f-i.scrollTop);this.state.onMove&&this.state.onMove.call(this)===!1&&n.preventDefault();this.latestPosition.time-this.previousPosition.time>100&&(this.previousPosition=this.latestPosition)}},onMouseMove:function(n){this.updatePosition(n,{x:n.clientX,y:n.clientY,time:n.timeStamp})},onTouchMove:function(n){this.updatePosition(n,{x:n.touches[0].clientX,y:n.touches[0].clientY-window.scrollY,time:n.timeStamp});this.canPreventScrolling=!1},onMouseUp:function(n){this.usingTouch||n.button!==0||this.state.onEnd&&!1===this.state.onEnd.call(this)&&n.preventDefault()},onTouchEnd:function(n){n.touches.length>1?this.cancel():this.state.onEnd&&!1===this.state.onEnd.call(this)&&n.preventDefault()},getTotalMovement:function(){return{x:this.latestPosition.x-this.startPosition.x,y:this.latestPosition.y-this.startPosition.y}},getAbsoluteMovement:function(){return{x:Math.abs(this.latestPosition.x-this.startPosition.x),y:Math.abs(this.latestPosition.y-this.startPosition.y),time:this.latestPosition.time-this.startPosition.time,directionX:this.latestPosition.x-this.startPosition.x<0?"left":"right",directionY:this.latestPosition.y-this.startPosition.y<0?"up":"down"}},dispatch:function(n,t,i){var r=document.createEvent("CustomEvent");return r&&r.initCustomEvent?r.initCustomEvent("slip:"+t,!0,!0,i):(r=document.createEvent("Event"),r.initEvent("slip:"+t,!0,!0),r.detail=i),n.dispatchEvent(r)},getSiblings:function(n){for(var i=[],t=n.node.nextSibling;t;)t.nodeType==1&&i.push({node:t,baseTransform:s(t)}),t=t.nextSibling;return i},animateToZero:function(i,f){f=f||this.target;f.node.style[t]=u+" 0.1s ease-out";f.node.style[n]="translate(0,0) "+r+f.baseTransform.value;setTimeout(function(){f.node.style[t]="";f.node.style[n]=f.baseTransform.original;i&&i.call(this,f)}.bind(this),101)},animateSwipe:function(i){var f=this.target,e=this.getSiblings(f),o="translate(0,"+this.target.height+"px) "+r+" ";f.node.style[t]="all 0.1s linear";f.node.style[n]=" translate("+(this.getTotalMovement().x>0?"":"-")+"100%,0) "+r+f.baseTransform.value;setTimeout(function(){i.call(this,f)&&(e.forEach(function(i){i.node.style[t]="";i.node.style[n]=o+i.baseTransform.value}),setTimeout(function(){e.forEach(function(i){i.node.style[t]=u+" 0.1s ease-in-out";i.node.style[n]="translate(0,0) "+r+i.baseTransform.value});setTimeout(function(){e.forEach(function(i){i.node.style[t]="";i.node.style[n]=i.baseTransform.original})},101)},1))}.bind(this),101)}},"function"==typeof define&&define.amd&&define(function(){return e}),e}();
/*!
 *  howler.js v2.0.0-beta5
 *  howlerjs.com
 *
 *  (c) 2013-2015, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
(function(){"use strict";function a(){var t;try{typeof AudioContext!="undefined"?n=new AudioContext:typeof webkitAudioContext!="undefined"?n=new webkitAudioContext:i=!1}catch(r){i=!1}if(!i)if(typeof Audio!="undefined")try{t=new Audio;typeof t.oncanplaythrough=="undefined"&&(e="canplay")}catch(r){u=!0}else u=!0;try{t=new Audio;t.muted&&(u=!0)}catch(r){}i&&(f=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),f.gain.value=1,f.connect(n.destination))}var n=null,i=!0,u=!1,f=null,e="canplaythrough",h,t,o,s;if(a(),h=function(){this.init()},h.prototype={init:function(){var r=this||t;return r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r.state=n?n.state||"running":"running",r.autoSuspend=!0,r._autoSuspend(),r.mobileAutoEnable=!0,r.noAudio=u,r.usingWebAudio=i,r.ctx=n,u||r._setupCodecs(),r},volume:function(n){var r=this||t,u,s,o,e;if(n=parseFloat(n),typeof n!="undefined"&&n>=0&&n<=1){for(r._volume=n,i&&(f.gain.value=n),u=0;u<r._howls.length;u++)if(!r._howls[u]._webAudio)for(s=r._howls[u]._getSoundIds(),o=0;o<s.length;o++)e=r._howls[u]._soundById(s[o]),e&&e._node&&(e._node.volume=e._volume*n);return r}return r._volume},mute:function(n){var r=this||t,u,s,o,e;for(r._muted=n,i&&(f.gain.value=n?0:r._volume),u=0;u<r._howls.length;u++)if(!r._howls[u]._webAudio)for(s=r._howls[u]._getSoundIds(),o=0;o<s.length;o++)e=r._howls[u]._soundById(s[o]),e&&e._node&&(e._node.muted=n?!0:e._muted);return r},unload:function(){for(var i=this||t,r=i._howls.length-1;r>=0;r--)i._howls[r].unload();return i.usingWebAudio&&typeof n.close!="undefined"&&(i.ctx=null,n.close(),a(),i.ctx=n),i},codecs:function(n){return(this||t)._codecs[n]},_setupCodecs:function(){var i=this||t,n=new Audio,r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),u=/OPR\//.test(navigator.userAgent);return i._codecs={mp3:!!(!u&&(r||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!n.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},i},_enableMobileAudio:function(){var i=this||t,u=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk/i.test(navigator.userAgent),f=!!("ontouchend"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),r;if(!n||!i._mobileEnabled&&u&&f)return i._mobileEnabled=!1,r=function(){var u=n.createBuffer(1,1,22050),t=n.createBufferSource();t.buffer=u;t.connect(n.destination);typeof t.start=="undefined"?t.noteOn(0):t.start(0);t.onended=function(){t.disconnect(0);i._mobileEnabled=!0;i.mobileAutoEnable=!1;document.removeEventListener("touchend",r,!0)}},document.addEventListener("touchend",r,!0),i},_autoSuspend:function(){var t=this,r,u;if(t.autoSuspend&&n&&typeof n.suspend!="undefined"&&i){for(r=0;r<t._howls.length;r++)if(t._howls[r]._webAudio)for(u=0;u<t._howls[r]._sounds.length;u++)if(!t._howls[r]._sounds[u]._paused)return t;return t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",n.suspend().then(function(){t.state="suspended";t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(n&&typeof n.resume!="undefined"&&i)return t.state==="running"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"?(t.state="resuming",n.resume().then(function(){t.state="running"})):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}},t=new h,o=function(n){var t=this;if(!n.src||n.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}t.init(n)},o.prototype={init:function(r){var u=this;return u._autoplay=r.autoplay||!1,u._format=r.format||null,u._html5=r.html5||!1,u._muted=r.mute||!1,u._loop=r.loop||!1,u._pool=r.pool||5,u._preload=typeof r.preload=="boolean"?r.preload:!0,u._rate=r.rate||1,u._sprite=r.sprite||{},u._src=typeof r.src!="string"?r.src:[r.src],u._volume=r.volume!==undefined?r.volume:1,u._duration=0,u._loaded=!1,u._sounds=[],u._endTimers={},u._onend=r.onend?[{fn:r.onend}]:[],u._onfaded=r.onfaded?[{fn:r.onfaded}]:[],u._onload=r.onload?[{fn:r.onload}]:[],u._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],u._onpause=r.onpause?[{fn:r.onpause}]:[],u._onplay=r.onplay?[{fn:r.onplay}]:[],u._onstop=r.onstop?[{fn:r.onstop}]:[],u._webAudio=i&&!u._html5,typeof n!="undefined"&&n&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(u),u._preload&&u.load(),u},load:function(){var n=this,f=null,r,i,e;if(u){n._emit("loaderror",null,"No audio support.");return}for(typeof n._src=="string"&&(n._src=[n._src]),r=0;r<n._src.length;r++)if(n._format&&n._format[r]?i=n._format[r]:(e=n._src[r],i=/^data:audio\/([^;,]+);/i.exec(e),i||(i=/\.([^.]+)$/.exec(e.split("?",1)[0])),i&&(i=i[1].toLowerCase())),t.codecs(i)){f=n._src[r];break}if(!f){n._emit("loaderror",null,"No codec support for selected audio sources.");return}return n._src=f,window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(n._html5=!0,n._webAudio=!1),new s(n),n._webAudio&&v(n),n},play:function(i){var u=this,w=arguments,o=null,l,h,r,f,v,y,p;if(typeof i=="number")o=i,i=null;else if(typeof i=="undefined"){for(i="__default",l=0,h=0;h<u._sounds.length;h++)u._sounds[h]._paused&&!u._sounds[h]._ended&&(l++,o=u._sounds[h]._id);l===1?i=null:o=null}if(r=o?u._soundById(o):u._inactiveSound(),!r)return null;if(o&&!i&&(i=r._sprite||"__default"),!u._loaded&&!u._sprite[i]){u.once("load",function(){u.play(u._soundById(r._id)?r._id:undefined)});return r._id}if(o&&!r._paused)return r._id;u._webAudio&&t._autoResume();var s=r._seek>0?r._seek:u._sprite[i][0]/1e3,a=(u._sprite[i][0]+u._sprite[i][1])/1e3-s,c=a*1e3/Math.abs(r._rate);if(c!==Infinity&&(u._endTimers[r._id]=setTimeout(u._ended.bind(u,r),c)),r._paused=!1,r._ended=!1,r._sprite=i,r._seek=s,r._start=u._sprite[i][0]/1e3,r._stop=(u._sprite[i][0]+u._sprite[i][1])/1e3,r._loop=!!(r._loop||u._sprite[i][2]),f=r._node,u._webAudio)if(v=function(){u._refreshBuffer(r);var i=r._muted||u._muted?0:r._volume*t.volume();f.gain.setValueAtTime(i,n.currentTime);r._playStart=n.currentTime;typeof f.bufferSource.start=="undefined"?r._loop?f.bufferSource.noteGrainOn(0,s,86400):f.bufferSource.noteGrainOn(0,s,a):r._loop?f.bufferSource.start(0,s,86400):f.bufferSource.start(0,s,a);u._endTimers[r._id]||c===Infinity||(u._endTimers[r._id]=setTimeout(u._ended.bind(u,r),c));w[1]||setTimeout(function(){u._emit("play",r._id)},0)},u._loaded)v();else{u.once("load",v);u._clearTimer(r._id)}else y=function(){f.currentTime=s;f.muted=r._muted||u._muted||t._muted||f.muted;f.volume=r._volume*t.volume();f.playbackRate=r._rate;setTimeout(function(){f.play();w[1]||u._emit("play",r._id)},0)},f.readyState===4||!f.readyState&&navigator.isCocoonJS?y():(p=function(){c!==Infinity&&(u._endTimers[r._id]=setTimeout(u._ended.bind(u,r),c));y();f.removeEventListener(e,p,!1)},f.addEventListener(e,p,!1),u._clearTimer(r._id));return r._id},pause:function(n){var i=this,u,r,t;if(!i._loaded){i.once("play",function(){i.pause(n)});return i}for(u=i._getSoundIds(n),r=0;r<u.length;r++)if(i._clearTimer(u[r]),t=i._soundById(u[r]),t&&!t._paused){if(t._seek=i.seek(u[r]),t._paused=!0,i._stopFade(u[r]),t._node)if(i._webAudio){if(!t._node.bufferSource)return i;typeof t._node.bufferSource.stop=="undefined"?t._node.bufferSource.noteOff(0):t._node.bufferSource.stop(0);t._node.bufferSource=null}else isNaN(t._node.duration)&&t._node.duration!==Infinity||t._node.pause();arguments[1]||i._emit("pause",t._id)}return i},stop:function(n){var i=this,u,r,t;if(!i._loaded){if(typeof i._sounds[0]._sprite!="undefined")i.once("play",function(){i.stop(n)});return i}for(u=i._getSoundIds(n),r=0;r<u.length;r++)if(i._clearTimer(u[r]),t=i._soundById(u[r]),t&&!t._paused){if(t._seek=t._start||0,t._paused=!0,t._ended=!0,i._stopFade(u[r]),t._node)if(i._webAudio){if(!t._node.bufferSource)return i;typeof t._node.bufferSource.stop=="undefined"?t._node.bufferSource.noteOff(0):t._node.bufferSource.stop(0);t._node.bufferSource=null}else isNaN(t._node.duration)&&t._node.duration!==Infinity||(t._node.pause(),t._node.currentTime=t._start||0);i._emit("stop",t._id)}return i},mute:function(i,r){var u=this,o,e,f;if(!u._loaded){u.once("play",function(){u.mute(i,r)});return u}if(typeof r=="undefined")if(typeof i=="boolean")u._muted=i;else return u._muted;for(o=u._getSoundIds(r),e=0;e<o.length;e++)f=u._soundById(o[e]),f&&(f._muted=i,u._webAudio&&f._node?f._node.gain.setValueAtTime(i?0:f._volume*t.volume(),n.currentTime):f._node&&(f._node.muted=t._muted?!0:i));return u},volume:function(){var i=this,u=arguments,e,f,s,h,r,o;if(u.length===0)return i._volume;if(u.length===1?(s=i._getSoundIds(),h=s.indexOf(u[0]),h>=0?f=parseInt(u[0],10):e=parseFloat(u[0])):u.length>=2&&(e=parseFloat(u[0]),f=parseInt(u[1],10)),typeof e!="undefined"&&e>=0&&e<=1){if(!i._loaded){i.once("play",function(){i.volume.apply(i,u)});return i}for(typeof f=="undefined"&&(i._volume=e),f=i._getSoundIds(f),o=0;o<f.length;o++)r=i._soundById(f[o]),r&&(r._volume=e,u[2]||i._stopFade(f[o]),i._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e*t.volume(),n.currentTime):r._node&&!r._muted&&(r._node.volume=e*t.volume()))}else return r=f?i._soundById(f):i._sounds[0],r?r._volume:0;return i},fade:function(t,i,r,u){var f=this,s,o,e,c,h;if(!f._loaded){f.once("play",function(){f.fade(t,i,r,u)});return f}for(f.volume(t,u),s=f._getSoundIds(u),o=0;o<s.length;o++)if(e=f._soundById(s[o]),e)if(f._webAudio&&!e._muted)c=n.currentTime,h=c+r/1e3,e._volume=t,e._node.gain.setValueAtTime(t,c),e._node.gain.linearRampToValueAtTime(i,h),e._timeout=setTimeout(function(t,r){delete r._timeout;setTimeout(function(){r._volume=i;f._emit("faded",t)},h-n.currentTime>0?Math.ceil((h-n.currentTime)*1e3):0)}.bind(f,s[o],e),r);else{var l=Math.abs(t-i),a=t>i?"out":"in",v=l/.01,y=r/v;(function(){var n=t;e._interval=setInterval(function(t,r){n+=a==="in"?.01:-.01;n=Math.max(0,n);n=Math.min(1,n);n=Math.round(n*100)/100;f.volume(n,t,!0);n===i&&(clearInterval(r._interval),delete r._interval,f._emit("faded",t))}.bind(f,s[o],e),y)})()}return f},_stopFade:function(t){var r=this,i=r._soundById(t);return i._interval?(clearInterval(i._interval),delete i._interval,r._emit("faded",t)):i._timeout&&(clearTimeout(i._timeout),delete i._timeout,i._node.gain.cancelScheduledValues(n.currentTime),r._emit("faded",t)),r},loop:function(){var i=this,t=arguments,r,e,n,f,u;if(t.length===0)return i._loop;if(t.length===1)if(typeof t[0]=="boolean")r=t[0],i._loop=r;else return n=i._soundById(parseInt(t[0],10)),n?n._loop:!1;else t.length===2&&(r=t[0],e=parseInt(t[1],10));for(f=i._getSoundIds(e),u=0;u<f.length;u++)n=i._soundById(f[u]),n&&(n._loop=r,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=r));return i},rate:function(){var n=this,r=arguments,u,i,e,o,t,f;if(r.length===0?i=n._sounds[0]._id:r.length===1?(e=n._getSoundIds(),o=e.indexOf(r[0]),o>=0?i=parseInt(r[0],10):u=parseFloat(r[0])):r.length===2&&(u=parseFloat(r[0]),i=parseInt(r[1],10)),typeof u=="number"){if(!n._loaded){n.once("load",function(){n.rate.apply(n,r)});return n}for(typeof i=="undefined"&&(n._rate=u),i=n._getSoundIds(i),f=0;f<i.length;f++)if(t=n._soundById(i[f]),t){t._rate=u;n._webAudio&&t._node&&t._node.bufferSource?t._node.bufferSource.playbackRate.value=u:t._node&&(t._node.playbackRate=u);var s=n.seek(i[f]),h=(n._sprite[t._sprite][0]+n._sprite[t._sprite][1])/1e3-s,c=h*1e3/Math.abs(t._rate);n._clearTimer(i[f]);n._endTimers[i[f]]=setTimeout(n._ended.bind(n,t),c)}}else return t=n._soundById(i),t?t._rate:n._rate;return n},seek:function(){var t=this,r=arguments,f,i,o,s,u,e;if(r.length===0?i=t._sounds[0]._id:r.length===1?(o=t._getSoundIds(),s=o.indexOf(r[0]),s>=0?i=parseInt(r[0],10):(i=t._sounds[0]._id,f=parseFloat(r[0]))):r.length===2&&(f=parseFloat(r[0]),i=parseInt(r[1],10)),typeof i=="undefined")return t;if(!t._loaded){t.once("play",function(){t.seek.apply(t,r)});return t}if(u=t._soundById(i),u)if(f>=0)e=t.playing(i),e&&t.pause(i,!0),u._seek=f,t._clearTimer(i),e&&t.play(i,!0);else return t._webAudio?u._seek+(t.playing(i)?n.currentTime-u._playStart:0):u._node.currentTime;return t},playing:function(n){var t=this,i=t._soundById(n)||t._sounds[0];return i?!i._paused:!1},duration:function(){return this._duration},unload:function(){for(var f,u=this,i=u._sounds,n=0;n<i.length;n++)i[n]._paused||(u.stop(i[n]._id),u._emit("end",i[n]._id)),u._webAudio||(i[n]._node.src="",i[n]._node.removeEventListener("error",i[n]._errorFn,!1),i[n]._node.removeEventListener(e,i[n]._loadFn,!1)),delete i[n]._node,u._clearTimer(i[n]._id),f=t._howls.indexOf(u),f>=0&&t._howls.splice(f,1);return r&&delete r[u._src],u._sounds=[],u=null,null},on:function(n,t,i,r){var u=this,f=u["_on"+n];return typeof t=="function"&&f.push(r?{id:i,fn:t,once:r}:{id:i,fn:t}),u},off:function(n,t,i){var u=this,e=u["_on"+n],f,r;if(t){for(r=0;r<e.length;r++)if(t===e[r].fn&&i===e[r].id){e.splice(r,1);break}}else if(n)u["_on"+n]=[];else for(f=Object.keys(u),r=0;r<f.length;r++)f[r].indexOf("_on")===0&&Array.isArray(u[f[r]])&&(u[f[r]]=[]);return u},once:function(n,t,i){var r=this;r.on(n,t,i,1);return r},_emit:function(n,t,i){for(var f=this,u=f["_on"+n],r=0;r<u.length;r++)u[r].id&&u[r].id!==t||(setTimeout(function(n){n.call(this,t,i)}.bind(f,u[r].fn),0),u[r].once&&f.off(n,u[r].fn,u[r].id));return f},_ended:function(i){var r=this,e=i._sprite,u=!!(i._loop||r._sprite[e][2]),f;return r._emit("end",i._id),!r._webAudio&&u&&r.stop(i._id).play(i._id),r._webAudio&&u&&(r._emit("play",i._id),i._seek=i._start||0,i._playStart=n.currentTime,f=(i._stop-i._start)*1e3/Math.abs(i._rate),r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),f)),r._webAudio&&!u&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,r._clearTimer(i._id),i._node.bufferSource=null,t._autoSuspend()),r._webAudio||u||r.stop(i._id),r},_clearTimer:function(n){var t=this;return t._endTimers[n]&&(clearTimeout(t._endTimers[n]),delete t._endTimers[n]),t},_soundById:function(n){for(var i=this,t=0;t<i._sounds.length;t++)if(n===i._sounds[t]._id)return i._sounds[t];return null},_inactiveSound:function(){var n=this,t;for(n._drain(),t=0;t<n._sounds.length;t++)if(n._sounds[t]._ended)return n._sounds[t].reset();return new s(n)},_drain:function(){var t=this,r=t._pool,i=0,n=0;if(!(t._sounds.length<r)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=r)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(n){var r=this,i,t;if(typeof n=="undefined"){for(i=[],t=0;t<r._sounds.length;t++)i.push(r._sounds[t]._id);return i}return[n]},_refreshBuffer:function(t){var i=this;return t._node.bufferSource=n.createBufferSource(),t._node.bufferSource.buffer=r[i._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=i._rate,i}},s=function(n){this._parent=n;this.init()},s.prototype={init:function(){var n=this,t=n._parent;return n._muted=t._muted,n._loop=t._loop,n._volume=t._volume,n._muted=t._muted,n._rate=t._rate,n._seek=0,n._paused=!0,n._ended=!0,n._sprite="__default",n._id=Math.round(Date.now()*Math.random()),t._sounds.push(n),n.create(),n},create:function(){var i=this,r=i._parent,u=t._muted||i._muted||i._parent._muted?0:i._volume*t.volume();return r._webAudio?(i._node=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),i._node.gain.setValueAtTime(u,n.currentTime),i._node.paused=!0,i._node.connect(f)):(i._node=new Audio,i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(e,i._loadFn,!1),i._node.src=r._src,i._node.preload="auto",i._node.volume=u,i._node.load()),i},reset:function(){var n=this,t=n._parent;return n._muted=t._muted,n._loop=t._loop,n._volume=t._volume,n._muted=t._muted,n._rate=t._rate,n._seek=0,n._paused=!0,n._ended=!0,n._sprite="__default",n._id=Math.round(Date.now()*Math.random()),n},_errorListener:function(){var n=this;n._node.error&&n._node.error.code===4&&(t.noAudio=!0);n._parent._emit("loaderror",n._id,n._node.error?n._node.error.code:0);n._node.removeEventListener("error",n._errorListener,!1)},_loadListener:function(){var t=this,n=t._parent;n._duration=Math.ceil(t._node.duration*10)/10;Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]});n._loaded||(n._loaded=!0,n._emit("load"));n._autoplay&&n.play();t._node.removeEventListener(e,t._loadFn,!1)}},i)var r={},v=function(n){var i=n._src,f,e,u,t;if(r[i]){n._duration=r[i].duration;l(n);return}if(/^data:[^;]+;base64,/.test(i)){for(window.atob=window.atob||function(n){for(var f=String(n).replace(/=+$/,""),i=0,r,t,e=0,u="";t=f.charAt(e++);~t&&(r=i%4?r*64+t:t,i++%4)?u+=String.fromCharCode(255&r>>(-2*i&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return u},f=atob(i.split(",")[1]),e=new Uint8Array(f.length),u=0;u<f.length;++u)e[u]=f.charCodeAt(u);c(e.buffer,n)}else t=new XMLHttpRequest,t.open("GET",i,!0),t.responseType="arraybuffer",t.onload=function(){c(t.response,n)},t.onerror=function(){n._webAudio&&(n._html5=!0,n._webAudio=!1,n._sounds=[],delete r[i],n.load())},y(t)},y=function(n){try{n.send()}catch(t){n.onerror()}},c=function(t,i){n.decodeAudioData(t,function(n){n&&i._sounds.length>0&&(r[i._src]=n,l(i,n))},function(){i._emit("loaderror",null,"Decoding audio data failed.")})},l=function(n,t){t&&!n._duration&&(n._duration=t.duration);Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]});n._loaded||(n._loaded=!0,n._emit("load"));n._autoplay&&n.play()};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:o}});typeof exports!="undefined"&&(exports.Howler=t,exports.Howl=o);typeof window!="undefined"&&(window.HowlerGlobal=h,window.Howler=t,window.Howl=o,window.Sound=s)})();
/**
 * @license AngularJS v1.4.0
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(n,t){"use strict";function e(){function i(n,i){return t.extend(Object.create(n),i)}function r(n,t){var r=t.caseInsensitiveMatch,i={originalPath:n,regexp:n},u=i.keys=[];return n=n.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(n,t,i,r){var f=r==="?"?r:null,e=r==="*"?r:null;return u.push({name:i,optional:!!f}),t=t||"",""+(f?"":t)+"(?:"+(f?t:"")+(e&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+n+"$",r?"i":""),i}var n={};this.when=function(i,u){var f=t.copy(u),e;return t.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),t.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),n[i]=t.extend(f,i&&r(i,f)),i&&(e=i[i.length-1]=="/"?i.substr(0,i.length-1):i+"/",n[e]=t.extend({redirectTo:i},r(e,f))),this};this.caseInsensitiveMatch=!1;this.otherwise=function(n){return typeof n=="string"&&(n={redirectTo:n}),this.when(null,n),this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(r,u,e,o,s,h,c){function k(n,t){var s=t.keys,e={},r,i,o,u,f;if(!t.regexp||(r=t.regexp.exec(n),!r))return null;for(i=1,o=r.length;i<o;++i)u=s[i-1],f=r[i],u&&f&&(e[u.name]=f);return e}function p(n){var i=a.current;l=d();y=l&&i&&l.$$route===i.$$route&&t.equals(l.pathParams,i.pathParams)&&!l.reloadOnSearch&&!v;!y&&(i||l)&&r.$broadcast("$routeChangeStart",l,i).defaultPrevented&&n&&n.preventDefault()}function w(){var i=a.current,n=l;y?(i.params=n.params,t.copy(i.params,e),r.$broadcast("$routeUpdate",i)):(n||i)&&(v=!1,a.current=n,n&&n.redirectTo&&(t.isString(n.redirectTo)?u.path(b(n.redirectTo,n.params)).search(n.params).replace():u.url(n.redirectTo(n.pathParams,u.path(),u.search())).replace()),o.when(n).then(function(){if(n){var u=t.extend({},n.resolve),r,i;return t.forEach(u,function(n,i){u[i]=t.isString(n)?s.get(n):s.invoke(n,null,null,i)}),t.isDefined(r=n.template)?t.isFunction(r)&&(r=r(n.params)):t.isDefined(i=n.templateUrl)&&(t.isFunction(i)&&(i=i(n.params)),i=c.getTrustedResourceUrl(i),t.isDefined(i)&&(n.loadedTemplateUrl=i,r=h(i))),t.isDefined(r)&&(u.$template=r),o.all(u)}}).then(function(u){n==a.current&&(n&&(n.locals=u,t.copy(n.params,e)),r.$broadcast("$routeChangeSuccess",n,i))},function(t){n==a.current&&r.$broadcast("$routeChangeError",n,i,t)}))}function d(){var f,r;return t.forEach(n,function(n){!r&&(f=k(u.path(),n))&&(r=i(n,{params:t.extend({},u.search(),f),pathParams:f}),r.$$route=n)}),r||n[null]&&i(n[null],{params:{},pathParams:{}})}function b(n,i){var r=[];return t.forEach((n||"").split(":"),function(n,t){if(t===0)r.push(n);else{var u=n.match(/(\w+)(?:[?*])?(.*)/),f=u[1];r.push(i[f]);r.push(u[2]||"");delete i[f]}}),r.join("")}var v=!1,l,y,a={routes:n,reload:function(){v=!0;r.$evalAsync(function(){p();w()})},updateParams:function(n){if(this.current&&this.current.$$route)n=t.extend({},this.current.params,n),u.path(b(this.current.$$route.originalPath,n)),u.search(n);else throw f("norout","Tried updating route when with no current route");}};return r.$on("$locationChangeStart",p),r.$on("$locationChangeSuccess",w),a}]}function o(){this.$get=function(){return{}}}function r(n,i,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(u,f,e,o,s){function v(){c&&(r.cancel(c),c=null);h&&(h.$destroy(),h=null);l&&(c=r.leave(l),c.then(function(){c=null}),l=null)}function y(){var e=n.current&&n.current.locals,c=e&&e.$template;if(t.isDefined(c)){var o=u.$new(),y=n.current,w=s(o,function(n){r.enter(n,null,l||f).then(function(){t.isDefined(a)&&(!a||u.$eval(a))&&i()});v()});l=w;h=y.scope=o;h.$emit("$viewContentLoaded");h.$eval(p)}else v()}var h,l,c,a=e.autoscroll,p=e.onload||"";u.$on("$routeChangeSuccess",y);y()}}}function u(n,t,i){return{restrict:"ECA",priority:-400,link:function(r,u){var f=i.current,o=f.locals,s,e;u.html(o.$template);s=n(u.contents());f.controller&&(o.$scope=r,e=t(f.controller,o),f.controllerAs&&(r[f.controllerAs]=e),u.data("$ngControllerController",e),u.children().data("$ngControllerController",e));s(r)}}}var i=t.module("ngRoute",["ng"]).provider("$route",e),f=t.$$minErr("ngRoute");i.provider("$routeParams",o);i.directive("ngView",r);i.directive("ngView",u);r.$inject=["$route","$anchorScroll","$animate"];u.$inject=["$compile","$controller","$route"]})(window,window.angular);
/*!
 * angular-cache
 * @version 4.4.2 - Homepage <http://jmdobry.github.io/angular-cache/>
 * @author Jason Dobry <jason.dobry@gmail.com>
 * @copyright (c) 2013-2015 Jason Dobry 
 * @license MIT <https://github.com/jmdobry/angular-cache/blob/master/LICENSE>
 * 
 * @overview angular-cache is a very useful replacement for Angular's $cacheFactory.
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t(require("angular")):typeof define=="function"&&define.amd?define("angular-cache",["angular"],t):typeof exports=="object"?exports.angularCacheModuleName=t(require("angular")):n.angularCacheModuleName=t(n.angular)})(this,function(n){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(1),r=i(2),f,e;r.utils.equals=u.equals;r.utils.isObject=u.isObject;r.utils.fromJson=u.fromJson;f=function f(){o(this,f);this.$get=function(){return r.BinaryHeap}};e=function e(){o(this,e);this.defaults=r.defaults;this.defaults.storagePrefix="angular-cache.caches.";this.$get=["$q",function(n){return r.utils.Promise=n,r}]};u.module("angular-cache",[]).provider("BinaryHeap",f).provider("CacheFactory",e);n.exports="angular-cache";try{n.exports.name="angular-cache"}catch(s){}},function(t){t.exports=n},function(n,t){
/*!
	 * cachefactory
	 * @version 1.2.0 - Homepage <http://jmdobry.github.io/cachefactory/>
	 * @author Jason Dobry <jason.dobry@gmail.com>
	 * @copyright (c) 2013-2015 Jason Dobry 
	 * @license MIT <https://github.com/jmdobry/cachefactory/blob/master/LICENSE>
	 * 
	 * @overview cachefactory is a very useful replacement for Angular's $cacheFactory.
	 */
(function(i,r){n.exports=r()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){function e(n,t){return v(n,t)}var s=i(1),h=null;try{h=window.Promise}catch(y){}var r={isNumber:function(n){return typeof n=="number"},isString:function(n){return typeof n=="string"},isObject:function(n){return n!==null&&typeof n=="object"},isFunction:function(n){return typeof n=="function"},fromJson:function(n){return JSON.parse(n)},equals:function(n,t){return n===t},Promise:h},o=function(n){var i=[],t=undefined;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i},c=function(n){return n&&typeof n.then=="function"},l=function(n){return r.isNumber(n)?n.toString():n},a=function(n){var i={},t=undefined;for(t in n)n.hasOwnProperty(t)&&(i[t]=t);return i},f={capacity:Number.MAX_VALUE,maxAge:Number.MAX_VALUE,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1e3,storageMode:"memory",storageImpl:null,disabled:!1,storagePrefix:"cachefactory.caches.",storeOnResolve:!1,storeOnReject:!1},u={},v=function(n,t){if(n in u)throw new Error(n+" already exists!");else if(!r.isString(n))throw new Error("cacheId must be a string!");var e={},y={},i=null,v=new s(function(n){return n.expires},r.equals),h=new s(function(n){return n.accessed},r.equals),p=u[n]={$$id:n,destroy:function(){clearInterval(this.$$cacheFlushIntervalId);clearInterval(this.$$recycleFreqId);this.removeAll();i&&(i().removeItem(this.$$prefix+".keys"),i().removeItem(this.$$prefix));i=null;e=null;h=null;v=null;this.$$prefix=null;delete u[this.$$id]},disable:function(){this.$$disabled=!0},enable:function(){delete this.$$disabled},get:function(n,t){var a=this,o,u,s,c,f;if(Array.isArray(n)){if(o=function(){var r=n,i=[];return r.forEach(function(n){var r=a.get(n,t);r!==null&&r!==undefined&&i.push(r)}),{v:i}}(),typeof o=="object")return o.v}else if(n=l(n),this.$$disabled)return;if(t=t||{},r.isString(n)){if(t&&!r.isObject(t))throw new Error("options must be an object!");else if(t.onExpire&&!r.isFunction(t.onExpire))throw new Error("options.onExpire must be a function!");}else throw new Error("key must be a string!");if(u=undefined,i){if(y[n])return y[n];if(s=i().getItem(this.$$prefix+".data."+n),s)u=r.fromJson(s);else return}else{if(!(n in e))return;u=e[n]}return c=u.value,f=(new Date).getTime(),i?(h.remove({key:n,accessed:u.accessed}),u.accessed=f,h.push({key:n,accessed:f})):(h.remove(u),u.accessed=f,h.push(u)),this.$$deleteOnExpire==="passive"&&"expires"in u&&u.expires<f?(this.remove(n),this.$$onExpire?this.$$onExpire.call(this,n,u.value,t.onExpire):t.onExpire&&t.onExpire.call(this,n,u.value),c=undefined):i&&i().setItem(this.$$prefix+".data."+n,JSON.stringify(u)),c},info:function(n){var t,u;return n?(t=undefined,i?(u=i().getItem(this.$$prefix+".data."+n),u?(t=r.fromJson(u),{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):undefined):n in e?(t=e[n],{created:t.created,accessed:t.accessed,expires:t.expires,isExpired:(new Date).getTime()-t.created>(t.maxAge||this.$$maxAge)}):undefined):{id:this.$$id,capacity:this.$$capacity,maxAge:this.$$maxAge,deleteOnExpire:this.$$deleteOnExpire,onExpire:this.$$onExpire,cacheFlushInterval:this.$$cacheFlushInterval,recycleFreq:this.$$recycleFreq,storageMode:this.$$storageMode,storageImpl:i?i():undefined,disabled:!!this.$$disabled,size:h&&h.size()||0}},keys:function(){if(i){var n=i().getItem(this.$$prefix+".keys");return n?r.fromJson(n):[]}return o(e)},keySet:function(){var u,f,t,n;if(i){if(u=i().getItem(this.$$prefix+".keys"),f={},u)for(t=r.fromJson(u),n=0;n<t.length;n++)f[t[n]]=t[n];return f}return a(e)},put:function(n,t,u){var w=this,a,f,p,s;u=u||{};var d="storeOnResolve"in u?!!u.storeOnResolve:this.$$storeOnResolve,g="storeOnReject"in u?!!u.storeOnReject:this.$$storeOnReject,b=function(t,i){return function(u){if(t&&(delete y[n],r.isObject(u)&&"status"in u&&"data"in u?(u=[u.status,u.data,u.headers(),u.statusText],w.put(n,u)):w.put(n,u)),i){if(r.Promise)return r.Promise.reject(u);throw u;}else return u}};if(!this.$$disabled&&t!==null&&t!==undefined){if(n=l(n),!r.isString(n))throw new Error("key must be a string!");if(a=(new Date).getTime(),f={key:n,value:c(t)?t.then(b(d,!1),b(g,!0)):t,created:a,accessed:a},u.maxAge&&(f.maxAge=u.maxAge),f.expires=f.created+(f.maxAge||this.$$maxAge),i){if(c(f.value))return y[n]=f.value,y[n];var k=i().getItem(this.$$prefix+".keys"),o=k?r.fromJson(k):[],nt=i().getItem(this.$$prefix+".data."+n);for(nt&&this.remove(n),v.push({key:n,expires:f.expires}),h.push({key:n,accessed:f.accessed}),i().setItem(this.$$prefix+".data."+n,JSON.stringify(f)),p=!1,s=0;s<o.length;s++)if(o[s]===n){p=!0;break}p||o.push(n);i().setItem(this.$$prefix+".keys",JSON.stringify(o))}else e[n]&&this.remove(n),v.push(f),h.push(f),e[n]=f,delete y[n];return h.size()>this.$$capacity&&this.remove(h.peek().key),t}},remove:function(n){var u,t,c;if(n+="",delete y[n],i){if(u=i().getItem(this.$$prefix+".data."+n),u){t=r.fromJson(u);h.remove({key:n,accessed:t.accessed});v.remove({key:n,expires:t.expires});i().removeItem(this.$$prefix+".data."+n);var o=i().getItem(this.$$prefix+".keys"),f=o?r.fromJson(o):[],s=f.indexOf(n);return s>=0&&f.splice(s,1),i().setItem(this.$$prefix+".keys",JSON.stringify(f)),t.value}}else return c=e[n]?e[n].value:undefined,h.remove(e[n]),v.remove(e[n]),e[n]=null,delete e[n],c},removeAll:function(){var t,u,n,f;if(i){if(h.removeAll(),v.removeAll(),t=i().getItem(this.$$prefix+".keys"),t)for(u=r.fromJson(t),n=0;n<u.length;n++)this.remove(u[n]);i().setItem(this.$$prefix+".keys",JSON.stringify([]))}else{h.removeAll();v.removeAll();for(f in e)e[f]=null;e={}}y={}},removeExpired:function(){for(var e=(new Date).getTime(),t={},n=undefined,u=undefined,f;(u=v.peek())&&u.expires<=e;)t[u.key]=u.value?u.value:null,v.pop();if(i)for(n in t)f=i().getItem(this.$$prefix+".data."+n),f&&(t[n]=r.fromJson(f).value,this.remove(n));else for(n in t)this.remove(n);if(this.$$onExpire)for(n in t)this.$$onExpire.call(this,n,t[n]);return t},setCacheFlushInterval:function(n){if(n===null)delete this.$$cacheFlushInterval;else if(r.isNumber(n))if(n<0)throw new Error("cacheFlushInterval must be greater than zero!");else n!==this.$$cacheFlushInterval&&(this.$$cacheFlushInterval=n,clearInterval(this.$$cacheFlushIntervalId),function(n){n.$$cacheFlushIntervalId=setInterval(function(){n.removeAll()},n.$$cacheFlushInterval)}(this));else throw new Error("cacheFlushInterval must be a number!");},setCapacity:function(n){if(n===null)delete this.$$capacity;else if(r.isNumber(n))if(n<0)throw new Error("capacity must be greater than zero!");else this.$$capacity=n;else throw new Error("capacity must be a number!");for(var t={};h.size()>this.$$capacity;)t[h.peek().key]=this.remove(h.peek().key);return t},setDeleteOnExpire:function(n,t){if(n===null)delete this.$$deleteOnExpire;else if(r.isString(n))if(n!=="none"&&n!=="passive"&&n!=="aggressive")throw new Error('deleteOnExpire must be "none", "passive" or "aggressive"!');else this.$$deleteOnExpire=n;else throw new Error("deleteOnExpire must be a string!");t!==!1&&this.setRecycleFreq(this.$$recycleFreq)},setMaxAge:function(n){var h,c,s;if(n===null)this.$$maxAge=Number.MAX_VALUE;else if(r.isNumber(n))if(n<0)throw new Error("maxAge must be greater than zero!");else this.$$maxAge=n;else throw new Error("maxAge must be a number!");var t=undefined,f=undefined,u=undefined;if(v.removeAll(),i)for(h=i().getItem(this.$$prefix+".keys"),f=h?r.fromJson(h):[],t=0;t<f.length;t++)u=f[t],c=i().getItem(this.$$prefix+".data."+u),c&&(s=r.fromJson(c),s.expires=this.$$maxAge===Number.MAX_VALUE?Number.MAX_VALUE:s.created+(s.maxAge||this.$$maxAge),v.push({key:u,expires:s.expires}));else for(f=o(e),t=0;t<f.length;t++)u=f[t],e[u].expires=this.$$maxAge===Number.MAX_VALUE?Number.MAX_VALUE:e[u].created+(e[u].maxAge||this.$$maxAge),v.push(e[u]);return this.$$deleteOnExpire==="aggressive"?this.removeExpired():{}},setOnExpire:function(n){if(n===null)delete this.$$onExpire;else if(r.isFunction(n))this.$$onExpire=n;else throw new Error("onExpire must be a function!");},setOptions:function(n,t){if(n=n||{},t=!!t,!r.isObject(n))throw new Error("cacheOptions must be an object!");"storagePrefix"in n?this.$$storagePrefix=n.storagePrefix:t&&(this.$$storagePrefix=f.storagePrefix);this.$$prefix=this.$$storagePrefix+this.$$id;"disabled"in n?this.$$disabled=!!n.disabled:t&&(this.$$disabled=f.disabled);"storageMode"in n||"storageImpl"in n?this.setStorageMode(n.storageMode||f.storageMode,n.storageImpl||f.storageImpl):t&&this.setStorageMode(f.storageMode,f.storageImpl);"storeOnResolve"in n?this.$$storeOnResolve=!!n.storeOnResolve:t&&(this.$$storeOnResolve=f.storeOnResolve);"storeOnReject"in n?this.$$storeOnReject=!!n.storeOnReject:t&&(this.$$storeOnReject=f.storeOnReject);"capacity"in n?this.setCapacity(n.capacity):t&&this.setCapacity(f.capacity);"deleteOnExpire"in n?this.setDeleteOnExpire(n.deleteOnExpire,!1):t&&this.setDeleteOnExpire(f.deleteOnExpire,!1);"maxAge"in n?this.setMaxAge(n.maxAge):t&&this.setMaxAge(f.maxAge);"recycleFreq"in n?this.setRecycleFreq(n.recycleFreq):t&&this.setRecycleFreq(f.recycleFreq);"cacheFlushInterval"in n?this.setCacheFlushInterval(n.cacheFlushInterval):t&&this.setCacheFlushInterval(f.cacheFlushInterval);"onExpire"in n?this.setOnExpire(n.onExpire):t&&this.setOnExpire(f.onExpire)},setRecycleFreq:function(n){if(n===null)delete this.$$recycleFreq;else if(r.isNumber(n))if(n<0)throw new Error("recycleFreq must be greater than zero!");else this.$$recycleFreq=n;else throw new Error("recycleFreq must be a number!");clearInterval(this.$$recycleFreqId);this.$$deleteOnExpire==="aggressive"?function(n){n.$$recycleFreqId=setInterval(function(){n.removeExpired()},n.$$recycleFreq)}(this):delete this.$$recycleFreqId},setStorageMode:function(n,t){var u,o;if(r.isString(n)){if(n!=="memory"&&n!=="localStorage"&&n!=="sessionStorage")throw new Error('storageMode must be "memory", "localStorage" or "sessionStorage"!');}else throw new Error("storageMode must be a string!");var s=!1,e={},f=this.keys();if(f.length){for(u=0;u<f.length;u++)e[f[u]]=this.get(f[u]);for(u=0;u<f.length;u++)this.remove(f[u]);s=!0}if(this.$$storageMode=n,t){if(r.isObject(t))if("setItem"in t&&typeof t.setItem=="function")if("getItem"in t&&typeof t.getItem=="function"){if(!("removeItem"in t)||typeof t.removeItem!="function")throw new Error('storageImpl must implement "removeItem(key)"!');}else throw new Error('storageImpl must implement "getItem(key)"!');else throw new Error('storageImpl must implement "setItem(key, value)"!');else throw new Error("storageImpl must be an object!");i=function(){return t}}else if(this.$$storageMode==="localStorage")try{localStorage.setItem("cachefactory","cachefactory");localStorage.removeItem("cachefactory");i=function(){return localStorage}}catch(h){i=null;this.$$storageMode="memory"}else if(this.$$storageMode==="sessionStorage")try{sessionStorage.setItem("cachefactory","cachefactory");sessionStorage.removeItem("cachefactory");i=function(){return sessionStorage}}catch(h){i=null;this.$$storageMode="memory"}if(s)for(o in e)this.put(o,e[o])},touch:function(n){var u=this,i,r,t;if(n)i=this.get(n,{onExpire:function(n,t){return u.put(n,t)}}),i&&this.put(n,i);else for(r=this.keys(),t=0;t<r.length;t++)this.touch(r[t])}};return p.setOptions(t,!0),p};e.createCache=v;e.defaults=f;e.info=function(){var i=o(u),r={size:i.length,caches:{}},n,t,e;for(n in f)f.hasOwnProperty(n)&&(r[n]=f[n]);for(t=0;t<i.length;t++)e=i[t],r.caches[e]=u[e].info();return r};e.get=function(n){return u[n]};e.keySet=function(){return a(u)};e.keys=function(){return o(u)};e.destroy=function(n){u[n]&&(u[n].destroy(),delete u[n])};e.destroyAll=function(){for(var n in u)u[n].destroy();u={}};e.clearAll=function(){for(var n in u)u[n].removeAll()};e.removeExpiredFromAll=function(){var n={};for(var t in u)n[t]=u[t].removeExpired();return n};e.enableAll=function(){for(var n in u)u[n].$$disabled=!1};e.disableAll=function(){for(var n in u)u[n].$$disabled=!0};e.touchAll=function(){for(var n in u)u[n].touch()};e.utils=r;e.BinaryHeap=s;n.exports=e},function(n,t){
/*!
		 * yabh
		 * @version 1.1.0 - Homepage <http://jmdobry.github.io/yabh/>
		 * @author Jason Dobry <jason.dobry@gmail.com>
		 * @copyright (c) 2015 Jason Dobry 
		 * @license MIT <https://github.com/jmdobry/yabh/blob/master/LICENSE>
		 * 
		 * @overview Yet another Binary Heap.
		 */
(function(i,r){n.exports=r()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n){function i(n,t,i){for(var f=n[i],e=t(f),r,u;i>0;)if(r=Math.floor((i+1)/2)-1,u=n[r],e>=t(u))break;else n[r]=f,n[i]=u,i=r}function u(n,t){if(n||(n=function(n){return n}),t||(t=function(n,t){return n===t}),typeof n!="function")throw new Error('BinaryHeap([weightFunc][, compareFunc]): "weightFunc" must be a function!');if(typeof t!="function")throw new Error('BinaryHeap([weightFunc][, compareFunc]): "compareFunc" must be a function!');this.weightFunc=n;this.compareFunc=t;this.heap=[]}var r=function(n,t,i){for(var e=n.length,o=n[i],s=t(o),h,c,l,a;;){var u=(i+1)*2,f=u-1,r=null;if(f<e&&(h=n[f],c=t(h),c<s&&(r=f)),u<e&&(l=n[u],a=t(l),a<(r===null?s:t(n[f]))&&(r=u)),r===null)break;else n[i]=n[r],n[r]=o,i=r}},t=u.prototype;t.push=function(n){this.heap.push(n);i(this.heap,this.weightFunc,this.heap.length-1)};t.peek=function(){return this.heap[0]};t.pop=function(){var n=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,r(this.heap,this.weightFunc,0)),n};t.remove=function(n){for(var f,e,u=this.heap.length,t=0;t<u;t++)if(this.compareFunc(this.heap[t],n))return f=this.heap[t],e=this.heap.pop(),t!==u-1&&(this.heap[t]=e,i(this.heap,this.weightFunc,t),r(this.heap,this.weightFunc,t)),f;return null};t.removeAll=function(){this.heap=[]};t.size=function(){return this.heap.length};n.exports=u}])})}])})}])});angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{"9":/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(n,t){function i(n){return n===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(n.type||n.href||~n.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var r=n;return function(n,u,f,e){function bt(n){return angular.isDefined(n)?(ui(n),!a)?vt():(gt(),ni(),!0):vt()}function at(n){angular.isDefined(n)&&(l=n,a&&v())}function kt(n){return a?(o=w(n||""),h=ft(o),e.$setValidity("mask",h),h&&o.length?b(o):undefined):n}function dt(n){return a?(o=w(n||""),h=ft(o),e.$viewValue=o.length?b(o):"",e.$setValidity("mask",h),o===""&&f.required&&e.$setValidity("required",!e.$error.required),h?o:undefined):n}function vt(){return a=!1,ti(),angular.isDefined(ct)?u.attr("placeholder",ct):u.removeAttr("placeholder"),angular.isDefined(lt)?u.attr("maxlength",lt):u.removeAttr("maxlength"),u.val(e.$modelValue),e.$viewValue=e.$modelValue,!1}function gt(){o=it=w(e.$modelValue||"");nt=tt=b(o);h=ft(o);var n=h&&o.length?nt:"";f.maxlength&&u.attr("maxlength",s[s.length-1]*2);angular.isDefined(f.uiMaskPlaceholder)||u.attr("placeholder",l);u.val(n);e.$viewValue=n;e.$setValidity("mask",h)}function ni(){y||(u.bind("blur",yt),u.bind("mousedown mouseup",k),u.bind("input keyup click focus",v),u.bind("paste",pt),y=!0)}function ti(){y&&(u.unbind("blur",yt),u.unbind("mousedown",k),u.unbind("mouseup",k),u.unbind("input",v),u.unbind("keyup",v),u.unbind("click",v),u.unbind("focus",v),u.unbind("paste",pt),y=!1)}function ft(n){return n.length?n.length>=g:!0}function w(n){var i="",t=d.slice();return n=n.toString(),angular.forEach(ht,function(t){n=n.replace(t,"")}),angular.forEach(n.split(""),function(n){t.length&&t[0].test(n)&&(i+=n,t.shift())}),i}function b(n){var t="",i=s.slice();return angular.forEach(l.split(""),function(r,u){n.length&&u===i[0]?(t+=n.charAt(0)||"_",n=n.substr(1),i.shift()):t+=r}),t}function ii(n){var t=angular.isDefined(f.uiMaskPlaceholder)?f.uiMaskPlaceholder:f.placeholder;return typeof t!="undefined"&&t[n]?t[n]:"_"}function ri(){return l.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function ui(n){var t=0;if(s=[],d=[],l="",typeof n=="string"){g=0;var i=!1,r=0,u=n.split("");angular.forEach(u,function(n,u){c.maskDefinitions[n]?(s.push(t),l+=ii(u-r),d.push(c.maskDefinitions[n]),t++,i||g++):n==="?"?(i=!0,r++):(l+=n,t++)})}s.push(s.slice().pop()+1);ht=ri();a=s.length>1?!0:!1}function yt(){c.clearOnBlur&&(rt=0,p=0,h&&o.length!==0||(nt="",u.val(""),n.$apply(function(){e.$setViewValue("")})))}function k(n){n.type==="mousedown"?u.bind("mouseout",et):u.unbind("mouseout",et)}function et(){p=st(this);u.unbind("mouseout",et)}function pt(){wt(this,u.val().length)}function v(n){var i,f,d;if(n=n||{},i=n.which,f=n.type,i!==16&&i!==91){var h=u.val(),a=tt,v,r=w(h),ht=it,t=fi(this)||0,g=rt||0,nt=t-g,o=s[0],c=s[r.length]||s.slice().shift(),l=p||0,ct=st(this)>0,ut=l>0,ft=h.length>a.length||l&&h.length>a.length-l,y=h.length<a.length||l&&h.length===a.length-l,lt=i>=37&&i<=40&&n.shiftKey,at=i===37,et=i===8||f!=="keyup"&&y&&nt===-1,vt=i===46||f!=="keyup"&&y&&nt===0&&!ut,k=(at||et||f==="click")&&t>o;if(p=st(this),!lt&&(!ct||f!=="click"&&f!=="keyup")){if(f==="input"&&y&&!ut&&r===ht){while(et&&t>o&&!ot(t))t--;while(vt&&t<c&&s.indexOf(t)===-1)t++;d=s.indexOf(t);r=r.substring(0,d)+r.substring(d+1)}for(v=b(r),tt=v,it=r,u.val(v),e.$setViewValue(r),ft&&t<=o&&(t=o+1),k&&t--,t=t>c?c:t<o?o:t;!ot(t)&&t>o&&t<c;)t+=k?-1:1;(k&&t<c||ft&&!ot(g))&&t++;rt=t;wt(this,t)}}}function ot(n){return s.indexOf(n)>-1}function fi(n){if(!n)return 0;if(n.selectionStart!==undefined)return n.selectionStart;if(document.selection&&i(u[0])){n.focus();var t=document.selection.createRange();return t.moveStart("character",n.value?-n.value.length:0),t.text.length}return 0}function wt(n,t){if(!n)return 0;if(n.offsetWidth!==0&&n.offsetHeight!==0)if(n.setSelectionRange)i(u[0])&&(n.focus(),n.setSelectionRange(t,t));else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0);r.moveEnd("character",t);r.moveStart("character",t);r.select()}}function st(n){return n?n.selectionStart!==undefined?n.selectionEnd-n.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var a=!1,y=!1,s,d,l,ht,g,o,nt,h,ct=f.placeholder,lt=f.maxlength,tt,it,rt,p,c={},ut;f.uiOptions?(c=n.$eval("["+f.uiOptions+"]"),angular.isObject(c[0])&&(c=function(n,t){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]===undefined?t[i]=angular.copy(n[i]):angular.extend(t[i],n[i]));return t}(r,c[0]))):c=r;f.$observe("uiMask",bt);angular.isDefined(f.uiMaskPlaceholder)?f.$observe("uiMaskPlaceholder",at):f.$observe("placeholder",at);ut=!1;f.$observe("modelViewValue",function(n){n==="true"&&(ut=!0)});n.$watch(f.ngModel,function(i){if(ut&&i){var r=t(f.ngModel);r.assign(n,e.$viewValue)}});e.$formatters.push(kt);e.$parsers.push(dt);u.bind("mousedown mouseup",k);Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var u,r,t,i;if(this===null)throw new TypeError;if((u=Object(this),r=u.length>>>0,r===0)||(t=0,arguments.length>1&&(t=Number(arguments[1]),t!==t?t=0:t!==0&&t!==Infinity&&t!==-Infinity&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1})}}}}]),function(){var n=[{eventName:"slipBeforeReorder",slipEventName:"slip:beforereorder"},{eventName:"slipBeforeSwipe",slipEventName:"slip:beforeswipe"},{eventName:"slipBeforeWait",slipEventName:"slip:beforewait"},{eventName:"slipAfterSwipe",slipEventName:"slip:afterswipe"},{eventName:"slipTap",slipEventName:"slip:tap"},{eventName:"slipCancelSwipe",slipEventName:"slip:cancelswipe"},{eventName:"slipReorder",slipEventName:"slip:reorder",prepLocals:function(n){return{$spliceIndex:n.detail.spliceIndex,$originalIndex:n.detail.originalIndex}},defaultResponse:function(n){n.target.parentNode.insertBefore(n.target,n.detail.insertBefore)}},],t=angular.module("slip",[]).directive("slipList",["$parse",function(t){return{restrict:"AC",controller:["$scope",function(){var n=this,t={},i=function(t){for(var i=t;i&&i.parentNode!=n.listElement;)i=i.parentNode;return i},r=function(n){for(var t=0;n;)n.nodeType===1&&++t,n=n.previousSibling;return t-1};n.registerEventHandler=function(u,f,e){var o=t[f.eventName];typeof o=="undefined"&&(o=[],t[f.eventName]=[]);o.length===0&&n.listElement.addEventListener(f.slipEventName,function(n){var t=-1,u=i(n.target);u&&(t=r(u));o.forEach(function(i){var r={$event:n,$index:t};f.prepLocals&&angular.extend(r,f.prepLocals(n));e.$apply(function(){i(e,r)&&f.defaultResponse&&f.defaultResponse(n)})})},!1);o.push(u)}},],link:function(i,r,u,f){var e=r[0];f.listElement=e;new Slip(e);n.forEach(function(n){if(u[n.eventName]){var r=t(u[n.eventName],null,!0);f.registerEventHandler(r,n,i)}})}}}])}();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(n){for(var i=Date.CultureInfo.monthNames,u=Date.CultureInfo.abbreviatedMonthNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1};Date.getDayNumberFromName=function(n){for(var i=Date.CultureInfo.dayNames,u=Date.CultureInfo.abbreviatedDayNames,f=Date.CultureInfo.shortestDayNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1};Date.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0};Date.getDaysInMonth=function(n,t){return[31,Date.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]};Date.getTimezoneOffset=function(n,t){return t||!1?Date.CultureInfo.abbreviatedTimeZoneDST[n.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[n.toUpperCase()]};Date.getTimezoneAbbreviation=function(n,t){var i=t||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(var r in i)if(i[r]===n)return r;return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(n){if(isNaN(this))throw new Error(this);if(n instanceof Date&&!isNaN(n))return this>n?1:this<n?-1:0;throw new TypeError(n);};Date.prototype.equals=function(n){return this.compareTo(n)===0};Date.prototype.between=function(n,t){var i=this.getTime();return i>=n.getTime()&&i<=t.getTime()};Date.prototype.addMilliseconds=function(n){return this.setMilliseconds(this.getMilliseconds()+n),this};Date.prototype.addSeconds=function(n){return this.addMilliseconds(n*1e3)};Date.prototype.addMinutes=function(n){return this.addMilliseconds(n*6e4)};Date.prototype.addHours=function(n){return this.addMilliseconds(n*36e5)};Date.prototype.addDays=function(n){return this.addMilliseconds(n*864e5)};Date.prototype.addWeeks=function(n){return this.addMilliseconds(n*6048e5)};Date.prototype.addMonths=function(n){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(t,this.getDaysInMonth())),this};Date.prototype.addYears=function(n){return this.addMonths(n*12)};Date.prototype.add=function(n){if(typeof n=="number")return this._orient=n,this;var t=n;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this};Date._validate=function(n,t,i,r){if(typeof n!="number")throw new TypeError(n+" is not a Number.");else if(n<t||n>i)throw new RangeError(n+" is not a valid value for "+r+".");return!0};Date.validateMillisecond=function(n){return Date._validate(n,0,999,"milliseconds")};Date.validateSecond=function(n){return Date._validate(n,0,59,"seconds")};Date.validateMinute=function(n){return Date._validate(n,0,59,"minutes")};Date.validateHour=function(n){return Date._validate(n,0,23,"hours")};Date.validateDay=function(n,t,i){return Date._validate(n,1,Date.getDaysInMonth(t,i),"days")};Date.validateMonth=function(n){return Date._validate(n,0,11,"months")};Date.validateYear=function(n){return Date._validate(n,1,9999,"seconds")};Date.prototype.set=function(n){var t=n;return t.millisecond||t.millisecond===0||(t.millisecond=-1),t.second||t.second===0||(t.second=-1),t.minute||t.minute===0||(t.minute=-1),t.hour||t.hour===0||(t.hour=-1),t.day||t.day===0||(t.day=-1),t.month||t.month===0||(t.month=-1),t.year||t.year===0||(t.year=-1),t.millisecond!=-1&&Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),t.second!=-1&&Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),t.minute!=-1&&Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),t.hour!=-1&&Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),t.month!==-1&&Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),t.year!=-1&&Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),t.day!=-1&&Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),this};Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this};Date.prototype.isLeapYear=function(){var n=this.getFullYear();return n%4==0&&n%100!=0||n%400==0};Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(n,t){var i=(n-this.getDay()+7*(t||1))%7;return this.addDays(i===0?i+=7*(t||1):i)};Date.prototype.moveToMonth=function(n,t){var i=(n-this.getMonth()+12*(t||1))%12;return this.addMonths(i===0?i+=12*(t||1):i)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)};Date.prototype.getWeekOfYear=function(n){var t=this.getFullYear(),e=this.getMonth(),o=this.getDate(),s=n||Date.CultureInfo.firstDayOfWeek,r=8-new Date(t,0,1).getDay(),f,i,u;return r==8&&(r=1),f=(Date.UTC(t,e,o,0,0,0)-Date.UTC(t,0,1,0,0,0))/864e5+1,i=Math.floor((f-r+7)/7),i===s&&(t--,u=8-new Date(t,0,1).getDay(),i=u==2||u==8?53:52),i};Date.prototype.isDST=function(){return console.log("isDST"),this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(n){var t=this.getTimezoneOffset(),i=Number(n)*-6/10;return this.addMinutes(i-t),this};Date.prototype.setTimezone=function(n){return this.setTimezoneOffset(Date.getTimezoneOffset(n))};Date.prototype.getUTCOffset=function(){var t=this.getTimezoneOffset()*-10/6,n;return t<0?(n=(t-1e4).toString(),n[0]+n.substr(2)):(n=(t+1e4).toString(),"+"+n.substr(1))};Date.prototype.getDayName=function(n){return n?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(n){return n?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(n){var t=this,i=function(n){return n.toString().length==1?"0"+n:n};return n?n.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(n){switch(n){case"hh":return i(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return i(t.getHours());case"H":return t.getHours();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return i(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.now=function(){return new Date};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=1;Date.prototype.next=function(){return this._orient=1,this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this};Date.prototype._is=!1;Date.prototype.is=function(){return this._is=!0,this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var n={};return n[this._dateElement]=this,Date.now().add(n)};Number.prototype.ago=function(){var n={};return n[this._dateElement]=this*-1,Date.now().add(n)},function(){for(var h,i,c,l,u,n=Date.prototype,s=Number.prototype,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),t,a=function(n){return function(){return this._is?(this._is=!1,this.getDay()==n):this.moveToDayOfWeek(n,this._orient)}},r=0;r<f.length;r++)n[f[r]]=n[f[r].substring(0,3)]=a(r);for(h=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},i=0;i<e.length;i++)n[e[i]]=n[e[i].substring(0,3)]=h(i);for(c=function(n){return function(){return n.substring(n.length-1)!="s"&&(n+="s"),this["add"+n](this._orient)}},l=function(n){return function(){return this._dateElement=n,this}},u=0;u<o.length;u++)t=o[u].toLowerCase(),n[t]=n[t+"s"]=c(o[u]),s[t]=s[t+"s"]=l(t)}();Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){var i,o,f,u;Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var t=Date.Parsing,n=t.Operators={rtoken:function(n){return function(i){var r=i.match(n);if(r)return[r[0],i.substring(r[0].length)];throw new t.Exception(i);}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(n){return function(t){for(var r=[],i=null;t.length;){try{i=n.call(this,t)}catch(u){r.push(i[0]);t=i[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var i=[],r=null;t.length;){try{r=n.call(this,t)}catch(u){return[i,t]}i.push(r[0]);t=r[1]}return[i,t]}},optional:function(n){return function(t){var i=null;try{i=n.call(this,t)}catch(r){return[null,t]}return[i[0],i[1]]}},not:function(n){return function(i){try{n.call(this,i)}catch(r){return[null,i]}throw new t.Exception(i);}},ignore:function(n){return n?function(t){var i=null;return i=n.call(this,t),[null,i[1]]}:null},product:function(){for(var i=arguments[0],u=Array.prototype.slice.call(arguments,1),r=[],t=0;t<i.length;t++)r.push(n.each(i[t],u));return r},cache:function(n){var r={},i=null;return function(u){try{i=r[u]=r[u]||n.call(this,u)}catch(f){i=r[u]=f}if(i instanceof t.Exception)throw i;else return i}},any:function(){var n=arguments;return function(i){for(var r=null,u=0;u<n.length;u++)if(n[u]!=null){try{r=n[u].call(this,i)}catch(f){r=null}if(r)return r}throw new t.Exception(i);}},each:function(){var n=arguments;return function(i){for(var f=[],u=null,r=0;r<n.length;r++)if(n[r]!=null){try{u=n[r].call(this,i)}catch(e){throw new t.Exception(i);}f.push(u[0]);i=u[1]}return[f,i]}},all:function(){var t=arguments,n=n;return n.each(n.optional(t))},sequence:function(i,r,u){return(r=r||n.rtoken(/^\s*/),u=u||null,i.length==1)?i[0]:function(n){for(var f=null,e=null,s=[],o=0;o<i.length;o++){try{f=i[o].call(this,n)}catch(h){break}s.push(f[0]);try{e=r.call(this,f[1])}catch(c){e=null;break}n=e[1]}if(!f)throw new t.Exception(n);if(e)throw new t.Exception(e[1]);if(u)try{f=u.call(this,f[1])}catch(l){throw new t.Exception(f[1]);}return[s,f?f[1]:n]}},between:function(t,i,u){u=u||t;var f=n.each(n.ignore(t),i,n.ignore(u));return function(n){var t=f.call(this,n);return[[t[0][0],r[0][2]],t[1]]}},list:function(t,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(i)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(i))),px,n.ignore(r))},set:function(i,r,u){return r=r||n.rtoken(/^\s*/),u=u||null,function(f){for(var y,a,s=null,l=null,h=null,c=null,e=[[],f],o=!1,v=0;v<i.length;v++){h=null;l=null;s=null;o=i.length==1;try{s=i[v].call(this,f)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!o)try{h=r.call(this,s[1])}catch(w){o=!0}else o=!0;if(o||h[1].length!==0||(o=!0),!o){for(y=[],a=0;a<i.length;a++)v!=a&&y.push(i[a]);l=n.set(y,r).call(this,h[1]);l[0].length>0&&(c[0]=c[0].concat(l[0]),c[1]=l[1])}if(c[1].length<e[1].length&&(e=c),e[1].length===0)break}if(e[0].length===0)return e;if(u){try{h=u.call(this,e[1])}catch(b){throw new t.Exception(e[1]);}e[1]=h[1]}return e}},forward:function(n,t){return function(i){return n[t].call(this,i)}},replace:function(n,t){return function(i){var r=n.call(this,i);return[t,r[1]]}},process:function(n,t){return function(i){var r=n.call(this,i);return[t.call(this,r[0]),r[1]]}},min:function(n,i){return function(r){var u=i.call(this,r);if(u[0].length<n)throw new t.Exception(r);return u}}},s=function(n){return function(){var t=null,u=[],i,r;if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),t)for(i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),u.push(n.apply(null,t)),t.shift(),u;else return n.apply(null,arguments)}},e="optional not ignore cache".split(/\s/);for(i=0;i<e.length;i++)n[e[i]]=s(n[e[i]]);for(o=function(n){return function(){return arguments[0]instanceof Array?n.apply(null,arguments[0]):n.apply(null,arguments)}},f="each any all".split(/\s/),u=0;u<f.length;u++)n[f[u]]=o(n[f[u]])}(),function(){var o=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof Array?i=i.concat(o(n[t])):n[t]&&i.push(n[t]);return i},u,f,e;Date.Grammar={};Date.Translator={hour:function(n){return function(){this.hour=Number(n)}},minute:function(n){return function(){this.minute=Number(n)}},second:function(n){return function(){this.second=Number(n)}},meridian:function(n){return function(){this.meridian=n.slice(0,1).toLowerCase()}},timezone:function(n){return function(){var t=n.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=n.toLowerCase()}},day:function(n){var t=n[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(n){return function(){this.month=n.length==3?Date.getMonthNumberFromName(n):Number(n)-1}},year:function(n){return function(){var t=Number(n);this.year=n.length>2?t:t+(t+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(n){return function(){switch(n){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(n){var r,t,i;for(n=n instanceof Array?n:[n],r=new Date,this.year=r.getFullYear(),this.month=r.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0,t=0;t<n.length;t++)n[t]&&n[t].call(this);if(this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour,this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return i=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second),this.timezone?i.set({timezone:this.timezone}):this.timezoneOffset&&i.set({timezoneOffset:this.timezoneOffset}),i},finish:function(n){var f,r,t,u;if(n=n instanceof Array?o(n):[n],n.length===0)return null;for(f=0;f<n.length;f++)typeof n[f]=="function"&&n[f].call(this);if(this.now)return new Date;var i=Date.today(),e=!!(this.days!=null||this.orient||this.operator);return e?(u=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",r=Date.getDayNumberFromName(this.weekday)-i.getDay(),t=7,this.days=r?(r+u*t)%t:u*t),this.month&&(this.unit="month",r=this.month-i.getMonth(),t=12,this.months=r?(r+u*t)%t:u*t,this.month=null),this.unit||(this.unit="day"),(this[this.unit+"s"]==null||this.operator!=null)&&(this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*u),i.add(this)):(this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=i.addDays(Date.getDayNumberFromName(this.weekday)-i.getDay()).getDate()),this.month&&!this.day&&(this.day=1),i.set(this))}};var t=Date.Parsing.Operators,n=Date.Grammar,i=Date.Translator,r;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=t.stoken(":");n.whiteSpace=t.rtoken(/^\s*/);n.generalDelimiter=t.rtoken(/^(([\s\,]|at|on)+)/);u={};n.ctoken=function(n){var r=u[n],i;if(!r){var o=Date.CultureInfo.regexPatterns,f=n.split(/\s+/),e=[];for(i=0;i<f.length;i++)e.push(t.replace(t.rtoken(o[f[i]]),f[i]));r=u[n]=t.any.apply(null,e)}return r};n.ctoken2=function(n){return t.rtoken(Date.CultureInfo.regexPatterns[n])};n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),i.hour));n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.minute));n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.second));n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.second));n.hms=t.cache(t.sequence([n.H,n.mm,n.ss],n.timePartDelimiter));n.t=t.cache(t.process(n.ctoken2("shortMeridian"),i.meridian));n.tt=t.cache(t.process(n.ctoken2("longMeridian"),i.meridian));n.z=t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),i.timezone));n.zz=t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/),i.timezone));n.zzz=t.cache(t.process(n.ctoken2("timezone"),i.timezone));n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz]));n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix);n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(n){return function(){this.weekday=n}}));n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),i.month));n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),i.month));n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),i.year));n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),i.year));n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),i.year));n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),i.year));r=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))};n.day=r(n.d,n.dd);n.month=r(n.M,n.MMM);n.year=r(n.yyyy,n.yy);n.orientation=t.process(n.ctoken("past future"),function(n){return function(){this.orient=n}});n.operator=t.process(n.ctoken("add subtract"),function(n){return function(){this.operator=n}});n.rday=t.process(n.ctoken("yesterday tomorrow today now"),i.rday);n.unit=t.process(n.ctoken("minute hour day week month year"),function(n){return function(){this.unit=n}});n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(n){return function(){this.value=n.replace(/\D/g,"")}});n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);r=function(){return t.set(arguments,n.datePartDelimiter)};n.mdy=r(n.ddd,n.month,n.day,n.year);n.ymd=r(n.ddd,n.year,n.month,n.day);n.dmy=r(n.ddd,n.day,n.month,n.year);n.date=function(t){return(n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,t)};n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(n[t])return n[t];throw Date.Parsing.Exception(t);}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(n){return t.ignore(t.stoken(n))}))),function(n){return t.process(t.each.apply(null,n),i.finishExact)});f={};e=function(t){return f[t]=f[t]||n.format(t)[0]};n.formats=function(n){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)r.push(e(n[i]));return t.any.apply(null,r)}return e(n)};n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),i.finish);n.start=function(t){try{var i=n._formats.call({},t);if(i[1].length===0)return i}catch(r){}return n._start.call({},t)}}();Date._parse=Date.parse;Date.parse=function(n){var t=null;if(!n)return null;try{t=Date.Grammar.start.call({},n)}catch(i){return null}return t[1].length===0?t[0]:null};Date.getParseFunction=function(n){var t=Date.Grammar.formats(n);return function(n){var i=null;try{i=t.call({},n)}catch(r){return null}return i[1].length===0?i[0]:null}};Date.parseExact=function(n,t){return Date.getParseFunction(t)(n)};angular.module("uplus",[]).directive("modalDialog",function(){return{restrict:"E",scope:{visible:"="},replace:!0,transclude:!0,link:function(n){n.hideModal=function(){n.visible=!1}},template:'<div id="modal" ng-class="{\'slide\': visible}"><div ng-transclude><\/div><button class="close icon-close" ng-click="hideModal()"><\/button><\/div>'}});angular.module("uplus").directive("detailPane",function(){return{restrict:"E",scope:{visible:"="},replace:!0,transclude:!0,link:function(n){n.hidePane=function(){n.visible=!1};n.$watch("visible",function(){n.visible?$("body").css("overflow","hidden"):$("body").css("overflow","auto")});n.$on("$destroy",function(){$("body").css("overflow","auto")})},template:'<div id="flyout" ng-class="{\'slide\': visible}"><div ng-transclude><\/div><button class="close icon-close" ng-click="hidePane()"><\/button><\/div>'}});angular.module("uplus").directive("loadingIndicator",function(){return{restrict:"A",replace:!0,template:"<div id='marquee'><\/div>",link:function(n,t){n.$on("loading-started",function(){t.css({display:"block"})});n.$on("loading-complete",function(){t.css({display:"none"})})}}});angular.module("uplus").directive("formatDecimal",function(){return{terminal:!0,restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var f=function(n){return n&&typeof n!="number"&&(n=n.replace(",",""),n=parseFloat(n)),n},u=function(n){return n=f(n),n?+(Math.round(n+"e+2")+"e-2"):void 0};t.bind("blur",function(){t.val(u(r.$modelValue))});r.$formatters.push(function(n){if(n)return u(n)});r.$parsers.push(function(n){if(n)return f(u(n))})}}}});angular.module("uplus").directive("formatDouble",function(){return{terminal:!0,restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var f=function(n){return n&&typeof n!="number"&&(n=n.replace(",",""),n=parseFloat(n)),n},u=function(n){return n=f(n),n?+(Math.round(n+"e+4")+"e-4"):void 0};t.bind("blur",function(){t.val(u(r.$modelValue))});r.$formatters.push(function(n){if(n)return u(n)});r.$parsers.push(function(n){if(n)return f(u(n))})}}}});angular.module("uplus").directive("compareCheck",function(){return{require:"ngModel",link:function(n,t,i,r){i.compareCheck&&(n.$watch(i.compareCheck,function(n){r.$viewValue!==undefined&&r.$viewValue!==""&&r.$setValidity("compareCheck",n===r.$viewValue)}),r.$parsers.push(function(t){if(t===undefined||t==="")return r.$setValidity("compareCheck",!0),t;var u=t===n.$eval(i.compareCheck);return r.$setValidity("compareCheck",u),u?t:undefined}))}}});angular.module("uplus").config(["$httpProvider",function(n){n.defaults.headers.get||(n.defaults.headers.get={});n.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT";n.defaults.headers.get["Cache-Control"]="no-cache";n.defaults.headers.get.Pragma="no-cache";n.defaults.withCredentials=!0;n.interceptors.push(["$q","$rootScope","$location","$timeout","$injector",function(n,t,i,r,u){return{request:function(i){return i&&t.$broadcast("loading-started"),t.loadingCount?t.loadingCount++:t.loadingCount=1,i.timeout=26e3,i.url.substring(0,5)=="/api/"&&(i.url=window.uplus.baseUrl+i.url),i||n.when(i)},response:function(f){if(t.loadingCount--,t.loadingCount===0&&t.$broadcast("loading-complete"),f.status==500)f.data&&!/<[a-z][\s\S]*>/i.test(f.data)?t.$broadcast("OnAjaxError",{msg:f.data}):t.$broadcast("OnAjaxError",{msg:t.lang.ERROR500});else if(f.status==401){var e=i.url();e!=="/login"&&(t.returnToUrl=e);window.location.href="#/login"}else if(f.status==403)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR403});else if(f.status==404)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR404});else if(f.status==408)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR408});else if(f.status===0)return f.config.Retries===undefined?r(function(){f.config.Retries=1;var n=u.get("$http");return n(f.config)},500):(f.config.Retries=undefined,t.$broadcast("OnAjaxError",{msg:t.lang.ERROR408}),n.when(f));return f||n.when(f)},responseError:function(f){if(t.loadingCount--,t.loadingCount===0&&t.$broadcast("loading-complete"),f.status==500)f.data&&!/<[a-z][\s\S]*>/i.test(f.data)?t.$broadcast("OnAjaxError",{msg:f.data}):t.$broadcast("OnAjaxError",{msg:t.lang.ERROR500});else if(f.status==401){var e=i.url();e!=="/login"&&(t.returnToUrl=e);window.location.href="#/login"}else if(f.status==403)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR403});else if(f.status==404)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR404});else if(f.status==408)t.$broadcast("OnAjaxError",{msg:t.lang.ERROR408});else if(f.status===0)return f.config.Retries===undefined?r(function(){f.config.Retries=1;var n=u.get("$http");return n(f.config)},500):(f.config.Retries=undefined,t.$broadcast("OnAjaxError",{msg:t.lang.ERROR408}),n.reject(f));return f||n.reject(f)}}}])}]);angular.module("uplus").directive("fileread",[function(){return{scope:{fileread:"="},link:function(n,t){t.bind("change",function(t){var i=new FileReader;i.onload=function(t){var i=document.createElement("img");i.onload=function(){var u=document.createElement("canvas"),f=u.getContext("2d"),s;f.drawImage(i,0,0);var e=600,o=600,t=parseInt(i.width),r=parseInt(i.height);t==0&&(t=parseInt(i.naturalWidth),r=parseInt(i.naturalHeight));t>r?t>e&&(r*=e/t,t=e):r>o&&(t*=o/r,r=o);u.width=t;u.height=r;f=u.getContext("2d");f.drawImage(i,0,0,t,r);s=u.toDataURL("image/jpeg",.7);n.$apply(function(){n.fileread=s})};i.src=t.target.result};i.readAsDataURL(t.target.files[0])})}}}]);angular.module("uplus").filter("tel",function(){return function(n){if(!n)return"";if(n.length<10)return n;if(n.length>11){var t=n.slice(0,2),i=n.slice(2,5),r=n.slice(5,8),u=n.slice(8);return t+"-"+i+"-"+r+"-"+u}var t=n.slice(0,3),i=n.slice(3,6),r=n.slice(6);return t+"-"+i+"-"+r}});angular.module("uplus").factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope","$location","CacheSvc",function(n,t,i,r,u,f,e){var c=40,l=20,a=1e4,v="angular-notify.html",y="center",p=document.body,h=3,o=[],s=[],w=function(w){var b,g,k,d;if(typeof w!="object"&&(w={message:w}),w.duration=w.duration?w.duration:a,w.templateUrl=w.templateUrl?w.templateUrl:v,w.container=w.container?w.container:p,w.classes=w.classes?w.classes:"",b=w.scope?w.scope.$new():u.$new(),b.$position=w.position?w.position:y,b.$message=w.message,b.$classes=w.classes,b.$messageTemplate=w.messageTemplate,h>0)for(g=s.length+1-h,k=0;k<g;k++)s[k].$close();return t.get(w.templateUrl,{cache:r}).success(function(t){var r=i(t)(b),a,u,h;if(r.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(n){(n.propertyName==="opacity"||n.currentTarget.style.opacity===0||n.originalEvent&&n.originalEvent.propertyName==="opacity")&&(r.remove(),o.splice(o.indexOf(r),1),s.splice(s.indexOf(b),1),h())}),w.messageTemplate){for(u=0;u<r.children().length;u++)if(angular.element(r.children()[u]).hasClass("cg-notify-message-template")){a=angular.element(r.children()[u]);break}if(a)a.append(i(w.messageTemplate)(b));else throw new Error("cgNotify could not find the .cg-notify-message-template element in "+w.templateUrl+".");}angular.element(w.container).append(r);o.push(r);b.$position==="center"&&n(function(){b.$centerMargin="-"+r[0].offsetWidth/2+"px"});b.$close=function(){r.css("opacity",0).attr("data-closing","true");h()};b.$toClose=function(){w.url&&(e.remove(w.url),f.path(w.url));b.$close()};h=function(){for(var e=0,r=c,n=o.length-1;n>=0;n--){var u=10,t=o[n],i=t[0].offsetHeight,f=r+i+u;t.attr("data-closing")?f+=20:r+=i+l;t.css("bottom",f+"px").css("margin-bottom","-"+(i+u)+"px").css("visibility","visible");e++}};n(function(){h()});w.duration>0&&n(function(){b.$close()},w.duration)}).error(function(n){throw new Error("Template specified for cgNotify ("+w.templateUrl+") could not be loaded. "+n);}),d={},d.close=function(){b.$close&&b.$close()},Object.defineProperty(d,"message",{get:function(){return b.$message},set:function(n){b.$message=n}}),s.push(b),d};return w.config=function(n){c=angular.isUndefined(n.startTop)?c:n.startTop;l=angular.isUndefined(n.verticalSpacing)?l:n.verticalSpacing;a=angular.isUndefined(n.duration)?a:n.duration;v=n.templateUrl?n.templateUrl:v;y=angular.isUndefined(n.position)?y:n.position;p=n.container?n.container:p;h=n.maximumOpen?n.maximumOpen:h},w.closeAll=function(){for(var t,n=o.length-1;n>=0;n--)t=o[n],t.css("opacity",0)},w}]);angular.module("uplus").run(["$templateCache",function(n){"use strict";n.put("angular-notify.html","<div class=\"cg-notify-message\" ng-click='$toClose()' ng-style=\"{'margin-left': $centerMargin}\"><div ng-show='!$messageTemplate'>{{$message}}<\/div><div ng-show='$messageTemplate' class='cg-notify-message-template'><\/div>")}]),function(n,t,i){(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.sparkline&&n(jQuery)})(function(r){"use strict";var c={},tt,u,e,s,l,o,v,it,rt,y,pt,ut,ft,et,h,ot,st,a,p,ht,ct,lt,w,b,k,at,vt,yt,d,g,nt,f,wt=0;tt=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#39628d",negBarColor:"#f44",stackedBarColor:["#39628d","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss","0":"Draw","1":"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new e("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new e("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new e("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};at='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}';u=function(){var n,t;return n=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(n.prototype=r.extend(new arguments[0],arguments[arguments.length-1]),n._super=arguments[0].prototype):n.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(n.prototype),r.extend.apply(r,t))):n.prototype=arguments[0],n.prototype.cls=n,n};r.SPFormatClass=e=u({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(n,t){this.format=n;this.fclass=t},render:function(n,t,r){var h=this,c=n,e,o,f,u,s;return this.format.replace(this.fre,function(){var n;return(o=arguments[1],f=arguments[3],e=h.precre.exec(o),e?(s=e[2],o=e[1]):s=!1,u=c[o],u===i)?"":f&&t&&t[f]?(n=t[f],n.get?t[f].get(u)||u:t[f][u]||u):(rt(u)&&(u=r.get("numberFormatter")?r.get("numberFormatter")(u):et(u,s,r.get("numberDigitGroupCount"),r.get("numberDigitGroupSep"),r.get("numberDecimalMark"))),u)})}});r.spformat=function(n,t){return new e(n,t)};s=function(n,t,i){return n<t?t:n>i?i:n};l=function(n,i){var r;return i===2?(r=t.floor(n.length/2),n.length%2?n[r]:(n[r-1]+n[r])/2):n.length%2?(r=(n.length*i+i)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1]):(r=(n.length*i+2)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1])};o=function(n){var t;switch(n){case"undefined":n=i;break;case"null":n=null;break;case"true":n=!0;break;case"false":n=!1;break;default:t=parseFloat(n);n==t&&(n=t)}return n};v=function(n){for(var i=[],t=n.length;t--;)i[t]=o(n[t]);return i};it=function(n,t){for(var u=[],i=0,r=n.length;i<r;i++)n[i]!==t&&u.push(n[i]);return u};rt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};et=function(n,t,i,u,f){var e,o;for(n=(t===!1?parseFloat(n).toString():n.toFixed(t)).split(""),e=(e=r.inArray(".",n))<0?n.length:e,e<n.length&&(n[e]=f),o=e-i;o>0;o-=i)n.splice(o,0,u);return n.join("")};y=function(n,t,i){for(var r=t.length;r--;)if((!i||t[r]!==null)&&t[r]!==n)return!1;return!0};pt=function(n){for(var i=0,t=n.length;t--;)i+=typeof n[t]=="number"?n[t]:0;return i};ft=function(n){return r.isArray(n)?n:[n]};ut=function(t){var i;n.createStyleSheet?n.createStyleSheet().cssText=t:(i=n.createElement("style"),i.type="text/css",n.getElementsByTagName("head")[0].appendChild(i),i[typeof n.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t)};r.fn.simpledraw=function(t,u,f,e){var o,s,h;if(f&&(o=this.data("_jqs_vcanvas")))return o;if(r.fn.sparkline.canvas===!1)return!1;if(r.fn.sparkline.canvas===i)if(h=n.createElement("canvas"),!(h.getContext&&h.getContext("2d")))if(n.namespaces&&!n.namespaces.v)n.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),r.fn.sparkline.canvas=function(n,t,i){return new nt(n,t,i)};else return r.fn.sparkline.canvas=!1,!1;else r.fn.sparkline.canvas=function(n,t,i,r){return new g(n,t,i,r)};return t===i&&(t=r(this).innerWidth()),u===i&&(u=r(this).innerHeight()),o=r.fn.sparkline.canvas(t,u,this,e),s=r(this).data("_jqs_mhandler"),s&&s.registerCanvas(o),o};r.fn.cleardraw=function(){var n=this.data("_jqs_vcanvas");n&&n.reset()};r.RangeMapClass=h=u({init:function(n){var i,t,r=[];for(i in n)n.hasOwnProperty(i)&&typeof i=="string"&&i.indexOf(":")>-1&&(t=i.split(":"),t[0]=t[0].length===0?-Infinity:parseFloat(t[0]),t[1]=t[1].length===0?Infinity:parseFloat(t[1]),t[2]=n[i],r.push(t));this.map=n;this.rangelist=r||!1},get:function(n){var r=this.rangelist,u,t,f;if((f=this.map[n])!==i)return f;if(r)for(u=r.length;u--;)if(t=r[u],t[0]<=n&&t[1]>=n)return t[2];return i}});r.range_map=function(n){return new h(n)};ot=u({init:function(n,t){var i=r(n);this.$el=i;this.options=t;this.currentPageX=0;this.currentPageY=0;this.el=n;this.splist=[];this.tooltip=null;this.over=!1;this.displayTooltips=!t.get("disableTooltips");this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(n){this.splist.push(n);this.over&&this.updateDisplay()},registerCanvas:function(n){var t=r(n.canvas);this.canvas=n;this.$canvas=t;t.mouseenter(r.proxy(this.mouseenter,this));t.mouseleave(r.proxy(this.mouseleave,this));t.click(r.proxy(this.mouseclick,this))},reset:function(n){this.splist=[];this.tooltip&&n&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(n){var t=r.Event("sparklineClick");t.originalEvent=n;t.sparklines=this.splist;this.$el.trigger(t)},mouseenter:function(t){r(n.body).unbind("mousemove.jqs");r(n.body).bind("mousemove.jqs",r.proxy(this.mousemove,this));this.over=!0;this.currentPageX=t.pageX;this.currentPageY=t.pageY;this.currentEl=t.target;!this.tooltip&&this.displayTooltips&&(this.tooltip=new st(this.options),this.tooltip.updatePosition(t.pageX,t.pageY));this.updateDisplay()},mouseleave:function(){r(n.body).unbind("mousemove.jqs");var i=this.splist,e=i.length,u=!1,f,t;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),t=0;t<e;t++)f=i[t],f.clearRegionHighlight()&&(u=!0);u&&this.canvas.render()},mousemove:function(n){this.currentPageX=n.pageX;this.currentPageY=n.pageY;this.currentEl=n.target;this.tooltip&&this.tooltip.updatePosition(n.pageX,n.pageY);this.updateDisplay()},updateDisplay:function(){var i=this.splist,o=i.length,s=!1,h=this.$canvas.offset(),c=this.currentPageX-h.left,l=this.currentPageY-h.top,u,t,n,f,e;if(this.over){for(n=0;n<o;n++)t=i[n],f=t.setRegionHighlight(this.currentEl,c,l),f&&(s=!0);if(s){if(e=r.Event("sparklineRegionChange"),e.sparklines=this.splist,this.$el.trigger(e),this.tooltip){for(u="",n=0;n<o;n++)t=i[n],u+=t.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}f===null&&this.mouseleave()}}});st=u({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var u=t.get("tooltipClassname","jqstooltip"),f=this.sizeStyle,i;this.container=t.get("tooltipContainer")||n.body;this.tooltipOffsetX=t.get("tooltipOffsetX",10);this.tooltipOffsetY=t.get("tooltipOffsetY",12);r("#jqssizetip").remove();r("#jqstooltip").remove();this.sizetip=r("<div/>",{id:"jqssizetip",style:f,"class":u});this.tooltip=r("<div/>",{id:"jqstooltip","class":u}).appendTo(this.container);i=this.tooltip.offset();this.offsetLeft=i.left;this.offsetTop=i.top;this.hidden=!0;r(window).unbind("resize.jqs scroll.jqs");r(window).bind("resize.jqs scroll.jqs",r.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=r(window).scrollTop();this.scrollLeft=r(window).scrollLeft();this.scrollRight=this.scrollLeft+r(window).width();this.updatePosition()},getSize:function(n){this.sizetip.html(n).appendTo(this.container);this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(n){if(!n){this.tooltip.css("visibility","hidden");this.hidden=!0;return}this.getSize(n);this.tooltip.html(n).css({width:this.width,height:this.height,visibility:"visible"});this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(n,t){if(n===i){if(this.mousex===i)return;n=this.mousex-this.offsetLeft;t=this.mousey-this.offsetTop}else this.mousex=n=n-this.offsetLeft,this.mousey=t=t-this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,n+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),n<this.scrollLeft?n=this.scrollLeft:n+this.width>this.scrollRight&&(n=this.scrollRight-this.width),this.tooltip.css({left:n,top:t}))},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=i;r(window).unbind("resize.jqs scroll.jqs")}});vt=function(){ut(at)};r(vt);f=[];r.fn.sparkline=function(t,u){return this.each(function(){var e=new r.fn.sparkline.options(this,u),h=r(this),s,o;if(s=function(){var s,a,c,f,u,l,o;if(t==="html"||t===i?(o=this.getAttribute(e.get("tagValuesAttribute")),(o===i||o===null)&&(o=h.html()),s=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):s=t,a=e.get("width")==="auto"?s.length*e.get("defaultPixelsPerValue"):e.get("width"),e.get("height")==="auto"?e.get("composite")&&r.data(this,"_jqs_vcanvas")||(f=n.createElement("span"),f.innerHTML="a",h.html(f),c=r(f).innerHeight()||r(f).height(),r(f).remove(),f=null):c=e.get("height"),e.get("disableInteraction")?u=!1:(u=r.data(this,"_jqs_mhandler"),u?e.get("composite")||u.reset():(u=new ot(this,e),r.data(this,"_jqs_mhandler",u))),e.get("composite")&&!r.data(this,"_jqs_vcanvas")){r.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),r.data(this,"_jqs_errnotify",!0));return}l=new r.fn.sparkline[e.get("type")](this,s,e,a,c);l.render();u&&u.registerSparkline(l)},r(this).html()&&!e.get("disableHiddenCheck")&&r(this).is(":hidden")||!r(this).parents("body").length){if(!e.get("composite")&&r.data(this,"_jqs_pending"))for(o=f.length;o;o--)f[o-1][0]==this&&f.splice(o-1,1);f.push([this,s]);r.data(this,"_jqs_pending",!0)}else s.call(this)})};r.fn.sparkline.defaults=tt();r.sparkline_display_visible=function(){for(var t,i=[],n=0,u=f.length;n<u;n++)t=f[n][0],r(t).is(":visible")&&!r(t).parents().is(":hidden")?(f[n][1].call(t),r.data(f[n][0],"_jqs_pending",!1),i.push(n)):r(t).closest("html").length||r.data(t,"_jqs_pending")||(r.data(f[n][0],"_jqs_pending",!1),i.push(n));for(n=i.length;n;n--)f.splice(i[n-1],1)};r.fn.sparkline.options=u({init:function(n,t){var e,i,u,f;this.userOptions=t=t||{};this.tag=n;this.tagValCache={};i=r.fn.sparkline.defaults;u=i.common;this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||u.tagOptionsPrefix);f=this.getTagSetting("type");e=f===c?i[t.type||u.type]:i[f];this.mergedOptions=r.extend({},u,e,t)},getTagSetting:function(n){var u=this.tagOptionsPrefix,t,r,f,e;if(u===!1||u===i)return c;if(this.tagValCache.hasOwnProperty(n))t=this.tagValCache.key;else{if(t=this.tag.getAttribute(u+n),t===i||t===null)t=c;else if(t.substr(0,1)==="[")for(t=t.substr(1,t.length-2).split(","),r=t.length;r--;)t[r]=o(t[r].replace(/(^\s*)|(\s*$)/g,""));else if(t.substr(0,1)==="{")for(f=t.substr(1,t.length-2).split(","),t={},r=f.length;r--;)e=f[r].split(":",2),t[e[0].replace(/(^\s*)|(\s*$)/g,"")]=o(e[1].replace(/(^\s*)|(\s*$)/g,""));else t=o(t);this.tagValCache.key=t}return t},get:function(n,t){var r=this.getTagSetting(n),u;return r!==c?r:(u=this.mergedOptions[n])===i?t:u}});r.fn.sparkline._base=u({disabled:!1,init:function(n,t,u,f,e){this.el=n;this.$el=r(n);this.values=t;this.options=u;this.width=f;this.height=e;this.currentRegion=i},initTarget:function(){var n=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),n))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(){},setRegionHighlight:function(n,t,r){var f=this.currentRegion,e=!this.options.get("disableHighlight"),u;return t>this.canvasWidth||r>this.canvasHeight||t<0||r<0?null:(u=this.getRegion(n,t,r),f!==u)?(f!==i&&e&&this.removeHighlight(),this.currentRegion=u,u!==i&&e&&this.renderHighlight(),!0):!1},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t=this.options,y="",h=[],n,o,p,w,b,u,c,l,a,k,v,s,d,f;if(this.currentRegion===i)return"";if(n=this.getCurrentRegionFields(),v=t.get("tooltipFormatter"),v)return v(this,t,n);if(t.get("tooltipChartTitle")&&(y+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"<\/div>\n"),o=this.options.get("tooltipFormat"),!o)return"";if(r.isArray(o)||(o=[o]),r.isArray(n)||(n=[n]),c=this.options.get("tooltipFormatFieldlist"),l=this.options.get("tooltipFormatFieldlistKey"),c&&l){for(a=[],u=n.length;u--;)k=n[u][l],(f=r.inArray(k,c))!=-1&&(a[f]=n[u]);n=a}for(p=o.length,d=n.length,u=0;u<p;u++)for(s=o[u],typeof s=="string"&&(s=new e(s)),w=s.fclass||"jqsfield",f=0;f<d;f++)n[f].isNull&&t.get("tooltipSkipNull")||(r.extend(n[f],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),b=s.render(n[f],t.get("tooltipValueLookups"),t),h.push('<div class="'+w+'">'+b+"<\/div>"));return h.length?y+h.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(n,i){var e=i.get("highlightColor"),o=i.get("highlightLighten"),u,h,f,r;if(e)return e;if(o&&(u=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(n)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(n),u)){for(f=[],h=n.length===4?16:1,r=0;r<3;r++)f[r]=s(t.round(parseInt(u[r+1],16)*h*o),0,255);return"rgb("+f.join(",")+")"}return n}});a={changeHighlight:function(n){var i=this.currentRegion,f=this.target,u=this.regionShapes[i],t;u&&(t=this.renderRegion(i,n),r.isArray(t)||r.isArray(u)?(f.replaceWithShapes(u,t),this.regionShapes[i]=r.map(t,function(n){return n.id})):(f.replaceWithShape(u,t),this.regionShapes[i]=t.id))},render:function(){var e=this.values,o=this.target,u=this.regionShapes,n,f,t,i;if(this.cls._super.render.call(this)){for(t=e.length;t--;)if(n=this.renderRegion(t),n)if(r.isArray(n)){for(f=[],i=n.length;i--;)n[i].append(),f.push(n[i].id);u[t]=f}else n.append(),u[t]=n.id;else u[t]=null;o.render()}}};r.fn.sparkline.line=p=u(r.fn.sparkline._base,{type:"line",init:function(n,t,i,r,u){p._super.init.call(this,n,t,i,r,u);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.hightlightSpotId=null;this.lastShapeId=null;this.initTarget()},getRegion:function(n,t){for(var u=this.regionMap,r=u.length;r--;)if(u[r]!==null&&t>=u[r][0]&&t<=u[r][1])return u[r][2];return i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.yvalues[n]===null,x:this.xvalues[n],y:this.yvalues[n],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:n}},renderHighlight:function(){var h=this.currentRegion,t=this.target,n=this.vertices[h],r=this.options,e=r.get("spotRadius"),o=r.get("highlightSpotColor"),s=r.get("highlightLineColor"),u,f;n&&(e&&o&&(u=t.drawCircle(n[0],n[1],e,i,o),this.highlightSpotId=u.id,t.insertAfterShape(this.lastShapeId,u)),s&&(f=t.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,s),this.highlightLineId=f.id,t.insertAfterShape(this.lastShapeId,f)))},removeHighlight:function(){var n=this.target;this.highlightSpotId&&(n.removeShapeId(this.highlightSpotId),this.highlightSpotId=null);this.highlightLineId&&(n.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){for(var i=this.values,c=i.length,r=this.xvalues,e=this.yvalues,u=this.yminmax,f,s,h,o,n=0;n<c;n++)f=i[n],s=typeof i[n]=="string",h=typeof i[n]=="object"&&i[n]instanceof Array,o=s&&i[n].split(":"),s&&o.length===2?(r.push(Number(o[0])),e.push(Number(o[1])),u.push(Number(o[1]))):h?(r.push(f[0]),e.push(f[1]),u.push(f[1])):(r.push(n),i[n]===null||i[n]==="null"?e.push(null):(e.push(Number(f)),u.push(Number(f))));this.options.get("xvalues")&&(r=this.options.get("xvalues"));this.maxy=this.maxyorg=t.max.apply(t,u);this.miny=this.minyorg=t.min.apply(t,u);this.maxx=t.max.apply(t,r);this.minx=t.min.apply(t,r);this.xvalues=r;this.yvalues=e;this.yminmax=u},processRangeOptions:function(){var n=this.options,t=n.get("normalRangeMin"),r=n.get("normalRangeMax");t!==i&&(t<this.miny&&(this.miny=t),r>this.maxy&&(this.maxy=r));n.get("chartRangeMin")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMin")<this.miny)&&(this.miny=n.get("chartRangeMin"));n.get("chartRangeMax")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMax")>this.maxy)&&(this.maxy=n.get("chartRangeMax"));n.get("chartRangeMinX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMinX")<this.minx)&&(this.minx=n.get("chartRangeMinX"));n.get("chartRangeMaxX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMaxX")>this.maxx)&&(this.maxx=n.get("chartRangeMaxX"))},drawNormalRange:function(n,r,u,f,e){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),h=r+t.round(u-u*((o-this.miny)/e)),c=t.round(u*(o-s)/e);this.target.drawRect(n,h,f,c,i,this.options.get("normalRangeColor")).append()},render:function(){var n=this.options,v=this.target,c=this.canvasWidth,o=this.canvasHeight,at=this.vertices,f=n.get("spotRadius"),pt=this.regionMap,b,y,k,l,a,ht,e,ut,g,d,vt,tt,yt,ct,ft,et,ot,st,nt,it,rt,lt,w,s,u;if(p._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),w=this.xvalues,s=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(l=a=0,b=this.maxx-this.minx==0?1:this.maxx-this.minx,y=this.maxy-this.miny==0?1:this.maxy-this.miny,k=this.yvalues.length-1,f&&(c<f*4||o<f*4)&&(f=0),f&&(rt=n.get("highlightSpotColor")&&!n.get("disableInteraction"),(rt||n.get("minSpotColor")||n.get("spotColor")&&s[k]===this.miny)&&(o-=t.ceil(f)),(rt||n.get("maxSpotColor")||n.get("spotColor")&&s[k]===this.maxy)&&(o-=t.ceil(f),l+=t.ceil(f)),(rt||(n.get("minSpotColor")||n.get("maxSpotColor"))&&(s[0]===this.miny||s[0]===this.maxy))&&(a+=t.ceil(f),c-=t.ceil(f)),(rt||n.get("spotColor")||n.get("minSpotColor")||n.get("maxSpotColor")&&(s[k]===this.miny||s[k]===this.maxy))&&(c-=t.ceil(f))),o--,n.get("normalRangeMin")===i||n.get("drawNormalOnTop")||this.drawNormalRange(a,l,o,c,y),e=[],ut=[e],ct=ft=null,et=s.length,u=0;u<et;u++)g=w[u],vt=w[u+1],d=s[u],tt=a+t.round((g-this.minx)*(c/b)),yt=u<et-1?a+t.round((vt-this.minx)*(c/b)):c,ft=tt+(yt-tt)/2,pt[u]=[ct||0,ft,u],ct=ft,d===null?u&&(s[u-1]!==null&&(e=[],ut.push(e)),at.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),e.length||e.push([tt,l+o]),ht=[tt,l+t.round(o-o*((d-this.miny)/y))],e.push(ht),at.push(ht));for(ot=[],st=[],nt=ut.length,u=0;u<nt;u++)e=ut[u],e.length&&(n.get("fillColor")&&(e.push([e[e.length-1][0],l+o]),st.push(e.slice(0)),e.pop()),e.length>2&&(e[0]=[e[0][0],e[1][1]]),ot.push(e));for(nt=st.length,u=0;u<nt;u++)v.drawShape(st[u],n.get("fillColor"),n.get("fillColor")).append();for(n.get("normalRangeMin")!==i&&n.get("drawNormalOnTop")&&this.drawNormalRange(a,l,o,c,y),nt=ot.length,u=0;u<nt;u++)v.drawShape(ot[u],n.get("lineColor"),i,n.get("lineWidth")).append();if(f&&n.get("valueSpots"))for(it=n.get("valueSpots"),it.get===i&&(it=new h(it)),u=0;u<et;u++)lt=it.get(s[u]),lt&&v.drawCircle(a+t.round((w[u]-this.minx)*(c/b)),l+t.round(o-o*((s[u]-this.miny)/y)),f,i,lt).append();f&&n.get("spotColor")&&s[k]!==null&&v.drawCircle(a+t.round((w[w.length-1]-this.minx)*(c/b)),l+t.round(o-o*((s[k]-this.miny)/y)),f,i,n.get("spotColor")).append();this.maxy!==this.minyorg&&(f&&n.get("minSpotColor")&&(g=w[r.inArray(this.minyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.minyorg-this.miny)/y)),f,i,n.get("minSpotColor")).append()),f&&n.get("maxSpotColor")&&(g=w[r.inArray(this.maxyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.maxyorg-this.miny)/y)),f,i,n.get("maxSpotColor")).append()));this.lastShapeId=v.getLastShapeId();this.canvasTop=l;v.render()}}});r.fn.sparkline.bar=ht=u(r.fn.sparkline._base,a,{type:"bar",init:function(n,u,f,e,c){var ct=parseInt(f.get("barWidth"),10),lt=parseInt(f.get("barSpacing"),10),dt=f.get("chartRangeMin"),gt=f.get("chartRangeMax"),at=f.get("chartRangeClip"),nt=Infinity,d=-Infinity,vt,yt,pt,tt,b,a,rt,wt,ut,ft,y,p,bt,kt,w,et,g,ni,ti,l,k,ii,ot,st;for(ht._super.init.call(this,n,u,f,e,c),a=0,rt=u.length;a<rt;a++)l=u[a],vt=typeof l=="string"&&l.indexOf(":")>-1,(vt||r.isArray(l))&&(w=!0,vt&&(l=u[a]=v(l.split(":"))),l=it(l,null),yt=t.min.apply(t,l),pt=t.max.apply(t,l),yt<nt&&(nt=yt),pt>d&&(d=pt));for(this.stacked=w,this.regionShapes={},this.barWidth=ct,this.barSpacing=lt,this.totalBarWidth=ct+lt,this.width=e=u.length*ct+(u.length-1)*lt,this.initTarget(),at&&(bt=dt===i?-Infinity:dt,kt=gt===i?Infinity:gt),b=[],tt=w?[]:b,ot=[],st=[],a=0,rt=u.length;a<rt;a++)if(w)for(et=u[a],u[a]=ti=[],ot[a]=0,tt[a]=st[a]=0,g=0,ni=et.length;g<ni;g++)l=ti[g]=at?s(et[g],bt,kt):et[g],l!==null&&(l>0&&(ot[a]+=l),nt<0&&d>0?l<0?st[a]+=t.abs(l):tt[a]+=l:tt[a]+=t.abs(l-(l<0?d:nt)),b.push(l));else l=at?s(u[a],bt,kt):u[a],l=u[a]=o(l),l!==null&&b.push(l);this.max=p=t.max.apply(t,b);this.min=y=t.min.apply(t,b);this.stackMax=d=w?t.max.apply(t,ot):p;this.stackMin=nt=w?t.min.apply(t,b):y;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<y)&&(y=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>p)&&(p=f.get("chartRangeMax"));this.zeroAxis=ut=f.get("zeroAxis",!0);ft=y<=0&&p>=0&&ut?0:ut==!1?y:y>0?y:p;this.xaxisOffset=ft;wt=w?t.max.apply(t,tt)+t.max.apply(t,st):p-y;this.canvasHeightEf=ut&&y<0?this.canvasHeight-2:this.canvasHeight-1;y<ft?(ii=w&&p>=0?d:p,k=(ii-ft)/wt*this.canvasHeight,k!==t.ceil(k)&&(this.canvasHeightEf-=2,k=t.ceil(k))):k=this.canvasHeight;this.yoffset=k;r.isArray(f.get("colorMap"))?(this.colorMapByIndex=f.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=f.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.range=wt},getRegion:function(n,r){var u=t.floor(r/this.totalBarWidth);return u<0||u>=this.values.length?i:u},getCurrentRegionFields:function(){for(var i=this.currentRegion,r=ft(this.values[i]),u=[],n,t=r.length;t--;)n=r[t],u.push({isNull:n===null,value:n,color:this.calcColor(t,n,i),offset:i});return u},calcColor:function(n,t,u){var o=this.colorMapByIndex,s=this.colorMapByValue,e=this.options,f,h;return f=this.stacked?e.get("stackedBarColor"):t<0?e.get("negBarColor"):e.get("barColor"),t===0&&e.get("zeroColor")!==i&&(f=e.get("zeroColor")),s&&(h=s.get(t))?f=h:o&&o.length>u&&(f=o[u]),r.isArray(f)?f[n%f.length]:f},renderRegion:function(n,u){var f=this.values[n],h=this.options,c=this.xaxisOffset,p=[],b=this.range,rt=this.stacked,k=this.target,d=n*this.totalBarWidth,ut=this.canvasHeightEf,o=this.yoffset,l,a,e,g,w,v,nt,s,tt,it;if(f=r.isArray(f)?f:[f],nt=f.length,s=f[0],g=y(null,f),it=y(c,f,!0),g)return h.get("nullColor")?(e=u?h.get("nullColor"):this.calcHighlightColor(h.get("nullColor"),h),l=o>0?o-1:o,k.drawRect(d,l,this.barWidth-1,0,e,e)):i;for(w=o,v=0;v<nt;v++){if(s=f[v],rt&&s===c){if(!it||tt)continue;tt=!0}a=b>0?t.floor(ut*(t.abs(s-c)/b))+1:1;s<c||s===c&&o===0?(l=w,w+=a):(l=o-a,o-=a);e=this.calcColor(v,s,n);u&&(e=this.calcHighlightColor(e,h));p.push(k.drawRect(d,l,this.barWidth-1,a-1,e,e))}return p.length===1?p[0]:p}});r.fn.sparkline.tristate=ct=u(r.fn.sparkline._base,a,{type:"tristate",init:function(n,t,u,f,e){var o=parseInt(u.get("barWidth"),10),s=parseInt(u.get("barSpacing"),10);ct._super.init.call(this,n,t,u,f,e);this.regionShapes={};this.barWidth=o;this.barSpacing=s;this.totalBarWidth=o+s;this.values=r.map(t,Number);this.width=f=t.length*o+(t.length-1)*s;r.isArray(u.get("colorMap"))?(this.colorMapByIndex=u.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=u.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.initTarget()},getRegion:function(n,i){return t.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],color:this.calcColor(this.values[n],n),offset:n}},calcColor:function(n,t){var u=this.values,i=this.options,r=this.colorMapByIndex,f=this.colorMapByValue,e;return f&&(e=f.get(n))?e:r&&r.length>t?r[t]:u[t]<0?i.get("negBarColor"):u[t]>0?i.get("posBarColor"):i.get("zeroBarColor")},renderRegion:function(n,i){var o=this.values,l=this.options,s=this.target,h,f,u,c,e,r;if(h=s.pixelHeight,u=t.round(h/2),c=n*this.totalBarWidth,o[n]<0?(e=u,f=u-1):o[n]>0?(e=0,f=u-1):(e=u-1,f=2),r=this.calcColor(o[n],n),r!==null)return i&&(r=this.calcHighlightColor(r,l)),s.drawRect(c,e,this.barWidth-1,f-1,r,r)}});r.fn.sparkline.discrete=lt=u(r.fn.sparkline._base,a,{type:"discrete",init:function(n,u,f,e,o){lt._super.init.call(this,n,u,f,e,o);this.regionShapes={};this.values=u=r.map(u,Number);this.min=t.min.apply(t,u);this.max=t.max.apply(t,u);this.range=this.max-this.min;this.width=e=f.get("width")==="auto"?u.length*2:this.width;this.interval=t.floor(e/u.length);this.itemWidth=e/u.length;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<this.min)&&(this.min=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>this.max)&&(this.max=f.get("chartRangeMax"));this.initTarget();this.target&&(this.lineHeight=f.get("lineHeight")==="auto"?t.round(this.canvasHeight*.3):f.get("lineHeight"))},getRegion:function(n,i){return t.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],offset:n}},renderRegion:function(n,i){var a=this.values,r=this.options,h=this.min,v=this.max,y=this.range,p=this.interval,w=this.target,b=this.canvasHeight,c=this.lineHeight,l=b-c,f,e,u,o;return e=s(a[n],h,v),o=n*p,f=t.round(l-l*((e-h)/y)),u=r.get("thresholdColor")&&e<r.get("thresholdValue")?r.get("thresholdColor"):r.get("lineColor"),i&&(u=this.calcHighlightColor(u,r)),w.drawLine(o,f,o,f+c,u)}});r.fn.sparkline.bullet=w=u(r.fn.sparkline._base,{type:"bullet",init:function(n,r,u,f,e){var s,h,o;w._super.init.call(this,n,r,u,f,e);this.values=r=v(r);o=r.slice();o[0]=o[0]===null?o[2]:o[0];o[1]=r[1]===null?o[2]:o[1];s=t.min.apply(t,r);h=t.max.apply(t,r);s=u.get("base")===i?s<0?s:0:u.get("base");this.min=s;this.max=h;this.range=h-s;this.shapes={};this.valueShapes={};this.regiondata={};this.width=f=u.get("width")==="auto"?"4.0em":f;this.target=this.$el.simpledraw(f,e,u.get("composite"));r.length||(this.disabled=!0);this.initTarget()},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{fieldkey:n.substr(0,1),value:this.values[n.substr(1)],region:n}},changeHighlight:function(n){var i=this.currentRegion,r=this.valueShapes[i],t;delete this.shapes[r];switch(i.substr(0,1)){case"r":t=this.renderRange(i.substr(1),n);break;case"p":t=this.renderPerformance(n);break;case"t":t=this.renderTarget(n)}this.valueShapes[i]=t.id;this.shapes[t.id]=i;this.target.replaceWithShape(r,t)},renderRange:function(n,i){var u=this.values[n],f=t.round(this.canvasWidth*((u-this.min)/this.range)),r=this.options.get("rangeColors")[n-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,f-1,this.canvasHeight-1,r,r)},renderPerformance:function(n){var r=this.values[1],u=t.round(this.canvasWidth*((r-this.min)/this.range)),i=this.options.get("performanceColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,t.round(this.canvasHeight*.3),u-1,t.round(this.canvasHeight*.4)-1,i,i)},renderTarget:function(n){var u=this.values[0],f=t.round(this.canvasWidth*((u-this.min)/this.range)-this.options.get("targetWidth")/2),r=t.round(this.canvasHeight*.1),e=this.canvasHeight-r*2,i=this.options.get("targetColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(f,r,this.options.get("targetWidth")-1,e-1,i,i)},render:function(){var i=this.values.length,r=this.target,t,n;if(w._super.render.call(this)){for(t=2;t<i;t++)n=this.renderRange(t).append(),this.shapes[n.id]="r"+t,this.valueShapes["r"+t]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id);this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id);r.render()}}});r.fn.sparkline.pie=b=u(r.fn.sparkline._base,{type:"pie",init:function(n,i,u,f,e){var s=0,o;if(b._super.init.call(this,n,i,u,f,e),this.shapes={},this.valueShapes={},this.values=i=r.map(i,Number),u.get("width")==="auto"&&(this.width=this.height),i.length>0)for(o=i.length;o--;)s+=i[o];this.total=s;this.initTarget();this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],percent:this.values[n]/this.total*100,color:this.options.get("sliceColors")[n%this.options.get("sliceColors").length],offset:n}},changeHighlight:function(n){var t=this.currentRegion,i=this.renderSlice(t,n),r=this.valueShapes[t];delete this.shapes[r];this.target.replaceWithShape(r,i);this.valueShapes[t]=i.id;this.shapes[i.id]=t},renderSlice:function(n,r){for(var p=this.target,f=this.options,h=this.radius,w=f.get("borderWidth"),c=f.get("offset"),b=2*t.PI,l=this.values,a=this.total,e=c?2*t.PI*(c/360):0,v,o,s,y=l.length,u=0;u<y;u++){if(v=e,o=e,a>0&&(o=e+b*(l[u]/a)),n===u)return s=f.get("sliceColors")[u%f.get("sliceColors").length],r&&(s=this.calcHighlightColor(s,f)),p.drawPieSlice(h,h,h-w,v,o,i,s);e=o}},render:function(){var e=this.target,o=this.values,s=this.options,r=this.radius,u=s.get("borderWidth"),f,n;if(b._super.render.call(this)){for(u&&e.drawCircle(r,r,t.floor(r-u/2),s.get("borderColor"),i,u).append(),n=o.length;n--;)o[n]&&(f=this.renderSlice(n).append(),this.valueShapes[n]=f.id,this.shapes[f.id]=n);e.render()}}});r.fn.sparkline.box=k=u(r.fn.sparkline._base,{type:"box",init:function(n,t,i,u,f){k._super.init.call(this,n,t,i,u,f);this.values=r.map(t,Number);this.width=i.get("width")==="auto"?"4.0em":u;this.initTarget();this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var n=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&n.push({field:"lo",value:this.loutlier}),this.routlier!==i&&n.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&n.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&n.push({field:"rw",value:this.rwhisker}),n},render:function(){var s=this.target,r=this.values,g=r.length,n=this.options,nt=this.canvasWidth,u=this.canvasHeight,e=n.get("chartRangeMin")===i?t.min.apply(t,r):n.get("chartRangeMin"),it=n.get("chartRangeMax")===i?t.max.apply(t,r):n.get("chartRangeMax"),o=0,h,w,tt,a,p,v,c,b,y,d,f;if(k._super.render.call(this)){if(n.get("raw"))n.get("showOutliers")&&r.length>5?(w=r[0],h=r[1],a=r[2],p=r[3],v=r[4],c=r[5],b=r[6]):(h=r[0],a=r[1],p=r[2],v=r[3],c=r[4]);else if(r.sort(function(n,t){return n-t}),a=l(r,1),p=l(r,2),v=l(r,3),tt=v-a,n.get("showOutliers")){for(h=c=i,y=0;y<g;y++)h===i&&r[y]>a-tt*n.get("outlierIQR")&&(h=r[y]),r[y]<v+tt*n.get("outlierIQR")&&(c=r[y]);w=r[0];b=r[g-1]}else h=r[0],c=r[g-1];this.quartiles=[a,p,v];this.lwhisker=h;this.rwhisker=c;this.loutlier=w;this.routlier=b;f=nt/(it-e+1);n.get("showOutliers")&&(o=t.ceil(n.get("spotRadius")),nt-=2*t.ceil(n.get("spotRadius")),f=nt/(it-e+1),w<h&&s.drawCircle((w-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append(),b>c&&s.drawCircle((b-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append());s.drawRect(t.round((a-e)*f+o),t.round(u*.1),t.round((v-a)*f),t.round(u*.8),n.get("boxLineColor"),n.get("boxFillColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/2),t.round((a-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/4),t.round((h-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/2),t.round((v-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/4),t.round((c-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((p-e)*f+o),t.round(u*.1),t.round((p-e)*f+o),t.round(u*.9),n.get("medianColor")).append();n.get("target")&&(d=t.ceil(n.get("spotRadius")),s.drawLine(t.round((n.get("target")-e)*f+o),t.round(u/2-d),t.round((n.get("target")-e)*f+o),t.round(u/2+d),n.get("targetColor")).append(),s.drawLine(t.round((n.get("target")-e)*f+o-d),t.round(u/2),t.round((n.get("target")-e)*f+o+d),t.round(u/2),n.get("targetColor")).append());s.render()}}});yt=u({init:function(n,t,i,r){this.target=n;this.id=t;this.type=i;this.args=r},append:function(){return this.target.appendShape(this),this}});d=u({_pxregex:/(\d+)(px)?\s*$/i,init:function(n,t,i){n&&(this.width=n,this.height=t,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),r.data(i,"_jqs_vcanvas",this))},drawLine:function(n,t,i,r,u,f){return this.drawShape([[n,t],[i,r]],u,f)},drawShape:function(n,t,i,r){return this._genShape("Shape",[n,t,i,r])},drawCircle:function(n,t,i,r,u,f){return this._genShape("Circle",[n,t,i,r,u,f])},drawPieSlice:function(n,t,i,r,u,f,e){return this._genShape("PieSlice",[n,t,i,r,u,f,e])},drawRect:function(n,t,i,r,u,f){return this._genShape("Rect",[n,t,i,r,u,f])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(n,t){r(t).html(n)},_calculatePixelDims:function(n,t,i){var u;u=this._pxregex.exec(t);this.pixelHeight=u?u[1]:r(i).height();u=this._pxregex.exec(n);this.pixelWidth=u?u[1]:r(i).width()},_genShape:function(n,t){var i=wt++;return t.unshift(i),new yt(this,i,n,t)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});g=u(d,{init:function(t,u,f,e){g._super.init.call(this,t,u,f);this.canvas=n.createElement("canvas");f[0]&&(f=f[0]);r.data(f,"_jqs_vcanvas",this);r(this.canvas).css({display:"inline-block",width:t,height:u,verticalAlign:"top"});this._insert(this.canvas,f);this._calculatePixelDims(t,u,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=e;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i;r(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(n,t,r){var u=this.canvas.getContext("2d");return n!==i&&(u.strokeStyle=n),u.lineWidth=r===i?1:r,t!==i&&(u.fillStyle=t),u},reset:function(){var n=this._getContext();n.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i},_drawShape:function(n,t,r,u,f){var e=this._getContext(r,u,f),o,s;for(e.beginPath(),e.moveTo(t[0][0]+.5,t[0][1]+.5),o=1,s=t.length;o<s;o++)e.lineTo(t[o][0]+.5,t[o][1]+.5);r!==i&&e.stroke();u!==i&&e.fill();this.targetX!==i&&this.targetY!==i&&e.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawCircle:function(n,r,u,f,e,o,s){var h=this._getContext(e,o,s);h.beginPath();h.arc(r,u,f,0,2*t.PI,!1);this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n);e!==i&&h.stroke();o!==i&&h.fill()},_drawPieSlice:function(n,t,r,u,f,e,o,s){var h=this._getContext(o,s);h.beginPath();h.moveTo(t,r);h.arc(t,r,u,f,e,!1);h.lineTo(t,r);h.closePath();o!==i&&h.stroke();s&&h.fill();this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t+r,i],[t+r,i+u],[t,i+u],[t,i]],f,e)},appendShape:function(n){return this.shapes[n.id]=n,this.shapeseq.push(n.id),this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var r=this.shapeseq,i;for(this.shapes[t.id]=t,i=r.length;i--;)r[i]==n&&(r[i]=t.id);delete this.shapes[n]},replaceWithShapes:function(n,t){for(var r=this.shapeseq,f={},u,e,i=n.length;i--;)f[n[i]]=!0;for(i=r.length;i--;)u=r[i],f[u]&&(r.splice(i,1),delete this.shapes[u],e=i);for(i=t.length;i--;)r.splice(e,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(n,t){for(var r=this.shapeseq,i=r.length;i--;)if(r[i]===n){r.splice(i+1,0,t.id);this.shapes[t.id]=t;return}},removeShapeId:function(n){for(var i=this.shapeseq,t=i.length;t--;)if(i[t]===n){i.splice(t,1);break}delete this.shapes[n]},getShapeAt:function(n,t,i){return this.targetX=t,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,u=this.shapes,f=i.length,e=this._getContext(),r,t,n;for(e.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<f;n++)r=i[n],t=u[r],this["_draw"+t.type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}});nt=u(d,{init:function(t,i,u){var f;nt._super.init.call(this,t,i,u);u[0]&&(u=u[0]);r.data(u,"_jqs_vcanvas",this);this.canvas=n.createElement("span");r(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,u);this._calculatePixelDims(t,i,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;f='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"><\/v:group>';this.canvas.insertAdjacentHTML("beforeEnd",f);this.group=r(this.canvas).children()[0];this.rendered=!1;this.prerender=""},_drawShape:function(n,t,r,u,f){for(var e=[],s,h,c,l,o=0,a=t.length;o<a;o++)e[o]=""+t[o][0]+","+t[o][1];return s=e.splice(0,1),f=f===i?1:f,h=r===i?' stroked="false" ':' strokeWeight="'+f+'px" strokeColor="'+r+'" ',c=u===i?' filled="false"':' fillColor="'+u+'" filled="true" ',l=e[0]===e[e.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+h+c+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+s+" l "+e.join(", ")+" "+l+'e"> <\/v:shape>'},_drawCircle:function(n,t,r,u,f,e,o){var s,h;return t-=u,r-=u,s=f===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+f+'" ',h=e===i?' filled="false"':' fillColor="'+e+'" filled="true" ','<v:oval  id="jqsshape'+n+'" '+s+h+' style="position:absolute;top:'+r+"px; left:"+t+"px; width:"+u*2+"px; height:"+u*2+'px"><\/v:oval>'},_drawPieSlice:function(n,r,u,f,e,o,s,h){var y,c,l,a,v,p,w;if(e===o)return"";if(o-e==2*t.PI&&(e=0,o=2*t.PI),c=r+t.round(t.cos(e)*f),l=u+t.round(t.sin(e)*f),a=r+t.round(t.cos(o)*f),v=u+t.round(t.sin(o)*f),c===a&&l===v){if(o-e<t.PI)return"";c=a=r+f;l=v=u}return c===a&&l===v&&o-e<t.PI?"":(y=[r-f,u-f,r+f,u+f,c,l,a,v],p=s===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+s+'" ',w=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+p+w+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+r+","+u+" wa "+y.join(", ")+' x e"> <\/v:shape>')},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t,i+u],[t+r,i+u],[t+r,i],[t,i]],f,e)},reset:function(){this.group.innerHTML=""},appendShape:function(n){var t=this["_draw"+n.type].apply(this,n.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].outerHTML=u},replaceWithShapes:function(n,t){for(var f=r("#jqsshape"+n[0]),u="",e=t.length,i=0;i<e;i++)u+=this["_draw"+t[i].type].apply(this,t[i].args);for(f[0].outerHTML=u,i=1;i<n.length;i++)r("#jqsshape"+n[i]).remove()},insertAfterShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].insertAdjacentHTML("afterEnd",u)},removeShapeId:function(n){var t=r("#jqsshape"+n);this.group.removeChild(t[0])},getShapeAt:function(n){return n.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math);
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(n,t,i,r){"use strict";function ci(n,t,i){return setTimeout(ai(n,i),t)}function ut(n,t,i){return Array.isArray(n)?(v(n,i[t],i),!0):!1}function v(n,t,i){var u;if(n)if(n.forEach)n.forEach(t,i);else if(n.length!==r)for(u=0;u<n.length;)t.call(i,n[u],u,n),u++;else for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n)}function or(t,i,r){var u="DEPRECATED METHOD: "+i+"\n"+r+" AT \n";return function(){var i=new Error("get-stack-trace"),f=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=n.console&&(n.console.warn||n.console.log);return r&&r.call(n.console,u,f),t.apply(this,arguments)}}function o(n,t,i){var u=t.prototype,r;r=n.prototype=Object.create(u);r.constructor=n;r._super=u;i&&y(r,i)}function ai(n,t){return function(){return n.apply(t,arguments)}}function vi(n,t){return typeof n==bu?n.apply(t?t[0]||r:r,t):n}function hr(n,t){return n===r?t:n}function pt(n,t,i){v(bt(t),function(t){n.addEventListener(t,i,!1)})}function wt(n,t,i){v(bt(t),function(t){n.removeEventListener(t,i,!1)})}function cr(n,t){while(n){if(n==t)return!0;n=n.parentNode}return!1}function g(n,t){return n.indexOf(t)>-1}function bt(n){return n.trim().split(/\s+/g)}function ft(n,t,i){if(n.indexOf&&!i)return n.indexOf(t);for(var r=0;r<n.length;){if(i&&n[r][i]==t||!i&&n[r]===t)return r;r++}return-1}function kt(n){return Array.prototype.slice.call(n,0)}function lr(n,t,i){for(var u=[],e=[],r=0,f;r<n.length;)f=t?n[r][t]:n[r],ft(e,f)<0&&u.push(n[r]),e[r]=f,r++;return i&&(u=t?u.sort(function(n,i){return n[t]>i[t]}):u.sort()),u}function dt(n,t){for(var i,u,e=t[0].toUpperCase()+t.slice(1),f=0;f<er.length;){if(i=er[f],u=i?i+e:t,u in n)return u;f++}return r}function ku(){return ar++}function vr(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||n}function s(n,t){var i=this;this.manager=n;this.callback=t;this.element=n.element;this.target=n.options.inputTarget;this.domHandler=function(t){vi(n.options.enable,[n])&&i.handler(t)};this.init()}function tf(n){var t,i=n.options.inputClass;return t=i?i:du?wi:gu?ri:yr?ki:ii,new t(n,rf)}function rf(n,t,i){var r=i.pointers.length,o=i.changedPointers.length,s=t&f&&r-o==0,h=t&(u|e)&&r-o==0;i.isFirst=!!s;i.isFinal=!!h;s&&(n.session={});i.eventType=t;uf(n,i);n.emit("hammer.input",i);n.recognize(i);n.session.prevInput=i}function uf(n,t){var i=n.session,f=t.pointers,o=f.length,r,e;i.firstInput||(i.firstInput=br(t));o>1&&!i.firstMultiple?i.firstMultiple=br(t):o===1&&(i.firstMultiple=!1);var s=i.firstInput,u=i.firstMultiple,h=u?u.center:s.center,c=t.center=kr(f);t.timeStamp=hi();t.deltaTime=t.timeStamp-s.timeStamp;t.angle=pi(h,c);t.distance=ti(h,c);ff(i,t);t.offsetDirection=gr(t.deltaX,t.deltaY);r=dr(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=r.x;t.overallVelocityY=r.y;t.overallVelocity=d(r.x)>d(r.y)?r.x:r.y;t.scale=u?sf(u.pointers,f):1;t.rotation=u?of(u.pointers,f):0;t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length;ef(i,t);e=n.element;cr(t.srcEvent.target,e)&&(e=t.srcEvent.target);t.target=e}function ff(n,t){var i=t.center,r=n.offsetDelta||{},e=n.prevDelta||{},o=n.prevInput||{};(t.eventType===f||o.eventType===u)&&(e=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=n.offsetDelta={x:i.x,y:i.y});t.deltaX=e.x+(i.x-r.x);t.deltaY=e.y+(i.y-r.y)}function ef(n,t){var i=n.lastInterval||t,c=t.timeStamp-i.timeStamp,f,o,s,h;if(t.eventType!=e&&(c>nf||i.velocity===r)){var l=t.deltaX-i.deltaX,a=t.deltaY-i.deltaY,u=dr(c,l,a);o=u.x;s=u.y;f=d(u.x)>d(u.y)?u.x:u.y;h=gr(l,a);n.lastInterval=t}else f=i.velocity,o=i.velocityX,s=i.velocityY,h=i.direction;t.velocity=f;t.velocityX=o;t.velocityY=s;t.direction=h}function br(n){for(var i=[],t=0;t<n.pointers.length;)i[t]={clientX:rt(n.pointers[t].clientX),clientY:rt(n.pointers[t].clientY)},t++;return{timeStamp:hi(),pointers:i,center:kr(i),deltaX:n.deltaX,deltaY:n.deltaY}}function kr(n){var t=n.length;if(t===1)return{x:rt(n[0].clientX),y:rt(n[0].clientY)};for(var r=0,u=0,i=0;i<t;)r+=n[i].clientX,u+=n[i].clientY,i++;return{x:rt(r/t),y:rt(u/t)}}function dr(n,t,i){return{x:t/n||0,y:i/n||0}}function gr(n,t){return n===t?gt:d(n)>=d(t)?n<0?st:ht:t<0?ct:lt}function ti(n,t,i){i||(i=wr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.sqrt(r*r+u*u)}function pi(n,t,i){i||(i=wr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.atan2(u,r)*180/Math.PI}function of(n,t){return pi(t[1],t[0],ni)+pi(n[1],n[0],ni)}function sf(n,t){return ti(t[0],t[1],ni)/ti(n[0],n[1],ni)}function ii(){this.evEl=cf;this.evWin=lf;this.pressed=!1;s.apply(this,arguments)}function wi(){this.evEl=nu;this.evWin=tu;s.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function iu(){this.evTarget=pf;this.evWin=wf;this.started=!1;s.apply(this,arguments)}function bf(n,t){var i=kt(n.touches),r=kt(n.changedTouches);return t&(u|e)&&(i=lr(i.concat(r),"identifier",!0)),[i,r]}function ri(){this.evTarget=uu;this.targetIds={};s.apply(this,arguments)}function kf(n,t){var r=kt(n.touches),o=this.targetIds;if(t&(f|nt)&&r.length===1)return o[r[0].identifier]=!0,[r,r];var i,s,h=kt(n.changedTouches),c=[],l=this.target;if(s=r.filter(function(n){return cr(n.target,l)}),t===f)for(i=0;i<s.length;)o[s[i].identifier]=!0,i++;for(i=0;i<h.length;)o[h[i].identifier]&&c.push(h[i]),t&(u|e)&&delete o[h[i].identifier],i++;if(c.length)return[lr(s.concat(c),"identifier",!0),c]}function ki(){s.apply(this,arguments);var n=ai(this.handler,this);this.touch=new ri(this.manager,n);this.mouse=new ii(this.manager,n);this.primaryTouch=null;this.lastTouches=[]}function df(n,t){n&f?(this.primaryTouch=t.changedPointers[0].identifier,eu.call(this,t)):n&(u|e)&&eu.call(this,t)}function eu(n){var t=n.changedPointers[0],i,r,u;t.identifier===this.primaryTouch&&(i={x:t.clientX,y:t.clientY},this.lastTouches.push(i),r=this.lastTouches,u=function(){var n=r.indexOf(i);n>-1&&r.splice(n,1)},setTimeout(u,fu))}function gf(n){for(var r=n.srcEvent.clientX,u=n.srcEvent.clientY,t=0;t<this.lastTouches.length;t++){var i=this.lastTouches[t],f=Math.abs(r-i.x),e=Math.abs(u-i.y);if(f<=bi&&e<=bi)return!0}return!1}function gi(n,t){this.manager=n;this.set(t)}function ne(n){if(g(n,it))return it;var t=g(n,at),i=g(n,vt);return t&&i?it:t||i?t?at:vt:g(n,di)?di:cu}function te(){if(!su)return!1;var t={},i=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=i?n.CSS.supports("touch-action",r):!0}),t}function w(n){this.options=y({},this.defaults,n||{});this.id=ku();this.manager=null;this.options.enable=hr(this.options.enable,!0);this.state=fi;this.simultaneous={};this.requireFail=[]}function lu(n){return n&yt?"cancel":n&k?"end":n&et?"move":n&h?"start":""}function au(n){return n==lt?"down":n==ct?"up":n==st?"left":n==ht?"right":""}function ei(n,t){var i=t.manager;return i?i.get(n):n}function c(){w.apply(this,arguments)}function oi(){c.apply(this,arguments);this.pX=null;this.pY=null}function nr(){c.apply(this,arguments)}function tr(){w.apply(this,arguments);this._timer=null;this._input=null}function ir(){c.apply(this,arguments)}function rr(){c.apply(this,arguments)}function si(){w.apply(this,arguments);this.pTime=!1;this.pCenter=!1;this._timer=null;this._input=null;this.count=0}function b(n,t){return t=t||{},t.recognizers=hr(t.recognizers,b.defaults.preset),new fr(n,t)}function fr(n,t){this.options=y({},b.defaults,t||{});this.options.inputTarget=this.options.inputTarget||n;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=n;this.input=tf(this);this.touchAction=new gi(this,this.options.touchAction);yu(this,!0);v(this.options.recognizers,function(n){var t=this.add(new n[0](n[1]));n[2]&&t.recognizeWith(n[2]);n[3]&&t.requireFailure(n[3])},this)}function yu(n,t){var r=n.element,i;r.style&&(v(n.options.cssProps,function(u,f){i=dt(r.style,f);t?(n.oldCssProps[i]=r.style[i],r.style[i]=u):r.style[i]=n.oldCssProps[i]||""}),t||(n.oldCssProps={}))}function ie(n,i){var r=t.createEvent("Event");r.initEvent(n,!0,!0);r.gesture=i;i.target.dispatchEvent(r)}var er=["","webkit","Moz","MS","ms","o"],wu=t.createElement("div"),bu="function",rt=Math.round,d=Math.abs,hi=Date.now,y,li,sr,ar,ru,uu,fu,bi,vu,ur,pu;y=typeof Object.assign!="function"?function(n){var f,i,t,u;if(n===r||n===null)throw new TypeError("Cannot convert undefined or null to object");for(f=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==r&&t!==null)for(u in t)t.hasOwnProperty(u)&&(f[u]=t[u]);return f}:Object.assign;li=or(function(n,t,i){for(var f=Object.keys(t),u=0;u<f.length;)(!i||i&&n[f[u]]===r)&&(n[f[u]]=t[f[u]]),u++;return n},"extend","Use `assign`.");sr=or(function(n,t){return li(n,t,!0)},"merge","Use `assign`.");ar=1;var yr="ontouchstart"in n,du=dt(n,"PointerEvent")!==r,gu=yr&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ot="touch",yi="mouse",nf=25,f=1,nt=2,u=4,e=8,gt=1,st=2,ht=4,ct=8,lt=16,l=st|ht,tt=ct|lt,pr=l|tt,wr=["x","y"],ni=["clientX","clientY"];s.prototype={handler:function(){},init:function(){this.evEl&&pt(this.element,this.evEl,this.domHandler);this.evTarget&&pt(this.target,this.evTarget,this.domHandler);this.evWin&&pt(vr(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wt(this.element,this.evEl,this.domHandler);this.evTarget&&wt(this.target,this.evTarget,this.domHandler);this.evWin&&wt(vr(this.element),this.evWin,this.domHandler)}};var hf={mousedown:f,mousemove:nt,mouseup:u},cf="mousedown",lf="mousemove mouseup";o(ii,s,{handler:function(n){var t=hf[n.type];(t&f&&n.button===0&&(this.pressed=!0),t&nt&&n.which!==1&&(t=u),this.pressed)&&(t&u&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[n],changedPointers:[n],pointerType:yi,srcEvent:n}))}});var af={pointerdown:f,pointermove:nt,pointerup:u,pointercancel:e,pointerout:e},vf={2:ot,3:"pen",4:yi,5:"kinect"},nu="pointerdown",tu="pointermove pointerup pointercancel";n.MSPointerEvent&&!n.PointerEvent&&(nu="MSPointerDown",tu="MSPointerMove MSPointerUp MSPointerCancel");o(wi,s,{handler:function(n){var t=this.store,o=!1,h=n.type.toLowerCase().replace("ms",""),r=af[h],s=vf[n.pointerType]||n.pointerType,c=s==ot,i=ft(t,n.pointerId,"pointerId");(r&f&&(n.button===0||c)?i<0&&(t.push(n),i=t.length-1):r&(u|e)&&(o=!0),i<0)||(t[i]=n,this.callback(this.manager,r,{pointers:t,changedPointers:[n],pointerType:s,srcEvent:n}),o&&t.splice(i,1))}});var yf={touchstart:f,touchmove:nt,touchend:u,touchcancel:e},pf="touchstart",wf="touchstart touchmove touchend touchcancel";o(iu,s,{handler:function(n){var i=yf[n.type],t;(i===f&&(this.started=!0),this.started)&&(t=bf.call(this,n,i),i&(u|e)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:ot,srcEvent:n}))}});ru={touchstart:f,touchmove:nt,touchend:u,touchcancel:e};uu="touchstart touchmove touchend touchcancel";o(ri,s,{handler:function(n){var i=ru[n.type],t=kf.call(this,n,i);t&&this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:ot,srcEvent:n})}});fu=2500;bi=25;o(ki,s,{handler:function(n,t,i){var u=i.pointerType==ot,r=i.pointerType==yi;if(!r||!i.sourceCapabilities||!i.sourceCapabilities.firesTouchEvents){if(u)df.call(this,t,i);else if(r&&gf.call(this,i))return;this.callback(n,t,i)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var ou=dt(wu.style,"touchAction"),su=ou!==r,hu="compute",cu="auto",di="manipulation",it="none",at="pan-x",vt="pan-y",ui=te();gi.prototype={set:function(n){n==hu&&(n=this.compute());su&&this.manager.element.style&&ui[n]&&(this.manager.element.style[ou]=n);this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return v(this.manager.recognizers,function(t){vi(t.options.enable,[t])&&(n=n.concat(t.getTouchAction()))}),ne(n.join(" "))},preventDefaults:function(n){var i=n.srcEvent,r=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var t=this.actions,u=g(t,it)&&!ui[it],f=g(t,vt)&&!ui[vt],e=g(t,at)&&!ui[at];if(u){var o=n.pointers.length===1,s=n.distance<2,h=n.deltaTime<250;if(o&&s&&h)return}if(!e||!f)return u||f&&r&l||e&&r&tt?this.preventSrc(i):void 0},preventSrc:function(n){this.manager.session.prevented=!0;n.preventDefault()}};var fi=1,h=2,et=4,k=8,p=k,yt=16,a=32;w.prototype={defaults:{},set:function(n){return y(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(ut(n,"recognizeWith",this))return this;var t=this.simultaneous;return n=ei(n,this),t[n.id]||(t[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return ut(n,"dropRecognizeWith",this)?this:(n=ei(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(ut(n,"requireFailure",this))return this;var t=this.requireFail;return n=ei(n,this),ft(t,n)===-1&&(t.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(ut(n,"dropRequireFailure",this))return this;n=ei(n,this);var t=ft(this.requireFail,n);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){function r(i){t.manager.emit(i,n)}var t=this,i=this.state;i<k&&r(t.options.event+lu(i));r(t.options.event);n.additionalEvent&&r(n.additionalEvent);i>=k&&r(t.options.event+lu(i))},tryEmit:function(n){if(this.canEmit())return this.emit(n);this.state=a},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(a|fi)))return!1;n++}return!0},recognize:function(n){var t=y({},n);if(!vi(this.options.enable,[this,t])){this.reset();this.state=a;return}this.state&(p|yt|a)&&(this.state=fi);this.state=this.process(t);this.state&(h|et|k|yt)&&this.tryEmit(t)},process:function(){},getTouchAction:function(){},reset:function(){}};o(c,w,{defaults:{pointers:1},attrTest:function(n){var t=this.options.pointers;return t===0||n.pointers.length===t},process:function(n){var t=this.state,i=n.eventType,r=t&(h|et),f=this.attrTest(n);return r&&(i&e||!f)?t|yt:r||f?i&u?t|k:(t&h)?t|et:h:a}});o(oi,c,{defaults:{event:"pan",threshold:10,pointers:1,direction:pr},getTouchAction:function(){var t=this.options.direction,n=[];return t&l&&n.push(vt),t&tt&&n.push(at),n},directionTest:function(n){var i=this.options,r=!0,u=n.distance,t=n.direction,f=n.deltaX,e=n.deltaY;return t&i.direction||(i.direction&l?(t=f===0?gt:f<0?st:ht,r=f!=this.pX,u=Math.abs(n.deltaX)):(t=e===0?gt:e<0?ct:lt,r=e!=this.pY,u=Math.abs(n.deltaY))),n.direction=t,r&&u>i.threshold&&t&i.direction},attrTest:function(n){return c.prototype.attrTest.call(this,n)&&(this.state&h||!(this.state&h)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX;this.pY=n.deltaY;var t=au(n.direction);t&&(n.additionalEvent=this.options.event+t);this._super.emit.call(this,n)}});o(nr,c,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[it]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&h)},emit:function(n){if(n.scale!==1){var t=n.scale<1?"in":"out";n.additionalEvent=this.options.event+t}this._super.emit.call(this,n)}});o(tr,w,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[cu]},process:function(n){var t=this.options,i=n.pointers.length===t.pointers,r=n.distance<t.threshold,o=n.deltaTime>t.time;if(this._input=n,!r||!i||n.eventType&(u|e)&&!o)this.reset();else if(n.eventType&f)this.reset(),this._timer=ci(function(){this.state=p;this.tryEmit()},t.time,this);else if(n.eventType&u)return p;return a},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===p&&(n&&n.eventType&u?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=hi(),this.manager.emit(this.options.event,this._input)))}});o(ir,c,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[it]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&h)}});o(rr,c,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:l|tt,pointers:1},getTouchAction:function(){return oi.prototype.getTouchAction.call(this)},attrTest:function(n){var t=this.options.direction,i;return t&(l|tt)?i=n.overallVelocity:t&l?i=n.overallVelocityX:t&tt&&(i=n.overallVelocityY),this._super.attrTest.call(this,n)&&t&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers==this.options.pointers&&d(i)>this.options.velocity&&n.eventType&u},emit:function(n){var t=au(n.offsetDirection);t&&this.manager.emit(this.options.event+t,n);this.manager.emit(this.options.event,n)}});o(si,w,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[di]},process:function(n){var t=this.options,o=n.pointers.length===t.pointers,s=n.distance<t.threshold,c=n.deltaTime<t.time,i,r,e;if(this.reset(),n.eventType&f&&this.count===0)return this.failTimeout();if(s&&c&&o){if(n.eventType!=u)return this.failTimeout();if(i=this.pTime?n.timeStamp-this.pTime<t.interval:!0,r=!this.pCenter||ti(this.pCenter,n.center)<t.posThreshold,this.pTime=n.timeStamp,this.pCenter=n.center,r&&i?this.count+=1:this.count=1,this._input=n,e=this.count%t.taps,e===0)return this.hasRequireFailures()?(this._timer=ci(function(){this.state=p;this.tryEmit()},t.interval,this),h):p}return a},failTimeout:function(){return this._timer=ci(function(){this.state=a},this.options.interval,this),a},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==p&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});b.VERSION="2.0.8";b.defaults={domEvents:!1,touchAction:hu,enable:!0,inputTarget:null,inputClass:null,preset:[[ir,{enable:!1}],[nr,{enable:!1},["rotate"]],[rr,{direction:l}],[oi,{direction:l},["swipe"]],[si],[si,{event:"doubletap",taps:2},["tap"]],[tr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};vu=1;ur=2;fr.prototype={set:function(n){return y(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?ur:vu},recognize:function(n){var r=this.session,i,f,t,u;if(!r.stopped)for(this.touchAction.preventDefaults(n),f=this.recognizers,t=r.curRecognizer,(!t||t&&t.state&p)&&(t=r.curRecognizer=null),u=0;u<f.length;)i=f[u],r.stopped!==ur&&(!t||i==t||i.canRecognizeWith(t))?i.recognize(n):i.reset(),!t&&i.state&(h|et|k)&&(t=r.curRecognizer=i),u++},get:function(n){var i,t;if(n instanceof w)return n;for(i=this.recognizers,t=0;t<i.length;t++)if(i[t].options.event==n)return i[t];return null},add:function(n){if(ut(n,"add",this))return this;var t=this.get(n.options.event);return t&&this.remove(t),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(ut(n,"remove",this))return this;if(n=this.get(n),n){var t=this.recognizers,i=ft(t,n);i!==-1&&(t.splice(i,1),this.touchAction.update())}return this},on:function(n,t){if(n!==r&&t!==r){var i=this.handlers;return v(bt(n),function(n){i[n]=i[n]||[];i[n].push(t)}),this}},off:function(n,t){if(n!==r){var i=this.handlers;return v(bt(n),function(n){t?i[n]&&i[n].splice(ft(i[n],t),1):delete i[n]}),this}},emit:function(n,t){var i,r;if(this.options.domEvents&&ie(n,t),i=this.handlers[n]&&this.handlers[n].slice(),i&&i.length)for(t.type=n,t.preventDefault=function(){t.srcEvent.preventDefault()},r=0;r<i.length;)i[r](t),r++},destroy:function(){this.element&&yu(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};y(b,{INPUT_START:f,INPUT_MOVE:nt,INPUT_END:u,INPUT_CANCEL:e,STATE_POSSIBLE:fi,STATE_BEGAN:h,STATE_CHANGED:et,STATE_ENDED:k,STATE_RECOGNIZED:p,STATE_CANCELLED:yt,STATE_FAILED:a,DIRECTION_NONE:gt,DIRECTION_LEFT:st,DIRECTION_RIGHT:ht,DIRECTION_UP:ct,DIRECTION_DOWN:lt,DIRECTION_HORIZONTAL:l,DIRECTION_VERTICAL:tt,DIRECTION_ALL:pr,Manager:fr,Input:s,TouchAction:gi,TouchInput:ri,MouseInput:ii,PointerEventInput:wi,TouchMouseInput:ki,SingleTouchInput:iu,Recognizer:w,AttrRecognizer:c,Tap:si,Pan:oi,Swipe:rr,Pinch:nr,Rotate:ir,Press:tr,on:pt,off:wt,each:v,merge:sr,extend:li,assign:y,inherit:o,bindFn:ai,prefixed:dt});pu=typeof n!="undefined"?n:typeof self!="undefined"?self:{};pu.Hammer=b;typeof define=="function"&&define.amd?define(function(){return b}):typeof module!="undefined"&&module.exports?module.exports=b:n[i]=b})(window,document,"Hammer");
//# sourceMappingURL=core.min.js.map
